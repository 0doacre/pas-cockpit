(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Sh(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ve={},yo=[],gr=()=>{},$g=()=>!1,Ol=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ch=e=>e.startsWith("onUpdate:"),zn=Object.assign,Th=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},G_=Object.prototype.hasOwnProperty,Be=(e,t)=>G_.call(e,t),pe=Array.isArray,xo=e=>Ml(e)==="[object Map]",Xg=e=>Ml(e)==="[object Set]",ye=e=>typeof e=="function",yn=e=>typeof e=="string",Gr=e=>typeof e=="symbol",Xe=e=>e!==null&&typeof e=="object",Kg=e=>(Xe(e)||ye(e))&&ye(e.then)&&ye(e.catch),Jg=Object.prototype.toString,Ml=e=>Jg.call(e),V_=e=>Ml(e).slice(8,-1),Qg=e=>Ml(e)==="[object Object]",Rl=e=>yn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Aa=Sh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fl=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Z_=/-\w/g,gs=Fl(e=>e.replace(Z_,t=>t.slice(1).toUpperCase())),W_=/\B([A-Z])/g,ms=Fl(e=>e.replace(W_,"-$1").toLowerCase()),tp=Fl(e=>e.charAt(0).toUpperCase()+e.slice(1)),pc=Fl(e=>e?`on${tp(e)}`:""),ls=(e,t)=>!Object.is(e,t),Gu=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ep=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Ih=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let vf;const Bl=()=>vf||(vf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function js(e){if(pe(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=yn(i)?X_(i):js(i);if(o)for(const u in o)t[u]=o[u]}return t}else if(yn(e)||Xe(e))return e}const Y_=/;(?![^(]*\))/g,j_=/:([^]+)/,$_=/\/\*[^]*?\*\//g;function X_(e){const t={};return e.replace($_,"").split(Y_).forEach(n=>{if(n){const i=n.split(j_);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Xn(e){let t="";if(yn(e))t=e;else if(pe(e))for(let n=0;n<e.length;n++){const i=Xn(e[n]);i&&(t+=i+" ")}else if(Xe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const K_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J_=Sh(K_);function np(e){return!!e||e===""}const ip=e=>!!(e&&e.__v_isRef===!0),ue=e=>yn(e)?e:e==null?"":pe(e)||Xe(e)&&(e.toString===Jg||!ye(e.toString))?ip(e)?ue(e.value):JSON.stringify(e,rp,2):String(e),rp=(e,t)=>ip(t)?rp(e,t.value):xo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,o],u)=>(n[mc(i,u)+" =>"]=o,n),{})}:Xg(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mc(n))}:Gr(t)?mc(t):Xe(t)&&!pe(t)&&!Qg(t)?String(t):t,mc=(e,t="")=>{var n;return Gr(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Vn;class sp{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Vn,!t&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Vn;try{return Vn=this,t()}finally{Vn=n}}}on(){++this._on===1&&(this.prevScope=Vn,Vn=this)}off(){this._on>0&&--this._on===0&&(Vn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function op(e){return new sp(e)}function ap(){return Vn}function Q_(e,t=!1){Vn&&Vn.cleanups.push(e)}let We;const _c=new WeakSet;class up{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Vn&&Vn.active&&Vn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_c.has(this)&&(_c.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,yf(this),hp(this);const t=We,n=Yi;We=this,Yi=!0;try{return this.fn()}finally{fp(this),We=t,Yi=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Dh(t);this.deps=this.depsTail=void 0,yf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$c(this)&&this.run()}get dirty(){return $c(this)}}let lp=0,La,Da;function cp(e,t=!1){if(e.flags|=8,t){e.next=Da,Da=e;return}e.next=La,La=e}function Ah(){lp++}function Lh(){if(--lp>0)return;if(Da){let t=Da;for(Da=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;La;){let t=La;for(La=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function hp(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function fp(e){let t,n=e.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),Dh(i),tv(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}e.deps=t,e.depsTail=n}function $c(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(dp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function dp(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===qa)||(e.globalVersion=qa,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!$c(e))))return;e.flags|=2;const t=e.dep,n=We,i=Yi;We=e,Yi=!0;try{hp(e);const o=e.fn(e._value);(t.version===0||ls(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{We=n,Yi=i,fp(e),e.flags&=-3}}function Dh(e,t=!1){const{dep:n,prevSub:i,nextSub:o}=e;if(i&&(i.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let u=n.computed.deps;u;u=u.nextDep)Dh(u,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function tv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Yi=!0;const gp=[];function Br(){gp.push(Yi),Yi=!1}function zr(){const e=gp.pop();Yi=e===void 0?!0:e}function yf(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=We;We=void 0;try{t()}finally{We=n}}}let qa=0;class ev{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!We||!Yi||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new ev(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,pp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=i)}return n}trigger(t){this.version++,qa++,this.notify(t)}notify(t){Ah();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Lh()}}}function pp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)pp(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const nl=new WeakMap,Hs=Symbol(""),Xc=Symbol(""),Ua=Symbol("");function Wn(e,t,n){if(Yi&&We){let i=nl.get(e);i||nl.set(e,i=new Map);let o=i.get(n);o||(i.set(n,o=new Nh),o.map=i,o.key=n),o.track()}}function Mr(e,t,n,i,o,u){const h=nl.get(e);if(!h){qa++;return}const f=p=>{p&&p.trigger()};if(Ah(),t==="clear")h.forEach(f);else{const p=pe(e),_=p&&Rl(n);if(p&&n==="length"){const v=Number(i);h.forEach((x,S)=>{(S==="length"||S===Ua||!Gr(S)&&S>=v)&&f(x)})}else switch((n!==void 0||h.has(void 0))&&f(h.get(n)),_&&f(h.get(Ua)),t){case"add":p?_&&f(h.get("length")):(f(h.get(Hs)),xo(e)&&f(h.get(Xc)));break;case"delete":p||(f(h.get(Hs)),xo(e)&&f(h.get(Xc)));break;case"set":xo(e)&&f(h.get(Hs));break}}Lh()}function nv(e,t){const n=nl.get(e);return n&&n.get(t)}function uo(e){const t=ke(e);return t===e?t:(Wn(t,"iterate",Ua),_i(e)?t:t.map(ji))}function zl(e){return Wn(e=ke(e),"iterate",Ua),e}function ns(e,t){return qr(e)?To(Fr(e)?ji(t):t):ji(t)}const iv={__proto__:null,[Symbol.iterator](){return vc(this,Symbol.iterator,e=>ns(this,e))},concat(...e){return uo(this).concat(...e.map(t=>pe(t)?uo(t):t))},entries(){return vc(this,"entries",e=>(e[1]=ns(this,e[1]),e))},every(e,t){return Tr(this,"every",e,t,void 0,arguments)},filter(e,t){return Tr(this,"filter",e,t,n=>n.map(i=>ns(this,i)),arguments)},find(e,t){return Tr(this,"find",e,t,n=>ns(this,n),arguments)},findIndex(e,t){return Tr(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Tr(this,"findLast",e,t,n=>ns(this,n),arguments)},findLastIndex(e,t){return Tr(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Tr(this,"forEach",e,t,void 0,arguments)},includes(...e){return yc(this,"includes",e)},indexOf(...e){return yc(this,"indexOf",e)},join(e){return uo(this).join(e)},lastIndexOf(...e){return yc(this,"lastIndexOf",e)},map(e,t){return Tr(this,"map",e,t,void 0,arguments)},pop(){return ra(this,"pop")},push(...e){return ra(this,"push",e)},reduce(e,...t){return xf(this,"reduce",e,t)},reduceRight(e,...t){return xf(this,"reduceRight",e,t)},shift(){return ra(this,"shift")},some(e,t){return Tr(this,"some",e,t,void 0,arguments)},splice(...e){return ra(this,"splice",e)},toReversed(){return uo(this).toReversed()},toSorted(e){return uo(this).toSorted(e)},toSpliced(...e){return uo(this).toSpliced(...e)},unshift(...e){return ra(this,"unshift",e)},values(){return vc(this,"values",e=>ns(this,e))}};function vc(e,t,n){const i=zl(e),o=i[t]();return i!==e&&!_i(e)&&(o._next=o.next,o.next=()=>{const u=o._next();return u.done||(u.value=n(u.value)),u}),o}const rv=Array.prototype;function Tr(e,t,n,i,o,u){const h=zl(e),f=h!==e&&!_i(e),p=h[t];if(p!==rv[t]){const x=p.apply(e,u);return f?ji(x):x}let _=n;h!==e&&(f?_=function(x,S){return n.call(this,ns(e,x),S,e)}:n.length>2&&(_=function(x,S){return n.call(this,x,S,e)}));const v=p.call(h,_,i);return f&&o?o(v):v}function xf(e,t,n,i){const o=zl(e);let u=n;return o!==e&&(_i(e)?n.length>3&&(u=function(h,f,p){return n.call(this,h,f,p,e)}):u=function(h,f,p){return n.call(this,h,ns(e,f),p,e)}),o[t](u,...i)}function yc(e,t,n){const i=ke(e);Wn(i,"iterate",Ua);const o=i[t](...n);return(o===-1||o===!1)&&Mo(n[0])?(n[0]=ke(n[0]),i[t](...n)):o}function ra(e,t,n=[]){Br(),Ah();const i=ke(e)[t].apply(e,n);return Lh(),zr(),i}const sv=Sh("__proto__,__v_isRef,__isVue"),mp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gr));function ov(e){Gr(e)||(e=String(e));const t=ke(this);return Wn(t,"has",e),t.hasOwnProperty(e)}class _p{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,u=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return u;if(n==="__v_raw")return i===(o?u?mv:bp:u?xp:yp).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const h=pe(t);if(!o){let p;if(h&&(p=iv[n]))return p;if(n==="hasOwnProperty")return ov}const f=Reflect.get(t,n,un(t)?t:i);if((Gr(n)?mp.has(n):sv(n))||(o||Wn(t,"get",n),u))return f;if(un(f)){const p=h&&Rl(n)?f:f.value;return o&&Xe(p)?Jc(p):p}return Xe(f)?o?Jc(f):ql(f):f}}class vp extends _p{constructor(t=!1){super(!1,t)}set(t,n,i,o){let u=t[n];const h=pe(t)&&Rl(n);if(!this._isShallow){const _=qr(u);if(!_i(i)&&!qr(i)&&(u=ke(u),i=ke(i)),!h&&un(u)&&!un(i))return _||(u.value=i),!0}const f=h?Number(n)<t.length:Be(t,n),p=Reflect.set(t,n,i,un(t)?t:o);return t===ke(o)&&(f?ls(i,u)&&Mr(t,"set",n,i):Mr(t,"add",n,i)),p}deleteProperty(t,n){const i=Be(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&i&&Mr(t,"delete",n,void 0),o}has(t,n){const i=Reflect.has(t,n);return(!Gr(n)||!mp.has(n))&&Wn(t,"has",n),i}ownKeys(t){return Wn(t,"iterate",pe(t)?"length":Hs),Reflect.ownKeys(t)}}class av extends _p{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const uv=new vp,lv=new av,cv=new vp(!0);const Kc=e=>e,vu=e=>Reflect.getPrototypeOf(e);function hv(e,t,n){return function(...i){const o=this.__v_raw,u=ke(o),h=xo(u),f=e==="entries"||e===Symbol.iterator&&h,p=e==="keys"&&h,_=o[e](...i),v=n?Kc:t?To:ji;return!t&&Wn(u,"iterate",p?Xc:Hs),zn(Object.create(_),{next(){const{value:x,done:S}=_.next();return S?{value:x,done:S}:{value:f?[v(x[0]),v(x[1])]:v(x),done:S}}})}}function yu(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function fv(e,t){const n={get(o){const u=this.__v_raw,h=ke(u),f=ke(o);e||(ls(o,f)&&Wn(h,"get",o),Wn(h,"get",f));const{has:p}=vu(h),_=t?Kc:e?To:ji;if(p.call(h,o))return _(u.get(o));if(p.call(h,f))return _(u.get(f));u!==h&&u.get(o)},get size(){const o=this.__v_raw;return!e&&Wn(ke(o),"iterate",Hs),o.size},has(o){const u=this.__v_raw,h=ke(u),f=ke(o);return e||(ls(o,f)&&Wn(h,"has",o),Wn(h,"has",f)),o===f?u.has(o):u.has(o)||u.has(f)},forEach(o,u){const h=this,f=h.__v_raw,p=ke(f),_=t?Kc:e?To:ji;return!e&&Wn(p,"iterate",Hs),f.forEach((v,x)=>o.call(u,_(v),_(x),h))}};return zn(n,e?{add:yu("add"),set:yu("set"),delete:yu("delete"),clear:yu("clear")}:{add(o){!t&&!_i(o)&&!qr(o)&&(o=ke(o));const u=ke(this);return vu(u).has.call(u,o)||(u.add(o),Mr(u,"add",o,o)),this},set(o,u){!t&&!_i(u)&&!qr(u)&&(u=ke(u));const h=ke(this),{has:f,get:p}=vu(h);let _=f.call(h,o);_||(o=ke(o),_=f.call(h,o));const v=p.call(h,o);return h.set(o,u),_?ls(u,v)&&Mr(h,"set",o,u):Mr(h,"add",o,u),this},delete(o){const u=ke(this),{has:h,get:f}=vu(u);let p=h.call(u,o);p||(o=ke(o),p=h.call(u,o)),f&&f.call(u,o);const _=u.delete(o);return p&&Mr(u,"delete",o,void 0),_},clear(){const o=ke(this),u=o.size!==0,h=o.clear();return u&&Mr(o,"clear",void 0,void 0),h}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=hv(o,e,t)}),n}function Ph(e,t){const n=fv(e,t);return(i,o,u)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(Be(n,o)&&o in i?n:i,o,u)}const dv={get:Ph(!1,!1)},gv={get:Ph(!1,!0)},pv={get:Ph(!0,!1)};const yp=new WeakMap,xp=new WeakMap,bp=new WeakMap,mv=new WeakMap;function _v(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vv(e){return e.__v_skip||!Object.isExtensible(e)?0:_v(V_(e))}function ql(e){return qr(e)?e:Oh(e,!1,uv,dv,yp)}function yv(e){return Oh(e,!1,cv,gv,xp)}function Jc(e){return Oh(e,!0,lv,pv,bp)}function Oh(e,t,n,i,o){if(!Xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=vv(e);if(u===0)return e;const h=o.get(e);if(h)return h;const f=new Proxy(e,u===2?i:n);return o.set(e,f),f}function Fr(e){return qr(e)?Fr(e.__v_raw):!!(e&&e.__v_isReactive)}function qr(e){return!!(e&&e.__v_isReadonly)}function _i(e){return!!(e&&e.__v_isShallow)}function Mo(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function Mh(e){return!Be(e,"__v_skip")&&Object.isExtensible(e)&&ep(e,"__v_skip",!0),e}const ji=e=>Xe(e)?ql(e):e,To=e=>Xe(e)?Jc(e):e;function un(e){return e?e.__v_isRef===!0:!1}function pn(e){return Ep(e,!1)}function wp(e){return Ep(e,!0)}function Ep(e,t){return un(e)?e:new xv(e,t)}class xv{constructor(t,n){this.dep=new Nh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ke(t),this._value=n?t:ji(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||_i(t)||qr(t);t=i?t:ke(t),ls(t,n)&&(this._rawValue=t,this._value=i?t:ji(t),this.dep.trigger())}}function ge(e){return un(e)?e.value:e}const bv={get:(e,t,n)=>t==="__v_raw"?e:ge(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const o=e[t];return un(o)&&!un(n)?(o.value=n,!0):Reflect.set(e,t,n,i)}};function kp(e){return Fr(e)?e:new Proxy(e,bv)}function wv(e){const t=pe(e)?new Array(e.length):{};for(const n in e)t[n]=kv(e,n);return t}class Ev{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0,this._raw=ke(t);let o=!0,u=t;if(!pe(t)||!Rl(String(n)))do o=!Mo(u)||_i(u);while(o&&(u=u.__v_raw));this._shallow=o}get value(){let t=this._object[this._key];return this._shallow&&(t=ge(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&un(this._raw[this._key])){const n=this._object[this._key];if(un(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return nv(this._raw,this._key)}}function kv(e,t,n){return new Ev(e,t,n)}class Sv{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Nh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return cp(this,!0),!0}get value(){const t=this.dep.track();return dp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Cv(e,t,n=!1){let i,o;return ye(e)?i=e:(i=e.get,o=e.set),new Sv(i,o,n)}const xu={},il=new WeakMap;let zs;function Tv(e,t=!1,n=zs){if(n){let i=il.get(n);i||il.set(n,i=[]),i.push(e)}}function Iv(e,t,n=Ve){const{immediate:i,deep:o,once:u,scheduler:h,augmentJob:f,call:p}=n,_=ct=>o?ct:_i(ct)||o===!1||o===0?Rr(ct,1):Rr(ct);let v,x,S,C,P=!1,N=!1;if(un(e)?(x=()=>e.value,P=_i(e)):Fr(e)?(x=()=>_(e),P=!0):pe(e)?(N=!0,P=e.some(ct=>Fr(ct)||_i(ct)),x=()=>e.map(ct=>{if(un(ct))return ct.value;if(Fr(ct))return _(ct);if(ye(ct))return p?p(ct,2):ct()})):ye(e)?t?x=p?()=>p(e,2):e:x=()=>{if(S){Br();try{S()}finally{zr()}}const ct=zs;zs=v;try{return p?p(e,3,[C]):e(C)}finally{zs=ct}}:x=gr,t&&o){const ct=x,tt=o===!0?1/0:o;x=()=>Rr(ct(),tt)}const O=ap(),j=()=>{v.stop(),O&&O.active&&Th(O.effects,v)};if(u&&t){const ct=t;t=(...tt)=>{ct(...tt),j()}}let U=N?new Array(e.length).fill(xu):xu;const nt=ct=>{if(!(!(v.flags&1)||!v.dirty&&!ct))if(t){const tt=v.run();if(o||P||(N?tt.some((pt,st)=>ls(pt,U[st])):ls(tt,U))){S&&S();const pt=zs;zs=v;try{const st=[tt,U===xu?void 0:N&&U[0]===xu?[]:U,C];U=tt,p?p(t,3,st):t(...st)}finally{zs=pt}}}else v.run()};return f&&f(nt),v=new up(x),v.scheduler=h?()=>h(nt,!1):nt,C=ct=>Tv(ct,!1,v),S=v.onStop=()=>{const ct=il.get(v);if(ct){if(p)p(ct,4);else for(const tt of ct)tt();il.delete(v)}},t?i?nt(!0):U=v.run():h?h(nt.bind(null,!0),!0):v.run(),j.pause=v.pause.bind(v),j.resume=v.resume.bind(v),j.stop=j,j}function Rr(e,t=1/0,n){if(t<=0||!Xe(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,un(e))Rr(e.value,t,n);else if(pe(e))for(let i=0;i<e.length;i++)Rr(e[i],t,n);else if(Xg(e)||xo(e))e.forEach(i=>{Rr(i,t,n)});else if(Qg(e)){for(const i in e)Rr(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Rr(e[i],t,n)}return e}function tu(e,t,n,i){try{return i?e(...i):e()}catch(o){Ul(o,t,n)}}function pr(e,t,n,i){if(ye(e)){const o=tu(e,t,n,i);return o&&Kg(o)&&o.catch(u=>{Ul(u,t,n)}),o}if(pe(e)){const o=[];for(let u=0;u<e.length;u++)o.push(pr(e[u],t,n,i));return o}}function Ul(e,t,n,i=!0){const o=t?t.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:h}=t&&t.appContext.config||Ve;if(t){let f=t.parent;const p=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const v=f.ec;if(v){for(let x=0;x<v.length;x++)if(v[x](e,p,_)===!1)return}f=f.parent}if(u){Br(),tu(u,null,10,[e,p,_]),zr();return}}Av(e,n,o,i,h)}function Av(e,t,n,i=!0,o=!1){if(o)throw e;console.error(e)}const ii=[];let ur=-1;const bo=[];let is=null,go=0;const Sp=Promise.resolve();let rl=null;function Io(e){const t=rl||Sp;return e?t.then(this?e.bind(this):e):t}function Lv(e){let t=ur+1,n=ii.length;for(;t<n;){const i=t+n>>>1,o=ii[i],u=Ha(o);u<e||u===e&&o.flags&2?t=i+1:n=i}return t}function Rh(e){if(!(e.flags&1)){const t=Ha(e),n=ii[ii.length-1];!n||!(e.flags&2)&&t>=Ha(n)?ii.push(e):ii.splice(Lv(t),0,e),e.flags|=1,Cp()}}function Cp(){rl||(rl=Sp.then(Ip))}function Dv(e){pe(e)?bo.push(...e):is&&e.id===-1?is.splice(go+1,0,e):e.flags&1||(bo.push(e),e.flags|=1),Cp()}function bf(e,t,n=ur+1){for(;n<ii.length;n++){const i=ii[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;ii.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Tp(e){if(bo.length){const t=[...new Set(bo)].sort((n,i)=>Ha(n)-Ha(i));if(bo.length=0,is){is.push(...t);return}for(is=t,go=0;go<is.length;go++){const n=is[go];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}is=null,go=0}}const Ha=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ip(e){try{for(ur=0;ur<ii.length;ur++){const t=ii[ur];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),tu(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ur<ii.length;ur++){const t=ii[ur];t&&(t.flags&=-2)}ur=-1,ii.length=0,Tp(),rl=null,(ii.length||bo.length)&&Ip()}}let Yn=null,Ap=null;function sl(e){const t=Yn;return Yn=e,Ap=e&&e.type.__scopeId||null,t}function po(e,t=Yn,n){if(!t||e._n)return e;const i=(...o)=>{i._d&&ll(-1);const u=sl(t);let h;try{h=e(...o)}finally{sl(u),i._d&&ll(1)}return h};return i._n=!0,i._c=!0,i._d=!0,i}function ol(e,t){if(Yn===null)return e;const n=Yl(Yn),i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[u,h,f,p=Ve]=t[o];u&&(ye(u)&&(u={mounted:u,updated:u}),u.deep&&Rr(h),i.push({dir:u,instance:n,value:h,oldValue:void 0,arg:f,modifiers:p}))}return e}function Ds(e,t,n,i){const o=e.dirs,u=t&&t.dirs;for(let h=0;h<o.length;h++){const f=o[h];u&&(f.oldValue=u[h].value);let p=f.dir[i];p&&(Br(),pr(p,n,8,[e.el,f,e,t]),zr())}}function Nv(e,t){if(ri){let n=ri.provides;const i=ri.parent&&ri.parent.provides;i===n&&(n=ri.provides=Object.create(i)),n[e]=t}}function Na(e,t,n=!1){const i=tm();if(i||Gs){let o=Gs?Gs._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&ye(t)?t.call(i&&i.proxy):t}}function Pv(){return!!(tm()||Gs)}const Ov=Symbol.for("v-scx"),Mv=()=>Na(Ov);function Oi(e,t,n){return Lp(e,t,n)}function Lp(e,t,n=Ve){const{immediate:i,deep:o,flush:u,once:h}=n,f=zn({},n),p=t&&i||!t&&u!=="post";let _;if(Wa){if(u==="sync"){const C=Mv();_=C.__watcherHandles||(C.__watcherHandles=[])}else if(!p){const C=()=>{};return C.stop=gr,C.resume=gr,C.pause=gr,C}}const v=ri;f.call=(C,P,N)=>pr(C,v,P,N);let x=!1;u==="post"?f.scheduler=C=>{gi(C,v&&v.suspense)}:u!=="sync"&&(x=!0,f.scheduler=(C,P)=>{P?C():Rh(C)}),f.augmentJob=C=>{t&&(C.flags|=4),x&&(C.flags|=2,v&&(C.id=v.uid,C.i=v))};const S=Iv(e,t,f);return Wa&&(_?_.push(S):p&&S()),S}function Rv(e,t,n){const i=this.proxy,o=yn(e)?e.includes(".")?Dp(i,e):()=>i[e]:e.bind(i,i);let u;ye(t)?u=t:(u=t.handler,n=t);const h=eu(this),f=Lp(o,u.bind(i),n);return h(),f}function Dp(e,t){const n=t.split(".");return()=>{let i=e;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}const Fv=Symbol("_vte"),Bv=e=>e.__isTeleport,zv=Symbol("_leaveCb");function Fh(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Fh(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function $i(e,t){return ye(e)?zn({name:e.name},t,{setup:e}):e}function Np(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const al=new WeakMap;function Pa(e,t,n,i,o=!1){if(pe(e)){e.forEach((P,N)=>Pa(P,t&&(pe(t)?t[N]:t),n,i,o));return}if(wo(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Pa(e,t,n,i.component.subTree);return}const u=i.shapeFlag&4?Yl(i.component):i.el,h=o?null:u,{i:f,r:p}=e,_=t&&t.r,v=f.refs===Ve?f.refs={}:f.refs,x=f.setupState,S=ke(x),C=x===Ve?$g:P=>Be(S,P);if(_!=null&&_!==p){if(wf(t),yn(_))v[_]=null,C(_)&&(x[_]=null);else if(un(_)){_.value=null;const P=t;P.k&&(v[P.k]=null)}}if(ye(p))tu(p,f,12,[h,v]);else{const P=yn(p),N=un(p);if(P||N){const O=()=>{if(e.f){const j=P?C(p)?x[p]:v[p]:p.value;if(o)pe(j)&&Th(j,u);else if(pe(j))j.includes(u)||j.push(u);else if(P)v[p]=[u],C(p)&&(x[p]=v[p]);else{const U=[u];p.value=U,e.k&&(v[e.k]=U)}}else P?(v[p]=h,C(p)&&(x[p]=h)):N&&(p.value=h,e.k&&(v[e.k]=h))};if(h){const j=()=>{O(),al.delete(e)};j.id=-1,al.set(e,j),gi(j,n)}else wf(e),O()}}}function wf(e){const t=al.get(e);t&&(t.flags|=8,al.delete(e))}Bl().requestIdleCallback;Bl().cancelIdleCallback;const wo=e=>!!e.type.__asyncLoader,Pp=e=>e.type.__isKeepAlive;function qv(e,t){Op(e,"a",t)}function Uv(e,t){Op(e,"da",t)}function Op(e,t,n=ri){const i=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Hl(t,i,n),n){let o=n.parent;for(;o&&o.parent;)Pp(o.parent.vnode)&&Hv(i,t,n,o),o=o.parent}}function Hv(e,t,n,i){const o=Hl(t,e,i,!0);Vl(()=>{Th(i[t],o)},n)}function Hl(e,t,n=ri,i=!1){if(n){const o=n[e]||(n[e]=[]),u=t.__weh||(t.__weh=(...h)=>{Br();const f=eu(n),p=pr(t,n,e,h);return f(),zr(),p});return i?o.unshift(u):o.push(u),u}}const Vr=e=>(t,n=ri)=>{(!Wa||e==="sp")&&Hl(e,(...i)=>t(...i),n)},Gv=Vr("bm"),Gl=Vr("m"),Vv=Vr("bu"),Zv=Vr("u"),Wv=Vr("bum"),Vl=Vr("um"),Yv=Vr("sp"),jv=Vr("rtg"),$v=Vr("rtc");function Xv(e,t=ri){Hl("ec",e,t)}const Kv=Symbol.for("v-ndc");function cs(e,t,n,i){let o;const u=n,h=pe(e);if(h||yn(e)){const f=h&&Fr(e);let p=!1,_=!1;f&&(p=!_i(e),_=qr(e),e=zl(e)),o=new Array(e.length);for(let v=0,x=e.length;v<x;v++)o[v]=t(p?_?To(ji(e[v])):ji(e[v]):e[v],v,void 0,u)}else if(typeof e=="number"){o=new Array(e);for(let f=0;f<e;f++)o[f]=t(f+1,f,void 0,u)}else if(Xe(e))if(e[Symbol.iterator])o=Array.from(e,(f,p)=>t(f,p,void 0,u));else{const f=Object.keys(e);o=new Array(f.length);for(let p=0,_=f.length;p<_;p++){const v=f[p];o[p]=t(e[v],v,p,u)}}else o=[];return o}function Jv(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(pe(i))for(let o=0;o<i.length;o++)e[i[o].name]=i[o].fn;else i&&(e[i.name]=i.key?(...o)=>{const u=i.fn(...o);return u&&(u.key=i.key),u}:i.fn)}return e}function sa(e,t,n={},i,o){if(Yn.ce||Yn.parent&&wo(Yn.parent)&&Yn.parent.ce){const _=Object.keys(n).length>0;return t!=="default"&&(n.name=t),le(),Va(mn,null,[an("slot",n,i)],_?-2:64)}let u=e[t];u&&u._c&&(u._d=!1),le();const h=u&&Mp(u(n)),f=n.key||h&&h.key,p=Va(mn,{key:(f&&!Gr(f)?f:`_${t}`)+(!h&&i?"_fb":"")},h||[],h&&e._===1?64:-2);return p.scopeId&&(p.slotScopeIds=[p.scopeId+"-s"]),u&&u._c&&(u._d=!0),p}function Mp(e){return e.some(t=>Za(t)?!(t.type===Ur||t.type===mn&&!Mp(t.children)):!0)?e:null}const Qc=e=>e?em(e)?Yl(e):Qc(e.parent):null,Oa=zn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qc(e.parent),$root:e=>Qc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fp(e),$forceUpdate:e=>e.f||(e.f=()=>{Rh(e.update)}),$nextTick:e=>e.n||(e.n=Io.bind(e.proxy)),$watch:e=>Rv.bind(e)}),xc=(e,t)=>e!==Ve&&!e.__isScriptSetup&&Be(e,t),Qv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:u,accessCache:h,type:f,appContext:p}=e;if(t[0]!=="$"){const S=h[t];if(S!==void 0)switch(S){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return u[t]}else{if(xc(i,t))return h[t]=1,i[t];if(o!==Ve&&Be(o,t))return h[t]=2,o[t];if(Be(u,t))return h[t]=3,u[t];if(n!==Ve&&Be(n,t))return h[t]=4,n[t];th&&(h[t]=0)}}const _=Oa[t];let v,x;if(_)return t==="$attrs"&&Wn(e.attrs,"get",""),_(e);if((v=f.__cssModules)&&(v=v[t]))return v;if(n!==Ve&&Be(n,t))return h[t]=4,n[t];if(x=p.config.globalProperties,Be(x,t))return x[t]},set({_:e},t,n){const{data:i,setupState:o,ctx:u}=e;return xc(o,t)?(o[t]=n,!0):i!==Ve&&Be(i,t)?(i[t]=n,!0):Be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,props:u,type:h}},f){let p;return!!(n[f]||e!==Ve&&f[0]!=="$"&&Be(e,f)||xc(t,f)||Be(u,f)||Be(i,f)||Be(Oa,f)||Be(o.config.globalProperties,f)||(p=h.__cssModules)&&p[f])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Be(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ef(e){return pe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let th=!0;function ty(e){const t=Fp(e),n=e.proxy,i=e.ctx;th=!1,t.beforeCreate&&kf(t.beforeCreate,e,"bc");const{data:o,computed:u,methods:h,watch:f,provide:p,inject:_,created:v,beforeMount:x,mounted:S,beforeUpdate:C,updated:P,activated:N,deactivated:O,beforeDestroy:j,beforeUnmount:U,destroyed:nt,unmounted:ct,render:tt,renderTracked:pt,renderTriggered:st,errorCaptured:E,serverPrefetch:b,expose:I,inheritAttrs:R,components:M,directives:G,filters:Z}=t;if(_&&ey(_,i,null),h)for(const V in h){const Y=h[V];ye(Y)&&(i[V]=Y.bind(n))}if(o){const V=o.call(n,n);Xe(V)&&(e.data=ql(V))}if(th=!0,u)for(const V in u){const Y=u[V],ut=ye(Y)?Y.bind(n,n):ye(Y.get)?Y.get.bind(n,n):gr,K=!ye(Y)&&ye(Y.set)?Y.set.bind(n):gr,it=Bn({get:ut,set:K});Object.defineProperty(i,V,{enumerable:!0,configurable:!0,get:()=>it.value,set:bt=>it.value=bt})}if(f)for(const V in f)Rp(f[V],i,n,V);if(p){const V=ye(p)?p.call(n):p;Reflect.ownKeys(V).forEach(Y=>{Nv(Y,V[Y])})}v&&kf(v,e,"c");function $(V,Y){pe(Y)?Y.forEach(ut=>V(ut.bind(n))):Y&&V(Y.bind(n))}if($(Gv,x),$(Gl,S),$(Vv,C),$(Zv,P),$(qv,N),$(Uv,O),$(Xv,E),$($v,pt),$(jv,st),$(Wv,U),$(Vl,ct),$(Yv,b),pe(I))if(I.length){const V=e.exposed||(e.exposed={});I.forEach(Y=>{Object.defineProperty(V,Y,{get:()=>n[Y],set:ut=>n[Y]=ut,enumerable:!0})})}else e.exposed||(e.exposed={});tt&&e.render===gr&&(e.render=tt),R!=null&&(e.inheritAttrs=R),M&&(e.components=M),G&&(e.directives=G),b&&Np(e)}function ey(e,t,n=gr){pe(e)&&(e=eh(e));for(const i in e){const o=e[i];let u;Xe(o)?"default"in o?u=Na(o.from||i,o.default,!0):u=Na(o.from||i):u=Na(o),un(u)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:h=>u.value=h}):t[i]=u}}function kf(e,t,n){pr(pe(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Rp(e,t,n,i){let o=i.includes(".")?Dp(n,i):()=>n[i];if(yn(e)){const u=t[e];ye(u)&&Oi(o,u)}else if(ye(e))Oi(o,e.bind(n));else if(Xe(e))if(pe(e))e.forEach(u=>Rp(u,t,n,i));else{const u=ye(e.handler)?e.handler.bind(n):t[e.handler];ye(u)&&Oi(o,u,e)}}function Fp(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:u,config:{optionMergeStrategies:h}}=e.appContext,f=u.get(t);let p;return f?p=f:!o.length&&!n&&!i?p=t:(p={},o.length&&o.forEach(_=>ul(p,_,h,!0)),ul(p,t,h)),Xe(t)&&u.set(t,p),p}function ul(e,t,n,i=!1){const{mixins:o,extends:u}=t;u&&ul(e,u,n,!0),o&&o.forEach(h=>ul(e,h,n,!0));for(const h in t)if(!(i&&h==="expose")){const f=ny[h]||n&&n[h];e[h]=f?f(e[h],t[h]):t[h]}return e}const ny={data:Sf,props:Cf,emits:Cf,methods:ya,computed:ya,beforeCreate:ni,created:ni,beforeMount:ni,mounted:ni,beforeUpdate:ni,updated:ni,beforeDestroy:ni,beforeUnmount:ni,destroyed:ni,unmounted:ni,activated:ni,deactivated:ni,errorCaptured:ni,serverPrefetch:ni,components:ya,directives:ya,watch:ry,provide:Sf,inject:iy};function Sf(e,t){return t?e?function(){return zn(ye(e)?e.call(this,this):e,ye(t)?t.call(this,this):t)}:t:e}function iy(e,t){return ya(eh(e),eh(t))}function eh(e){if(pe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ni(e,t){return e?[...new Set([].concat(e,t))]:t}function ya(e,t){return e?zn(Object.create(null),e,t):t}function Cf(e,t){return e?pe(e)&&pe(t)?[...new Set([...e,...t])]:zn(Object.create(null),Ef(e),Ef(t??{})):t}function ry(e,t){if(!e)return t;if(!t)return e;const n=zn(Object.create(null),e);for(const i in t)n[i]=ni(e[i],t[i]);return n}function Bp(){return{app:null,config:{isNativeTag:$g,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sy=0;function oy(e,t){return function(i,o=null){ye(i)||(i=zn({},i)),o!=null&&!Xe(o)&&(o=null);const u=Bp(),h=new WeakSet,f=[];let p=!1;const _=u.app={_uid:sy++,_component:i,_props:o,_container:null,_context:u,_instance:null,version:im,get config(){return u.config},set config(v){},use(v,...x){return h.has(v)||(v&&ye(v.install)?(h.add(v),v.install(_,...x)):ye(v)&&(h.add(v),v(_,...x))),_},mixin(v){return u.mixins.includes(v)||u.mixins.push(v),_},component(v,x){return x?(u.components[v]=x,_):u.components[v]},directive(v,x){return x?(u.directives[v]=x,_):u.directives[v]},mount(v,x,S){if(!p){const C=_._ceVNode||an(i,o);return C.appContext=u,S===!0?S="svg":S===!1&&(S=void 0),e(C,v,S),p=!0,_._container=v,v.__vue_app__=_,Yl(C.component)}},onUnmount(v){f.push(v)},unmount(){p&&(pr(f,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(v,x){return u.provides[v]=x,_},runWithContext(v){const x=Gs;Gs=_;try{return v()}finally{Gs=x}}};return _}}let Gs=null;const ay=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${gs(t)}Modifiers`]||e[`${ms(t)}Modifiers`];function uy(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Ve;let o=n;const u=t.startsWith("update:"),h=u&&ay(i,t.slice(7));h&&(h.trim&&(o=n.map(v=>yn(v)?v.trim():v)),h.number&&(o=n.map(Ih)));let f,p=i[f=pc(t)]||i[f=pc(gs(t))];!p&&u&&(p=i[f=pc(ms(t))]),p&&pr(p,e,6,o);const _=i[f+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,pr(_,e,6,o)}}const ly=new WeakMap;function zp(e,t,n=!1){const i=n?ly:t.emitsCache,o=i.get(e);if(o!==void 0)return o;const u=e.emits;let h={},f=!1;if(!ye(e)){const p=_=>{const v=zp(_,t,!0);v&&(f=!0,zn(h,v))};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!u&&!f?(Xe(e)&&i.set(e,null),null):(pe(u)?u.forEach(p=>h[p]=null):zn(h,u),Xe(e)&&i.set(e,h),h)}function Zl(e,t){return!e||!Ol(t)?!1:(t=t.slice(2).replace(/Once$/,""),Be(e,t[0].toLowerCase()+t.slice(1))||Be(e,ms(t))||Be(e,t))}function Tf(e){const{type:t,vnode:n,proxy:i,withProxy:o,propsOptions:[u],slots:h,attrs:f,emit:p,render:_,renderCache:v,props:x,data:S,setupState:C,ctx:P,inheritAttrs:N}=e,O=sl(e);let j,U;try{if(n.shapeFlag&4){const ct=o||i,tt=ct;j=hr(_.call(tt,ct,v,x,C,S,P)),U=f}else{const ct=t;j=hr(ct.length>1?ct(x,{attrs:f,slots:h,emit:p}):ct(x,null)),U=t.props?f:cy(f)}}catch(ct){Ma.length=0,Ul(ct,e,1),j=an(Ur)}let nt=j;if(U&&N!==!1){const ct=Object.keys(U),{shapeFlag:tt}=nt;ct.length&&tt&7&&(u&&ct.some(Ch)&&(U=hy(U,u)),nt=Ao(nt,U,!1,!0))}return n.dirs&&(nt=Ao(nt,null,!1,!0),nt.dirs=nt.dirs?nt.dirs.concat(n.dirs):n.dirs),n.transition&&Fh(nt,n.transition),j=nt,sl(O),j}const cy=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ol(n))&&((t||(t={}))[n]=e[n]);return t},hy=(e,t)=>{const n={};for(const i in e)(!Ch(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function fy(e,t,n){const{props:i,children:o,component:u}=e,{props:h,children:f,patchFlag:p}=t,_=u.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return i?If(i,h,_):!!h;if(p&8){const v=t.dynamicProps;for(let x=0;x<v.length;x++){const S=v[x];if(h[S]!==i[S]&&!Zl(_,S))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:i===h?!1:i?h?If(i,h,_):!0:!!h;return!1}function If(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let o=0;o<i.length;o++){const u=i[o];if(t[u]!==e[u]&&!Zl(n,u))return!0}return!1}function dy({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const qp={},Up=()=>Object.create(qp),Hp=e=>Object.getPrototypeOf(e)===qp;function gy(e,t,n,i=!1){const o={},u=Up();e.propsDefaults=Object.create(null),Gp(e,t,o,u);for(const h in e.propsOptions[0])h in o||(o[h]=void 0);n?e.props=i?o:yv(o):e.type.props?e.props=o:e.props=u,e.attrs=u}function py(e,t,n,i){const{props:o,attrs:u,vnode:{patchFlag:h}}=e,f=ke(o),[p]=e.propsOptions;let _=!1;if((i||h>0)&&!(h&16)){if(h&8){const v=e.vnode.dynamicProps;for(let x=0;x<v.length;x++){let S=v[x];if(Zl(e.emitsOptions,S))continue;const C=t[S];if(p)if(Be(u,S))C!==u[S]&&(u[S]=C,_=!0);else{const P=gs(S);o[P]=nh(p,f,P,C,e,!1)}else C!==u[S]&&(u[S]=C,_=!0)}}}else{Gp(e,t,o,u)&&(_=!0);let v;for(const x in f)(!t||!Be(t,x)&&((v=ms(x))===x||!Be(t,v)))&&(p?n&&(n[x]!==void 0||n[v]!==void 0)&&(o[x]=nh(p,f,x,void 0,e,!0)):delete o[x]);if(u!==f)for(const x in u)(!t||!Be(t,x))&&(delete u[x],_=!0)}_&&Mr(e.attrs,"set","")}function Gp(e,t,n,i){const[o,u]=e.propsOptions;let h=!1,f;if(t)for(let p in t){if(Aa(p))continue;const _=t[p];let v;o&&Be(o,v=gs(p))?!u||!u.includes(v)?n[v]=_:(f||(f={}))[v]=_:Zl(e.emitsOptions,p)||(!(p in i)||_!==i[p])&&(i[p]=_,h=!0)}if(u){const p=ke(n),_=f||Ve;for(let v=0;v<u.length;v++){const x=u[v];n[x]=nh(o,p,x,_[x],e,!Be(_,x))}}return h}function nh(e,t,n,i,o,u){const h=e[n];if(h!=null){const f=Be(h,"default");if(f&&i===void 0){const p=h.default;if(h.type!==Function&&!h.skipFactory&&ye(p)){const{propsDefaults:_}=o;if(n in _)i=_[n];else{const v=eu(o);i=_[n]=p.call(null,t),v()}}else i=p;o.ce&&o.ce._setProp(n,i)}h[0]&&(u&&!f?i=!1:h[1]&&(i===""||i===ms(n))&&(i=!0))}return i}const my=new WeakMap;function Vp(e,t,n=!1){const i=n?my:t.propsCache,o=i.get(e);if(o)return o;const u=e.props,h={},f=[];let p=!1;if(!ye(e)){const v=x=>{p=!0;const[S,C]=Vp(x,t,!0);zn(h,S),C&&f.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!u&&!p)return Xe(e)&&i.set(e,yo),yo;if(pe(u))for(let v=0;v<u.length;v++){const x=gs(u[v]);Af(x)&&(h[x]=Ve)}else if(u)for(const v in u){const x=gs(v);if(Af(x)){const S=u[v],C=h[x]=pe(S)||ye(S)?{type:S}:zn({},S),P=C.type;let N=!1,O=!0;if(pe(P))for(let j=0;j<P.length;++j){const U=P[j],nt=ye(U)&&U.name;if(nt==="Boolean"){N=!0;break}else nt==="String"&&(O=!1)}else N=ye(P)&&P.name==="Boolean";C[0]=N,C[1]=O,(N||Be(C,"default"))&&f.push(x)}}const _=[h,f];return Xe(e)&&i.set(e,_),_}function Af(e){return e[0]!=="$"&&!Aa(e)}const Bh=e=>e==="_"||e==="_ctx"||e==="$stable",zh=e=>pe(e)?e.map(hr):[hr(e)],_y=(e,t,n)=>{if(t._n)return t;const i=po((...o)=>zh(t(...o)),n);return i._c=!1,i},Zp=(e,t,n)=>{const i=e._ctx;for(const o in e){if(Bh(o))continue;const u=e[o];if(ye(u))t[o]=_y(o,u,i);else if(u!=null){const h=zh(u);t[o]=()=>h}}},Wp=(e,t)=>{const n=zh(t);e.slots.default=()=>n},Yp=(e,t,n)=>{for(const i in t)(n||!Bh(i))&&(e[i]=t[i])},vy=(e,t,n)=>{const i=e.slots=Up();if(e.vnode.shapeFlag&32){const o=t._;o?(Yp(i,t,n),n&&ep(i,"_",o,!0)):Zp(t,i)}else t&&Wp(e,t)},yy=(e,t,n)=>{const{vnode:i,slots:o}=e;let u=!0,h=Ve;if(i.shapeFlag&32){const f=t._;f?n&&f===1?u=!1:Yp(o,t,n):(u=!t.$stable,Zp(t,o)),h=t}else t&&(Wp(e,t),h={default:1});if(u)for(const f in o)!Bh(f)&&h[f]==null&&delete o[f]},gi=ky;function xy(e){return by(e)}function by(e,t){const n=Bl();n.__VUE__=!0;const{insert:i,remove:o,patchProp:u,createElement:h,createText:f,createComment:p,setText:_,setElementText:v,parentNode:x,nextSibling:S,setScopeId:C=gr,insertStaticContent:P}=e,N=(T,Q,dt,gt=null,vt=null,Nt=null,Ot=void 0,ft=null,Rt=!!Q.dynamicChildren)=>{if(T===Q)return;T&&!oa(T,Q)&&(gt=Yt(T),bt(T,vt,Nt,!0),T=null),Q.patchFlag===-2&&(Rt=!1,Q.dynamicChildren=null);const{type:Lt,ref:Ht,shapeFlag:Zt}=Q;switch(Lt){case Wl:O(T,Q,dt,gt);break;case Ur:j(T,Q,dt,gt);break;case wc:T==null&&U(Q,dt,gt,Ot);break;case mn:M(T,Q,dt,gt,vt,Nt,Ot,ft,Rt);break;default:Zt&1?tt(T,Q,dt,gt,vt,Nt,Ot,ft,Rt):Zt&6?G(T,Q,dt,gt,vt,Nt,Ot,ft,Rt):(Zt&64||Zt&128)&&Lt.process(T,Q,dt,gt,vt,Nt,Ot,ft,Rt,Ft)}Ht!=null&&vt?Pa(Ht,T&&T.ref,Nt,Q||T,!Q):Ht==null&&T&&T.ref!=null&&Pa(T.ref,null,Nt,T,!0)},O=(T,Q,dt,gt)=>{if(T==null)i(Q.el=f(Q.children),dt,gt);else{const vt=Q.el=T.el;Q.children!==T.children&&_(vt,Q.children)}},j=(T,Q,dt,gt)=>{T==null?i(Q.el=p(Q.children||""),dt,gt):Q.el=T.el},U=(T,Q,dt,gt)=>{[T.el,T.anchor]=P(T.children,Q,dt,gt,T.el,T.anchor)},nt=({el:T,anchor:Q},dt,gt)=>{let vt;for(;T&&T!==Q;)vt=S(T),i(T,dt,gt),T=vt;i(Q,dt,gt)},ct=({el:T,anchor:Q})=>{let dt;for(;T&&T!==Q;)dt=S(T),o(T),T=dt;o(Q)},tt=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt)=>{if(Q.type==="svg"?Ot="svg":Q.type==="math"&&(Ot="mathml"),T==null)pt(Q,dt,gt,vt,Nt,Ot,ft,Rt);else{const Lt=T.el&&T.el._isVueCE?T.el:null;try{Lt&&Lt._beginPatch(),b(T,Q,vt,Nt,Ot,ft,Rt)}finally{Lt&&Lt._endPatch()}}},pt=(T,Q,dt,gt,vt,Nt,Ot,ft)=>{let Rt,Lt;const{props:Ht,shapeFlag:Zt,transition:Mt,dirs:Xt}=T;if(Rt=T.el=h(T.type,Nt,Ht&&Ht.is,Ht),Zt&8?v(Rt,T.children):Zt&16&&E(T.children,Rt,null,gt,vt,bc(T,Nt),Ot,ft),Xt&&Ds(T,null,gt,"created"),st(Rt,T,T.scopeId,Ot,gt),Ht){for(const se in Ht)se!=="value"&&!Aa(se)&&u(Rt,se,null,Ht[se],Nt,gt);"value"in Ht&&u(Rt,"value",null,Ht.value,Nt),(Lt=Ht.onVnodeBeforeMount)&&sr(Lt,gt,T)}Xt&&Ds(T,null,gt,"beforeMount");const Jt=wy(vt,Mt);Jt&&Mt.beforeEnter(Rt),i(Rt,Q,dt),((Lt=Ht&&Ht.onVnodeMounted)||Jt||Xt)&&gi(()=>{Lt&&sr(Lt,gt,T),Jt&&Mt.enter(Rt),Xt&&Ds(T,null,gt,"mounted")},vt)},st=(T,Q,dt,gt,vt)=>{if(dt&&C(T,dt),gt)for(let Nt=0;Nt<gt.length;Nt++)C(T,gt[Nt]);if(vt){let Nt=vt.subTree;if(Q===Nt||Kp(Nt.type)&&(Nt.ssContent===Q||Nt.ssFallback===Q)){const Ot=vt.vnode;st(T,Ot,Ot.scopeId,Ot.slotScopeIds,vt.parent)}}},E=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt=0)=>{for(let Lt=Rt;Lt<T.length;Lt++){const Ht=T[Lt]=ft?rs(T[Lt]):hr(T[Lt]);N(null,Ht,Q,dt,gt,vt,Nt,Ot,ft)}},b=(T,Q,dt,gt,vt,Nt,Ot)=>{const ft=Q.el=T.el;let{patchFlag:Rt,dynamicChildren:Lt,dirs:Ht}=Q;Rt|=T.patchFlag&16;const Zt=T.props||Ve,Mt=Q.props||Ve;let Xt;if(dt&&Ns(dt,!1),(Xt=Mt.onVnodeBeforeUpdate)&&sr(Xt,dt,Q,T),Ht&&Ds(Q,T,dt,"beforeUpdate"),dt&&Ns(dt,!0),(Zt.innerHTML&&Mt.innerHTML==null||Zt.textContent&&Mt.textContent==null)&&v(ft,""),Lt?I(T.dynamicChildren,Lt,ft,dt,gt,bc(Q,vt),Nt):Ot||Y(T,Q,ft,null,dt,gt,bc(Q,vt),Nt,!1),Rt>0){if(Rt&16)R(ft,Zt,Mt,dt,vt);else if(Rt&2&&Zt.class!==Mt.class&&u(ft,"class",null,Mt.class,vt),Rt&4&&u(ft,"style",Zt.style,Mt.style,vt),Rt&8){const Jt=Q.dynamicProps;for(let se=0;se<Jt.length;se++){const Gt=Jt[se],Ne=Zt[Gt],ie=Mt[Gt];(ie!==Ne||Gt==="value")&&u(ft,Gt,Ne,ie,vt,dt)}}Rt&1&&T.children!==Q.children&&v(ft,Q.children)}else!Ot&&Lt==null&&R(ft,Zt,Mt,dt,vt);((Xt=Mt.onVnodeUpdated)||Ht)&&gi(()=>{Xt&&sr(Xt,dt,Q,T),Ht&&Ds(Q,T,dt,"updated")},gt)},I=(T,Q,dt,gt,vt,Nt,Ot)=>{for(let ft=0;ft<Q.length;ft++){const Rt=T[ft],Lt=Q[ft],Ht=Rt.el&&(Rt.type===mn||!oa(Rt,Lt)||Rt.shapeFlag&198)?x(Rt.el):dt;N(Rt,Lt,Ht,null,gt,vt,Nt,Ot,!0)}},R=(T,Q,dt,gt,vt)=>{if(Q!==dt){if(Q!==Ve)for(const Nt in Q)!Aa(Nt)&&!(Nt in dt)&&u(T,Nt,Q[Nt],null,vt,gt);for(const Nt in dt){if(Aa(Nt))continue;const Ot=dt[Nt],ft=Q[Nt];Ot!==ft&&Nt!=="value"&&u(T,Nt,ft,Ot,vt,gt)}"value"in dt&&u(T,"value",Q.value,dt.value,vt)}},M=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt)=>{const Lt=Q.el=T?T.el:f(""),Ht=Q.anchor=T?T.anchor:f("");let{patchFlag:Zt,dynamicChildren:Mt,slotScopeIds:Xt}=Q;Xt&&(ft=ft?ft.concat(Xt):Xt),T==null?(i(Lt,dt,gt),i(Ht,dt,gt),E(Q.children||[],dt,Ht,vt,Nt,Ot,ft,Rt)):Zt>0&&Zt&64&&Mt&&T.dynamicChildren&&T.dynamicChildren.length===Mt.length?(I(T.dynamicChildren,Mt,dt,vt,Nt,Ot,ft),(Q.key!=null||vt&&Q===vt.subTree)&&jp(T,Q,!0)):Y(T,Q,dt,Ht,vt,Nt,Ot,ft,Rt)},G=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt)=>{Q.slotScopeIds=ft,T==null?Q.shapeFlag&512?vt.ctx.activate(Q,dt,gt,Ot,Rt):Z(Q,dt,gt,vt,Nt,Ot,Rt):W(T,Q,Rt)},Z=(T,Q,dt,gt,vt,Nt,Ot)=>{const ft=T.component=Dy(T,gt,vt);if(Pp(T)&&(ft.ctx.renderer=Ft),Ny(ft,!1,Ot),ft.asyncDep){if(vt&&vt.registerDep(ft,$,Ot),!T.el){const Rt=ft.subTree=an(Ur);j(null,Rt,Q,dt),T.placeholder=Rt.el}}else $(ft,T,Q,dt,vt,Nt,Ot)},W=(T,Q,dt)=>{const gt=Q.component=T.component;if(fy(T,Q,dt))if(gt.asyncDep&&!gt.asyncResolved){V(gt,Q,dt);return}else gt.next=Q,gt.update();else Q.el=T.el,gt.vnode=Q},$=(T,Q,dt,gt,vt,Nt,Ot)=>{const ft=()=>{if(T.isMounted){let{next:Zt,bu:Mt,u:Xt,parent:Jt,vnode:se}=T;{const Se=$p(T);if(Se){Zt&&(Zt.el=se.el,V(T,Zt,Ot)),Se.asyncDep.then(()=>{T.isUnmounted||ft()});return}}let Gt=Zt,Ne;Ns(T,!1),Zt?(Zt.el=se.el,V(T,Zt,Ot)):Zt=se,Mt&&Gu(Mt),(Ne=Zt.props&&Zt.props.onVnodeBeforeUpdate)&&sr(Ne,Jt,Zt,se),Ns(T,!0);const ie=Tf(T),$t=T.subTree;T.subTree=ie,N($t,ie,x($t.el),Yt($t),T,vt,Nt),Zt.el=ie.el,Gt===null&&dy(T,ie.el),Xt&&gi(Xt,vt),(Ne=Zt.props&&Zt.props.onVnodeUpdated)&&gi(()=>sr(Ne,Jt,Zt,se),vt)}else{let Zt;const{el:Mt,props:Xt}=Q,{bm:Jt,m:se,parent:Gt,root:Ne,type:ie}=T,$t=wo(Q);Ns(T,!1),Jt&&Gu(Jt),!$t&&(Zt=Xt&&Xt.onVnodeBeforeMount)&&sr(Zt,Gt,Q),Ns(T,!0);{Ne.ce&&Ne.ce._def.shadowRoot!==!1&&Ne.ce._injectChildStyle(ie);const Se=T.subTree=Tf(T);N(null,Se,dt,gt,T,vt,Nt),Q.el=Se.el}if(se&&gi(se,vt),!$t&&(Zt=Xt&&Xt.onVnodeMounted)){const Se=Q;gi(()=>sr(Zt,Gt,Se),vt)}(Q.shapeFlag&256||Gt&&wo(Gt.vnode)&&Gt.vnode.shapeFlag&256)&&T.a&&gi(T.a,vt),T.isMounted=!0,Q=dt=gt=null}};T.scope.on();const Rt=T.effect=new up(ft);T.scope.off();const Lt=T.update=Rt.run.bind(Rt),Ht=T.job=Rt.runIfDirty.bind(Rt);Ht.i=T,Ht.id=T.uid,Rt.scheduler=()=>Rh(Ht),Ns(T,!0),Lt()},V=(T,Q,dt)=>{Q.component=T;const gt=T.vnode.props;T.vnode=Q,T.next=null,py(T,Q.props,gt,dt),yy(T,Q.children,dt),Br(),bf(T),zr()},Y=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt=!1)=>{const Lt=T&&T.children,Ht=T?T.shapeFlag:0,Zt=Q.children,{patchFlag:Mt,shapeFlag:Xt}=Q;if(Mt>0){if(Mt&128){K(Lt,Zt,dt,gt,vt,Nt,Ot,ft,Rt);return}else if(Mt&256){ut(Lt,Zt,dt,gt,vt,Nt,Ot,ft,Rt);return}}Xt&8?(Ht&16&&Pt(Lt,vt,Nt),Zt!==Lt&&v(dt,Zt)):Ht&16?Xt&16?K(Lt,Zt,dt,gt,vt,Nt,Ot,ft,Rt):Pt(Lt,vt,Nt,!0):(Ht&8&&v(dt,""),Xt&16&&E(Zt,dt,gt,vt,Nt,Ot,ft,Rt))},ut=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt)=>{T=T||yo,Q=Q||yo;const Lt=T.length,Ht=Q.length,Zt=Math.min(Lt,Ht);let Mt;for(Mt=0;Mt<Zt;Mt++){const Xt=Q[Mt]=Rt?rs(Q[Mt]):hr(Q[Mt]);N(T[Mt],Xt,dt,null,vt,Nt,Ot,ft,Rt)}Lt>Ht?Pt(T,vt,Nt,!0,!1,Zt):E(Q,dt,gt,vt,Nt,Ot,ft,Rt,Zt)},K=(T,Q,dt,gt,vt,Nt,Ot,ft,Rt)=>{let Lt=0;const Ht=Q.length;let Zt=T.length-1,Mt=Ht-1;for(;Lt<=Zt&&Lt<=Mt;){const Xt=T[Lt],Jt=Q[Lt]=Rt?rs(Q[Lt]):hr(Q[Lt]);if(oa(Xt,Jt))N(Xt,Jt,dt,null,vt,Nt,Ot,ft,Rt);else break;Lt++}for(;Lt<=Zt&&Lt<=Mt;){const Xt=T[Zt],Jt=Q[Mt]=Rt?rs(Q[Mt]):hr(Q[Mt]);if(oa(Xt,Jt))N(Xt,Jt,dt,null,vt,Nt,Ot,ft,Rt);else break;Zt--,Mt--}if(Lt>Zt){if(Lt<=Mt){const Xt=Mt+1,Jt=Xt<Ht?Q[Xt].el:gt;for(;Lt<=Mt;)N(null,Q[Lt]=Rt?rs(Q[Lt]):hr(Q[Lt]),dt,Jt,vt,Nt,Ot,ft,Rt),Lt++}}else if(Lt>Mt)for(;Lt<=Zt;)bt(T[Lt],vt,Nt,!0),Lt++;else{const Xt=Lt,Jt=Lt,se=new Map;for(Lt=Jt;Lt<=Mt;Lt++){const Kt=Q[Lt]=Rt?rs(Q[Lt]):hr(Q[Lt]);Kt.key!=null&&se.set(Kt.key,Lt)}let Gt,Ne=0;const ie=Mt-Jt+1;let $t=!1,Se=0;const Le=new Array(ie);for(Lt=0;Lt<ie;Lt++)Le[Lt]=0;for(Lt=Xt;Lt<=Zt;Lt++){const Kt=T[Lt];if(Ne>=ie){bt(Kt,vt,Nt,!0);continue}let on;if(Kt.key!=null)on=se.get(Kt.key);else for(Gt=Jt;Gt<=Mt;Gt++)if(Le[Gt-Jt]===0&&oa(Kt,Q[Gt])){on=Gt;break}on===void 0?bt(Kt,vt,Nt,!0):(Le[on-Jt]=Lt+1,on>=Se?Se=on:$t=!0,N(Kt,Q[on],dt,null,vt,Nt,Ot,ft,Rt),Ne++)}const ln=$t?Ey(Le):yo;for(Gt=ln.length-1,Lt=ie-1;Lt>=0;Lt--){const Kt=Jt+Lt,on=Q[Kt],cn=Q[Kt+1],hn=Kt+1<Ht?cn.el||Xp(cn):gt;Le[Lt]===0?N(null,on,dt,hn,vt,Nt,Ot,ft,Rt):$t&&(Gt<0||Lt!==ln[Gt]?it(on,dt,hn,2):Gt--)}}},it=(T,Q,dt,gt,vt=null)=>{const{el:Nt,type:Ot,transition:ft,children:Rt,shapeFlag:Lt}=T;if(Lt&6){it(T.component.subTree,Q,dt,gt);return}if(Lt&128){T.suspense.move(Q,dt,gt);return}if(Lt&64){Ot.move(T,Q,dt,Ft);return}if(Ot===mn){i(Nt,Q,dt);for(let Zt=0;Zt<Rt.length;Zt++)it(Rt[Zt],Q,dt,gt);i(T.anchor,Q,dt);return}if(Ot===wc){nt(T,Q,dt);return}if(gt!==2&&Lt&1&&ft)if(gt===0)ft.beforeEnter(Nt),i(Nt,Q,dt),gi(()=>ft.enter(Nt),vt);else{const{leave:Zt,delayLeave:Mt,afterLeave:Xt}=ft,Jt=()=>{T.ctx.isUnmounted?o(Nt):i(Nt,Q,dt)},se=()=>{Nt._isLeaving&&Nt[zv](!0),Zt(Nt,()=>{Jt(),Xt&&Xt()})};Mt?Mt(Nt,Jt,se):se()}else i(Nt,Q,dt)},bt=(T,Q,dt,gt=!1,vt=!1)=>{const{type:Nt,props:Ot,ref:ft,children:Rt,dynamicChildren:Lt,shapeFlag:Ht,patchFlag:Zt,dirs:Mt,cacheIndex:Xt}=T;if(Zt===-2&&(vt=!1),ft!=null&&(Br(),Pa(ft,null,dt,T,!0),zr()),Xt!=null&&(Q.renderCache[Xt]=void 0),Ht&256){Q.ctx.deactivate(T);return}const Jt=Ht&1&&Mt,se=!wo(T);let Gt;if(se&&(Gt=Ot&&Ot.onVnodeBeforeUnmount)&&sr(Gt,Q,T),Ht&6)Tt(T.component,dt,gt);else{if(Ht&128){T.suspense.unmount(dt,gt);return}Jt&&Ds(T,null,Q,"beforeUnmount"),Ht&64?T.type.remove(T,Q,dt,Ft,gt):Lt&&!Lt.hasOnce&&(Nt!==mn||Zt>0&&Zt&64)?Pt(Lt,Q,dt,!1,!0):(Nt===mn&&Zt&384||!vt&&Ht&16)&&Pt(Rt,Q,dt),gt&&wt(T)}(se&&(Gt=Ot&&Ot.onVnodeUnmounted)||Jt)&&gi(()=>{Gt&&sr(Gt,Q,T),Jt&&Ds(T,null,Q,"unmounted")},dt)},wt=T=>{const{type:Q,el:dt,anchor:gt,transition:vt}=T;if(Q===mn){Et(dt,gt);return}if(Q===wc){ct(T);return}const Nt=()=>{o(dt),vt&&!vt.persisted&&vt.afterLeave&&vt.afterLeave()};if(T.shapeFlag&1&&vt&&!vt.persisted){const{leave:Ot,delayLeave:ft}=vt,Rt=()=>Ot(dt,Nt);ft?ft(T.el,Nt,Rt):Rt()}else Nt()},Et=(T,Q)=>{let dt;for(;T!==Q;)dt=S(T),o(T),T=dt;o(Q)},Tt=(T,Q,dt)=>{const{bum:gt,scope:vt,job:Nt,subTree:Ot,um:ft,m:Rt,a:Lt}=T;Lf(Rt),Lf(Lt),gt&&Gu(gt),vt.stop(),Nt&&(Nt.flags|=8,bt(Ot,T,Q,dt)),ft&&gi(ft,Q),gi(()=>{T.isUnmounted=!0},Q)},Pt=(T,Q,dt,gt=!1,vt=!1,Nt=0)=>{for(let Ot=Nt;Ot<T.length;Ot++)bt(T[Ot],Q,dt,gt,vt)},Yt=T=>{if(T.shapeFlag&6)return Yt(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const Q=S(T.anchor||T.el),dt=Q&&Q[Fv];return dt?S(dt):Q};let et=!1;const Qt=(T,Q,dt)=>{let gt;T==null?Q._vnode&&(bt(Q._vnode,null,null,!0),gt=Q._vnode.component):N(Q._vnode||null,T,Q,null,null,null,dt),Q._vnode=T,et||(et=!0,bf(gt),Tp(),et=!1)},Ft={p:N,um:bt,m:it,r:wt,mt:Z,mc:E,pc:Y,pbc:I,n:Yt,o:e};return{render:Qt,hydrate:void 0,createApp:oy(Qt)}}function bc({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ns({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wy(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function jp(e,t,n=!1){const i=e.children,o=t.children;if(pe(i)&&pe(o))for(let u=0;u<i.length;u++){const h=i[u];let f=o[u];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[u]=rs(o[u]),f.el=h.el),!n&&f.patchFlag!==-2&&jp(h,f)),f.type===Wl&&(f.patchFlag!==-1?f.el=h.el:f.__elIndex=u+(e.type===mn?1:0)),f.type===Ur&&!f.el&&(f.el=h.el)}}function Ey(e){const t=e.slice(),n=[0];let i,o,u,h,f;const p=e.length;for(i=0;i<p;i++){const _=e[i];if(_!==0){if(o=n[n.length-1],e[o]<_){t[i]=o,n.push(i);continue}for(u=0,h=n.length-1;u<h;)f=u+h>>1,e[n[f]]<_?u=f+1:h=f;_<e[n[u]]&&(u>0&&(t[i]=n[u-1]),n[u]=i)}}for(u=n.length,h=n[u-1];u-- >0;)n[u]=h,h=t[h];return n}function $p(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$p(t)}function Lf(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Xp(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Xp(t.subTree):null}const Kp=e=>e.__isSuspense;function ky(e,t){t&&t.pendingBranch?pe(e)?t.effects.push(...e):t.effects.push(e):Dv(e)}const mn=Symbol.for("v-fgt"),Wl=Symbol.for("v-txt"),Ur=Symbol.for("v-cmt"),wc=Symbol.for("v-stc"),Ma=[];let mi=null;function le(e=!1){Ma.push(mi=e?null:[])}function Sy(){Ma.pop(),mi=Ma[Ma.length-1]||null}let Ga=1;function ll(e,t=!1){Ga+=e,e<0&&mi&&t&&(mi.hasOnce=!0)}function Jp(e){return e.dynamicChildren=Ga>0?mi||yo:null,Sy(),Ga>0&&mi&&mi.push(e),e}function he(e,t,n,i,o,u){return Jp(rt(e,t,n,i,o,u,!0))}function Va(e,t,n,i,o){return Jp(an(e,t,n,i,o,!0))}function Za(e){return e?e.__v_isVNode===!0:!1}function oa(e,t){return e.type===t.type&&e.key===t.key}const Qp=({key:e})=>e??null,Vu=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?yn(e)||un(e)||ye(e)?{i:Yn,r:e,k:t,f:!!n}:e:null);function rt(e,t=null,n=null,i=0,o=null,u=e===mn?0:1,h=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qp(t),ref:t&&Vu(t),scopeId:Ap,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Yn};return f?(qh(p,n),u&128&&e.normalize(p)):n&&(p.shapeFlag|=yn(n)?8:16),Ga>0&&!h&&mi&&(p.patchFlag>0||u&6)&&p.patchFlag!==32&&mi.push(p),p}const an=Cy;function Cy(e,t=null,n=null,i=0,o=null,u=!1){if((!e||e===Kv)&&(e=Ur),Za(e)){const f=Ao(e,t,!0);return n&&qh(f,n),Ga>0&&!u&&mi&&(f.shapeFlag&6?mi[mi.indexOf(e)]=f:mi.push(f)),f.patchFlag=-2,f}if(Ry(e)&&(e=e.__vccOpts),t){t=Ty(t);let{class:f,style:p}=t;f&&!yn(f)&&(t.class=Xn(f)),Xe(p)&&(Mo(p)&&!pe(p)&&(p=zn({},p)),t.style=js(p))}const h=yn(e)?1:Kp(e)?128:Bv(e)?64:Xe(e)?4:ye(e)?2:0;return rt(e,t,n,i,o,h,u,!0)}function Ty(e){return e?Mo(e)||Hp(e)?zn({},e):e:null}function Ao(e,t,n=!1,i=!1){const{props:o,ref:u,patchFlag:h,children:f,transition:p}=e,_=t?Iy(o||{},t):o,v={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&Qp(_),ref:t&&t.ref?n&&u?pe(u)?u.concat(Vu(t)):[u,Vu(t)]:Vu(t):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==mn?h===-1?16:h|16:h,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ao(e.ssContent),ssFallback:e.ssFallback&&Ao(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&i&&Fh(v,p.clone(v)),v}function Vi(e=" ",t=0){return an(Wl,null,e,t)}function Nn(e="",t=!1){return t?(le(),Va(Ur,null,e)):an(Ur,null,e)}function hr(e){return e==null||typeof e=="boolean"?an(Ur):pe(e)?an(mn,null,e.slice()):Za(e)?rs(e):an(Wl,null,String(e))}function rs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ao(e)}function qh(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(pe(t))n=16;else if(typeof t=="object")if(i&65){const o=t.default;o&&(o._c&&(o._d=!1),qh(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Hp(t)?t._ctx=Yn:o===3&&Yn&&(Yn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ye(t)?(t={default:t,_ctx:Yn},n=32):(t=String(t),i&64?(n=16,t=[Vi(t)]):n=8);e.children=t,e.shapeFlag|=n}function Iy(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const o in i)if(o==="class")t.class!==i.class&&(t.class=Xn([t.class,i.class]));else if(o==="style")t.style=js([t.style,i.style]);else if(Ol(o)){const u=t[o],h=i[o];h&&u!==h&&!(pe(u)&&u.includes(h))&&(t[o]=u?[].concat(u,h):h)}else o!==""&&(t[o]=i[o])}return t}function sr(e,t,n,i=null){pr(e,t,7,[n,i])}const Ay=Bp();let Ly=0;function Dy(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||Ay,u={uid:Ly++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new sp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vp(i,o),emitsOptions:zp(i,o),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:i.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=uy.bind(null,u),e.ce&&e.ce(u),u}let ri=null;const tm=()=>ri||Yn;let cl,ih;{const e=Bl(),t=(n,i)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(i),u=>{o.length>1?o.forEach(h=>h(u)):o[0](u)}};cl=t("__VUE_INSTANCE_SETTERS__",n=>ri=n),ih=t("__VUE_SSR_SETTERS__",n=>Wa=n)}const eu=e=>{const t=ri;return cl(e),e.scope.on(),()=>{e.scope.off(),cl(t)}},Df=()=>{ri&&ri.scope.off(),cl(null)};function em(e){return e.vnode.shapeFlag&4}let Wa=!1;function Ny(e,t=!1,n=!1){t&&ih(t);const{props:i,children:o}=e.vnode,u=em(e);gy(e,i,u,t),vy(e,o,n||t);const h=u?Py(e,t):void 0;return t&&ih(!1),h}function Py(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Qv);const{setup:i}=n;if(i){Br();const o=e.setupContext=i.length>1?My(e):null,u=eu(e),h=tu(i,e,0,[e.props,o]),f=Kg(h);if(zr(),u(),(f||e.sp)&&!wo(e)&&Np(e),f){if(h.then(Df,Df),t)return h.then(p=>{Nf(e,p)}).catch(p=>{Ul(p,e,0)});e.asyncDep=h}else Nf(e,h)}else nm(e)}function Nf(e,t,n){ye(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Xe(t)&&(e.setupState=kp(t)),nm(e)}function nm(e,t,n){const i=e.type;e.render||(e.render=i.render||gr);{const o=eu(e);Br();try{ty(e)}finally{zr(),o()}}}const Oy={get(e,t){return Wn(e,"get",""),e[t]}};function My(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Oy),slots:e.slots,emit:e.emit,expose:t}}function Yl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(kp(Mh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Oa)return Oa[n](e)},has(t,n){return n in t||n in Oa}})):e.proxy}function Ry(e){return ye(e)&&"__vccOpts"in e}const Bn=(e,t)=>Cv(e,t,Wa);function rh(e,t,n){try{ll(-1);const i=arguments.length;return i===2?Xe(t)&&!pe(t)?Za(t)?an(e,null,[t]):an(e,t):an(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Za(n)&&(n=[n]),an(e,t,n))}finally{ll(1)}}const im="3.5.27";let sh;const Pf=typeof window<"u"&&window.trustedTypes;if(Pf)try{sh=Pf.createPolicy("vue",{createHTML:e=>e})}catch{}const rm=sh?e=>sh.createHTML(e):e=>e,Fy="http://www.w3.org/2000/svg",By="http://www.w3.org/1998/Math/MathML",Pr=typeof document<"u"?document:null,Of=Pr&&Pr.createElement("template"),zy={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const o=t==="svg"?Pr.createElementNS(Fy,e):t==="mathml"?Pr.createElementNS(By,e):n?Pr.createElement(e,{is:n}):Pr.createElement(e);return e==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:e=>Pr.createTextNode(e),createComment:e=>Pr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,o,u){const h=n?n.previousSibling:t.lastChild;if(o&&(o===u||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===u||!(o=o.nextSibling)););else{Of.innerHTML=rm(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const f=Of.content;if(i==="svg"||i==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}t.insertBefore(f,n)}return[h?h.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},qy=Symbol("_vtc");function Uy(e,t,n){const i=e[qy];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Mf=Symbol("_vod"),Hy=Symbol("_vsh"),Gy=Symbol(""),Vy=/(?:^|;)\s*display\s*:/;function Zy(e,t,n){const i=e.style,o=yn(n);let u=!1;if(n&&!o){if(t)if(yn(t))for(const h of t.split(";")){const f=h.slice(0,h.indexOf(":")).trim();n[f]==null&&Zu(i,f,"")}else for(const h in t)n[h]==null&&Zu(i,h,"");for(const h in n)h==="display"&&(u=!0),Zu(i,h,n[h])}else if(o){if(t!==n){const h=i[Gy];h&&(n+=";"+h),i.cssText=n,u=Vy.test(n)}}else t&&e.removeAttribute("style");Mf in e&&(e[Mf]=u?i.display:"",e[Hy]&&(i.display="none"))}const Rf=/\s*!important$/;function Zu(e,t,n){if(pe(n))n.forEach(i=>Zu(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Wy(e,t);Rf.test(n)?e.setProperty(ms(i),n.replace(Rf,""),"important"):e[i]=n}}const Ff=["Webkit","Moz","ms"],Ec={};function Wy(e,t){const n=Ec[t];if(n)return n;let i=gs(t);if(i!=="filter"&&i in e)return Ec[t]=i;i=tp(i);for(let o=0;o<Ff.length;o++){const u=Ff[o]+i;if(u in e)return Ec[t]=u}return t}const Bf="http://www.w3.org/1999/xlink";function zf(e,t,n,i,o,u=J_(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Bf,t.slice(6,t.length)):e.setAttributeNS(Bf,t,n):n==null||u&&!np(n)?e.removeAttribute(t):e.setAttribute(t,u?"":Gr(n)?String(n):n)}function qf(e,t,n,i,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?rm(n):n);return}const u=e.tagName;if(t==="value"&&u!=="PROGRESS"&&!u.includes("-")){const f=u==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(t),e._value=n;return}let h=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=np(n):n==null&&f==="string"?(n="",h=!0):f==="number"&&(n=0,h=!0)}try{e[t]=n}catch{}h&&e.removeAttribute(o||t)}function mo(e,t,n,i){e.addEventListener(t,n,i)}function Yy(e,t,n,i){e.removeEventListener(t,n,i)}const Uf=Symbol("_vei");function jy(e,t,n,i,o=null){const u=e[Uf]||(e[Uf]={}),h=u[t];if(i&&h)h.value=i;else{const[f,p]=$y(t);if(i){const _=u[t]=Jy(i,o);mo(e,f,_,p)}else h&&(Yy(e,f,h,p),u[t]=void 0)}}const Hf=/(?:Once|Passive|Capture)$/;function $y(e){let t;if(Hf.test(e)){t={};let i;for(;i=e.match(Hf);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ms(e.slice(2)),t]}let kc=0;const Xy=Promise.resolve(),Ky=()=>kc||(Xy.then(()=>kc=0),kc=Date.now());function Jy(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;pr(Qy(i,n.value),t,5,[i])};return n.value=e,n.attached=Ky(),n}function Qy(e,t){if(pe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>o=>!o._stopped&&i&&i(o))}else return t}const Gf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,t0=(e,t,n,i,o,u)=>{const h=o==="svg";t==="class"?Uy(e,i,h):t==="style"?Zy(e,n,i):Ol(t)?Ch(t)||jy(e,t,n,i,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):e0(e,t,i,h))?(qf(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&zf(e,t,i,h,u,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!yn(i))?qf(e,gs(t),i,u,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),zf(e,t,i,h))};function e0(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Gf(t)&&ye(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Gf(t)&&yn(n)?!1:t in e}const Vf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return pe(t)?n=>Gu(t,n):t};function n0(e){e.target.composing=!0}function Zf(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Sc=Symbol("_assign");function Wf(e,t,n){return t&&(e=e.trim()),n&&(e=Ih(e)),e}const hl={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e[Sc]=Vf(o);const u=i||o.props&&o.props.type==="number";mo(e,t?"change":"input",h=>{h.target.composing||e[Sc](Wf(e.value,n,u))}),(n||u)&&mo(e,"change",()=>{e.value=Wf(e.value,n,u)}),t||(mo(e,"compositionstart",n0),mo(e,"compositionend",Zf),mo(e,"change",Zf))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:o,number:u}},h){if(e[Sc]=Vf(h),e.composing)return;const f=(u||e.type==="number")&&!/^0\d/.test(e.value)?Ih(e.value):e.value,p=t??"";f!==p&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||o&&e.value.trim()===p)||(e.value=p))}},i0=["ctrl","shift","alt","meta"],r0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>i0.some(n=>e[`${n}Key`]&&!t.includes(n))},ss=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((o,...u)=>{for(let h=0;h<t.length;h++){const f=r0[t[h]];if(f&&f(o,t))return}return e(o,...u)}))},s0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fl=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=(o=>{if(!("key"in o))return;const u=ms(o.key);if(t.some(h=>h===u||s0[h]===u))return e(o)}))},o0=zn({patchProp:t0},zy);let Yf;function a0(){return Yf||(Yf=xy(o0))}const u0=((...e)=>{const t=a0().createApp(...e),{mount:n}=t;return t.mount=i=>{const o=c0(i);if(!o)return;const u=t._component;!ye(u)&&!u.render&&!u.template&&(u.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const h=n(o,!1,l0(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),h},t});function l0(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function c0(e){return yn(e)?document.querySelector(e):e}let sm;const jl=e=>sm=e,om=Symbol();function oh(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ra;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ra||(Ra={}));function h0(){const e=op(!0),t=e.run(()=>pn({}));let n=[],i=[];const o=Mh({install(u){jl(o),o._a=u,u.provide(om,o),u.config.globalProperties.$pinia=o,i.forEach(h=>n.push(h)),i=[]},use(u){return this._a?n.push(u):i.push(u),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const am=()=>{};function jf(e,t,n,i=am){e.add(t);const o=()=>{e.delete(t)&&i()};return!n&&ap()&&Q_(o),o}function lo(e,...t){e.forEach(n=>{n(...t)})}const f0=e=>e(),$f=Symbol(),Cc=Symbol();function ah(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],o=e[n];oh(o)&&oh(i)&&e.hasOwnProperty(n)&&!un(i)&&!Fr(i)?e[n]=ah(o,i):e[n]=i}return e}const d0=Symbol();function g0(e){return!oh(e)||!Object.prototype.hasOwnProperty.call(e,d0)}const{assign:es}=Object;function p0(e){return!!(un(e)&&e.effect)}function m0(e,t,n,i){const{state:o,actions:u,getters:h}=t,f=n.state.value[e];let p;function _(){f||(n.state.value[e]=o?o():{});const v=wv(n.state.value[e]);return es(v,u,Object.keys(h||{}).reduce((x,S)=>(x[S]=Mh(Bn(()=>{jl(n);const C=n._s.get(e);return h[S].call(C,C)})),x),{}))}return p=um(e,_,t,n,i,!0),p}function um(e,t,n={},i,o,u){let h;const f=es({actions:{}},n),p={deep:!0};let _,v,x=new Set,S=new Set,C;const P=i.state.value[e];!u&&!P&&(i.state.value[e]={});let N;function O(E){let b;_=v=!1,typeof E=="function"?(E(i.state.value[e]),b={type:Ra.patchFunction,storeId:e,events:C}):(ah(i.state.value[e],E),b={type:Ra.patchObject,payload:E,storeId:e,events:C});const I=N=Symbol();Io().then(()=>{N===I&&(_=!0)}),v=!0,lo(x,b,i.state.value[e])}const j=u?function(){const{state:b}=n,I=b?b():{};this.$patch(R=>{es(R,I)})}:am;function U(){h.stop(),x.clear(),S.clear(),i._s.delete(e)}const nt=(E,b="")=>{if($f in E)return E[Cc]=b,E;const I=function(){jl(i);const R=Array.from(arguments),M=new Set,G=new Set;function Z(V){M.add(V)}function W(V){G.add(V)}lo(S,{args:R,name:I[Cc],store:tt,after:Z,onError:W});let $;try{$=E.apply(this&&this.$id===e?this:tt,R)}catch(V){throw lo(G,V),V}return $ instanceof Promise?$.then(V=>(lo(M,V),V)).catch(V=>(lo(G,V),Promise.reject(V))):(lo(M,$),$)};return I[$f]=!0,I[Cc]=b,I},ct={_p:i,$id:e,$onAction:jf.bind(null,S),$patch:O,$reset:j,$subscribe(E,b={}){const I=jf(x,E,b.detached,()=>R()),R=h.run(()=>Oi(()=>i.state.value[e],M=>{(b.flush==="sync"?v:_)&&E({storeId:e,type:Ra.direct,events:C},M)},es({},p,b)));return I},$dispose:U},tt=ql(ct);i._s.set(e,tt);const st=(i._a&&i._a.runWithContext||f0)(()=>i._e.run(()=>(h=op()).run(()=>t({action:nt}))));for(const E in st){const b=st[E];if(un(b)&&!p0(b)||Fr(b))u||(P&&g0(b)&&(un(b)?b.value=P[E]:ah(b,P[E])),i.state.value[e][E]=b);else if(typeof b=="function"){const I=nt(b,E);st[E]=I,f.actions[E]=b}}return es(tt,st),es(ke(tt),st),Object.defineProperty(tt,"$state",{get:()=>i.state.value[e],set:E=>{O(b=>{es(b,E)})}}),i._p.forEach(E=>{es(tt,h.run(()=>E({store:tt,app:i._a,pinia:i,options:f})))}),P&&u&&n.hydrate&&n.hydrate(tt.$state,P),_=!0,v=!0,tt}function _0(e,t,n){let i;const o=typeof t=="function";i=o?n:t;function u(h,f){const p=Pv();return h=h||(p?Na(om,null):null),h&&jl(h),h=sm,h._s.has(e)||(o?um(e,t,i,h):m0(e,i,h)),h._s.get(e)}return u.$id=e,u}var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tc={exports:{}};var Xf;function v0(){return Xf||(Xf=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(i,o,u){function h(_,v){if(!o[_]){if(!i[_]){var x=typeof wu=="function"&&wu;if(!v&&x)return x(_,!0);if(f)return f(_,!0);var S=new Error("Cannot find module '"+_+"'");throw S.code="MODULE_NOT_FOUND",S}var C=o[_]={exports:{}};i[_][0].call(C.exports,function(P){var N=i[_][1][P];return h(N||P)},C,C.exports,n,i,o,u)}return o[_].exports}for(var f=typeof wu=="function"&&wu,p=0;p<u.length;p++)h(u[p]);return h})({1:[function(n,i,o){(function(u){var h=u.MutationObserver||u.WebKitMutationObserver,f;if(h){var p=0,_=new h(P),v=u.document.createTextNode("");_.observe(v,{characterData:!0}),f=function(){v.data=p=++p%2}}else if(!u.setImmediate&&typeof u.MessageChannel<"u"){var x=new u.MessageChannel;x.port1.onmessage=P,f=function(){x.port2.postMessage(0)}}else"document"in u&&"onreadystatechange"in u.document.createElement("script")?f=function(){var O=u.document.createElement("script");O.onreadystatechange=function(){P(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},u.document.documentElement.appendChild(O)}:f=function(){setTimeout(P,0)};var S,C=[];function P(){S=!0;for(var O,j,U=C.length;U;){for(j=C,C=[],O=-1;++O<U;)j[O]();U=C.length}S=!1}i.exports=N;function N(O){C.push(O)===1&&!S&&f()}}).call(this,typeof bu<"u"?bu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,i,o){var u=n(1);function h(){}var f={},p=["REJECTED"],_=["FULFILLED"],v=["PENDING"];i.exports=x;function x(tt){if(typeof tt!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,tt!==h&&N(this,tt)}x.prototype.catch=function(tt){return this.then(null,tt)},x.prototype.then=function(tt,pt){if(typeof tt!="function"&&this.state===_||typeof pt!="function"&&this.state===p)return this;var st=new this.constructor(h);if(this.state!==v){var E=this.state===_?tt:pt;C(st,E,this.outcome)}else this.queue.push(new S(st,tt,pt));return st};function S(tt,pt,st){this.promise=tt,typeof pt=="function"&&(this.onFulfilled=pt,this.callFulfilled=this.otherCallFulfilled),typeof st=="function"&&(this.onRejected=st,this.callRejected=this.otherCallRejected)}S.prototype.callFulfilled=function(tt){f.resolve(this.promise,tt)},S.prototype.otherCallFulfilled=function(tt){C(this.promise,this.onFulfilled,tt)},S.prototype.callRejected=function(tt){f.reject(this.promise,tt)},S.prototype.otherCallRejected=function(tt){C(this.promise,this.onRejected,tt)};function C(tt,pt,st){u(function(){var E;try{E=pt(st)}catch(b){return f.reject(tt,b)}E===tt?f.reject(tt,new TypeError("Cannot resolve promise with itself")):f.resolve(tt,E)})}f.resolve=function(tt,pt){var st=O(P,pt);if(st.status==="error")return f.reject(tt,st.value);var E=st.value;if(E)N(tt,E);else{tt.state=_,tt.outcome=pt;for(var b=-1,I=tt.queue.length;++b<I;)tt.queue[b].callFulfilled(pt)}return tt},f.reject=function(tt,pt){tt.state=p,tt.outcome=pt;for(var st=-1,E=tt.queue.length;++st<E;)tt.queue[st].callRejected(pt);return tt};function P(tt){var pt=tt&&tt.then;if(tt&&(typeof tt=="object"||typeof tt=="function")&&typeof pt=="function")return function(){pt.apply(tt,arguments)}}function N(tt,pt){var st=!1;function E(M){st||(st=!0,f.reject(tt,M))}function b(M){st||(st=!0,f.resolve(tt,M))}function I(){pt(b,E)}var R=O(I);R.status==="error"&&E(R.value)}function O(tt,pt){var st={};try{st.value=tt(pt),st.status="success"}catch(E){st.status="error",st.value=E}return st}x.resolve=j;function j(tt){return tt instanceof this?tt:f.resolve(new this(h),tt)}x.reject=U;function U(tt){var pt=new this(h);return f.reject(pt,tt)}x.all=nt;function nt(tt){var pt=this;if(Object.prototype.toString.call(tt)!=="[object Array]")return this.reject(new TypeError("must be an array"));var st=tt.length,E=!1;if(!st)return this.resolve([]);for(var b=new Array(st),I=0,R=-1,M=new this(h);++R<st;)G(tt[R],R);return M;function G(Z,W){pt.resolve(Z).then($,function(V){E||(E=!0,f.reject(M,V))});function $(V){b[W]=V,++I===st&&!E&&(E=!0,f.resolve(M,b))}}}x.race=ct;function ct(tt){var pt=this;if(Object.prototype.toString.call(tt)!=="[object Array]")return this.reject(new TypeError("must be an array"));var st=tt.length,E=!1;if(!st)return this.resolve([]);for(var b=-1,I=new this(h);++b<st;)R(tt[b]);return I;function R(M){pt.resolve(M).then(function(G){E||(E=!0,f.resolve(I,G))},function(G){E||(E=!0,f.reject(I,G))})}}},{1:1}],3:[function(n,i,o){(function(u){typeof u.Promise!="function"&&(u.Promise=n(2))}).call(this,typeof bu<"u"?bu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,i,o){var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};function h(q,ht){if(!(q instanceof ht))throw new TypeError("Cannot call a class as a function")}function f(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var p=f();function _(){try{if(!p||!p.open)return!1;var q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ht=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!q||ht)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function v(q,ht){q=q||[],ht=ht||{};try{return new Blob(q,ht)}catch(ot){if(ot.name!=="TypeError")throw ot;for(var X=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,_t=new X,yt=0;yt<q.length;yt+=1)_t.append(q[yt]);return _t.getBlob(ht.type)}}typeof Promise>"u"&&n(3);var x=Promise;function S(q,ht){ht&&q.then(function(X){ht(null,X)},function(X){ht(X)})}function C(q,ht,X){typeof ht=="function"&&q.then(ht),typeof X=="function"&&q.catch(X)}function P(q){return typeof q!="string"&&(console.warn(q+" used as a key, but it is not a string."),q=String(q)),q}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var O="local-forage-detect-blob-support",j=void 0,U={},nt=Object.prototype.toString,ct="readonly",tt="readwrite";function pt(q){for(var ht=q.length,X=new ArrayBuffer(ht),_t=new Uint8Array(X),yt=0;yt<ht;yt++)_t[yt]=q.charCodeAt(yt);return X}function st(q){return new x(function(ht){var X=q.transaction(O,tt),_t=v([""]);X.objectStore(O).put(_t,"key"),X.onabort=function(yt){yt.preventDefault(),yt.stopPropagation(),ht(!1)},X.oncomplete=function(){var yt=navigator.userAgent.match(/Chrome\/(\d+)/),ot=navigator.userAgent.match(/Edge\//);ht(ot||!yt||parseInt(yt[1],10)>=43)}}).catch(function(){return!1})}function E(q){return typeof j=="boolean"?x.resolve(j):st(q).then(function(ht){return j=ht,j})}function b(q){var ht=U[q.name],X={};X.promise=new x(function(_t,yt){X.resolve=_t,X.reject=yt}),ht.deferredOperations.push(X),ht.dbReady?ht.dbReady=ht.dbReady.then(function(){return X.promise}):ht.dbReady=X.promise}function I(q){var ht=U[q.name],X=ht.deferredOperations.pop();if(X)return X.resolve(),X.promise}function R(q,ht){var X=U[q.name],_t=X.deferredOperations.pop();if(_t)return _t.reject(ht),_t.promise}function M(q,ht){return new x(function(X,_t){if(U[q.name]=U[q.name]||bt(),q.db)if(ht)b(q),q.db.close();else return X(q.db);var yt=[q.name];ht&&yt.push(q.version);var ot=p.open.apply(p,yt);ht&&(ot.onupgradeneeded=function(At){var Bt=ot.result;try{Bt.createObjectStore(q.storeName),At.oldVersion<=1&&Bt.createObjectStore(O)}catch(Vt){if(Vt.name==="ConstraintError")console.warn('The database "'+q.name+'" has been upgraded from version '+At.oldVersion+" to version "+At.newVersion+', but the storage "'+q.storeName+'" already exists.');else throw Vt}}),ot.onerror=function(At){At.preventDefault(),_t(ot.error)},ot.onsuccess=function(){var At=ot.result;At.onversionchange=function(Bt){Bt.target.close()},X(At),I(q)}})}function G(q){return M(q,!1)}function Z(q){return M(q,!0)}function W(q,ht){if(!q.db)return!0;var X=!q.db.objectStoreNames.contains(q.storeName),_t=q.version<q.db.version,yt=q.version>q.db.version;if(_t&&(q.version!==ht&&console.warn('The database "'+q.name+`" can't be downgraded from version `+q.db.version+" to version "+q.version+"."),q.version=q.db.version),yt||X){if(X){var ot=q.db.version+1;ot>q.version&&(q.version=ot)}return!0}return!1}function $(q){return new x(function(ht,X){var _t=new FileReader;_t.onerror=X,_t.onloadend=function(yt){var ot=btoa(yt.target.result||"");ht({__local_forage_encoded_blob:!0,data:ot,type:q.type})},_t.readAsBinaryString(q)})}function V(q){var ht=pt(atob(q.data));return v([ht],{type:q.type})}function Y(q){return q&&q.__local_forage_encoded_blob}function ut(q){var ht=this,X=ht._initReady().then(function(){var _t=U[ht._dbInfo.name];if(_t&&_t.dbReady)return _t.dbReady});return C(X,q,q),X}function K(q){b(q);for(var ht=U[q.name],X=ht.forages,_t=0;_t<X.length;_t++){var yt=X[_t];yt._dbInfo.db&&(yt._dbInfo.db.close(),yt._dbInfo.db=null)}return q.db=null,G(q).then(function(ot){return q.db=ot,W(q)?Z(q):ot}).then(function(ot){q.db=ht.db=ot;for(var At=0;At<X.length;At++)X[At]._dbInfo.db=ot}).catch(function(ot){throw R(q,ot),ot})}function it(q,ht,X,_t){_t===void 0&&(_t=1);try{var yt=q.db.transaction(q.storeName,ht);X(null,yt)}catch(ot){if(_t>0&&(!q.db||ot.name==="InvalidStateError"||ot.name==="NotFoundError"))return x.resolve().then(function(){if(!q.db||ot.name==="NotFoundError"&&!q.db.objectStoreNames.contains(q.storeName)&&q.version<=q.db.version)return q.db&&(q.version=q.db.version+1),Z(q)}).then(function(){return K(q).then(function(){it(q,ht,X,_t-1)})}).catch(X);X(ot)}}function bt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function wt(q){var ht=this,X={db:null};if(q)for(var _t in q)X[_t]=q[_t];var yt=U[X.name];yt||(yt=bt(),U[X.name]=yt),yt.forages.push(ht),ht._initReady||(ht._initReady=ht.ready,ht.ready=ut);var ot=[];function At(){return x.resolve()}for(var Bt=0;Bt<yt.forages.length;Bt++){var Vt=yt.forages[Bt];Vt!==ht&&ot.push(Vt._initReady().catch(At))}var qt=yt.forages.slice(0);return x.all(ot).then(function(){return X.db=yt.db,G(X)}).then(function(Wt){return X.db=Wt,W(X,ht._defaultConfig.version)?Z(X):Wt}).then(function(Wt){X.db=yt.db=Wt,ht._dbInfo=X;for(var ne=0;ne<qt.length;ne++){var de=qt[ne];de!==ht&&(de._dbInfo.db=X.db,de._dbInfo.version=X.version)}})}function Et(q,ht){var X=this;q=P(q);var _t=new x(function(yt,ot){X.ready().then(function(){it(X._dbInfo,ct,function(At,Bt){if(At)return ot(At);try{var Vt=Bt.objectStore(X._dbInfo.storeName),qt=Vt.get(q);qt.onsuccess=function(){var Wt=qt.result;Wt===void 0&&(Wt=null),Y(Wt)&&(Wt=V(Wt)),yt(Wt)},qt.onerror=function(){ot(qt.error)}}catch(Wt){ot(Wt)}})}).catch(ot)});return S(_t,ht),_t}function Tt(q,ht){var X=this,_t=new x(function(yt,ot){X.ready().then(function(){it(X._dbInfo,ct,function(At,Bt){if(At)return ot(At);try{var Vt=Bt.objectStore(X._dbInfo.storeName),qt=Vt.openCursor(),Wt=1;qt.onsuccess=function(){var ne=qt.result;if(ne){var de=ne.value;Y(de)&&(de=V(de));var ce=q(de,ne.key,Wt++);ce!==void 0?yt(ce):ne.continue()}else yt()},qt.onerror=function(){ot(qt.error)}}catch(ne){ot(ne)}})}).catch(ot)});return S(_t,ht),_t}function Pt(q,ht,X){var _t=this;q=P(q);var yt=new x(function(ot,At){var Bt;_t.ready().then(function(){return Bt=_t._dbInfo,nt.call(ht)==="[object Blob]"?E(Bt.db).then(function(Vt){return Vt?ht:$(ht)}):ht}).then(function(Vt){it(_t._dbInfo,tt,function(qt,Wt){if(qt)return At(qt);try{var ne=Wt.objectStore(_t._dbInfo.storeName);Vt===null&&(Vt=void 0);var de=ne.put(Vt,q);Wt.oncomplete=function(){Vt===void 0&&(Vt=null),ot(Vt)},Wt.onabort=Wt.onerror=function(){var ce=de.error?de.error:de.transaction.error;At(ce)}}catch(ce){At(ce)}})}).catch(At)});return S(yt,X),yt}function Yt(q,ht){var X=this;q=P(q);var _t=new x(function(yt,ot){X.ready().then(function(){it(X._dbInfo,tt,function(At,Bt){if(At)return ot(At);try{var Vt=Bt.objectStore(X._dbInfo.storeName),qt=Vt.delete(q);Bt.oncomplete=function(){yt()},Bt.onerror=function(){ot(qt.error)},Bt.onabort=function(){var Wt=qt.error?qt.error:qt.transaction.error;ot(Wt)}}catch(Wt){ot(Wt)}})}).catch(ot)});return S(_t,ht),_t}function et(q){var ht=this,X=new x(function(_t,yt){ht.ready().then(function(){it(ht._dbInfo,tt,function(ot,At){if(ot)return yt(ot);try{var Bt=At.objectStore(ht._dbInfo.storeName),Vt=Bt.clear();At.oncomplete=function(){_t()},At.onabort=At.onerror=function(){var qt=Vt.error?Vt.error:Vt.transaction.error;yt(qt)}}catch(qt){yt(qt)}})}).catch(yt)});return S(X,q),X}function Qt(q){var ht=this,X=new x(function(_t,yt){ht.ready().then(function(){it(ht._dbInfo,ct,function(ot,At){if(ot)return yt(ot);try{var Bt=At.objectStore(ht._dbInfo.storeName),Vt=Bt.count();Vt.onsuccess=function(){_t(Vt.result)},Vt.onerror=function(){yt(Vt.error)}}catch(qt){yt(qt)}})}).catch(yt)});return S(X,q),X}function Ft(q,ht){var X=this,_t=new x(function(yt,ot){if(q<0){yt(null);return}X.ready().then(function(){it(X._dbInfo,ct,function(At,Bt){if(At)return ot(At);try{var Vt=Bt.objectStore(X._dbInfo.storeName),qt=!1,Wt=Vt.openKeyCursor();Wt.onsuccess=function(){var ne=Wt.result;if(!ne){yt(null);return}q===0||qt?yt(ne.key):(qt=!0,ne.advance(q))},Wt.onerror=function(){ot(Wt.error)}}catch(ne){ot(ne)}})}).catch(ot)});return S(_t,ht),_t}function Ct(q){var ht=this,X=new x(function(_t,yt){ht.ready().then(function(){it(ht._dbInfo,ct,function(ot,At){if(ot)return yt(ot);try{var Bt=At.objectStore(ht._dbInfo.storeName),Vt=Bt.openKeyCursor(),qt=[];Vt.onsuccess=function(){var Wt=Vt.result;if(!Wt){_t(qt);return}qt.push(Wt.key),Wt.continue()},Vt.onerror=function(){yt(Vt.error)}}catch(Wt){yt(Wt)}})}).catch(yt)});return S(X,q),X}function T(q,ht){ht=N.apply(this,arguments);var X=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||X.name,q.storeName=q.storeName||X.storeName);var _t=this,yt;if(!q.name)yt=x.reject("Invalid arguments");else{var ot=q.name===X.name&&_t._dbInfo.db,At=ot?x.resolve(_t._dbInfo.db):G(q).then(function(Bt){var Vt=U[q.name],qt=Vt.forages;Vt.db=Bt;for(var Wt=0;Wt<qt.length;Wt++)qt[Wt]._dbInfo.db=Bt;return Bt});q.storeName?yt=At.then(function(Bt){if(Bt.objectStoreNames.contains(q.storeName)){var Vt=Bt.version+1;b(q);var qt=U[q.name],Wt=qt.forages;Bt.close();for(var ne=0;ne<Wt.length;ne++){var de=Wt[ne];de._dbInfo.db=null,de._dbInfo.version=Vt}var ce=new x(function(be,Pe){var Fe=p.open(q.name,Vt);Fe.onerror=function(Sn){var oi=Fe.result;oi.close(),Pe(Sn)},Fe.onupgradeneeded=function(){var Sn=Fe.result;Sn.deleteObjectStore(q.storeName)},Fe.onsuccess=function(){var Sn=Fe.result;Sn.close(),be(Sn)}});return ce.then(function(be){qt.db=be;for(var Pe=0;Pe<Wt.length;Pe++){var Fe=Wt[Pe];Fe._dbInfo.db=be,I(Fe._dbInfo)}}).catch(function(be){throw(R(q,be)||x.resolve()).catch(function(){}),be})}}):yt=At.then(function(Bt){b(q);var Vt=U[q.name],qt=Vt.forages;Bt.close();for(var Wt=0;Wt<qt.length;Wt++){var ne=qt[Wt];ne._dbInfo.db=null}var de=new x(function(ce,be){var Pe=p.deleteDatabase(q.name);Pe.onerror=function(){var Fe=Pe.result;Fe&&Fe.close(),be(Pe.error)},Pe.onblocked=function(){console.warn('dropInstance blocked for database "'+q.name+'" until all open connections are closed')},Pe.onsuccess=function(){var Fe=Pe.result;Fe&&Fe.close(),ce(Fe)}});return de.then(function(ce){Vt.db=ce;for(var be=0;be<qt.length;be++){var Pe=qt[be];I(Pe._dbInfo)}}).catch(function(ce){throw(R(q,ce)||x.resolve()).catch(function(){}),ce})})}return S(yt,ht),yt}var Q={_driver:"asyncStorage",_initStorage:wt,_support:_(),iterate:Tt,getItem:Et,setItem:Pt,removeItem:Yt,clear:et,length:Qt,key:Ft,keys:Ct,dropInstance:T};function dt(){return typeof openDatabase=="function"}var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vt="~~local_forage_type~",Nt=/^~~local_forage_type~([^~]+)~/,Ot="__lfsc__:",ft=Ot.length,Rt="arbf",Lt="blob",Ht="si08",Zt="ui08",Mt="uic8",Xt="si16",Jt="si32",se="ur16",Gt="ui32",Ne="fl32",ie="fl64",$t=ft+Rt.length,Se=Object.prototype.toString;function Le(q){var ht=q.length*.75,X=q.length,_t,yt=0,ot,At,Bt,Vt;q[q.length-1]==="="&&(ht--,q[q.length-2]==="="&&ht--);var qt=new ArrayBuffer(ht),Wt=new Uint8Array(qt);for(_t=0;_t<X;_t+=4)ot=gt.indexOf(q[_t]),At=gt.indexOf(q[_t+1]),Bt=gt.indexOf(q[_t+2]),Vt=gt.indexOf(q[_t+3]),Wt[yt++]=ot<<2|At>>4,Wt[yt++]=(At&15)<<4|Bt>>2,Wt[yt++]=(Bt&3)<<6|Vt&63;return qt}function ln(q){var ht=new Uint8Array(q),X="",_t;for(_t=0;_t<ht.length;_t+=3)X+=gt[ht[_t]>>2],X+=gt[(ht[_t]&3)<<4|ht[_t+1]>>4],X+=gt[(ht[_t+1]&15)<<2|ht[_t+2]>>6],X+=gt[ht[_t+2]&63];return ht.length%3===2?X=X.substring(0,X.length-1)+"=":ht.length%3===1&&(X=X.substring(0,X.length-2)+"=="),X}function Kt(q,ht){var X="";if(q&&(X=Se.call(q)),q&&(X==="[object ArrayBuffer]"||q.buffer&&Se.call(q.buffer)==="[object ArrayBuffer]")){var _t,yt=Ot;q instanceof ArrayBuffer?(_t=q,yt+=Rt):(_t=q.buffer,X==="[object Int8Array]"?yt+=Ht:X==="[object Uint8Array]"?yt+=Zt:X==="[object Uint8ClampedArray]"?yt+=Mt:X==="[object Int16Array]"?yt+=Xt:X==="[object Uint16Array]"?yt+=se:X==="[object Int32Array]"?yt+=Jt:X==="[object Uint32Array]"?yt+=Gt:X==="[object Float32Array]"?yt+=Ne:X==="[object Float64Array]"?yt+=ie:ht(new Error("Failed to get type for BinaryArray"))),ht(yt+ln(_t))}else if(X==="[object Blob]"){var ot=new FileReader;ot.onload=function(){var At=vt+q.type+"~"+ln(this.result);ht(Ot+Lt+At)},ot.readAsArrayBuffer(q)}else try{ht(JSON.stringify(q))}catch(At){console.error("Couldn't convert value into a JSON string: ",q),ht(null,At)}}function on(q){if(q.substring(0,ft)!==Ot)return JSON.parse(q);var ht=q.substring($t),X=q.substring(ft,$t),_t;if(X===Lt&&Nt.test(ht)){var yt=ht.match(Nt);_t=yt[1],ht=ht.substring(yt[0].length)}var ot=Le(ht);switch(X){case Rt:return ot;case Lt:return v([ot],{type:_t});case Ht:return new Int8Array(ot);case Zt:return new Uint8Array(ot);case Mt:return new Uint8ClampedArray(ot);case Xt:return new Int16Array(ot);case se:return new Uint16Array(ot);case Jt:return new Int32Array(ot);case Gt:return new Uint32Array(ot);case Ne:return new Float32Array(ot);case ie:return new Float64Array(ot);default:throw new Error("Unkown type: "+X)}}var cn={serialize:Kt,deserialize:on,stringToBuffer:Le,bufferToString:ln};function hn(q,ht,X,_t){q.executeSql("CREATE TABLE IF NOT EXISTS "+ht.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],X,_t)}function tn(q){var ht=this,X={db:null};if(q)for(var _t in q)X[_t]=typeof q[_t]!="string"?q[_t].toString():q[_t];var yt=new x(function(ot,At){try{X.db=openDatabase(X.name,String(X.version),X.description,X.size)}catch(Bt){return At(Bt)}X.db.transaction(function(Bt){hn(Bt,X,function(){ht._dbInfo=X,ot()},function(Vt,qt){At(qt)})},At)});return X.serializer=cn,yt}function je(q,ht,X,_t,yt,ot){q.executeSql(X,_t,yt,function(At,Bt){Bt.code===Bt.SYNTAX_ERR?At.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ht.storeName],function(Vt,qt){qt.rows.length?ot(Vt,Bt):hn(Vt,ht,function(){Vt.executeSql(X,_t,yt,ot)},ot)},ot):ot(At,Bt)},ot)}function fn(q,ht){var X=this;q=P(q);var _t=new x(function(yt,ot){X.ready().then(function(){var At=X._dbInfo;At.db.transaction(function(Bt){je(Bt,At,"SELECT * FROM "+At.storeName+" WHERE key = ? LIMIT 1",[q],function(Vt,qt){var Wt=qt.rows.length?qt.rows.item(0).value:null;Wt&&(Wt=At.serializer.deserialize(Wt)),yt(Wt)},function(Vt,qt){ot(qt)})})}).catch(ot)});return S(_t,ht),_t}function Zr(q,ht){var X=this,_t=new x(function(yt,ot){X.ready().then(function(){var At=X._dbInfo;At.db.transaction(function(Bt){je(Bt,At,"SELECT * FROM "+At.storeName,[],function(Vt,qt){for(var Wt=qt.rows,ne=Wt.length,de=0;de<ne;de++){var ce=Wt.item(de),be=ce.value;if(be&&(be=At.serializer.deserialize(be)),be=q(be,ce.key,de+1),be!==void 0){yt(be);return}}yt()},function(Vt,qt){ot(qt)})})}).catch(ot)});return S(_t,ht),_t}function F(q,ht,X,_t){var yt=this;q=P(q);var ot=new x(function(At,Bt){yt.ready().then(function(){ht===void 0&&(ht=null);var Vt=ht,qt=yt._dbInfo;qt.serializer.serialize(ht,function(Wt,ne){ne?Bt(ne):qt.db.transaction(function(de){je(de,qt,"INSERT OR REPLACE INTO "+qt.storeName+" (key, value) VALUES (?, ?)",[q,Wt],function(){At(Vt)},function(ce,be){Bt(be)})},function(de){if(de.code===de.QUOTA_ERR){if(_t>0){At(F.apply(yt,[q,Vt,X,_t-1]));return}Bt(de)}})})}).catch(Bt)});return S(ot,X),ot}function H(q,ht,X){return F.apply(this,[q,ht,X,1])}function at(q,ht){var X=this;q=P(q);var _t=new x(function(yt,ot){X.ready().then(function(){var At=X._dbInfo;At.db.transaction(function(Bt){je(Bt,At,"DELETE FROM "+At.storeName+" WHERE key = ?",[q],function(){yt()},function(Vt,qt){ot(qt)})})}).catch(ot)});return S(_t,ht),_t}function It(q){var ht=this,X=new x(function(_t,yt){ht.ready().then(function(){var ot=ht._dbInfo;ot.db.transaction(function(At){je(At,ot,"DELETE FROM "+ot.storeName,[],function(){_t()},function(Bt,Vt){yt(Vt)})})}).catch(yt)});return S(X,q),X}function xt(q){var ht=this,X=new x(function(_t,yt){ht.ready().then(function(){var ot=ht._dbInfo;ot.db.transaction(function(At){je(At,ot,"SELECT COUNT(key) as c FROM "+ot.storeName,[],function(Bt,Vt){var qt=Vt.rows.item(0).c;_t(qt)},function(Bt,Vt){yt(Vt)})})}).catch(yt)});return S(X,q),X}function ae(q,ht){var X=this,_t=new x(function(yt,ot){X.ready().then(function(){var At=X._dbInfo;At.db.transaction(function(Bt){je(Bt,At,"SELECT key FROM "+At.storeName+" WHERE id = ? LIMIT 1",[q+1],function(Vt,qt){var Wt=qt.rows.length?qt.rows.item(0).key:null;yt(Wt)},function(Vt,qt){ot(qt)})})}).catch(ot)});return S(_t,ht),_t}function Ce(q){var ht=this,X=new x(function(_t,yt){ht.ready().then(function(){var ot=ht._dbInfo;ot.db.transaction(function(At){je(At,ot,"SELECT key FROM "+ot.storeName,[],function(Bt,Vt){for(var qt=[],Wt=0;Wt<Vt.rows.length;Wt++)qt.push(Vt.rows.item(Wt).key);_t(qt)},function(Bt,Vt){yt(Vt)})})}).catch(yt)});return S(X,q),X}function Ke(q){return new x(function(ht,X){q.transaction(function(_t){_t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(yt,ot){for(var At=[],Bt=0;Bt<ot.rows.length;Bt++)At.push(ot.rows.item(Bt).name);ht({db:q,storeNames:At})},function(yt,ot){X(ot)})},function(_t){X(_t)})})}function kn(q,ht){ht=N.apply(this,arguments);var X=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||X.name,q.storeName=q.storeName||X.storeName);var _t=this,yt;return q.name?yt=new x(function(ot){var At;q.name===X.name?At=_t._dbInfo.db:At=openDatabase(q.name,"","",0),q.storeName?ot({db:At,storeNames:[q.storeName]}):ot(Ke(At))}).then(function(ot){return new x(function(At,Bt){ot.db.transaction(function(Vt){function qt(ce){return new x(function(be,Pe){Vt.executeSql("DROP TABLE IF EXISTS "+ce,[],function(){be()},function(Fe,Sn){Pe(Sn)})})}for(var Wt=[],ne=0,de=ot.storeNames.length;ne<de;ne++)Wt.push(qt(ot.storeNames[ne]));x.all(Wt).then(function(){At()}).catch(function(ce){Bt(ce)})},function(Vt){Bt(Vt)})})}):yt=x.reject("Invalid arguments"),S(yt,ht),yt}var xn={_driver:"webSQLStorage",_initStorage:tn,_support:dt(),iterate:Zr,getItem:fn,setItem:H,removeItem:at,clear:It,length:xt,key:ae,keys:Ce,dropInstance:kn};function qn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ze(q,ht){var X=q.name+"/";return q.storeName!==ht.storeName&&(X+=q.storeName+"/"),X}function ee(){var q="_localforage_support_test";try{return localStorage.setItem(q,!0),localStorage.removeItem(q),!1}catch{return!0}}function On(){return!ee()||localStorage.length>0}function Mn(q){var ht=this,X={};if(q)for(var _t in q)X[_t]=q[_t];return X.keyPrefix=ze(q,ht._defaultConfig),On()?(ht._dbInfo=X,X.serializer=cn,x.resolve()):x.reject()}function Kn(q){var ht=this,X=ht.ready().then(function(){for(var _t=ht._dbInfo.keyPrefix,yt=localStorage.length-1;yt>=0;yt--){var ot=localStorage.key(yt);ot.indexOf(_t)===0&&localStorage.removeItem(ot)}});return S(X,q),X}function vi(q,ht){var X=this;q=P(q);var _t=X.ready().then(function(){var yt=X._dbInfo,ot=localStorage.getItem(yt.keyPrefix+q);return ot&&(ot=yt.serializer.deserialize(ot)),ot});return S(_t,ht),_t}function Te(q,ht){var X=this,_t=X.ready().then(function(){for(var yt=X._dbInfo,ot=yt.keyPrefix,At=ot.length,Bt=localStorage.length,Vt=1,qt=0;qt<Bt;qt++){var Wt=localStorage.key(qt);if(Wt.indexOf(ot)===0){var ne=localStorage.getItem(Wt);if(ne&&(ne=yt.serializer.deserialize(ne)),ne=q(ne,Wt.substring(At),Vt++),ne!==void 0)return ne}}});return S(_t,ht),_t}function Bi(q,ht){var X=this,_t=X.ready().then(function(){var yt=X._dbInfo,ot;try{ot=localStorage.key(q)}catch{ot=null}return ot&&(ot=ot.substring(yt.keyPrefix.length)),ot});return S(_t,ht),_t}function dn(q){var ht=this,X=ht.ready().then(function(){for(var _t=ht._dbInfo,yt=localStorage.length,ot=[],At=0;At<yt;At++){var Bt=localStorage.key(At);Bt.indexOf(_t.keyPrefix)===0&&ot.push(Bt.substring(_t.keyPrefix.length))}return ot});return S(X,q),X}function Jn(q){var ht=this,X=ht.keys().then(function(_t){return _t.length});return S(X,q),X}function zi(q,ht){var X=this;q=P(q);var _t=X.ready().then(function(){var yt=X._dbInfo;localStorage.removeItem(yt.keyPrefix+q)});return S(_t,ht),_t}function ys(q,ht,X){var _t=this;q=P(q);var yt=_t.ready().then(function(){ht===void 0&&(ht=null);var ot=ht;return new x(function(At,Bt){var Vt=_t._dbInfo;Vt.serializer.serialize(ht,function(qt,Wt){if(Wt)Bt(Wt);else try{localStorage.setItem(Vt.keyPrefix+q,qt),At(ot)}catch(ne){(ne.name==="QuotaExceededError"||ne.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Bt(ne),Bt(ne)}})})});return S(yt,X),yt}function Wr(q,ht){if(ht=N.apply(this,arguments),q=typeof q!="function"&&q||{},!q.name){var X=this.config();q.name=q.name||X.name,q.storeName=q.storeName||X.storeName}var _t=this,yt;return q.name?yt=new x(function(ot){q.storeName?ot(ze(q,_t._defaultConfig)):ot(q.name+"/")}).then(function(ot){for(var At=localStorage.length-1;At>=0;At--){var Bt=localStorage.key(At);Bt.indexOf(ot)===0&&localStorage.removeItem(Bt)}}):yt=x.reject("Invalid arguments"),S(yt,ht),yt}var vr={_driver:"localStorageWrapper",_initStorage:Mn,_support:qn(),iterate:Te,getItem:vi,setItem:ys,removeItem:zi,clear:Kn,length:Jn,key:Bi,keys:dn,dropInstance:Wr},Je=function(ht,X){return ht===X||typeof ht=="number"&&typeof X=="number"&&isNaN(ht)&&isNaN(X)},qo=function(ht,X){for(var _t=ht.length,yt=0;yt<_t;){if(Je(ht[yt],X))return!0;yt++}return!1},yr=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},yi={},Xi={},xi={INDEXEDDB:Q,WEBSQL:xn,LOCALSTORAGE:vr},xs=[xi.INDEXEDDB._driver,xi.WEBSQL._driver,xi.LOCALSTORAGE._driver],xr=["dropInstance"],br=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(xr),bn={description:"",driver:xs.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qi(q,ht){q[ht]=function(){var X=arguments;return q.ready().then(function(){return q[ht].apply(q,X)})}}function Ki(){for(var q=1;q<arguments.length;q++){var ht=arguments[q];if(ht)for(var X in ht)ht.hasOwnProperty(X)&&(yr(ht[X])?arguments[0][X]=ht[X].slice():arguments[0][X]=ht[X])}return arguments[0]}var si=(function(){function q(ht){h(this,q);for(var X in xi)if(xi.hasOwnProperty(X)){var _t=xi[X],yt=_t._driver;this[X]=yt,yi[yt]||this.defineDriver(_t)}this._defaultConfig=Ki({},bn),this._config=Ki({},this._defaultConfig,ht),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return q.prototype.config=function(X){if((typeof X>"u"?"undefined":u(X))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var _t in X){if(_t==="storeName"&&(X[_t]=X[_t].replace(/\W/g,"_")),_t==="version"&&typeof X[_t]!="number")return new Error("Database version must be a number.");this._config[_t]=X[_t]}return"driver"in X&&X.driver?this.setDriver(this._config.driver):!0}else return typeof X=="string"?this._config[X]:this._config},q.prototype.defineDriver=function(X,_t,yt){var ot=new x(function(At,Bt){try{var Vt=X._driver,qt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!X._driver){Bt(qt);return}for(var Wt=br.concat("_initStorage"),ne=0,de=Wt.length;ne<de;ne++){var ce=Wt[ne],be=!qo(xr,ce);if((be||X[ce])&&typeof X[ce]!="function"){Bt(qt);return}}var Pe=function(){for(var oi=function(bs){return function(){var Ji=new Error("Method "+bs+" is not implemented by the current driver"),Cn=x.reject(Ji);return S(Cn,arguments[arguments.length-1]),Cn}},wr=0,Er=xr.length;wr<Er;wr++){var De=xr[wr];X[De]||(X[De]=oi(De))}};Pe();var Fe=function(oi){yi[Vt]&&console.info("Redefining LocalForage driver: "+Vt),yi[Vt]=X,Xi[Vt]=oi,At()};"_support"in X?X._support&&typeof X._support=="function"?X._support().then(Fe,Bt):Fe(!!X._support):Fe(!0)}catch(Sn){Bt(Sn)}});return C(ot,_t,yt),ot},q.prototype.driver=function(){return this._driver||null},q.prototype.getDriver=function(X,_t,yt){var ot=yi[X]?x.resolve(yi[X]):x.reject(new Error("Driver not found."));return C(ot,_t,yt),ot},q.prototype.getSerializer=function(X){var _t=x.resolve(cn);return C(_t,X),_t},q.prototype.ready=function(X){var _t=this,yt=_t._driverSet.then(function(){return _t._ready===null&&(_t._ready=_t._initDriver()),_t._ready});return C(yt,X,X),yt},q.prototype.setDriver=function(X,_t,yt){var ot=this;yr(X)||(X=[X]);var At=this._getSupportedDrivers(X);function Bt(){ot._config.driver=ot.driver()}function Vt(ne){return ot._extend(ne),Bt(),ot._ready=ot._initStorage(ot._config),ot._ready}function qt(ne){return function(){var de=0;function ce(){for(;de<ne.length;){var be=ne[de];return de++,ot._dbInfo=null,ot._ready=null,ot.getDriver(be).then(Vt).catch(ce)}Bt();var Pe=new Error("No available storage method found.");return ot._driverSet=x.reject(Pe),ot._driverSet}return ce()}}var Wt=this._driverSet!==null?this._driverSet.catch(function(){return x.resolve()}):x.resolve();return this._driverSet=Wt.then(function(){var ne=At[0];return ot._dbInfo=null,ot._ready=null,ot.getDriver(ne).then(function(de){ot._driver=de._driver,Bt(),ot._wrapLibraryMethodsWithReady(),ot._initDriver=qt(At)})}).catch(function(){Bt();var ne=new Error("No available storage method found.");return ot._driverSet=x.reject(ne),ot._driverSet}),C(this._driverSet,_t,yt),this._driverSet},q.prototype.supports=function(X){return!!Xi[X]},q.prototype._extend=function(X){Ki(this,X)},q.prototype._getSupportedDrivers=function(X){for(var _t=[],yt=0,ot=X.length;yt<ot;yt++){var At=X[yt];this.supports(At)&&_t.push(At)}return _t},q.prototype._wrapLibraryMethodsWithReady=function(){for(var X=0,_t=br.length;X<_t;X++)qi(this,br[X])},q.prototype.createInstance=function(X){return new q(X)},q})(),we=new si;i.exports=we},{3:3}]},{},[4])(4)})})(Tc)),Tc.exports}var y0=v0();const Wu=$l(y0);Wu.config({name:"PAS-Cockpit",storeName:"pas_data"});const _s=_0("data",()=>{const e=pn([]),t=pn(null),n=pn(new Map),i=pn({bassin:"TOUS",circ:"TOUTES"}),o=pn(""),u=pn(null),h=pn(null),f=pn(!1),p=pn(!1),_=pn(null),v=pn("MAP"),x=pn({targetCount:12,weights:{ips:10,rep:10,inclusion:8,dist:4,eff:2}}),S=Bn(()=>[...new Set(e.value.map(K=>K.Bassin).filter(Boolean))].sort()),C=Bn(()=>{let K=e.value;return i.value.bassin!=="TOUS"&&(K=K.filter(it=>it.Bassin===i.value.bassin)),[...new Set(K.map(it=>it.Circonscription).filter(Boolean))].sort()}),P=Bn(()=>e.value.filter(K=>{if(o.value){const it=o.value.toLowerCase();if(!((K["Nom complet"]||"").toLowerCase().includes(it)||(K.Commune||"").toLowerCase().includes(it)||(K.UAI||"").toLowerCase().includes(it)))return!1}return!(i.value.bassin!=="TOUS"&&K.Bassin!==i.value.bassin||i.value.circ!=="TOUTES"&&K.Circonscription!==i.value.circ)})),N=Bn(()=>[...new Set(e.value.map(K=>K["Nom du PAS"]))].sort()),O=Bn(()=>[...new Set(P.value.map(it=>it["Nom du PAS"]))].sort()),j=Bn(()=>{const K={};return N.value.forEach(it=>{const bt=e.value.filter(gt=>gt["Nom du PAS"]===it);let wt=0,Et=0,Tt=0,Pt=0,Yt=0,et=0,Qt=0,Ft=0,Ct=0;const T={};bt.forEach(gt=>{const vt=gt["Effectifs (Archipel)"]||0;wt+=vt,gt.IPS>0&&(Et+=gt.IPS*vt,Tt+=vt),Pt+=gt["Indice d'loignement"]||0,gt.Degr==="2nd degr"?Ft++:Ct++;const Nt=gt["Education prioritaire (Archipel)"],Ot=gt.Territoire;Nt?.includes("REP+")?et++:(Nt?.includes("REP")||Ot&&(Ot.includes("CLA")||Ot.includes("TER")))&&Yt++,Qt+=gt.ULIS||0,gt.Circonscription&&(T[gt.Circonscription]=(T[gt.Circonscription]||0)+1)});const Q=Object.keys(T),dt=Q.length>0?Q.reduce((gt,vt)=>(T[gt]??0)>(T[vt]??0)?gt:vt):"";K[it]={name:it,schoolCount:bt.length,collegeCount:Ft,primaireCount:Ct,effectif:wt,ips:Tt?(Et/Tt).toFixed(1):"-",dist:bt.length?(Pt/bt.length).toFixed(2):0,dominantCirc:dt,repCount:Yt,repPlusCount:et,ulisCount:Qt}}),K}),U=Bn(()=>{const K=O.value,it=e.value.filter(Pt=>K.includes(Pt["Nom du PAS"]));let bt=0,wt=0,Et=0,Tt=0;return it.forEach(Pt=>{bt+=Pt["Effectifs (Archipel)"]||0,Pt.IPS>0&&(wt+=Pt.IPS*Pt["Effectifs (Archipel)"],Et+=Pt["Effectifs (Archipel)"]);const Yt=Pt["Education prioritaire (Archipel)"],et=Pt.Territoire;(Yt&&(Yt.includes("REP+")||Yt.includes("REP"))||et&&(et.includes("CLA")||et.includes("TER")))&&Tt++}),{ips:Et?(wt/Et).toFixed(1):"-",effectif:bt,repCount:Tt}});async function nt(){try{return f.value=!0,await Wu.setItem("schools_v2",JSON.parse(JSON.stringify(e.value))),p.value=!1,!0}catch(K){return console.error("Failed to save data:",K),!1}finally{f.value=!1}}async function ct(){try{const K=await Wu.getItem("schools_v2");return K&&Array.isArray(K)&&K.length>0?(e.value=K,!0):!1}catch(K){return console.error("Failed to load data from storage:",K),!1}}async function tt(){try{await Wu.removeItem("schools_v2"),window.location.reload()}catch(K){console.error("Failed to reset data:",K)}}function pt(K){e.value=K}function st(K){t.value=K}function E(K,it){const bt=e.value.find(wt=>wt.UAI===K);bt&&bt["Nom du PAS"]!==it&&(bt["Nom du PAS"]=it,p.value=!0)}function b(K,it){!it.trim()||K===it||(e.value.forEach(bt=>{bt["Nom du PAS"]===K&&(bt["Nom du PAS"]=it)}),p.value=!0,u.value===K&&(u.value=it))}function I(K,it){const bt=e.value.find(wt=>wt.UAI===K);bt&&it.trim()&&bt["Nom complet"]!==it&&(bt["Nom complet"]=it,p.value=!0)}function R(K,it){e.value.forEach(bt=>{bt["PAS.1.Collge de rattachement"]===K&&(bt["Nom du PAS"]=it)}),p.value=!0}function M(K,it,bt){const wt=e.value.find(Et=>Et.UAI===K);wt&&(wt["PAS.1.Collge de rattachement"]=it,bt&&(wt["Nom du PAS"]=bt),p.value=!0)}function G(K){v.value=K}function Z(K){o.value=K}function W(K,it){i.value[K]=it,K==="bassin"&&(i.value.circ="TOUTES"),u.value=null,h.value=null}function $(K){u.value=K,h.value=null}function V(K){if(!K){h.value=null;return}const it=e.value.find(bt=>bt.UAI===K);h.value=it||null,it&&(u.value=it["Nom du PAS"])}function Y(K){_.value=K}function ut(K){n.value=K}return{schools:e,sectorsGeoJson:t,rhData:n,filters:i,searchQuery:o,selectedPas:u,selectedSchool:h,isComputing:f,hasUnsavedChanges:p,hoveredSchoolUai:_,currentView:v,simulConfig:x,availableBassins:S,availableCircs:C,filteredSchools:P,allPasNames:N,filteredPasNames:O,pasMetrics:j,departmentMetrics:U,setSchools:pt,setSectorsGeoJson:st,setRhData:ut,updateSchoolPas:E,renamePas:b,updateSectorPas:R,updateSchoolSector:M,setView:G,setSearchQuery:Z,setFilter:W,selectPas:$,selectSchool:V,setHoveredSchool:Y,saveData:nt,loadFromStorage:ct,resetData:tt,renameSchool:I}});var Yu={exports:{}};var x0=Yu.exports,Kf;function b0(){return Kf||(Kf=1,(function(e,t){((n,i)=>{e.exports=i()})(x0,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,u=!i.document&&!!i.postMessage,h=i.IS_PAPA_WORKER||!1,f={},p=0,_={};function v(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var I=tt(b);I.chunkSize=parseInt(I.chunkSize),b.step||b.chunk||(I.chunkSize=null),this._handle=new N(I),(this._handle.streamer=this)._config=I}).call(this,E),this.parseChunk=function(b,I){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let G=this._config.newline;G||(M=this._config.quoteChar||'"',G=this._handle.guessLineEndings(b,M)),b=[...b.split(G).slice(R)].join(G)}this.isFirstChunk&&st(this._config.beforeFirstChunk)&&(M=this._config.beforeFirstChunk(b))!==void 0&&(b=M),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+b,M=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=M.meta.cursor,R=(this._finished||(this._partialLine=R.substring(b-this._baseIndex),this._baseIndex=b),M&&M.data&&(this._rowCount+=M.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)i.postMessage({results:M,workerId:_.WORKER_ID,finished:R});else if(st(this._config.chunk)&&!I){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=M=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!R||!st(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(b){st(this._config.error)?this._config.error(b):h&&this._config.error&&i.postMessage({workerId:_.WORKER_ID,error:b,finished:!1})}}function x(E){var b;(E=E||{}).chunkSize||(E.chunkSize=_.RemoteChunkSize),v.call(this,E),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),u||(b.onload=pt(this._chunkLoaded,this),b.onerror=pt(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var I,R=this._config.downloadRequestHeaders;for(I in R)b.setRequestHeader(I,R[I])}var M;this._config.chunkSize&&(M=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+M));try{b.send(this._config.downloadRequestBody)}catch(G){this._chunkError(G.message)}u&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(I){I=b.statusText||I,this._sendError(new Error(I))}}function S(E){(E=E||{}).chunkSize||(E.chunkSize=_.LocalChunkSize),v.call(this,E);var b,I,R=typeof FileReader<"u";this.stream=function(M){this._input=M,I=M.slice||M.webkitSlice||M.mozSlice,R?((b=new FileReader).onload=pt(this._chunkLoaded,this),b.onerror=pt(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input,G=(this._config.chunkSize&&(G=Math.min(this._start+this._config.chunkSize,this._input.size),M=I.call(M,this._start,G)),b.readAsText(M,this._config.encoding));R||this._chunkLoaded({target:{result:G}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(b.error)}}function C(E){var b;v.call(this,E=E||{}),this.stream=function(I){return b=I,this._nextChunk()},this._nextChunk=function(){var I,R;if(!this._finished)return I=this._config.chunkSize,b=I?(R=b.substring(0,I),b.substring(I)):(R=b,""),this._finished=!b,this.parseChunk(R)}}function P(E){v.call(this,E=E||{});var b=[],I=!0,R=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):I=!0},this._streamData=pt(function(M){try{b.push(typeof M=="string"?M:M.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(G){this._streamError(G)}},this),this._streamError=pt(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=pt(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=pt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function N(E){var b,I,R,M,G=Math.pow(2,53),Z=-G,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,V=this,Y=0,ut=0,K=!1,it=!1,bt=[],wt={data:[],errors:[],meta:{}};function Et(et){return E.skipEmptyLines==="greedy"?et.join("").trim()==="":et.length===1&&et[0].length===0}function Tt(){if(wt&&R&&(Yt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),R=!1),E.skipEmptyLines&&(wt.data=wt.data.filter(function(T){return!Et(T)})),Pt()){let T=function(Q,dt){st(E.transformHeader)&&(Q=E.transformHeader(Q,dt)),bt.push(Q)};var Ct=T;if(wt)if(Array.isArray(wt.data[0])){for(var et=0;Pt()&&et<wt.data.length;et++)wt.data[et].forEach(T);wt.data.splice(0,1)}else wt.data.forEach(T)}function Qt(T,Q){for(var dt=E.header?{}:[],gt=0;gt<T.length;gt++){var vt=gt,Nt=T[gt],Nt=((Ot,ft)=>(Rt=>(E.dynamicTypingFunction&&E.dynamicTyping[Rt]===void 0&&(E.dynamicTyping[Rt]=E.dynamicTypingFunction(Rt)),(E.dynamicTyping[Rt]||E.dynamicTyping)===!0))(Ot)?ft==="true"||ft==="TRUE"||ft!=="false"&&ft!=="FALSE"&&((Rt=>{if(W.test(Rt)&&(Rt=parseFloat(Rt),Z<Rt&&Rt<G))return 1})(ft)?parseFloat(ft):$.test(ft)?new Date(ft):ft===""?null:ft):ft)(vt=E.header?gt>=bt.length?"__parsed_extra":bt[gt]:vt,Nt=E.transform?E.transform(Nt,vt):Nt);vt==="__parsed_extra"?(dt[vt]=dt[vt]||[],dt[vt].push(Nt)):dt[vt]=Nt}return E.header&&(gt>bt.length?Yt("FieldMismatch","TooManyFields","Too many fields: expected "+bt.length+" fields but parsed "+gt,ut+Q):gt<bt.length&&Yt("FieldMismatch","TooFewFields","Too few fields: expected "+bt.length+" fields but parsed "+gt,ut+Q)),dt}var Ft;wt&&(E.header||E.dynamicTyping||E.transform)&&(Ft=1,!wt.data.length||Array.isArray(wt.data[0])?(wt.data=wt.data.map(Qt),Ft=wt.data.length):wt.data=Qt(wt.data,0),E.header&&wt.meta&&(wt.meta.fields=bt),ut+=Ft)}function Pt(){return E.header&&bt.length===0}function Yt(et,Qt,Ft,Ct){et={type:et,code:Qt,message:Ft},Ct!==void 0&&(et.row=Ct),wt.errors.push(et)}st(E.step)&&(M=E.step,E.step=function(et){wt=et,Pt()?Tt():(Tt(),wt.data.length!==0&&(Y+=et.data.length,E.preview&&Y>E.preview?I.abort():(wt.data=wt.data[0],M(wt,V))))}),this.parse=function(et,Qt,Ft){var Ct=E.quoteChar||'"',Ct=(E.newline||(E.newline=this.guessLineEndings(et,Ct)),R=!1,E.delimiter?st(E.delimiter)&&(E.delimiter=E.delimiter(et),wt.meta.delimiter=E.delimiter):((Ct=((T,Q,dt,gt,vt)=>{var Nt,Ot,ft,Rt;vt=vt||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var Lt=0;Lt<vt.length;Lt++){for(var Ht,Zt=vt[Lt],Mt=0,Xt=0,Jt=0,se=(ft=void 0,new j({comments:gt,delimiter:Zt,newline:Q,preview:10}).parse(T)),Gt=0;Gt<se.data.length;Gt++)dt&&Et(se.data[Gt])?Jt++:(Ht=se.data[Gt].length,Xt+=Ht,ft===void 0?ft=Ht:0<Ht&&(Mt+=Math.abs(Ht-ft),ft=Ht));0<se.data.length&&(Xt/=se.data.length-Jt),(Ot===void 0||Mt<=Ot)&&(Rt===void 0||Rt<Xt)&&1.99<Xt&&(Ot=Mt,Nt=Zt,Rt=Xt)}return{successful:!!(E.delimiter=Nt),bestDelimiter:Nt}})(et,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess)).successful?E.delimiter=Ct.bestDelimiter:(R=!0,E.delimiter=_.DefaultDelimiter),wt.meta.delimiter=E.delimiter),tt(E));return E.preview&&E.header&&Ct.preview++,b=et,I=new j(Ct),wt=I.parse(b,Qt,Ft),Tt(),K?{meta:{paused:!0}}:wt||{meta:{paused:!1}}},this.paused=function(){return K},this.pause=function(){K=!0,I.abort(),b=st(E.chunk)?"":b.substring(I.getCharIndex())},this.resume=function(){V.streamer._halted?(K=!1,V.streamer.parseChunk(b,!0)):setTimeout(V.resume,3)},this.aborted=function(){return it},this.abort=function(){it=!0,I.abort(),wt.meta.aborted=!0,st(E.complete)&&E.complete(wt),b=""},this.guessLineEndings=function(T,Ct){T=T.substring(0,1048576);var Ct=new RegExp(O(Ct)+"([^]*?)"+O(Ct),"gm"),Ft=(T=T.replace(Ct,"")).split("\r"),Ct=T.split(`
`),T=1<Ct.length&&Ct[0].length<Ft[0].length;if(Ft.length===1||T)return`
`;for(var Q=0,dt=0;dt<Ft.length;dt++)Ft[dt][0]===`
`&&Q++;return Q>=Ft.length/2?`\r
`:"\r"}}function O(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function j(E){var b=(E=E||{}).delimiter,I=E.newline,R=E.comments,M=E.step,G=E.preview,Z=E.fastMode,W=null,$=!1,V=E.quoteChar==null?'"':E.quoteChar,Y=V;if(E.escapeChar!==void 0&&(Y=E.escapeChar),(typeof b!="string"||-1<_.BAD_DELIMITERS.indexOf(b))&&(b=","),R===b)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<_.BAD_DELIMITERS.indexOf(R))&&(R=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var ut=0,K=!1;this.parse=function(it,bt,wt){if(typeof it!="string")throw new Error("Input must be a string");var Et=it.length,Tt=b.length,Pt=I.length,Yt=R.length,et=st(M),Qt=[],Ft=[],Ct=[],T=ut=0;if(!it)return Mt();if(Z||Z!==!1&&it.indexOf(V)===-1){for(var Q=it.split(I),dt=0;dt<Q.length;dt++){if(Ct=Q[dt],ut+=Ct.length,dt!==Q.length-1)ut+=I.length;else if(wt)return Mt();if(!R||Ct.substring(0,Yt)!==R){if(et){if(Qt=[],Rt(Ct.split(b)),Xt(),K)return Mt()}else Rt(Ct.split(b));if(G&&G<=dt)return Qt=Qt.slice(0,G),Mt(!0)}}return Mt()}for(var gt=it.indexOf(b,ut),vt=it.indexOf(I,ut),Nt=new RegExp(O(Y)+O(V),"g"),Ot=it.indexOf(V,ut);;)if(it[ut]===V)for(Ot=ut,ut++;;){if((Ot=it.indexOf(V,Ot+1))===-1)return wt||Ft.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Qt.length,index:ut}),Ht();if(Ot===Et-1)return Ht(it.substring(ut,Ot).replace(Nt,V));if(V===Y&&it[Ot+1]===Y)Ot++;else if(V===Y||Ot===0||it[Ot-1]!==Y){gt!==-1&&gt<Ot+1&&(gt=it.indexOf(b,Ot+1));var ft=Lt((vt=vt!==-1&&vt<Ot+1?it.indexOf(I,Ot+1):vt)===-1?gt:Math.min(gt,vt));if(it.substr(Ot+1+ft,Tt)===b){Ct.push(it.substring(ut,Ot).replace(Nt,V)),it[ut=Ot+1+ft+Tt]!==V&&(Ot=it.indexOf(V,ut)),gt=it.indexOf(b,ut),vt=it.indexOf(I,ut);break}if(ft=Lt(vt),it.substring(Ot+1+ft,Ot+1+ft+Pt)===I){if(Ct.push(it.substring(ut,Ot).replace(Nt,V)),Zt(Ot+1+ft+Pt),gt=it.indexOf(b,ut),Ot=it.indexOf(V,ut),et&&(Xt(),K))return Mt();if(G&&Qt.length>=G)return Mt(!0);break}Ft.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Qt.length,index:ut}),Ot++}}else if(R&&Ct.length===0&&it.substring(ut,ut+Yt)===R){if(vt===-1)return Mt();ut=vt+Pt,vt=it.indexOf(I,ut),gt=it.indexOf(b,ut)}else if(gt!==-1&&(gt<vt||vt===-1))Ct.push(it.substring(ut,gt)),ut=gt+Tt,gt=it.indexOf(b,ut);else{if(vt===-1)break;if(Ct.push(it.substring(ut,vt)),Zt(vt+Pt),et&&(Xt(),K))return Mt();if(G&&Qt.length>=G)return Mt(!0)}return Ht();function Rt(Jt){Qt.push(Jt),T=ut}function Lt(Jt){var se=0;return se=Jt!==-1&&(Jt=it.substring(Ot+1,Jt))&&Jt.trim()===""?Jt.length:se}function Ht(Jt){return wt||(Jt===void 0&&(Jt=it.substring(ut)),Ct.push(Jt),ut=Et,Rt(Ct),et&&Xt()),Mt()}function Zt(Jt){ut=Jt,Rt(Ct),Ct=[],vt=it.indexOf(I,ut)}function Mt(Jt){if(E.header&&!bt&&Qt.length&&!$){var se=Qt[0],Gt=Object.create(null),Ne=new Set(se);let ie=!1;for(let $t=0;$t<se.length;$t++){let Se=se[$t];if(Gt[Se=st(E.transformHeader)?E.transformHeader(Se,$t):Se]){let Le,ln=Gt[Se];for(;Le=Se+"_"+ln,ln++,Ne.has(Le););Ne.add(Le),se[$t]=Le,Gt[Se]++,ie=!0,(W=W===null?{}:W)[Le]=Se}else Gt[Se]=1,se[$t]=Se;Ne.add(Se)}ie&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:Qt,errors:Ft,meta:{delimiter:b,linebreak:I,aborted:K,truncated:!!Jt,cursor:T+(bt||0),renamedHeaders:W}}}function Xt(){M(Mt()),Qt=[],Ft=[]}},this.abort=function(){K=!0},this.getCharIndex=function(){return ut}}function U(E){var b=E.data,I=f[b.workerId],R=!1;if(b.error)I.userError(b.error,b.file);else if(b.results&&b.results.data){var M={abort:function(){R=!0,nt(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ct,resume:ct};if(st(I.userStep)){for(var G=0;G<b.results.data.length&&(I.userStep({data:b.results.data[G],errors:b.results.errors,meta:b.results.meta},M),!R);G++);delete b.results}else st(I.userChunk)&&(I.userChunk(b.results,M,b.file),delete b.results)}b.finished&&!R&&nt(b.workerId,b.results)}function nt(E,b){var I=f[E];st(I.userComplete)&&I.userComplete(b),I.terminate(),delete f[E]}function ct(){throw new Error("Not implemented.")}function tt(E){if(typeof E!="object"||E===null)return E;var b,I=Array.isArray(E)?[]:{};for(b in E)I[b]=tt(E[b]);return I}function pt(E,b){return function(){E.apply(b,arguments)}}function st(E){return typeof E=="function"}return _.parse=function(E,b){var I=(b=b||{}).dynamicTyping||!1;if(st(I)&&(b.dynamicTypingFunction=I,I={}),b.dynamicTyping=I,b.transform=!!st(b.transform)&&b.transform,!b.worker||!_.WORKERS_SUPPORTED)return I=null,_.NODE_STREAM_INPUT,typeof E=="string"?(E=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(E),I=new(b.download?x:C)(b)):E.readable===!0&&st(E.read)&&st(E.on)?I=new P(b):(i.File&&E instanceof File||E instanceof Object)&&(I=new S(b)),I.stream(E);(I=(()=>{var R;return!!_.WORKERS_SUPPORTED&&(R=(()=>{var M=i.URL||i.webkitURL||null,G=n.toString();return _.BLOB_URL||(_.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",G,")();"],{type:"text/javascript"})))})(),(R=new i.Worker(R)).onmessage=U,R.id=p++,f[R.id]=R)})()).userStep=b.step,I.userChunk=b.chunk,I.userComplete=b.complete,I.userError=b.error,b.step=st(b.step),b.chunk=st(b.chunk),b.complete=st(b.complete),b.error=st(b.error),delete b.worker,I.postMessage({input:E,config:b,workerId:I.id})},_.unparse=function(E,b){var I=!1,R=!0,M=",",G=`\r
`,Z='"',W=Z+Z,$=!1,V=null,Y=!1,ut=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||_.BAD_DELIMITERS.filter(function(bt){return b.delimiter.indexOf(bt)!==-1}).length||(M=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(I=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||($=b.skipEmptyLines),typeof b.newline=="string"&&(G=b.newline),typeof b.quoteChar=="string"&&(Z=b.quoteChar),typeof b.header=="boolean"&&(R=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");V=b.columns}b.escapeChar!==void 0&&(W=b.escapeChar+Z),b.escapeFormulae instanceof RegExp?Y=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(Y=/^[=+\-@\t\r].*$/)}})(),new RegExp(O(Z),"g"));if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return K(null,E,$);if(typeof E[0]=="object")return K(V||Object.keys(E[0]),E,$)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||V),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),K(E.fields||[],E.data||[],$);throw new Error("Unable to serialize unrecognized input");function K(bt,wt,Et){var Tt="",Pt=(typeof bt=="string"&&(bt=JSON.parse(bt)),typeof wt=="string"&&(wt=JSON.parse(wt)),Array.isArray(bt)&&0<bt.length),Yt=!Array.isArray(wt[0]);if(Pt&&R){for(var et=0;et<bt.length;et++)0<et&&(Tt+=M),Tt+=it(bt[et],et);0<wt.length&&(Tt+=G)}for(var Qt=0;Qt<wt.length;Qt++){var Ft=(Pt?bt:wt[Qt]).length,Ct=!1,T=Pt?Object.keys(wt[Qt]).length===0:wt[Qt].length===0;if(Et&&!Pt&&(Ct=Et==="greedy"?wt[Qt].join("").trim()==="":wt[Qt].length===1&&wt[Qt][0].length===0),Et==="greedy"&&Pt){for(var Q=[],dt=0;dt<Ft;dt++){var gt=Yt?bt[dt]:dt;Q.push(wt[Qt][gt])}Ct=Q.join("").trim()===""}if(!Ct){for(var vt=0;vt<Ft;vt++){0<vt&&!T&&(Tt+=M);var Nt=Pt&&Yt?bt[vt]:vt;Tt+=it(wt[Qt][Nt],vt)}Qt<wt.length-1&&(!Et||0<Ft&&!T)&&(Tt+=G)}}return Tt}function it(bt,wt){var Et,Tt;return bt==null?"":bt.constructor===Date?JSON.stringify(bt).slice(1,25):(Tt=!1,Y&&typeof bt=="string"&&Y.test(bt)&&(bt="'"+bt,Tt=!0),Et=bt.toString().replace(ut,W),(Tt=Tt||I===!0||typeof I=="function"&&I(bt,wt)||Array.isArray(I)&&I[wt]||((Pt,Yt)=>{for(var et=0;et<Yt.length;et++)if(-1<Pt.indexOf(Yt[et]))return!0;return!1})(Et,_.BAD_DELIMITERS)||-1<Et.indexOf(M)||Et.charAt(0)===" "||Et.charAt(Et.length-1)===" ")?Z+Et+Z:Et)}},_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!u&&!!i.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=j,_.ParserHandle=N,_.NetworkStreamer=x,_.FileStreamer=S,_.StringStreamer=C,_.ReadableStreamStreamer=P,i.jQuery&&((o=i.jQuery).fn.parse=function(E){var b=E.config||{},I=[];return this.each(function(G){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)I.push({file:this.files[Z],inputElem:this,instanceConfig:o.extend({},b)})}),R(),this;function R(){if(I.length===0)st(E.complete)&&E.complete();else{var G,Z,W,$,V=I[0];if(st(E.before)){var Y=E.before(V.file,V.inputElem);if(typeof Y=="object"){if(Y.action==="abort")return G="AbortError",Z=V.file,W=V.inputElem,$=Y.reason,void(st(E.error)&&E.error({name:G},Z,W,$));if(Y.action==="skip")return void M();typeof Y.config=="object"&&(V.instanceConfig=o.extend(V.instanceConfig,Y.config))}else if(Y==="skip")return void M()}var ut=V.instanceConfig.complete;V.instanceConfig.complete=function(K){st(ut)&&ut(K,V.file,V.inputElem),M()},_.parse(V.file,V.instanceConfig)}}function M(){I.splice(0,1),R()}}),h&&(i.onmessage=function(E){E=E.data,_.WORKER_ID===void 0&&E&&(_.WORKER_ID=E.workerId),typeof E.input=="string"?i.postMessage({workerId:_.WORKER_ID,results:_.parse(E.input,E.config),finished:!0}):(i.File&&E.input instanceof File||E.input instanceof Object)&&(E=_.parse(E.input,E.config))&&i.postMessage({workerId:_.WORKER_ID,results:E,finished:!0})}),(x.prototype=Object.create(v.prototype)).constructor=x,(S.prototype=Object.create(v.prototype)).constructor=S,(C.prototype=Object.create(C.prototype)).constructor=C,(P.prototype=Object.create(v.prototype)).constructor=P,_})})(Yu)),Yu.exports}var w0=b0();const Uh=$l(w0);var Ic={exports:{}},aa={},Ir={},Ps={},Jf;function Xl(){if(Jf)return Ps;Jf=1;function e(u,h,f){if(f===void 0&&(f=Array.prototype),u&&typeof f.find=="function")return f.find.call(u,h);for(var p=0;p<u.length;p++)if(Object.prototype.hasOwnProperty.call(u,p)){var _=u[p];if(h.call(void 0,_,p,u))return _}}function t(u,h){return h===void 0&&(h=Object),h&&typeof h.freeze=="function"?h.freeze(u):u}function n(u,h){if(u===null||typeof u!="object")throw new TypeError("target is not an object");for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(u[f]=h[f]);return u}var i=t({HTML:"text/html",isHTML:function(u){return u===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),o=t({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(u){return u===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Ps.assign=n,Ps.find=e,Ps.freeze=t,Ps.MIME_TYPE=i,Ps.NAMESPACE=o,Ps}var Qf;function lm(){if(Qf)return Ir;Qf=1;var e=Xl(),t=e.find,n=e.NAMESPACE;function i(F){return F!==""}function o(F){return F?F.split(/[\t\n\f\r ]+/).filter(i):[]}function u(F,H){return F.hasOwnProperty(H)||(F[H]=!0),F}function h(F){if(!F)return[];var H=o(F);return Object.keys(H.reduce(u,{}))}function f(F){return function(H){return F&&F.indexOf(H)!==-1}}function p(F,H){for(var at in F)Object.prototype.hasOwnProperty.call(F,at)&&(H[at]=F[at])}function _(F,H){var at=F.prototype;if(!(at instanceof H)){let xt=function(){};var It=xt;xt.prototype=H.prototype,xt=new xt,p(at,xt),F.prototype=at=xt}at.constructor!=F&&(typeof F!="function"&&console.error("unknown Class:"+F),at.constructor=F)}var v={},x=v.ELEMENT_NODE=1,S=v.ATTRIBUTE_NODE=2,C=v.TEXT_NODE=3,P=v.CDATA_SECTION_NODE=4,N=v.ENTITY_REFERENCE_NODE=5,O=v.ENTITY_NODE=6,j=v.PROCESSING_INSTRUCTION_NODE=7,U=v.COMMENT_NODE=8,nt=v.DOCUMENT_NODE=9,ct=v.DOCUMENT_TYPE_NODE=10,tt=v.DOCUMENT_FRAGMENT_NODE=11,pt=v.NOTATION_NODE=12,st={},E={};st.INDEX_SIZE_ERR=(E[1]="Index size error",1),st.DOMSTRING_SIZE_ERR=(E[2]="DOMString size error",2);var b=st.HIERARCHY_REQUEST_ERR=(E[3]="Hierarchy request error",3);st.WRONG_DOCUMENT_ERR=(E[4]="Wrong document",4),st.INVALID_CHARACTER_ERR=(E[5]="Invalid character",5),st.NO_DATA_ALLOWED_ERR=(E[6]="No data allowed",6),st.NO_MODIFICATION_ALLOWED_ERR=(E[7]="No modification allowed",7);var I=st.NOT_FOUND_ERR=(E[8]="Not found",8);st.NOT_SUPPORTED_ERR=(E[9]="Not supported",9);var R=st.INUSE_ATTRIBUTE_ERR=(E[10]="Attribute in use",10);st.INVALID_STATE_ERR=(E[11]="Invalid state",11),st.SYNTAX_ERR=(E[12]="Syntax error",12),st.INVALID_MODIFICATION_ERR=(E[13]="Invalid modification",13),st.NAMESPACE_ERR=(E[14]="Invalid namespace",14),st.INVALID_ACCESS_ERR=(E[15]="Invalid access",15);function M(F,H){if(H instanceof Error)var at=H;else at=this,Error.call(this,E[F]),this.message=E[F],Error.captureStackTrace&&Error.captureStackTrace(this,M);return at.code=F,H&&(this.message=this.message+": "+H),at}M.prototype=Error.prototype,p(st,M);function G(){}G.prototype={length:0,item:function(F){return F>=0&&F<this.length?this[F]:null},toString:function(F,H){for(var at=[],It=0;It<this.length;It++)hn(this[It],at,F,H);return at.join("")},filter:function(F){return Array.prototype.filter.call(this,F)},indexOf:function(F){return Array.prototype.indexOf.call(this,F)}};function Z(F,H){this._node=F,this._refresh=H,W(this)}function W(F){var H=F._node._inc||F._node.ownerDocument._inc;if(F._inc!==H){var at=F._refresh(F._node);if(fn(F,"length",at.length),!F.$$length||at.length<F.$$length)for(var It=at.length;It in F;It++)Object.prototype.hasOwnProperty.call(F,It)&&delete F[It];p(at,F),F._inc=H}}Z.prototype.item=function(F){return W(this),this[F]||null},_(Z,G);function $(){}function V(F,H){for(var at=F.length;at--;)if(F[at]===H)return at}function Y(F,H,at,It){if(It?H[V(H,It)]=at:H[H.length++]=at,F){at.ownerElement=F;var xt=F.ownerDocument;xt&&(It&&Pt(xt,F,It),Tt(xt,F,at))}}function ut(F,H,at){var It=V(H,at);if(It>=0){for(var xt=H.length-1;It<xt;)H[It]=H[++It];if(H.length=xt,F){var ae=F.ownerDocument;ae&&(Pt(ae,F,at),at.ownerElement=null)}}else throw new M(I,new Error(F.tagName+"@"+at))}$.prototype={length:0,item:G.prototype.item,getNamedItem:function(F){for(var H=this.length;H--;){var at=this[H];if(at.nodeName==F)return at}},setNamedItem:function(F){var H=F.ownerElement;if(H&&H!=this._ownerElement)throw new M(R);var at=this.getNamedItem(F.nodeName);return Y(this._ownerElement,this,F,at),at},setNamedItemNS:function(F){var H=F.ownerElement,at;if(H&&H!=this._ownerElement)throw new M(R);return at=this.getNamedItemNS(F.namespaceURI,F.localName),Y(this._ownerElement,this,F,at),at},removeNamedItem:function(F){var H=this.getNamedItem(F);return ut(this._ownerElement,this,H),H},removeNamedItemNS:function(F,H){var at=this.getNamedItemNS(F,H);return ut(this._ownerElement,this,at),at},getNamedItemNS:function(F,H){for(var at=this.length;at--;){var It=this[at];if(It.localName==H&&It.namespaceURI==F)return It}return null}};function K(){}K.prototype={hasFeature:function(F,H){return!0},createDocument:function(F,H,at){var It=new Et;if(It.implementation=this,It.childNodes=new G,It.doctype=at||null,at&&It.appendChild(at),H){var xt=It.createElementNS(F,H);It.appendChild(xt)}return It},createDocumentType:function(F,H,at){var It=new Gt;return It.name=F,It.nodeName=F,It.publicId=H||"",It.systemId=at||"",It}};function it(){}it.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(F,H){return ft(this,F,H)},replaceChild:function(F,H){ft(this,F,H,Ot),H&&this.removeChild(H)},removeChild:function(F){return et(this,F)},appendChild:function(F){return this.insertBefore(F,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(F){return je(this.ownerDocument||this,this,F)},normalize:function(){for(var F=this.firstChild;F;){var H=F.nextSibling;H&&H.nodeType==C&&F.nodeType==C?(this.removeChild(H),F.appendData(H.data)):(F.normalize(),F=H)}},isSupported:function(F,H){return this.ownerDocument.implementation.hasFeature(F,H)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(F){for(var H=this;H;){var at=H._nsMap;if(at){for(var It in at)if(Object.prototype.hasOwnProperty.call(at,It)&&at[It]===F)return It}H=H.nodeType==S?H.ownerDocument:H.parentNode}return null},lookupNamespaceURI:function(F){for(var H=this;H;){var at=H._nsMap;if(at&&Object.prototype.hasOwnProperty.call(at,F))return at[F];H=H.nodeType==S?H.ownerDocument:H.parentNode}return null},isDefaultNamespace:function(F){var H=this.lookupPrefix(F);return H==null}};function bt(F){return F=="<"&&"&lt;"||F==">"&&"&gt;"||F=="&"&&"&amp;"||F=='"'&&"&quot;"||"&#"+F.charCodeAt()+";"}p(v,it),p(v,it.prototype);function wt(F,H){if(H(F))return!0;if(F=F.firstChild)do if(wt(F,H))return!0;while(F=F.nextSibling)}function Et(){this.ownerDocument=this}function Tt(F,H,at){F&&F._inc++;var It=at.namespaceURI;It===n.XMLNS&&(H._nsMap[at.prefix?at.localName:""]=at.value)}function Pt(F,H,at,It){F&&F._inc++;var xt=at.namespaceURI;xt===n.XMLNS&&delete H._nsMap[at.prefix?at.localName:""]}function Yt(F,H,at){if(F&&F._inc){F._inc++;var It=H.childNodes;if(at)It[It.length++]=at;else{for(var xt=H.firstChild,ae=0;xt;)It[ae++]=xt,xt=xt.nextSibling;It.length=ae,delete It[It.length]}}}function et(F,H){var at=H.previousSibling,It=H.nextSibling;return at?at.nextSibling=It:F.firstChild=It,It?It.previousSibling=at:F.lastChild=at,H.parentNode=null,H.previousSibling=null,H.nextSibling=null,Yt(F.ownerDocument,F),H}function Qt(F){return F&&(F.nodeType===it.DOCUMENT_NODE||F.nodeType===it.DOCUMENT_FRAGMENT_NODE||F.nodeType===it.ELEMENT_NODE)}function Ft(F){return F&&(T(F)||Q(F)||Ct(F)||F.nodeType===it.DOCUMENT_FRAGMENT_NODE||F.nodeType===it.COMMENT_NODE||F.nodeType===it.PROCESSING_INSTRUCTION_NODE)}function Ct(F){return F&&F.nodeType===it.DOCUMENT_TYPE_NODE}function T(F){return F&&F.nodeType===it.ELEMENT_NODE}function Q(F){return F&&F.nodeType===it.TEXT_NODE}function dt(F,H){var at=F.childNodes||[];if(t(at,T)||Ct(H))return!1;var It=t(at,Ct);return!(H&&It&&at.indexOf(It)>at.indexOf(H))}function gt(F,H){var at=F.childNodes||[];function It(ae){return T(ae)&&ae!==H}if(t(at,It))return!1;var xt=t(at,Ct);return!(H&&xt&&at.indexOf(xt)>at.indexOf(H))}function vt(F,H,at){if(!Qt(F))throw new M(b,"Unexpected parent node type "+F.nodeType);if(at&&at.parentNode!==F)throw new M(I,"child not in parent");if(!Ft(H)||Ct(H)&&F.nodeType!==it.DOCUMENT_NODE)throw new M(b,"Unexpected node type "+H.nodeType+" for parent node type "+F.nodeType)}function Nt(F,H,at){var It=F.childNodes||[],xt=H.childNodes||[];if(H.nodeType===it.DOCUMENT_FRAGMENT_NODE){var ae=xt.filter(T);if(ae.length>1||t(xt,Q))throw new M(b,"More than one element or text in fragment");if(ae.length===1&&!dt(F,at))throw new M(b,"Element in fragment can not be inserted before doctype")}if(T(H)&&!dt(F,at))throw new M(b,"Only one element can be added and only after doctype");if(Ct(H)){if(t(It,Ct))throw new M(b,"Only one doctype is allowed");var Ce=t(It,T);if(at&&It.indexOf(Ce)<It.indexOf(at))throw new M(b,"Doctype can only be inserted before an element");if(!at&&Ce)throw new M(b,"Doctype can not be appended since element is present")}}function Ot(F,H,at){var It=F.childNodes||[],xt=H.childNodes||[];if(H.nodeType===it.DOCUMENT_FRAGMENT_NODE){var ae=xt.filter(T);if(ae.length>1||t(xt,Q))throw new M(b,"More than one element or text in fragment");if(ae.length===1&&!gt(F,at))throw new M(b,"Element in fragment can not be inserted before doctype")}if(T(H)&&!gt(F,at))throw new M(b,"Only one element can be added and only after doctype");if(Ct(H)){let kn=function(xn){return Ct(xn)&&xn!==at};var Ke=kn;if(t(It,kn))throw new M(b,"Only one doctype is allowed");var Ce=t(It,T);if(at&&It.indexOf(Ce)<It.indexOf(at))throw new M(b,"Doctype can only be inserted before an element")}}function ft(F,H,at,It){vt(F,H,at),F.nodeType===it.DOCUMENT_NODE&&(It||Nt)(F,H,at);var xt=H.parentNode;if(xt&&xt.removeChild(H),H.nodeType===tt){var ae=H.firstChild;if(ae==null)return H;var Ce=H.lastChild}else ae=Ce=H;var Ke=at?at.previousSibling:F.lastChild;ae.previousSibling=Ke,Ce.nextSibling=at,Ke?Ke.nextSibling=ae:F.firstChild=ae,at==null?F.lastChild=Ce:at.previousSibling=Ce;do{ae.parentNode=F;var kn=F.ownerDocument||F;Rt(ae,kn)}while(ae!==Ce&&(ae=ae.nextSibling));return Yt(F.ownerDocument||F,F),H.nodeType==tt&&(H.firstChild=H.lastChild=null),H}function Rt(F,H){if(F.ownerDocument!==H){if(F.ownerDocument=H,F.nodeType===x&&F.attributes)for(var at=0;at<F.attributes.length;at++){var It=F.attributes.item(at);It&&(It.ownerDocument=H)}for(var xt=F.firstChild;xt;)Rt(xt,H),xt=xt.nextSibling}}function Lt(F,H){H.parentNode&&H.parentNode.removeChild(H),H.parentNode=F,H.previousSibling=F.lastChild,H.nextSibling=null,H.previousSibling?H.previousSibling.nextSibling=H:F.firstChild=H,F.lastChild=H,Yt(F.ownerDocument,F,H);var at=F.ownerDocument||F;return Rt(H,at),H}Et.prototype={nodeName:"#document",nodeType:nt,doctype:null,documentElement:null,_inc:1,insertBefore:function(F,H){if(F.nodeType==tt){for(var at=F.firstChild;at;){var It=at.nextSibling;this.insertBefore(at,H),at=It}return F}return ft(this,F,H),Rt(F,this),this.documentElement===null&&F.nodeType===x&&(this.documentElement=F),F},removeChild:function(F){return this.documentElement==F&&(this.documentElement=null),et(this,F)},replaceChild:function(F,H){ft(this,F,H,Ot),Rt(F,this),H&&this.removeChild(H),T(F)&&(this.documentElement=F)},importNode:function(F,H){return tn(this,F,H)},getElementById:function(F){var H=null;return wt(this.documentElement,function(at){if(at.nodeType==x&&at.getAttribute("id")==F)return H=at,!0}),H},getElementsByClassName:function(F){var H=h(F);return new Z(this,function(at){var It=[];return H.length>0&&wt(at.documentElement,function(xt){if(xt!==at&&xt.nodeType===x){var ae=xt.getAttribute("class");if(ae){var Ce=F===ae;if(!Ce){var Ke=h(ae);Ce=H.every(f(Ke))}Ce&&It.push(xt)}}}),It})},createElement:function(F){var H=new Ht;H.ownerDocument=this,H.nodeName=F,H.tagName=F,H.localName=F,H.childNodes=new G;var at=H.attributes=new $;return at._ownerElement=H,H},createDocumentFragment:function(){var F=new Se;return F.ownerDocument=this,F.childNodes=new G,F},createTextNode:function(F){var H=new Xt;return H.ownerDocument=this,H.appendData(F),H},createComment:function(F){var H=new Jt;return H.ownerDocument=this,H.appendData(F),H},createCDATASection:function(F){var H=new se;return H.ownerDocument=this,H.appendData(F),H},createProcessingInstruction:function(F,H){var at=new Le;return at.ownerDocument=this,at.tagName=at.nodeName=at.target=F,at.nodeValue=at.data=H,at},createAttribute:function(F){var H=new Zt;return H.ownerDocument=this,H.name=F,H.nodeName=F,H.localName=F,H.specified=!0,H},createEntityReference:function(F){var H=new $t;return H.ownerDocument=this,H.nodeName=F,H},createElementNS:function(F,H){var at=new Ht,It=H.split(":"),xt=at.attributes=new $;return at.childNodes=new G,at.ownerDocument=this,at.nodeName=H,at.tagName=H,at.namespaceURI=F,It.length==2?(at.prefix=It[0],at.localName=It[1]):at.localName=H,xt._ownerElement=at,at},createAttributeNS:function(F,H){var at=new Zt,It=H.split(":");return at.ownerDocument=this,at.nodeName=H,at.name=H,at.namespaceURI=F,at.specified=!0,It.length==2?(at.prefix=It[0],at.localName=It[1]):at.localName=H,at}},_(Et,it);function Ht(){this._nsMap={}}Ht.prototype={nodeType:x,hasAttribute:function(F){return this.getAttributeNode(F)!=null},getAttribute:function(F){var H=this.getAttributeNode(F);return H&&H.value||""},getAttributeNode:function(F){return this.attributes.getNamedItem(F)},setAttribute:function(F,H){var at=this.ownerDocument.createAttribute(F);at.value=at.nodeValue=""+H,this.setAttributeNode(at)},removeAttribute:function(F){var H=this.getAttributeNode(F);H&&this.removeAttributeNode(H)},appendChild:function(F){return F.nodeType===tt?this.insertBefore(F,null):Lt(this,F)},setAttributeNode:function(F){return this.attributes.setNamedItem(F)},setAttributeNodeNS:function(F){return this.attributes.setNamedItemNS(F)},removeAttributeNode:function(F){return this.attributes.removeNamedItem(F.nodeName)},removeAttributeNS:function(F,H){var at=this.getAttributeNodeNS(F,H);at&&this.removeAttributeNode(at)},hasAttributeNS:function(F,H){return this.getAttributeNodeNS(F,H)!=null},getAttributeNS:function(F,H){var at=this.getAttributeNodeNS(F,H);return at&&at.value||""},setAttributeNS:function(F,H,at){var It=this.ownerDocument.createAttributeNS(F,H);It.value=It.nodeValue=""+at,this.setAttributeNode(It)},getAttributeNodeNS:function(F,H){return this.attributes.getNamedItemNS(F,H)},getElementsByTagName:function(F){return new Z(this,function(H){var at=[];return wt(H,function(It){It!==H&&It.nodeType==x&&(F==="*"||It.tagName==F)&&at.push(It)}),at})},getElementsByTagNameNS:function(F,H){return new Z(this,function(at){var It=[];return wt(at,function(xt){xt!==at&&xt.nodeType===x&&(F==="*"||xt.namespaceURI===F)&&(H==="*"||xt.localName==H)&&It.push(xt)}),It})}},Et.prototype.getElementsByTagName=Ht.prototype.getElementsByTagName,Et.prototype.getElementsByTagNameNS=Ht.prototype.getElementsByTagNameNS,_(Ht,it);function Zt(){}Zt.prototype.nodeType=S,_(Zt,it);function Mt(){}Mt.prototype={data:"",substringData:function(F,H){return this.data.substring(F,F+H)},appendData:function(F){F=this.data+F,this.nodeValue=this.data=F,this.length=F.length},insertData:function(F,H){this.replaceData(F,0,H)},appendChild:function(F){throw new Error(E[b])},deleteData:function(F,H){this.replaceData(F,H,"")},replaceData:function(F,H,at){var It=this.data.substring(0,F),xt=this.data.substring(F+H);at=It+at+xt,this.nodeValue=this.data=at,this.length=at.length}},_(Mt,it);function Xt(){}Xt.prototype={nodeName:"#text",nodeType:C,splitText:function(F){var H=this.data,at=H.substring(F);H=H.substring(0,F),this.data=this.nodeValue=H,this.length=H.length;var It=this.ownerDocument.createTextNode(at);return this.parentNode&&this.parentNode.insertBefore(It,this.nextSibling),It}},_(Xt,Mt);function Jt(){}Jt.prototype={nodeName:"#comment",nodeType:U},_(Jt,Mt);function se(){}se.prototype={nodeName:"#cdata-section",nodeType:P},_(se,Mt);function Gt(){}Gt.prototype.nodeType=ct,_(Gt,it);function Ne(){}Ne.prototype.nodeType=pt,_(Ne,it);function ie(){}ie.prototype.nodeType=O,_(ie,it);function $t(){}$t.prototype.nodeType=N,_($t,it);function Se(){}Se.prototype.nodeName="#document-fragment",Se.prototype.nodeType=tt,_(Se,it);function Le(){}Le.prototype.nodeType=j,_(Le,it);function ln(){}ln.prototype.serializeToString=function(F,H,at){return Kt.call(F,H,at)},it.prototype.toString=Kt;function Kt(F,H){var at=[],It=this.nodeType==9&&this.documentElement||this,xt=It.prefix,ae=It.namespaceURI;if(ae&&xt==null){var xt=It.lookupPrefix(ae);if(xt==null)var Ce=[{namespace:ae,prefix:null}]}return hn(this,at,F,H,Ce),at.join("")}function on(F,H,at){var It=F.prefix||"",xt=F.namespaceURI;if(!xt||It==="xml"&&xt===n.XML||xt===n.XMLNS)return!1;for(var ae=at.length;ae--;){var Ce=at[ae];if(Ce.prefix===It)return Ce.namespace!==xt}return!0}function cn(F,H,at){F.push(" ",H,'="',at.replace(/[<>&"\t\n\r]/g,bt),'"')}function hn(F,H,at,It,xt){if(xt||(xt=[]),It)if(F=It(F),F){if(typeof F=="string"){H.push(F);return}}else return;switch(F.nodeType){case x:var ae=F.attributes,Ce=ae.length,Te=F.firstChild,Ke=F.tagName;at=n.isHTML(F.namespaceURI)||at;var kn=Ke;if(!at&&!F.prefix&&F.namespaceURI){for(var xn,qn=0;qn<ae.length;qn++)if(ae.item(qn).name==="xmlns"){xn=ae.item(qn).value;break}if(!xn)for(var ze=xt.length-1;ze>=0;ze--){var ee=xt[ze];if(ee.prefix===""&&ee.namespace===F.namespaceURI){xn=ee.namespace;break}}if(xn!==F.namespaceURI)for(var ze=xt.length-1;ze>=0;ze--){var ee=xt[ze];if(ee.namespace===F.namespaceURI){ee.prefix&&(kn=ee.prefix+":"+Ke);break}}}H.push("<",kn);for(var On=0;On<Ce;On++){var Mn=ae.item(On);Mn.prefix=="xmlns"?xt.push({prefix:Mn.localName,namespace:Mn.value}):Mn.nodeName=="xmlns"&&xt.push({prefix:"",namespace:Mn.value})}for(var On=0;On<Ce;On++){var Mn=ae.item(On);if(on(Mn,at,xt)){var Kn=Mn.prefix||"",vi=Mn.namespaceURI;cn(H,Kn?"xmlns:"+Kn:"xmlns",vi),xt.push({prefix:Kn,namespace:vi})}hn(Mn,H,at,It,xt)}if(Ke===kn&&on(F,at,xt)){var Kn=F.prefix||"",vi=F.namespaceURI;cn(H,Kn?"xmlns:"+Kn:"xmlns",vi),xt.push({prefix:Kn,namespace:vi})}if(Te||at&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ke)){if(H.push(">"),at&&/^script$/i.test(Ke))for(;Te;)Te.data?H.push(Te.data):hn(Te,H,at,It,xt.slice()),Te=Te.nextSibling;else for(;Te;)hn(Te,H,at,It,xt.slice()),Te=Te.nextSibling;H.push("</",kn,">")}else H.push("/>");return;case nt:case tt:for(var Te=F.firstChild;Te;)hn(Te,H,at,It,xt.slice()),Te=Te.nextSibling;return;case S:return cn(H,F.name,F.value);case C:return H.push(F.data.replace(/[<&>]/g,bt));case P:return H.push("<![CDATA[",F.data,"]]>");case U:return H.push("<!--",F.data,"-->");case ct:var Bi=F.publicId,dn=F.systemId;if(H.push("<!DOCTYPE ",F.name),Bi)H.push(" PUBLIC ",Bi),dn&&dn!="."&&H.push(" ",dn),H.push(">");else if(dn&&dn!=".")H.push(" SYSTEM ",dn,">");else{var Jn=F.internalSubset;Jn&&H.push(" [",Jn,"]"),H.push(">")}return;case j:return H.push("<?",F.target," ",F.data,"?>");case N:return H.push("&",F.nodeName,";");default:H.push("??",F.nodeName)}}function tn(F,H,at){var It;switch(H.nodeType){case x:It=H.cloneNode(!1),It.ownerDocument=F;case tt:break;case S:at=!0;break}if(It||(It=H.cloneNode(!1)),It.ownerDocument=F,It.parentNode=null,at)for(var xt=H.firstChild;xt;)It.appendChild(tn(F,xt,at)),xt=xt.nextSibling;return It}function je(F,H,at){var It=new H.constructor;for(var xt in H)if(Object.prototype.hasOwnProperty.call(H,xt)){var ae=H[xt];typeof ae!="object"&&ae!=It[xt]&&(It[xt]=ae)}switch(H.childNodes&&(It.childNodes=new G),It.ownerDocument=F,It.nodeType){case x:var Ce=H.attributes,Ke=It.attributes=new $,kn=Ce.length;Ke._ownerElement=It;for(var xn=0;xn<kn;xn++)It.setAttributeNode(je(F,Ce.item(xn),!0));break;case S:at=!0}if(at)for(var qn=H.firstChild;qn;)It.appendChild(je(F,qn,at)),qn=qn.nextSibling;return It}function fn(F,H,at){F[H]=at}try{if(Object.defineProperty){let F=function(H){switch(H.nodeType){case x:case tt:var at=[];for(H=H.firstChild;H;)H.nodeType!==7&&H.nodeType!==8&&at.push(F(H)),H=H.nextSibling;return at.join("");default:return H.nodeValue}};var Zr=F;Object.defineProperty(Z.prototype,"length",{get:function(){return W(this),this.$$length}}),Object.defineProperty(it.prototype,"textContent",{get:function(){return F(this)},set:function(H){switch(this.nodeType){case x:case tt:for(;this.firstChild;)this.removeChild(this.firstChild);(H||String(H))&&this.appendChild(this.ownerDocument.createTextNode(H));break;default:this.data=H,this.value=H,this.nodeValue=H}}}),fn=function(H,at,It){H["$$"+at]=It}}}catch{}return Ir.DocumentType=Gt,Ir.DOMException=M,Ir.DOMImplementation=K,Ir.Element=Ht,Ir.Node=it,Ir.NodeList=G,Ir.XMLSerializer=ln,Ir}var ua={},Ac={},td;function E0(){return td||(td=1,(function(e){var t=Xl().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES})(Ac)),Ac}var Eu={},ed;function k0(){if(ed)return Eu;ed=1;var e=Xl().NAMESPACE,t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+t.source+n.source+"*(?::"+t.source+n.source+"*)?$"),o=0,u=1,h=2,f=3,p=4,_=5,v=6,x=7;function S(b,I){this.message=b,this.locator=I,Error.captureStackTrace&&Error.captureStackTrace(this,S)}S.prototype=new Error,S.prototype.name=S.name;function C(){}C.prototype={parse:function(b,I,R){var M=this.domBuilder;M.startDocument(),ct(I,I={}),P(b,I,R,M,this.errorHandler),M.endDocument()}};function P(b,I,R,M,G){function Z(Lt){if(Lt>65535){Lt-=65536;var Ht=55296+(Lt>>10),Zt=56320+(Lt&1023);return String.fromCharCode(Ht,Zt)}else return String.fromCharCode(Lt)}function W(Lt){var Ht=Lt.slice(1,-1);return Object.hasOwnProperty.call(R,Ht)?R[Ht]:Ht.charAt(0)==="#"?Z(parseInt(Ht.substr(1).replace("x","0x"))):(G.error("entity not found:"+Lt),Lt)}function $(Lt){if(Lt>Et){var Ht=b.substring(Et,Lt).replace(/&#?\w+;/g,W);it&&V(Et),M.characters(Ht,0,Lt-Et),Et=Lt}}function V(Lt,Ht){for(;Lt>=ut&&(Ht=K.exec(b));)Y=Ht.index,ut=Y+Ht[0].length,it.lineNumber++;it.columnNumber=Lt-Y+1}for(var Y=0,ut=0,K=/.*(?:\r\n?|\n)|.*$/g,it=M.locator,bt=[{currentNSMap:I}],wt={},Et=0;;){try{var Tt=b.indexOf("<",Et);if(Tt<0){if(!b.substr(Et).match(/^\s*$/)){var Pt=M.doc,Yt=Pt.createTextNode(b.substr(Et));Pt.appendChild(Yt),M.currentElement=Yt}return}switch(Tt>Et&&$(Tt),b.charAt(Tt+1)){case"/":var vt=b.indexOf(">",Tt+3),et=b.substring(Tt+2,vt).replace(/[ \t\n\r]+$/g,""),Qt=bt.pop();vt<0?(et=b.substring(Tt+2).replace(/[\s<].*/,""),G.error("end tag name: "+et+" is not complete:"+Qt.tagName),vt=Tt+1+et.length):et.match(/\s</)&&(et=et.replace(/[\s<].*/,""),G.error("end tag name: "+et+" maybe not complete"),vt=Tt+1+et.length);var Ft=Qt.localNSMap,Ct=Qt.tagName==et,T=Ct||Qt.tagName&&Qt.tagName.toLowerCase()==et.toLowerCase();if(T){if(M.endElement(Qt.uri,Qt.localName,et),Ft)for(var Q in Ft)Object.prototype.hasOwnProperty.call(Ft,Q)&&M.endPrefixMapping(Q);Ct||G.fatalError("end tag name: "+et+" is not match the current start tagName:"+Qt.tagName)}else bt.push(Qt);vt++;break;case"?":it&&V(Tt),vt=pt(b,Tt,M);break;case"!":it&&V(Tt),vt=tt(b,Tt,M,G);break;default:it&&V(Tt);var dt=new st,gt=bt[bt.length-1].currentNSMap,vt=O(b,Tt,dt,gt,W,G),Nt=dt.length;if(!dt.closed&&nt(b,vt,dt.tagName,wt)&&(dt.closed=!0,R.nbsp||G.warning("unclosed xml attribute")),it&&Nt){for(var Ot=N(it,{}),ft=0;ft<Nt;ft++){var Rt=dt[ft];V(Rt.offset),Rt.locator=N(it,{})}M.locator=Ot,j(dt,M,gt)&&bt.push(dt),M.locator=it}else j(dt,M,gt)&&bt.push(dt);e.isHTML(dt.uri)&&!dt.closed?vt=U(b,vt,dt.tagName,W,M):vt++}}catch(Lt){if(Lt instanceof S)throw Lt;G.error("element parse error: "+Lt),vt=-1}vt>Et?Et=vt:$(Math.max(Tt,Et)+1)}}function N(b,I){return I.lineNumber=b.lineNumber,I.columnNumber=b.columnNumber,I}function O(b,I,R,M,G,Z){function W(it,bt,wt){R.attributeNames.hasOwnProperty(it)&&Z.fatalError("Attribute "+it+" redefined"),R.addValue(it,bt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,G),wt)}for(var $,V,Y=++I,ut=o;;){var K=b.charAt(Y);switch(K){case"=":if(ut===u)$=b.slice(I,Y),ut=f;else if(ut===h)ut=f;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ut===f||ut===u)if(ut===u&&(Z.warning('attribute value must after "="'),$=b.slice(I,Y)),I=Y+1,Y=b.indexOf(K,I),Y>0)V=b.slice(I,Y),W($,V,I-1),ut=_;else throw new Error("attribute value no end '"+K+"' match");else if(ut==p)V=b.slice(I,Y),W($,V,I),Z.warning('attribute "'+$+'" missed start quot('+K+")!!"),I=Y+1,ut=_;else throw new Error('attribute value must after "="');break;case"/":switch(ut){case o:R.setTagName(b.slice(I,Y));case _:case v:case x:ut=x,R.closed=!0;case p:case u:break;case h:R.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Z.error("unexpected end of input"),ut==o&&R.setTagName(b.slice(I,Y)),Y;case">":switch(ut){case o:R.setTagName(b.slice(I,Y));case _:case v:case x:break;case p:case u:V=b.slice(I,Y),V.slice(-1)==="/"&&(R.closed=!0,V=V.slice(0,-1));case h:ut===h&&(V=$),ut==p?(Z.warning('attribute "'+V+'" missed quot(")!'),W($,V,I)):((!e.isHTML(M[""])||!V.match(/^(?:disabled|checked|selected)$/i))&&Z.warning('attribute "'+V+'" missed value!! "'+V+'" instead!!'),W(V,V,I));break;case f:throw new Error("attribute value missed!!")}return Y;case"":K=" ";default:if(K<=" ")switch(ut){case o:R.setTagName(b.slice(I,Y)),ut=v;break;case u:$=b.slice(I,Y),ut=h;break;case p:var V=b.slice(I,Y);Z.warning('attribute "'+V+'" missed quot(")!!'),W($,V,I);case _:ut=v;break}else switch(ut){case h:R.tagName,(!e.isHTML(M[""])||!$.match(/^(?:disabled|checked|selected)$/i))&&Z.warning('attribute "'+$+'" missed value!! "'+$+'" instead2!!'),W($,$,I),I=Y,ut=u;break;case _:Z.warning('attribute space is required"'+$+'"!!');case v:ut=u,I=Y;break;case f:ut=p,I=Y;break;case x:throw new Error("elements closed character '/' and '>' must be connected to")}}Y++}}function j(b,I,R){for(var M=b.tagName,G=null,K=b.length;K--;){var Z=b[K],W=Z.qName,$=Z.value,it=W.indexOf(":");if(it>0)var V=Z.prefix=W.slice(0,it),Y=W.slice(it+1),ut=V==="xmlns"&&Y;else Y=W,V=null,ut=W==="xmlns"&&"";Z.localName=Y,ut!==!1&&(G==null&&(G={},ct(R,R={})),R[ut]=G[ut]=$,Z.uri=e.XMLNS,I.startPrefixMapping(ut,$))}for(var K=b.length;K--;){Z=b[K];var V=Z.prefix;V&&(V==="xml"&&(Z.uri=e.XML),V!=="xmlns"&&(Z.uri=R[V||""]))}var it=M.indexOf(":");it>0?(V=b.prefix=M.slice(0,it),Y=b.localName=M.slice(it+1)):(V=null,Y=b.localName=M);var bt=b.uri=R[V||""];if(I.startElement(bt,Y,M,b),b.closed){if(I.endElement(bt,Y,M),G)for(V in G)Object.prototype.hasOwnProperty.call(G,V)&&I.endPrefixMapping(V)}else return b.currentNSMap=R,b.localNSMap=G,!0}function U(b,I,R,M,G){if(/^(?:script|textarea)$/i.test(R)){var Z=b.indexOf("</"+R+">",I),W=b.substring(I+1,Z);if(/[&<]/.test(W))return/^script$/i.test(R)?(G.characters(W,0,W.length),Z):(W=W.replace(/&#?\w+;/g,M),G.characters(W,0,W.length),Z)}return I+1}function nt(b,I,R,M){var G=M[R];return G==null&&(G=b.lastIndexOf("</"+R+">"),G<I&&(G=b.lastIndexOf("</"+R)),M[R]=G),G<I}function ct(b,I){for(var R in b)Object.prototype.hasOwnProperty.call(b,R)&&(I[R]=b[R])}function tt(b,I,R,M){var G=b.charAt(I+2);switch(G){case"-":if(b.charAt(I+3)==="-"){var Z=b.indexOf("-->",I+4);return Z>I?(R.comment(b,I+4,Z-I-4),Z+3):(M.error("Unclosed comment"),-1)}else return-1;default:if(b.substr(I+3,6)=="CDATA["){var Z=b.indexOf("]]>",I+9);return R.startCDATA(),R.characters(b,I+9,Z-I-9),R.endCDATA(),Z+3}var W=E(b,I),$=W.length;if($>1&&/!doctype/i.test(W[0][0])){var V=W[1][0],Y=!1,ut=!1;$>3&&(/^public$/i.test(W[2][0])?(Y=W[3][0],ut=$>4&&W[4][0]):/^system$/i.test(W[2][0])&&(ut=W[3][0]));var K=W[$-1];return R.startDTD(V,Y,ut),R.endDTD(),K.index+K[0].length}}return-1}function pt(b,I,R){var M=b.indexOf("?>",I);if(M){var G=b.substring(I,M).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return G?(G[0].length,R.processingInstruction(G[1],G[2]),M+2):-1}return-1}function st(){this.attributeNames={}}st.prototype={setTagName:function(b){if(!i.test(b))throw new Error("invalid tagName:"+b);this.tagName=b},addValue:function(b,I,R){if(!i.test(b))throw new Error("invalid attribute:"+b);this.attributeNames[b]=this.length,this[this.length++]={qName:b,value:I,offset:R}},length:0,getLocalName:function(b){return this[b].localName},getLocator:function(b){return this[b].locator},getQName:function(b){return this[b].qName},getURI:function(b){return this[b].uri},getValue:function(b){return this[b].value}};function E(b,I){var R,M=[],G=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(G.lastIndex=I,G.exec(b);R=G.exec(b);)if(M.push(R),R[1])return M}return Eu.XMLReader=C,Eu.ParseError=S,Eu}var nd;function S0(){if(nd)return ua;nd=1;var e=Xl(),t=lm(),n=E0(),i=k0(),o=t.DOMImplementation,u=e.NAMESPACE,h=i.ParseError,f=i.XMLReader;function p(O){return O.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function _(O){this.options=O||{locator:{}}}_.prototype.parseFromString=function(O,j){var U=this.options,nt=new f,ct=U.domBuilder||new x,tt=U.errorHandler,pt=U.locator,st=U.xmlns||{},E=/\/x?html?$/.test(j),b=E?n.HTML_ENTITIES:n.XML_ENTITIES;pt&&ct.setDocumentLocator(pt),nt.errorHandler=v(tt,ct,pt),nt.domBuilder=U.domBuilder||ct,E&&(st[""]=u.HTML),st.xml=st.xml||u.XML;var I=U.normalizeLineEndings||p;return O&&typeof O=="string"?nt.parse(I(O),st,b):nt.errorHandler.error("invalid doc source"),ct.doc};function v(O,j,U){if(!O){if(j instanceof x)return j;O=j}var nt={},ct=O instanceof Function;U=U||{};function tt(pt){var st=O[pt];!st&&ct&&(st=O.length==2?function(E){O(pt,E)}:O),nt[pt]=st&&function(E){st("[xmldom "+pt+"]	"+E+C(U))}||function(){}}return tt("warning"),tt("error"),tt("fatalError"),nt}function x(){this.cdata=!1}function S(O,j){j.lineNumber=O.lineNumber,j.columnNumber=O.columnNumber}x.prototype={startDocument:function(){this.doc=new o().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(O,j,U,nt){var ct=this.doc,tt=ct.createElementNS(O,U||j),pt=nt.length;N(this,tt),this.currentElement=tt,this.locator&&S(this.locator,tt);for(var st=0;st<pt;st++){var O=nt.getURI(st),E=nt.getValue(st),U=nt.getQName(st),b=ct.createAttributeNS(O,U);this.locator&&S(nt.getLocator(st),b),b.value=b.nodeValue=E,tt.setAttributeNode(b)}},endElement:function(O,j,U){var nt=this.currentElement;nt.tagName,this.currentElement=nt.parentNode},startPrefixMapping:function(O,j){},endPrefixMapping:function(O){},processingInstruction:function(O,j){var U=this.doc.createProcessingInstruction(O,j);this.locator&&S(this.locator,U),N(this,U)},ignorableWhitespace:function(O,j,U){},characters:function(O,j,U){if(O=P.apply(this,arguments),O){if(this.cdata)var nt=this.doc.createCDATASection(O);else var nt=this.doc.createTextNode(O);this.currentElement?this.currentElement.appendChild(nt):/^\s*$/.test(O)&&this.doc.appendChild(nt),this.locator&&S(this.locator,nt)}},skippedEntity:function(O){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(O){(this.locator=O)&&(O.lineNumber=0)},comment:function(O,j,U){O=P.apply(this,arguments);var nt=this.doc.createComment(O);this.locator&&S(this.locator,nt),N(this,nt)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(O,j,U){var nt=this.doc.implementation;if(nt&&nt.createDocumentType){var ct=nt.createDocumentType(O,j,U);this.locator&&S(this.locator,ct),N(this,ct),this.doc.doctype=ct}},warning:function(O){console.warn("[xmldom warning]	"+O,C(this.locator))},error:function(O){console.error("[xmldom error]	"+O,C(this.locator))},fatalError:function(O){throw new h(O,this.locator)}};function C(O){if(O)return`
@`+(O.systemId||"")+"#[line:"+O.lineNumber+",col:"+O.columnNumber+"]"}function P(O,j,U){return typeof O=="string"?O.substr(j,U):O.length>=j+U||j?new java.lang.String(O,j,U)+"":O}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(O){x.prototype[O]=function(){return null}});function N(O,j){O.currentElement?O.currentElement.appendChild(j):O.doc.appendChild(j)}return ua.__DOMHandler=x,ua.normalizeLineEndings=p,ua.DOMParser=_,ua}var id;function C0(){if(id)return aa;id=1;var e=lm();return aa.DOMImplementation=e.DOMImplementation,aa.XMLSerializer=e.XMLSerializer,aa.DOMParser=S0().DOMParser,aa}var rd;function T0(){return rd||(rd=1,(function(e,t){var n=(function(){var i=/\s*/g,o=/^\s*|\s*$/g,u=/\s+/;function h(b){if(!b||!b.length)return 0;for(var I=0,R=0;I<b.length;I++)R=(R<<5)-R+b.charCodeAt(I)|0;return R}function f(b,I){return b.getElementsByTagName(I)}function p(b,I){return b.getAttribute(I)}function _(b,I){return parseFloat(p(b,I))}function v(b,I){var R=f(b,I);return R.length?R[0]:null}function x(b){return b.normalize&&b.normalize(),b}function S(b){for(var I=0,R=[];I<b.length;I++)R[I]=parseFloat(b[I]);return R}function C(b){return b&&x(b),b&&b.textContent||""}function P(b,I){var R={},M,G;for(G=0;G<I.length;G++)M=v(b,I[G]),M&&(R[I[G]]=C(M));return R}function N(b,I){for(var R in I)b[R]=I[R]}function O(b){return S(b.replace(i,"").split(","))}function j(b){for(var I=b.replace(o,"").split(u),R=[],M=0;M<I.length;M++)R.push(O(I[M]));return R}function U(b){var I=[_(b,"lon"),_(b,"lat")],R=v(b,"ele"),M=v(b,"gpxtpx:hr")||v(b,"hr"),G=v(b,"time"),Z;return R&&(Z=parseFloat(C(R)),isNaN(Z)||I.push(Z)),{coordinates:I,time:G?C(G):null,heartRate:M?parseFloat(C(M)):null}}function nt(){return{type:"FeatureCollection",features:[]}}var ct;if(typeof XMLSerializer<"u")ct=new XMLSerializer;else{var tt=typeof process=="object"&&!process.browser,pt=typeof Titanium=="object";if(tt||pt)ct=new(C0()).XMLSerializer;else throw new Error("Unable to initialize serializer")}function st(b){return b.xml!==void 0?b.xml:ct.serializeToString(b)}var E={kml:function(b){for(var I=nt(),R={},M={},G={},Z=["Polygon","LineString","Point","Track","gx:Track"],W=f(b,"Placemark"),$=f(b,"Style"),V=f(b,"StyleMap"),Y=0;Y<$.length;Y++){var ut=h(st($[Y])).toString(16);R["#"+p($[Y],"id")]=ut,M[ut]=$[Y]}for(var K=0;K<V.length;K++){R["#"+p(V[K],"id")]=h(st(V[K])).toString(16);for(var it=f(V[K],"Pair"),bt={},wt=0;wt<it.length;wt++)bt[C(v(it[wt],"key"))]=C(v(it[wt],"styleUrl"));G["#"+p(V[K],"id")]=bt}for(var Et=0;Et<W.length;Et++)I.features=I.features.concat(Qt(W[Et]));function Tt(Ft){var Ct,T;return Ft=Ft||"",Ft.substr(0,1)==="#"&&(Ft=Ft.substr(1)),(Ft.length===6||Ft.length===3)&&(Ct=Ft),Ft.length===8&&(T=parseInt(Ft.substr(0,2),16)/255,Ct="#"+Ft.substr(6,2)+Ft.substr(4,2)+Ft.substr(2,2)),[Ct,isNaN(T)?void 0:T]}function Pt(Ft){return S(Ft.split(" "))}function Yt(Ft){var Ct=f(Ft,"coord"),T=[],Q=[];Ct.length===0&&(Ct=f(Ft,"gx:coord"));for(var dt=0;dt<Ct.length;dt++)T.push(Pt(C(Ct[dt])));for(var gt=f(Ft,"when"),vt=0;vt<gt.length;vt++)Q.push(C(gt[vt]));return{coords:T,times:Q}}function et(Ft){var Ct,T,Q,dt,gt,vt=[],Nt=[];if(v(Ft,"MultiGeometry"))return et(v(Ft,"MultiGeometry"));if(v(Ft,"MultiTrack"))return et(v(Ft,"MultiTrack"));if(v(Ft,"gx:MultiTrack"))return et(v(Ft,"gx:MultiTrack"));for(Q=0;Q<Z.length;Q++)if(T=f(Ft,Z[Q]),T){for(dt=0;dt<T.length;dt++)if(Ct=T[dt],Z[Q]==="Point")vt.push({type:"Point",coordinates:O(C(v(Ct,"coordinates")))});else if(Z[Q]==="LineString")vt.push({type:"LineString",coordinates:j(C(v(Ct,"coordinates")))});else if(Z[Q]==="Polygon"){var Ot=f(Ct,"LinearRing"),ft=[];for(gt=0;gt<Ot.length;gt++)ft.push(j(C(v(Ot[gt],"coordinates"))));vt.push({type:"Polygon",coordinates:ft})}else if(Z[Q]==="Track"||Z[Q]==="gx:Track"){var Rt=Yt(Ct);vt.push({type:"LineString",coordinates:Rt.coords}),Rt.times.length&&Nt.push(Rt.times)}}return{geoms:vt,coordTimes:Nt}}function Qt(Ft){var Ct=et(Ft),T,Q={},dt=C(v(Ft,"name")),gt=C(v(Ft,"address")),vt=C(v(Ft,"styleUrl")),Nt=C(v(Ft,"description")),Ot=v(Ft,"TimeSpan"),ft=v(Ft,"TimeStamp"),Rt=v(Ft,"ExtendedData"),Lt=v(Ft,"LineStyle"),Ht=v(Ft,"PolyStyle"),Zt=v(Ft,"visibility");if(!Ct.geoms.length)return[];if(dt&&(Q.name=dt),gt&&(Q.address=gt),vt){vt[0]!=="#"&&(vt="#"+vt),Q.styleUrl=vt,R[vt]&&(Q.styleHash=R[vt]),G[vt]&&(Q.styleMapHash=G[vt],Q.styleHash=R[G[vt].normal]);var Mt=M[Q.styleHash];if(Mt){Lt||(Lt=v(Mt,"LineStyle")),Ht||(Ht=v(Mt,"PolyStyle"));var Xt=v(Mt,"IconStyle");if(Xt){var Jt=v(Xt,"Icon");if(Jt){var se=C(v(Jt,"href"));se&&(Q.icon=se)}}}}if(Nt&&(Q.description=Nt),Ot){var Gt=C(v(Ot,"begin")),Ne=C(v(Ot,"end"));Q.timespan={begin:Gt,end:Ne}}if(ft&&(Q.timestamp=C(v(ft,"when"))),Lt){var ie=Tt(C(v(Lt,"color"))),$t=ie[0],Se=ie[1],Le=parseFloat(C(v(Lt,"width")));$t&&(Q.stroke=$t),isNaN(Se)||(Q["stroke-opacity"]=Se),isNaN(Le)||(Q["stroke-width"]=Le)}if(Ht){var ln=Tt(C(v(Ht,"color"))),Kt=ln[0],on=ln[1],cn=C(v(Ht,"fill")),hn=C(v(Ht,"outline"));Kt&&(Q.fill=Kt),isNaN(on)||(Q["fill-opacity"]=on),cn&&(Q["fill-opacity"]=cn==="1"?Q["fill-opacity"]||1:0),hn&&(Q["stroke-opacity"]=hn==="1"?Q["stroke-opacity"]||1:0)}if(Rt){var tn=f(Rt,"Data"),je=f(Rt,"SimpleData");for(T=0;T<tn.length;T++)Q[tn[T].getAttribute("name")]=C(v(tn[T],"value"));for(T=0;T<je.length;T++)Q[je[T].getAttribute("name")]=C(je[T])}Zt&&(Q.visibility=C(Zt)),Ct.coordTimes.length&&(Q.coordTimes=Ct.coordTimes.length===1?Ct.coordTimes[0]:Ct.coordTimes);var fn={type:"Feature",geometry:Ct.geoms.length===1?Ct.geoms[0]:{type:"GeometryCollection",geometries:Ct.geoms},properties:Q};return p(Ft,"id")&&(fn.id=p(Ft,"id")),[fn]}return I},gpx:function(b){var I,R=f(b,"trk"),M=f(b,"rte"),G=f(b,"wpt"),Z=nt(),W;for(I=0;I<R.length;I++)W=Y(R[I]),W&&Z.features.push(W);for(I=0;I<M.length;I++)W=ut(M[I]),W&&Z.features.push(W);for(I=0;I<G.length;I++)Z.features.push(K(G[I]));function $(wt,Et){for(var Tt=0;Tt<Et;Tt++)wt.push(null);return wt}function V(wt,Et){var Tt=f(wt,Et),Pt=[],Yt=[],et=[],Qt=Tt.length;if(Qt<2)return{};for(var Ft=0;Ft<Qt;Ft++){var Ct=U(Tt[Ft]);Pt.push(Ct.coordinates),Ct.time&&Yt.push(Ct.time),(Ct.heartRate||et.length)&&(et.length||$(et,Ft),et.push(Ct.heartRate||null))}return{line:Pt,times:Yt,heartRates:et}}function Y(wt){for(var Et=f(wt,"trkseg"),Tt=[],Pt=[],Yt=[],et,Qt=0;Qt<Et.length;Qt++)if(et=V(Et[Qt],"trkpt"),et&&(et.line&&Tt.push(et.line),et.times&&et.times.length&&Pt.push(et.times),Yt.length||et.heartRates&&et.heartRates.length)){if(!Yt.length)for(var Ft=0;Ft<Qt;Ft++)Yt.push($([],Tt[Ft].length));et.heartRates&&et.heartRates.length?Yt.push(et.heartRates):Yt.push($([],et.line.length||0))}if(Tt.length!==0){var Ct=bt(wt);return N(Ct,it(v(wt,"extensions"))),Pt.length&&(Ct.coordTimes=Tt.length===1?Pt[0]:Pt),Yt.length&&(Ct.heartRates=Tt.length===1?Yt[0]:Yt),{type:"Feature",properties:Ct,geometry:{type:Tt.length===1?"LineString":"MultiLineString",coordinates:Tt.length===1?Tt[0]:Tt}}}}function ut(wt){var Et=V(wt,"rtept");if(Et.line){var Tt=bt(wt);N(Tt,it(v(wt,"extensions")));var Pt={type:"Feature",properties:Tt,geometry:{type:"LineString",coordinates:Et.line}};return Pt}}function K(wt){var Et=bt(wt);return N(Et,P(wt,["sym"])),{type:"Feature",properties:Et,geometry:{type:"Point",coordinates:U(wt).coordinates}}}function it(wt){var Et={};if(wt){var Tt=v(wt,"line");if(Tt){var Pt=C(v(Tt,"color")),Yt=parseFloat(C(v(Tt,"opacity"))),et=parseFloat(C(v(Tt,"width")));Pt&&(Et.stroke=Pt),isNaN(Yt)||(Et["stroke-opacity"]=Yt),isNaN(et)||(Et["stroke-width"]=et*96/25.4)}}return Et}function bt(wt){var Et=P(wt,["name","cmt","desc","type","time","keywords"]),Tt=f(wt,"link");Tt.length&&(Et.links=[]);for(var Pt=0,Yt;Pt<Tt.length;Pt++)Yt={href:p(Tt[Pt],"href")},N(Yt,P(Tt[Pt],["text","type"])),Et.links.push(Yt);return Et}return Z}};return E})();e.exports=n})(Ic)),Ic.exports}var I0=T0();const co=e=>parseFloat(String(e).replace(",",".").replace(/\s/g,""))||0,A0=e=>new Promise((t,n)=>{Uh.parse(e,{header:!0,skipEmptyLines:!0,complete:i=>{const o=i.data.filter(u=>u.UAI&&u["Nom du PAS"]).map(u=>({...u,IPS:co(u.IPS),"Effectifs (Archipel)":co(u["Effectifs (Archipel)"]),Latitude:co(u.Latitude),Longitude:co(u.Longitude),"Indice d'loignement":co(u["Indice d'loignement"]),ULIS:co(u.ULIS)}));t(o)},error:i=>n(i)})}),L0=e=>{const n=new DOMParser().parseFromString(e,"text/xml");return I0.kml(n)};async function D0(){try{const t=await(await fetch("/pas-cockpit/synoptique.csv")).text();return new Promise((n,i)=>{Uh.parse(t,{delimiter:";",skipEmptyLines:!0,complete:o=>{const u=new Map;o.data.slice(4).forEach(f=>{if(f.length<2||!f[1])return;const p=f[1].trim();p==="A dfinir"||!p||u.set(p,{circonscription:f[0]?.trim()||"",pas:p,mail:f[2]?.trim()||"",location:f[3]?.trim()||"",coord:f[5]?.trim()||"",phone:f[6]?.trim()||"",educ:f[7]?.trim()||"",aesh:f[8]?.trim()||"",dacs:f[9]?.trim()||"",pilot2d:f[10]?.trim()||"",pilot1d:f[11]?.trim()||"",pilotEsms:f[12]?.trim()||"",partner:f[13]?.trim()||""})}),n(u)},error:o=>i(o)})})}catch(e){return console.error("Failed to load RH data:",e),new Map}}const N0=(e,t="nouveau_maillage.csv")=>{const n=e.map(f=>{const p={...f};return typeof p.IPS=="number"&&(p.IPS=p.IPS.toString().replace(".",",")),typeof p["Indice d'loignement"]=="number"&&(p["Indice d'loignement"]=p["Indice d'loignement"].toString().replace(".",",")),p}),i=Uh.unparse(n,{delimiter:";",header:!0}),o=new Blob(["\uFEFF"+i],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),h=URL.createObjectURL(o);u.setAttribute("href",h),u.setAttribute("download",t),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(h)},P0={class:"h-screen w-screen flex flex-col overflow-hidden bg-slate-50 text-slate-800"},O0={class:"h-14 bg-white border-b border-slate-200 flex items-center justify-between px-4 z-20 flex-shrink-0"},M0={class:"flex items-center gap-4"},R0={class:"flex items-center gap-3"},F0={class:"flex-1 flex overflow-hidden"},B0={class:"h-full overflow-y-auto p-4"},z0={class:"flex-1 relative min-w-0 bg-slate-100 overflow-hidden flex flex-col"},q0={class:"h-full flex flex-col"},U0={class:"p-2 border-b border-slate-100 flex justify-between items-center"},H0={class:"flex-1 overflow-y-auto p-4 text-sm"},G0=$i({__name:"AppLayout",setup(e){const t=pn(!0),n=pn(!0);return(i,o)=>(le(),he("div",P0,[rt("header",O0,[rt("div",M0,[o[3]||(o[3]=rt("h1",{class:"text-xl font-bold tracking-tight text-slate-900 flex items-center gap-2"},[rt("span",{class:"text-blue-600"},""),Vi(" Cockpit PAS 67 "),rt("span",{class:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full"},"V2")],-1)),rt("button",{onClick:o[0]||(o[0]=u=>t.value=!t.value),class:"p-1.5 rounded hover:bg-slate-100 text-slate-500"},[...o[2]||(o[2]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[rt("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),rt("path",{d:"M9 3v18"})],-1)])]),o[4]||(o[4]=rt("div",{class:"h-6 w-px bg-slate-200 mx-2"},null,-1)),sa(i.$slots,"header-center")]),rt("div",R0,[sa(i.$slots,"header-actions")])]),rt("div",F0,[rt("aside",{class:Xn(["bg-white border-r border-slate-200 flex-shrink-0 transition-all duration-300 ease-in-out relative z-10",t.value?"w-64 translate-x-0":"w-0 -translate-x-full opacity-0 overflow-hidden"])},[rt("div",B0,[sa(i.$slots,"sidebar")])],2),rt("main",z0,[sa(i.$slots,"main")]),rt("aside",{class:Xn(["bg-white border-l border-slate-200 flex-shrink-0 transition-all duration-300 ease-in-out z-10",n.value?"w-80 translate-x-0":"w-0 translate-x-full opacity-0 overflow-hidden"])},[rt("div",q0,[rt("div",U0,[o[5]||(o[5]=rt("span",{class:"text-xs font-bold uppercase text-slate-400"},"Dtails",-1)),rt("button",{onClick:o[1]||(o[1]=u=>n.value=!n.value),class:"p-1 rounded hover:bg-slate-100"},"")]),rt("div",H0,[sa(i.$slots,"right-panel")])])],2)])]))}});var xa={exports:{}};var V0=xa.exports,sd;function Z0(){return sd||(sd=1,(function(e,t){(function(n,i){i(t)})(V0,(function(n){var i="1.9.4";function o(a){var d,m,w,A;for(m=1,w=arguments.length;m<w;m++){A=arguments[m];for(d in A)a[d]=A[d]}return a}var u=Object.create||(function(){function a(){}return function(d){return a.prototype=d,new a}})();function h(a,d){var m=Array.prototype.slice;if(a.bind)return a.bind.apply(a,m.call(arguments,1));var w=m.call(arguments,2);return function(){return a.apply(d,w.length?w.concat(m.call(arguments)):arguments)}}var f=0;function p(a){return"_leaflet_id"in a||(a._leaflet_id=++f),a._leaflet_id}function _(a,d,m){var w,A,z,lt;return lt=function(){w=!1,A&&(z.apply(m,A),A=!1)},z=function(){w?A=arguments:(a.apply(m,arguments),setTimeout(lt,d),w=!0)},z}function v(a,d,m){var w=d[1],A=d[0],z=w-A;return a===w&&m?a:((a-A)%z+z)%z+A}function x(){return!1}function S(a,d){if(d===!1)return a;var m=Math.pow(10,d===void 0?6:d);return Math.round(a*m)/m}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function P(a){return C(a).split(/\s+/)}function N(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?u(a.options):{});for(var m in d)a.options[m]=d[m];return a.options}function O(a,d,m){var w=[];for(var A in a)w.push(encodeURIComponent(m?A.toUpperCase():A)+"="+encodeURIComponent(a[A]));return(!d||d.indexOf("?")===-1?"?":"&")+w.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function U(a,d){return a.replace(j,function(m,w){var A=d[w];if(A===void 0)throw new Error("No value provided for variable "+m);return typeof A=="function"&&(A=A(d)),A})}var nt=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function ct(a,d){for(var m=0;m<a.length;m++)if(a[m]===d)return m;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pt(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var st=0;function E(a){var d=+new Date,m=Math.max(0,16-(d-st));return st=d+m,window.setTimeout(a,m)}var b=window.requestAnimationFrame||pt("RequestAnimationFrame")||E,I=window.cancelAnimationFrame||pt("CancelAnimationFrame")||pt("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function R(a,d,m){if(m&&b===E)a.call(d);else return b.call(window,h(a,d))}function M(a){a&&I.call(window,a)}var G={__proto__:null,extend:o,create:u,bind:h,get lastId(){return f},stamp:p,throttle:_,wrapNum:v,falseFn:x,formatNum:S,trim:C,splitWords:P,setOptions:N,getParamString:O,template:U,isArray:nt,indexOf:ct,emptyImageUrl:tt,requestFn:b,cancelFn:I,requestAnimFrame:R,cancelAnimFrame:M};function Z(){}Z.extend=function(a){var d=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=d.__super__=this.prototype,w=u(m);w.constructor=d,d.prototype=w;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(d[A]=this[A]);return a.statics&&o(d,a.statics),a.includes&&(W(a.includes),o.apply(null,[w].concat(a.includes))),o(w,a),delete w.statics,delete w.includes,w.options&&(w.options=m.options?u(m.options):{},o(w.options,a.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,lt=w._initHooks.length;z<lt;z++)w._initHooks[z].call(this)}},d},Z.include=function(a){var d=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},Z.mergeOptions=function(a){return o(this.prototype.options,a),this},Z.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),m=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function W(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=nt(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(a,d,m){if(typeof a=="object")for(var w in a)this._on(w,a[w],d);else{a=P(a);for(var A=0,z=a.length;A<z;A++)this._on(a[A],d,m)}return this},off:function(a,d,m){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var w in a)this._off(w,a[w],d);else{a=P(a);for(var A=arguments.length===1,z=0,lt=a.length;z<lt;z++)A?this._off(a[z]):this._off(a[z],d,m)}return this},_on:function(a,d,m,w){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(a,d,m)===!1){m===this&&(m=void 0);var A={fn:d,ctx:m};w&&(A.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(A)}},_off:function(a,d,m){var w,A,z;if(this._events&&(w=this._events[a],!!w)){if(arguments.length===1){if(this._firingCount)for(A=0,z=w.length;A<z;A++)w[A].fn=x;delete this._events[a];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var lt=this._listens(a,d,m);if(lt!==!1){var St=w[lt];this._firingCount&&(St.fn=x,this._events[a]=w=w.slice()),w.splice(lt,1)}}},fire:function(a,d,m){if(!this.listens(a,m))return this;var w=o({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var A=this._events[a];if(A){this._firingCount=this._firingCount+1||1;for(var z=0,lt=A.length;z<lt;z++){var St=A[z],Dt=St.fn;St.once&&this.off(a,Dt,St.ctx),Dt.call(St.ctx||this,w)}this._firingCount--}}return m&&this._propagateEvent(w),this},listens:function(a,d,m,w){typeof a!="string"&&console.warn('"string" type argument expected');var A=d;typeof d!="function"&&(w=!!d,A=void 0,m=void 0);var z=this._events&&this._events[a];if(z&&z.length&&this._listens(a,A,m)!==!1)return!0;if(w){for(var lt in this._eventParents)if(this._eventParents[lt].listens(a,d,m,w))return!0}return!1},_listens:function(a,d,m){if(!this._events)return!1;var w=this._events[a]||[];if(!d)return!!w.length;m===this&&(m=void 0);for(var A=0,z=w.length;A<z;A++)if(w[A].fn===d&&w[A].ctx===m)return A;return!1},once:function(a,d,m){if(typeof a=="object")for(var w in a)this._on(w,a[w],d,!0);else{a=P(a);for(var A=0,z=a.length;A<z;A++)this._on(a[A],d,m,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[p(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[p(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var V=Z.extend($);function Y(a,d,m){this.x=m?Math.round(a):a,this.y=m?Math.round(d):d}var ut=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(a){return this.clone()._add(K(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(K(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Y(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Y(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ut(this.x),this.y=ut(this.y),this},distanceTo:function(a){a=K(a);var d=a.x-this.x,m=a.y-this.y;return Math.sqrt(d*d+m*m)},equals:function(a){return a=K(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=K(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function K(a,d,m){return a instanceof Y?a:nt(a)?new Y(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Y(a.x,a.y):new Y(a,d,m)}function it(a,d){if(a)for(var m=d?[a,d]:a,w=0,A=m.length;w<A;w++)this.extend(m[w])}it.prototype={extend:function(a){var d,m;if(!a)return this;if(a instanceof Y||typeof a[0]=="number"||"x"in a)d=m=K(a);else if(a=bt(a),d=a.min,m=a.max,!d||!m)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=m.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(a){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,m;return typeof a[0]=="number"||a instanceof Y?a=K(a):a=bt(a),a instanceof it?(d=a.min,m=a.max):d=m=a,d.x>=this.min.x&&m.x<=this.max.x&&d.y>=this.min.y&&m.y<=this.max.y},intersects:function(a){a=bt(a);var d=this.min,m=this.max,w=a.min,A=a.max,z=A.x>=d.x&&w.x<=m.x,lt=A.y>=d.y&&w.y<=m.y;return z&&lt},overlaps:function(a){a=bt(a);var d=this.min,m=this.max,w=a.min,A=a.max,z=A.x>d.x&&w.x<m.x,lt=A.y>d.y&&w.y<m.y;return z&&lt},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var d=this.min,m=this.max,w=Math.abs(d.x-m.x)*a,A=Math.abs(d.y-m.y)*a;return bt(K(d.x-w,d.y-A),K(m.x+w,m.y+A))},equals:function(a){return a?(a=bt(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function bt(a,d){return!a||a instanceof it?a:new it(a,d)}function wt(a,d){if(a)for(var m=d?[a,d]:a,w=0,A=m.length;w<A;w++)this.extend(m[w])}wt.prototype={extend:function(a){var d=this._southWest,m=this._northEast,w,A;if(a instanceof Tt)w=a,A=a;else if(a instanceof wt){if(w=a._southWest,A=a._northEast,!w||!A)return this}else return a?this.extend(Pt(a)||Et(a)):this;return!d&&!m?(this._southWest=new Tt(w.lat,w.lng),this._northEast=new Tt(A.lat,A.lng)):(d.lat=Math.min(w.lat,d.lat),d.lng=Math.min(w.lng,d.lng),m.lat=Math.max(A.lat,m.lat),m.lng=Math.max(A.lng,m.lng)),this},pad:function(a){var d=this._southWest,m=this._northEast,w=Math.abs(d.lat-m.lat)*a,A=Math.abs(d.lng-m.lng)*a;return new wt(new Tt(d.lat-w,d.lng-A),new Tt(m.lat+w,m.lng+A))},getCenter:function(){return new Tt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Tt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Tt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Tt||"lat"in a?a=Pt(a):a=Et(a);var d=this._southWest,m=this._northEast,w,A;return a instanceof wt?(w=a.getSouthWest(),A=a.getNorthEast()):w=A=a,w.lat>=d.lat&&A.lat<=m.lat&&w.lng>=d.lng&&A.lng<=m.lng},intersects:function(a){a=Et(a);var d=this._southWest,m=this._northEast,w=a.getSouthWest(),A=a.getNorthEast(),z=A.lat>=d.lat&&w.lat<=m.lat,lt=A.lng>=d.lng&&w.lng<=m.lng;return z&&lt},overlaps:function(a){a=Et(a);var d=this._southWest,m=this._northEast,w=a.getSouthWest(),A=a.getNorthEast(),z=A.lat>d.lat&&w.lat<m.lat,lt=A.lng>d.lng&&w.lng<m.lng;return z&&lt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=Et(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Et(a,d){return a instanceof wt?a:new wt(a,d)}function Tt(a,d,m){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,m!==void 0&&(this.alt=+m)}Tt.prototype={equals:function(a,d){if(!a)return!1;a=Pt(a);var m=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return m<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+S(this.lat,a)+", "+S(this.lng,a)+")"},distanceTo:function(a){return et.distance(this,Pt(a))},wrap:function(){return et.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,m=d/Math.cos(Math.PI/180*this.lat);return Et([this.lat-d,this.lng-m],[this.lat+d,this.lng+m])},clone:function(){return new Tt(this.lat,this.lng,this.alt)}};function Pt(a,d,m){return a instanceof Tt?a:nt(a)&&typeof a[0]!="object"?a.length===3?new Tt(a[0],a[1],a[2]):a.length===2?new Tt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Tt(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new Tt(a,d,m)}var Yt={latLngToPoint:function(a,d){var m=this.projection.project(a),w=this.scale(d);return this.transformation._transform(m,w)},pointToLatLng:function(a,d){var m=this.scale(d),w=this.transformation.untransform(a,m);return this.projection.unproject(w)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,m=this.scale(a),w=this.transformation.transform(d.min,m),A=this.transformation.transform(d.max,m);return new it(w,A)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?v(a.lng,this.wrapLng,!0):a.lng,m=this.wrapLat?v(a.lat,this.wrapLat,!0):a.lat,w=a.alt;return new Tt(m,d,w)},wrapLatLngBounds:function(a){var d=a.getCenter(),m=this.wrapLatLng(d),w=d.lat-m.lat,A=d.lng-m.lng;if(w===0&&A===0)return a;var z=a.getSouthWest(),lt=a.getNorthEast(),St=new Tt(z.lat-w,z.lng-A),Dt=new Tt(lt.lat-w,lt.lng-A);return new wt(St,Dt)}},et=o({},Yt,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var m=Math.PI/180,w=a.lat*m,A=d.lat*m,z=Math.sin((d.lat-a.lat)*m/2),lt=Math.sin((d.lng-a.lng)*m/2),St=z*z+Math.cos(w)*Math.cos(A)*lt*lt,Dt=2*Math.atan2(Math.sqrt(St),Math.sqrt(1-St));return this.R*Dt}}),Qt=6378137,Ft={R:Qt,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,m=this.MAX_LATITUDE,w=Math.max(Math.min(m,a.lat),-m),A=Math.sin(w*d);return new Y(this.R*a.lng*d,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(a){var d=180/Math.PI;return new Tt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:(function(){var a=Qt*Math.PI;return new it([-a,-a],[a,a])})()};function Ct(a,d,m,w){if(nt(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=m,this._d=w}Ct.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new Y((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function T(a,d,m,w){return new Ct(a,d,m,w)}var Q=o({},et,{code:"EPSG:3857",projection:Ft,transformation:(function(){var a=.5/(Math.PI*Ft.R);return T(a,.5,-a,.5)})()}),dt=o({},Q,{code:"EPSG:900913"});function gt(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function vt(a,d){var m="",w,A,z,lt,St,Dt;for(w=0,z=a.length;w<z;w++){for(St=a[w],A=0,lt=St.length;A<lt;A++)Dt=St[A],m+=(A?"L":"M")+Dt.x+" "+Dt.y;m+=d?ee.svg?"z":"x":""}return m||"M0 0"}var Nt=document.documentElement.style,Ot="ActiveXObject"in window,ft=Ot&&!document.addEventListener,Rt="msLaunchUri"in navigator&&!("documentMode"in document),Lt=ze("webkit"),Ht=ze("android"),Zt=ze("android 2")||ze("android 3"),Mt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xt=Ht&&ze("Google")&&Mt<537&&!("AudioNode"in window),Jt=!!window.opera,se=!Rt&&ze("chrome"),Gt=ze("gecko")&&!Lt&&!Jt&&!Ot,Ne=!se&&ze("safari"),ie=ze("phantom"),$t="OTransition"in Nt,Se=navigator.platform.indexOf("Win")===0,Le=Ot&&"transition"in Nt,ln="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zt,Kt="MozPerspective"in Nt,on=!window.L_DISABLE_3D&&(Le||ln||Kt)&&!$t&&!ie,cn=typeof orientation<"u"||ze("mobile"),hn=cn&&Lt,tn=cn&&ln,je=!window.PointerEvent&&window.MSPointerEvent,fn=!!(window.PointerEvent||je),Zr="ontouchstart"in window||!!window.TouchEvent,F=!window.L_NO_TOUCH&&(Zr||fn),H=cn&&Jt,at=cn&&Gt,It=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xt=(function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",x,d),window.removeEventListener("testPassiveEventSupport",x,d)}catch{}return a})(),ae=(function(){return!!document.createElement("canvas").getContext})(),Ce=!!(document.createElementNS&&gt("svg").createSVGRect),Ke=!!Ce&&(function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),kn=!Ce&&(function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}})(),xn=navigator.platform.indexOf("Mac")===0,qn=navigator.platform.indexOf("Linux")===0;function ze(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ee={ie:Ot,ielt9:ft,edge:Rt,webkit:Lt,android:Ht,android23:Zt,androidStock:Xt,opera:Jt,chrome:se,gecko:Gt,safari:Ne,phantom:ie,opera12:$t,win:Se,ie3d:Le,webkit3d:ln,gecko3d:Kt,any3d:on,mobile:cn,mobileWebkit:hn,mobileWebkit3d:tn,msPointer:je,pointer:fn,touch:F,touchNative:Zr,mobileOpera:H,mobileGecko:at,retina:It,passiveEvents:xt,canvas:ae,svg:Ce,vml:kn,inlineSvg:Ke,mac:xn,linux:qn},On=ee.msPointer?"MSPointerDown":"pointerdown",Mn=ee.msPointer?"MSPointerMove":"pointermove",Kn=ee.msPointer?"MSPointerUp":"pointerup",vi=ee.msPointer?"MSPointerCancel":"pointercancel",Te={touchstart:On,touchmove:Mn,touchend:Kn,touchcancel:vi},Bi={touchstart:yi,touchmove:yr,touchend:yr,touchcancel:yr},dn={},Jn=!1;function zi(a,d,m){return d==="touchstart"&&qo(),Bi[d]?(m=Bi[d].bind(this,m),a.addEventListener(Te[d],m,!1),m):(console.warn("wrong event specified:",d),x)}function ys(a,d,m){if(!Te[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(Te[d],m,!1)}function Wr(a){dn[a.pointerId]=a}function vr(a){dn[a.pointerId]&&(dn[a.pointerId]=a)}function Je(a){delete dn[a.pointerId]}function qo(){Jn||(document.addEventListener(On,Wr,!0),document.addEventListener(Mn,vr,!0),document.addEventListener(Kn,Je,!0),document.addEventListener(vi,Je,!0),Jn=!0)}function yr(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var m in dn)d.touches.push(dn[m]);d.changedTouches=[d],a(d)}}function yi(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&en(d),yr(a,d)}function Xi(a){var d={},m,w;for(w in a)m=a[w],d[w]=m&&m.bind?m.bind(a):m;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var xi=200;function xs(a,d){a.addEventListener("dblclick",d);var m=0,w;function A(z){if(z.detail!==1){w=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var lt=In(z);if(!(lt.some(function(Dt){return Dt instanceof HTMLLabelElement&&Dt.attributes.for})&&!lt.some(function(Dt){return Dt instanceof HTMLInputElement||Dt instanceof HTMLSelectElement}))){var St=Date.now();St-m<=xi?(w++,w===2&&d(Xi(z))):w=1,m=St}}}return a.addEventListener("click",A),{dblclick:d,simDblclick:A}}function xr(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var br=ne(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),bn=ne(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qi=bn==="webkitTransition"||bn==="OTransition"?bn+"End":"transitionend";function Ki(a){return typeof a=="string"?document.getElementById(a):a}function si(a,d){var m=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!m||m==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(a,null);m=w?w[d]:null}return m==="auto"?null:m}function we(a,d,m){var w=document.createElement(a);return w.className=d||"",m&&m.appendChild(w),w}function q(a){var d=a.parentNode;d&&d.removeChild(a)}function ht(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function X(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function _t(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function yt(a,d){if(a.classList!==void 0)return a.classList.contains(d);var m=Vt(a);return m.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(m)}function ot(a,d){if(a.classList!==void 0)for(var m=P(d),w=0,A=m.length;w<A;w++)a.classList.add(m[w]);else if(!yt(a,d)){var z=Vt(a);Bt(a,(z?z+" ":"")+d)}}function At(a,d){a.classList!==void 0?a.classList.remove(d):Bt(a,C((" "+Vt(a)+" ").replace(" "+d+" "," ")))}function Bt(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function Vt(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function qt(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&Wt(a,d)}function Wt(a,d){var m=!1,w="DXImageTransform.Microsoft.Alpha";try{m=a.filters.item(w)}catch{if(d===1)return}d=Math.round(d*100),m?(m.Enabled=d!==100,m.Opacity=d):a.style.filter+=" progid:"+w+"(opacity="+d+")"}function ne(a){for(var d=document.documentElement.style,m=0;m<a.length;m++)if(a[m]in d)return a[m];return!1}function de(a,d,m){var w=d||new Y(0,0);a.style[br]=(ee.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(m?" scale("+m+")":"")}function ce(a,d){a._leaflet_pos=d,ee.any3d?de(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function be(a){return a._leaflet_pos||new Y(0,0)}var Pe,Fe,Sn;if("onselectstart"in document)Pe=function(){me(window,"selectstart",en)},Fe=function(){qe(window,"selectstart",en)};else{var oi=ne(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Pe=function(){if(oi){var a=document.documentElement.style;Sn=a[oi],a[oi]="none"}},Fe=function(){oi&&(document.documentElement.style[oi]=Sn,Sn=void 0)}}function wr(){me(window,"dragstart",en)}function Er(){qe(window,"dragstart",en)}var De,bi;function bs(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Ji(),De=a,bi=a.style.outlineStyle,a.style.outlineStyle="none",me(window,"keydown",Ji))}function Ji(){De&&(De.style.outlineStyle=bi,De=void 0,bi=void 0,qe(window,"keydown",Ji))}function Cn(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Un(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var $s={__proto__:null,TRANSFORM:br,TRANSITION:bn,TRANSITION_END:qi,get:Ki,getStyle:si,create:we,remove:q,empty:ht,toFront:X,toBack:_t,hasClass:yt,addClass:ot,removeClass:At,setClass:Bt,getClass:Vt,setOpacity:qt,testProp:ne,setTransform:de,setPosition:ce,getPosition:be,get disableTextSelection(){return Pe},get enableTextSelection(){return Fe},disableImageDrag:wr,enableImageDrag:Er,preventOutline:bs,restoreOutline:Ji,getSizedParentNode:Cn,getScale:Un};function me(a,d,m,w){if(d&&typeof d=="object")for(var A in d)Xs(a,A,d[A],m);else{d=P(d);for(var z=0,lt=d.length;z<lt;z++)Xs(a,d[z],m,w)}return this}var wi="_leaflet_events";function qe(a,d,m,w){if(arguments.length===1)ws(a),delete a[wi];else if(d&&typeof d=="object")for(var A in d)Ae(a,A,d[A],m);else if(d=P(d),arguments.length===2)ws(a,function(St){return ct(d,St)!==-1});else for(var z=0,lt=d.length;z<lt;z++)Ae(a,d[z],m,w);return this}function ws(a,d){for(var m in a[wi]){var w=m.split(/\d/)[0];(!d||d(w))&&Ae(a,w,null,null,m)}}var Uo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(a,d,m,w){var A=d+p(m)+(w?"_"+p(w):"");if(a[wi]&&a[wi][A])return this;var z=function(St){return m.call(w||a,St||window.event)},lt=z;!ee.touchNative&&ee.pointer&&d.indexOf("touch")===0?z=zi(a,d,z):ee.touch&&d==="dblclick"?z=xs(a,z):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Uo[d]||d,z,ee.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(z=function(St){St=St||window.event,Ks(a,St)&&lt(St)},a.addEventListener(Uo[d],z,!1)):a.addEventListener(d,lt,!1):a.attachEvent("on"+d,z),a[wi]=a[wi]||{},a[wi][A]=z}function Ae(a,d,m,w,A){A=A||d+p(m)+(w?"_"+p(w):"");var z=a[wi]&&a[wi][A];if(!z)return this;!ee.touchNative&&ee.pointer&&d.indexOf("touch")===0?ys(a,d,z):ee.touch&&d==="dblclick"?xr(a,z):"removeEventListener"in a?a.removeEventListener(Uo[d]||d,z,!1):a.detachEvent("on"+d,z),a[wi][A]=null}function Tn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Es(a){return Xs(a,"wheel",Tn),this}function Yr(a){return me(a,"mousedown touchstart dblclick contextmenu",Tn),a._leaflet_disable_click=!0,this}function en(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Qi(a){return en(a),Tn(a),this}function In(a){if(a.composedPath)return a.composedPath();for(var d=[],m=a.target;m;)d.push(m),m=m.parentNode;return d}function Ho(a,d){if(!d)return new Y(a.clientX,a.clientY);var m=Un(d),w=m.boundingClientRect;return new Y((a.clientX-w.left)/m.x-d.clientLeft,(a.clientY-w.top)/m.y-d.clientTop)}var Go=ee.linux&&ee.chrome?window.devicePixelRatio:ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Vo(a){return ee.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Go:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ks(a,d){var m=d.relatedTarget;if(!m)return!0;try{for(;m&&m!==a;)m=m.parentNode}catch{return!1}return m!==a}var nc={__proto__:null,on:me,off:qe,stopPropagation:Tn,disableScrollPropagation:Es,disableClickPropagation:Yr,preventDefault:en,stop:Qi,getPropagationPath:In,getMousePosition:Ho,getWheelDelta:Vo,isExternalTarget:Ks,addListener:me,removeListener:qe},Zo=V.extend({run:function(a,d,m,w){this.stop(),this._el=a,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=be(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,m=this._duration*1e3;d<m?this._runFrame(this._easeOut(d/m),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var m=this._startPos.add(this._offset.multiplyBy(a));d&&m._round(),ce(this._el,m),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),_e=V.extend({options:{crs:Q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=N(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(Pt(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=bn&&ee.any3d&&!ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,qi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,m){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(Pt(a),d,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=o({animate:m.animate},m.zoom),m.pan=o({animate:m.animate,duration:m.duration},m.pan));var w=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,m.zoom):this._tryAnimatedPan(a,m.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d,m.pan&&m.pan.noMoveStart),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,m){var w=this.getZoomScale(d),A=this.getSize().divideBy(2),z=a instanceof Y?a:this.latLngToContainerPoint(a),lt=z.subtract(A).multiplyBy(1-1/w),St=this.containerPointToLatLng(A.add(lt));return this.setView(St,d,{zoom:m})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():Et(a);var m=K(d.paddingTopLeft||d.padding||[0,0]),w=K(d.paddingBottomRight||d.padding||[0,0]),A=this.getBoundsZoom(a,!1,m.add(w));if(A=typeof d.maxZoom=="number"?Math.min(d.maxZoom,A):A,A===1/0)return{center:a.getCenter(),zoom:A};var z=w.subtract(m).divideBy(2),lt=this.project(a.getSouthWest(),A),St=this.project(a.getNorthEast(),A),Dt=this.unproject(lt.add(St).divideBy(2).add(z),A);return{center:Dt,zoom:A}},fitBounds:function(a,d){if(a=Et(a),!a.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(a,d);return this.setView(m.center,m.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=K(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){ot(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,m,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,m){if(m=m||{},m.animate===!1||!ee.any3d)return this.setView(a,d,m);this._stop();var w=this.project(this.getCenter()),A=this.project(a),z=this.getSize(),lt=this._zoom;a=Pt(a),d=d===void 0?lt:d;var St=Math.max(z.x,z.y),Dt=St*this.getZoomScale(lt,d),Ut=A.distanceTo(w)||1,te=1.42,fe=te*te;function Ee(vn){var _u=vn?-1:1,z_=vn?Dt:St,q_=Dt*Dt-St*St+_u*fe*fe*Ut*Ut,U_=2*z_*fe*Ut,gc=q_/U_,_f=Math.sqrt(gc*gc+1)-gc,H_=_f<1e-9?-18:Math.log(_f);return H_}function ei(vn){return(Math.exp(vn)-Math.exp(-vn))/2}function Ln(vn){return(Math.exp(vn)+Math.exp(-vn))/2}function Ii(vn){return ei(vn)/Ln(vn)}var ui=Ee(0);function ao(vn){return St*(Ln(ui)/Ln(ui+te*vn))}function M_(vn){return St*(Ln(ui)*Ii(ui+te*vn)-ei(ui))/fe}function R_(vn){return 1-Math.pow(1-vn,1.5)}var F_=Date.now(),pf=(Ee(1)-ui)/te,B_=m.duration?1e3*m.duration:1e3*pf*.8;function mf(){var vn=(Date.now()-F_)/B_,_u=R_(vn)*pf;vn<=1?(this._flyToFrame=R(mf,this),this._move(this.unproject(w.add(A.subtract(w).multiplyBy(M_(_u)/Ut)),lt),this.getScaleZoom(St/ao(_u),lt),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),mf.call(this),this},flyToBounds:function(a,d){var m=this._getBoundsCenterZoom(a,d);return this.flyTo(m.center,m.zoom,d)},setMaxBounds:function(a){return a=Et(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var m=this.getCenter(),w=this._limitCenter(m,this._zoom,Et(a));return m.equals(w)||this.panTo(w,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var m=K(d.paddingTopLeft||d.padding||[0,0]),w=K(d.paddingBottomRight||d.padding||[0,0]),A=this.project(this.getCenter()),z=this.project(a),lt=this.getPixelBounds(),St=bt([lt.min.add(m),lt.max.subtract(w)]),Dt=St.getSize();if(!St.contains(z)){this._enforcingBounds=!0;var Ut=z.subtract(St.getCenter()),te=St.extend(z).getSize().subtract(Dt);A.x+=Ut.x<0?-te.x:te.x,A.y+=Ut.y<0?-te.y:te.y,this.panTo(this.unproject(A),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),w=d.divideBy(2).round(),A=m.divideBy(2).round(),z=w.subtract(A);return!z.x&&!z.y?this:(a.animate&&a.pan?this.panBy(z):(a.pan&&this._rawPanBy(z),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=h(this._handleGeolocationResponse,this),m=h(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,m,a):navigator.geolocation.getCurrentPosition(d,m,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var d=a.code,m=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var d=a.coords.latitude,m=a.coords.longitude,w=new Tt(d,m),A=w.toBounds(a.coords.accuracy*2),z=this._locateOptions;if(z.setView){var lt=this.getBoundsZoom(A);this.setView(w,z.maxZoom?Math.min(lt,z.maxZoom):lt)}var St={latlng:w,bounds:A,timestamp:a.timestamp};for(var Dt in a.coords)typeof a.coords[Dt]=="number"&&(St[Dt]=a.coords[Dt]);this.fire("locationfound",St)}},addHandler:function(a,d){if(!d)return this;var m=this[a]=new d(this);return this._handlers.push(m),this.options[a]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)q(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var m="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),w=we("div",m,d||this._mapPane);return a&&(this._panes[a]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),m=this.unproject(a.getTopRight());return new wt(d,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,m){a=Et(a),m=K(m||[0,0]);var w=this.getZoom()||0,A=this.getMinZoom(),z=this.getMaxZoom(),lt=a.getNorthWest(),St=a.getSouthEast(),Dt=this.getSize().subtract(m),Ut=bt(this.project(St,w),this.project(lt,w)).getSize(),te=ee.any3d?this.options.zoomSnap:1,fe=Dt.x/Ut.x,Ee=Dt.y/Ut.y,ei=d?Math.max(fe,Ee):Math.min(fe,Ee);return w=this.getScaleZoom(ei,w),te&&(w=Math.round(w/(te/100))*(te/100),w=d?Math.ceil(w/te)*te:Math.floor(w/te)*te),Math.max(A,Math.min(z,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var m=this._getTopLeftPoint(a,d);return new it(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var m=this.options.crs;return d=d===void 0?this._zoom:d,m.scale(a)/m.scale(d)},getScaleZoom:function(a,d){var m=this.options.crs;d=d===void 0?this._zoom:d;var w=m.zoom(a*m.scale(d));return isNaN(w)?1/0:w},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(Pt(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(K(a),d)},layerPointToLatLng:function(a){var d=K(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(Pt(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Pt(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Et(a))},distance:function(a,d){return this.options.crs.distance(Pt(a),Pt(d))},containerPointToLayerPoint:function(a){return K(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return K(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(K(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Pt(a)))},mouseEventToContainerPoint:function(a){return Ho(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=Ki(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(d,"scroll",this._onScroll,this),this._containerId=p(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ee.any3d,ot(a,"leaflet-container"+(ee.touch?" leaflet-touch":"")+(ee.retina?" leaflet-retina":"")+(ee.ielt9?" leaflet-oldie":"")+(ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=si(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ce(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ot(a.markerPane,"leaflet-zoom-hide"),ot(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d,m){ce(this._mapPane,new Y(0,0));var w=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var A=this._zoom!==d;this._moveStart(A,m)._move(a,d)._moveEnd(A),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,m,w){d===void 0&&(d=this._zoom);var A=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),w?m&&m.pinch&&this.fire("zoom",m):((A||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){ce(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[p(this._container)]=this;var d=a?qe:me;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),ee.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var m=[],w,A=d==="mouseout"||d==="mouseover",z=a.target||a.srcElement,lt=!1;z;){if(w=this._targets[p(z)],w&&(d==="click"||d==="preclick")&&this._draggableMoved(w)){lt=!0;break}if(w&&w.listens(d,!0)&&(A&&!Ks(z,a)||(m.push(w),A))||z===this._container)break;z=z.parentNode}return!m.length&&!lt&&!A&&this.listens(d,!0)&&(m=[this]),m},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var m=a.type;m==="mousedown"&&bs(d),this._fireDOMEvent(a,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,m){if(a.type==="click"){var w=o({},a);w.type="preclick",this._fireDOMEvent(w,w.type,m)}var A=this._findEventTargets(a,d);if(m){for(var z=[],lt=0;lt<m.length;lt++)m[lt].listens(d,!0)&&z.push(m[lt]);A=z.concat(A)}if(A.length){d==="contextmenu"&&en(a);var St=A[0],Dt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Ut=St.getLatLng&&(!St._radius||St._radius<=10);Dt.containerPoint=Ut?this.latLngToContainerPoint(St.getLatLng()):this.mouseEventToContainerPoint(a),Dt.layerPoint=this.containerPointToLayerPoint(Dt.containerPoint),Dt.latlng=Ut?St.getLatLng():this.layerPointToLatLng(Dt.layerPoint)}for(lt=0;lt<A.length;lt++)if(A[lt].fire(d,Dt,!0),Dt.originalEvent._stopped||A[lt].options.bubblingMouseEvents===!1&&ct(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return be(this._mapPane)||new Y(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var m=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var m=this.getSize()._divideBy(2);return this.project(a,d)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,m){var w=this._getNewPixelOrigin(m,d);return this.project(a,d)._subtract(w)},_latLngBoundsToNewLayerBounds:function(a,d,m){var w=this._getNewPixelOrigin(m,d);return bt([this.project(a.getSouthWest(),d)._subtract(w),this.project(a.getNorthWest(),d)._subtract(w),this.project(a.getSouthEast(),d)._subtract(w),this.project(a.getNorthEast(),d)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,m){if(!m)return a;var w=this.project(a,d),A=this.getSize().divideBy(2),z=new it(w.subtract(A),w.add(A)),lt=this._getBoundsOffset(z,m,d);return Math.abs(lt.x)<=1&&Math.abs(lt.y)<=1?a:this.unproject(w.add(lt),d)},_limitOffset:function(a,d){if(!d)return a;var m=this.getPixelBounds(),w=new it(m.min.add(a),m.max.add(a));return a.add(this._getBoundsOffset(w,d))},_getBoundsOffset:function(a,d,m){var w=bt(this.project(d.getNorthEast(),m),this.project(d.getSouthWest(),m)),A=w.min.subtract(a.min),z=w.max.subtract(a.max),lt=this._rebound(A.x,-z.x),St=this._rebound(A.y,-z.y);return new Y(lt,St)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),m=this.getMaxZoom(),w=ee.any3d?this.options.zoomSnap:1;return w&&(a=Math.round(a/w)*w),Math.max(d,Math.min(m,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){At(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var m=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,d),!0)},_createAnimProxy:function(){var a=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var m=br,w=this._proxy.style[m];de(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),w===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();de(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(d),A=this._getCenterOffset(a)._divideBy(1-1/w);return m.animate!==!0&&!this.getSize().contains(A)?!1:(R(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,m,w){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&At(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Js(a,d){return new _e(a,d)}var fi=Z.extend({options:{position:"topright"},initialize:function(a){N(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),m=this.getPosition(),w=a._controlCorners[m];return ot(d,"leaflet-control"),m.indexOf("bottom")!==-1?w.insertBefore(d,w.firstChild):w.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),An=function(a){return new fi(a)};_e.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",m=this._controlContainer=we("div",d+"control-container",this._container);function w(A,z){var lt=d+A+" "+d+z;a[A+z]=we("div",lt,m)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)q(this._controlCorners[a]);q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kr=fi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,m,w){return m<w?-1:w<m?1:0}},initialize:function(a,d,m){N(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in a)this._addLayer(a[w],w);for(w in d)this._addLayer(d[w],w,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return fi.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(p(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):At(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return At(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=we("div",a),m=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Yr(d),Es(d);var w=this._section=we("section",a+"-list");m&&(this._map.on("click",this.collapse,this),me(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=we("a",a+"-toggle",d);A.href="#",A.title="Layers",A.setAttribute("role","button"),me(A,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){en(z),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=we("div",a+"-base",w),this._separator=we("div",a+"-separator",w),this._overlaysList=we("div",a+"-overlays",w),d.appendChild(w)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&p(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,m){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:m}),this.options.sortLayers&&this._layers.sort(h(function(w,A){return this.options.sortFunction(w.layer,A.layer,w.name,A.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ht(this._baseLayersList),ht(this._overlaysList),this._layerControlInputs=[];var a,d,m,w,A=0;for(m=0;m<this._layers.length;m++)w=this._layers[m],this._addItem(w),d=d||w.overlay,a=a||!w.overlay,A+=w.overlay?0:1;return this.options.hideSingleBase&&(a=a&&A>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(p(a.target)),m=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;m&&this._map.fire(m,d)},_createRadioElement:function(a,d){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=m,w.firstChild},_addItem:function(a){var d=document.createElement("label"),m=this._map.hasLayer(a.layer),w;a.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=m):w=this._createRadioElement("leaflet-base-layers_"+p(this),m),this._layerControlInputs.push(w),w.layerId=p(a.layer),me(w,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+a.name;var z=document.createElement("span");d.appendChild(z),z.appendChild(w),z.appendChild(A);var lt=a.overlay?this._overlaysList:this._baseLayersList;return lt.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,d,m,w=[],A=[];this._handlingClick=!0;for(var z=a.length-1;z>=0;z--)d=a[z],m=this._getLayer(d.layerId).layer,d.checked?w.push(m):d.checked||A.push(m);for(z=0;z<A.length;z++)this._map.hasLayer(A[z])&&this._map.removeLayer(A[z]);for(z=0;z<w.length;z++)this._map.hasLayer(w[z])||this._map.addLayer(w[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,m,w=this._map.getZoom(),A=a.length-1;A>=0;A--)d=a[A],m=this._getLayer(d.layerId).layer,d.disabled=m.options.minZoom!==void 0&&w<m.options.minZoom||m.options.maxZoom!==void 0&&w>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,me(a,"click",en),this.expand();var d=this;setTimeout(function(){qe(a,"click",en),d._preventClick=!1})}}),ic=function(a,d,m){return new kr(a,d,m)},tr=fi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",m=we("div",d+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,d+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,d+"-out",m,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,m,w,A){var z=we("a",m,w);return z.innerHTML=a,z.href="#",z.title=d,z.setAttribute("role","button"),z.setAttribute("aria-label",d),Yr(z),me(z,"click",Qi),me(z,"click",A,this),me(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";At(this._zoomInButton,d),At(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(ot(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(ot(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new tr,this.addControl(this.zoomControl))});var ru=function(a){return new tr(a)},Sr=fi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",m=we("div",d),w=this.options;return this._addScales(w,d+"-line",m),a.on(w.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),m},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,m){a.metric&&(this._mScale=we("div",d,m)),a.imperial&&(this._iScale=we("div",d,m))},_update:function(){var a=this._map,d=a.getSize().y/2,m=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(m)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),m=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,m,d/a)},_updateImperial:function(a){var d=a*3.2808399,m,w,A;d>5280?(m=d/5280,w=this._getRoundNum(m),this._updateScale(this._iScale,w+" mi",w/m)):(A=this._getRoundNum(d),this._updateScale(this._iScale,A+" ft",A/d))},_updateScale:function(a,d,m){a.style.width=Math.round(this.options.maxWidth*m)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),m=a/d;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,d*m}}),rc=function(a){return new Sr(a)},Ei='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Qs=fi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ee.inlineSvg?Ei+" ":"")+"Leaflet</a>"},initialize:function(a){N(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=we("div","leaflet-control-attribution"),Yr(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var m=[];this.options.prefix&&m.push(this.options.prefix),a.length&&m.push(a.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new Qs().addTo(this)});var sc=function(a){return new Qs(a)};fi.Layers=kr,fi.Zoom=tr,fi.Scale=Sr,fi.Attribution=Qs,An.layers=ic,An.zoom=ru,An.scale=rc,An.attribution=sc;var ki=Z.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ki.addTo=function(a,d){return a.addHandler(d,this),this};var oc={Events:$},su=ee.touch?"touchstart mousedown":"mousedown",er=V.extend({options:{clickTolerance:3},initialize:function(a,d,m,w){N(this,w),this._element=a,this._dragStartTarget=d||a,this._preventOutline=m},enable:function(){this._enabled||(me(this._dragStartTarget,su,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(er._dragging===this&&this.finishDrag(!0),qe(this._dragStartTarget,su,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){er._dragging===this&&this.finishDrag();return}if(!(er._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(er._dragging=this,this._preventOutline&&bs(this._element),wr(),Pe(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,m=Cn(this._element);this._startPoint=new Y(d.clientX,d.clientY),this._startPos=be(this._element),this._parentScale=Un(m);var w=a.type==="mousedown";me(document,w?"mousemove":"touchmove",this._onMove,this),me(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,m=new Y(d.clientX,d.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,en(a),this._moved||(this.fire("dragstart"),this._moved=!0,ot(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),ce(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){At(document.body,"leaflet-dragging"),this._lastTarget&&(At(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),qe(document,"mousemove touchmove",this._onMove,this),qe(document,"mouseup touchend touchcancel",this._onUp,this),Er(),Fe();var d=this._moved&&this._moving;this._moving=!1,er._dragging=!1,d&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function ou(a,d,m){var w,A=[1,4,2,8],z,lt,St,Dt,Ut,te,fe,Ee;for(z=0,te=a.length;z<te;z++)a[z]._code=gn(a[z],d);for(St=0;St<4;St++){for(fe=A[St],w=[],z=0,te=a.length,lt=te-1;z<te;lt=z++)Dt=a[z],Ut=a[lt],Dt._code&fe?Ut._code&fe||(Ee=ks(Ut,Dt,fe,d,m),Ee._code=gn(Ee,d),w.push(Ee)):(Ut._code&fe&&(Ee=ks(Ut,Dt,fe,d,m),Ee._code=gn(Ee,d),w.push(Ee)),w.push(Dt));a=w}return a}function au(a,d){var m,w,A,z,lt,St,Dt,Ut,te;if(!a||a.length===0)throw new Error("latlngs not passed");ti(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var fe=Pt([0,0]),Ee=Et(a),ei=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());ei<1700&&(fe=Ui(a));var Ln=a.length,Ii=[];for(m=0;m<Ln;m++){var ui=Pt(a[m]);Ii.push(d.project(Pt([ui.lat-fe.lat,ui.lng-fe.lng])))}for(St=Dt=Ut=0,m=0,w=Ln-1;m<Ln;w=m++)A=Ii[m],z=Ii[w],lt=A.y*z.x-z.y*A.x,Dt+=(A.x+z.x)*lt,Ut+=(A.y+z.y)*lt,St+=lt*3;St===0?te=Ii[0]:te=[Dt/St,Ut/St];var ao=d.unproject(K(te));return Pt([ao.lat+fe.lat,ao.lng+fe.lng])}function Ui(a){for(var d=0,m=0,w=0,A=0;A<a.length;A++){var z=Pt(a[A]);d+=z.lat,m+=z.lng,w++}return Pt([d/w,m/w])}var Qn={__proto__:null,clipPolygon:ou,polygonCenter:au,centroid:Ui};function uu(a,d){if(!d||!a.length)return a.slice();var m=d*d;return a=jo(a,m),a=Yo(a,m),a}function Wo(a,d,m){return Math.sqrt(Cs(a,d,m,!0))}function ac(a,d,m){return Cs(a,d,m)}function Yo(a,d){var m=a.length,w=typeof Uint8Array<"u"?Uint8Array:Array,A=new w(m);A[0]=A[m-1]=1,to(a,A,d,0,m-1);var z,lt=[];for(z=0;z<m;z++)A[z]&&lt.push(a[z]);return lt}function to(a,d,m,w,A){var z=0,lt,St,Dt;for(St=w+1;St<=A-1;St++)Dt=Cs(a[St],a[w],a[A],!0),Dt>z&&(lt=St,z=Dt);z>m&&(d[lt]=1,to(a,d,m,w,lt),to(a,d,m,lt,A))}function jo(a,d){for(var m=[a[0]],w=1,A=0,z=a.length;w<z;w++)Ss(a[w],a[A])>d&&(m.push(a[w]),A=w);return A<z-1&&m.push(a[z-1]),m}var $o;function ai(a,d,m,w,A){var z=w?$o:gn(a,m),lt=gn(d,m),St,Dt,Ut;for($o=lt;;){if(!(z|lt))return[a,d];if(z&lt)return!1;St=z||lt,Dt=ks(a,d,St,m,A),Ut=gn(Dt,m),St===z?(a=Dt,z=Ut):(d=Dt,lt=Ut)}}function ks(a,d,m,w,A){var z=d.x-a.x,lt=d.y-a.y,St=w.min,Dt=w.max,Ut,te;return m&8?(Ut=a.x+z*(Dt.y-a.y)/lt,te=Dt.y):m&4?(Ut=a.x+z*(St.y-a.y)/lt,te=St.y):m&2?(Ut=Dt.x,te=a.y+lt*(Dt.x-a.x)/z):m&1&&(Ut=St.x,te=a.y+lt*(St.x-a.x)/z),new Y(Ut,te,A)}function gn(a,d){var m=0;return a.x<d.min.x?m|=1:a.x>d.max.x&&(m|=2),a.y<d.min.y?m|=4:a.y>d.max.y&&(m|=8),m}function Ss(a,d){var m=d.x-a.x,w=d.y-a.y;return m*m+w*w}function Cs(a,d,m,w){var A=d.x,z=d.y,lt=m.x-A,St=m.y-z,Dt=lt*lt+St*St,Ut;return Dt>0&&(Ut=((a.x-A)*lt+(a.y-z)*St)/Dt,Ut>1?(A=m.x,z=m.y):Ut>0&&(A+=lt*Ut,z+=St*Ut)),lt=a.x-A,St=a.y-z,w?lt*lt+St*St:new Y(A,z)}function ti(a){return!nt(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Xo(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ti(a)}function Ko(a,d){var m,w,A,z,lt,St,Dt,Ut;if(!a||a.length===0)throw new Error("latlngs not passed");ti(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var te=Pt([0,0]),fe=Et(a),Ee=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ee<1700&&(te=Ui(a));var ei=a.length,Ln=[];for(m=0;m<ei;m++){var Ii=Pt(a[m]);Ln.push(d.project(Pt([Ii.lat-te.lat,Ii.lng-te.lng])))}for(m=0,w=0;m<ei-1;m++)w+=Ln[m].distanceTo(Ln[m+1])/2;if(w===0)Ut=Ln[0];else for(m=0,z=0;m<ei-1;m++)if(lt=Ln[m],St=Ln[m+1],A=lt.distanceTo(St),z+=A,z>w){Dt=(z-w)/A,Ut=[St.x-Dt*(St.x-lt.x),St.y-Dt*(St.y-lt.y)];break}var ui=d.unproject(K(Ut));return Pt([ui.lat+te.lat,ui.lng+te.lng])}var Jo={__proto__:null,simplify:uu,pointToSegmentDistance:Wo,closestPointOnSegment:ac,clipSegment:ai,_getEdgeIntersection:ks,_getBitCode:gn,_sqClosestPointOnSegment:Cs,isFlat:ti,_flat:Xo,polylineCenter:Ko},Qo={project:function(a){return new Y(a.lng,a.lat)},unproject:function(a){return new Tt(a.y,a.x)},bounds:new it([-180,-90],[180,90])},ta={R:6378137,R_MINOR:6356752314245179e-9,bounds:new it([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,m=this.R,w=a.lat*d,A=this.R_MINOR/m,z=Math.sqrt(1-A*A),lt=z*Math.sin(w),St=Math.tan(Math.PI/4-w/2)/Math.pow((1-lt)/(1+lt),z/2);return w=-m*Math.log(Math.max(St,1e-10)),new Y(a.lng*d*m,w)},unproject:function(a){for(var d=180/Math.PI,m=this.R,w=this.R_MINOR/m,A=Math.sqrt(1-w*w),z=Math.exp(-a.y/m),lt=Math.PI/2-2*Math.atan(z),St=0,Dt=.1,Ut;St<15&&Math.abs(Dt)>1e-7;St++)Ut=A*Math.sin(lt),Ut=Math.pow((1-Ut)/(1+Ut),A/2),Dt=Math.PI/2-2*Math.atan(z*Ut)-lt,lt+=Dt;return new Tt(lt*d,a.x*d/m)}},uc={__proto__:null,LonLat:Qo,Mercator:ta,SphericalMercator:Ft},lc=o({},et,{code:"EPSG:3395",projection:ta,transformation:(function(){var a=.5/(Math.PI*ta.R);return T(a,.5,-a,.5)})()}),lu=o({},et,{code:"EPSG:4326",projection:Qo,transformation:T(1/180,1,-1/180,.5)}),cc=o({},Yt,{projection:Qo,transformation:T(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var m=d.lng-a.lng,w=d.lat-a.lat;return Math.sqrt(m*m+w*w)},infinite:!0});Yt.Earth=et,Yt.EPSG3395=lc,Yt.EPSG3857=Q,Yt.EPSG900913=dt,Yt.EPSG4326=lu,Yt.Simple=cc;var di=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[p(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[p(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var m=this.getEvents();d.on(m,this),this.once("remove",function(){d.off(m,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=p(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=p(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return p(a)in this._layers},eachLayer:function(a,d){for(var m in this._layers)a.call(d,this._layers[m]);return this},_addLayers:function(a){a=a?nt(a)?a:[a]:[];for(var d=0,m=a.length;d<m;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[p(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=p(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,m=this._getZoomSpan();for(var w in this._zoomBoundLayers){var A=this._zoomBoundLayers[w].options;a=A.minZoom===void 0?a:Math.min(a,A.minZoom),d=A.maxZoom===void 0?d:Math.max(d,A.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jr=di.extend({initialize:function(a,d){N(this,d),this._layers={};var m,w;if(a)for(m=0,w=a.length;m<w;m++)this.addLayer(a[m])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),m,w;for(m in this._layers)w=this._layers[m],w[a]&&w[a].apply(w,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var m in this._layers)a.call(d,this._layers[m]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return p(a)}}),cu=function(a,d){return new jr(a,d)},Hi=jr.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),jr.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),jr.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new wt;for(var d in this._layers){var m=this._layers[d];a.extend(m.getBounds?m.getBounds():m.getLatLng())}return a}}),hu=function(a,d){return new Hi(a,d)},$r=Z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){N(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var m=this._getIconUrl(a);if(!m){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(m,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(w,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(a,d){var m=this.options,w=m[d+"Size"];typeof w=="number"&&(w=[w,w]);var A=K(w),z=K(d==="shadow"&&m.shadowAnchor||m.iconAnchor||A&&A.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(m.className||""),z&&(a.style.marginLeft=-z.x+"px",a.style.marginTop=-z.y+"px"),A&&(a.style.width=A.x+"px",a.style.height=A.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return ee.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function hc(a){return new $r(a)}var Ts=$r.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ts.imagePath!="string"&&(Ts.imagePath=this._detectIconPath()),(this.options.imagePath||Ts.imagePath)+$r.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(m,w,A){var z=w.exec(m);return z&&z[A]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=we("div","leaflet-default-icon-path",document.body),d=si(a,"background-image")||si(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),fu=ki.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new er(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ot(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&At(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,m=d._map,w=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,z=be(d._icon),lt=m.getPixelBounds(),St=m.getPixelOrigin(),Dt=bt(lt.min._subtract(St).add(A),lt.max._subtract(St).subtract(A));if(!Dt.contains(z)){var Ut=K((Math.max(Dt.max.x,z.x)-Dt.max.x)/(lt.max.x-Dt.max.x)-(Math.min(Dt.min.x,z.x)-Dt.min.x)/(lt.min.x-Dt.min.x),(Math.max(Dt.max.y,z.y)-Dt.max.y)/(lt.max.y-Dt.max.y)-(Math.min(Dt.min.y,z.y)-Dt.min.y)/(lt.min.y-Dt.min.y)).multiplyBy(w);m.panBy(Ut,{animate:!1}),this._draggable._newPos._add(Ut),this._draggable._startPos._add(Ut),ce(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=R(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,m=d._shadow,w=be(d._icon),A=d._map.layerPointToLatLng(w);m&&ce(m,w),d._latlng=A,a.latlng=A,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),eo=di.extend({options:{icon:new Ts,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){N(this,d),this._latlng=Pt(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=Pt(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=a.icon.createIcon(this._icon),w=!1;m!==this._icon&&(this._icon&&this._removeIcon(),w=!0,a.title&&(m.title=a.title),m.tagName==="IMG"&&(m.alt=a.alt||"")),ot(m,d),a.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(m,"focus",this._panOnFocus,this);var A=a.icon.createShadow(this._shadow),z=!1;A!==this._shadow&&(this._removeShadow(),z=!0),A&&(ot(A,d),A.alt=""),this._shadow=A,a.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&z&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qe(this._icon,"focus",this._panOnFocus,this),q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&q(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&ce(this._icon,a),this._shadow&&ce(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fu)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fu(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&qt(this._icon,a),this._shadow&&qt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var d=this.options.icon.options,m=d.iconSize?K(d.iconSize):K(0,0),w=d.iconAnchor?K(d.iconAnchor):K(0,0);a.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:m.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fc(a,d){return new eo(a,d)}var nr=di.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return N(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Is=nr.extend({options:{fill:!0,radius:10},initialize:function(a,d){N(this,d),this._latlng=Pt(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=Pt(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return nr.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,m=this._clickTolerance(),w=[a+m,d+m];this._pxBounds=new it(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function du(a,d){return new Is(a,d)}var no=Is.extend({initialize:function(a,d,m){if(typeof d=="number"&&(d=o({},m,{radius:d})),N(this,d),this._latlng=Pt(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:nr.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,m=this._map,w=m.options.crs;if(w.distance===et.distance){var A=Math.PI/180,z=this._mRadius/et.R/A,lt=m.project([d+z,a]),St=m.project([d-z,a]),Dt=lt.add(St).divideBy(2),Ut=m.unproject(Dt).lat,te=Math.acos((Math.cos(z*A)-Math.sin(d*A)*Math.sin(Ut*A))/(Math.cos(d*A)*Math.cos(Ut*A)))/A;(isNaN(te)||te===0)&&(te=z/Math.cos(Math.PI/180*d)),this._point=Dt.subtract(m.getPixelOrigin()),this._radius=isNaN(te)?0:Dt.x-m.project([Ut,a-te]).x,this._radiusY=Dt.y-lt.y}else{var fe=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(fe).x}this._updateBounds()}});function dc(a,d,m){return new no(a,d,m)}var Si=nr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){N(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,m=null,w=Cs,A,z,lt=0,St=this._parts.length;lt<St;lt++)for(var Dt=this._parts[lt],Ut=1,te=Dt.length;Ut<te;Ut++){A=Dt[Ut-1],z=Dt[Ut];var fe=w(a,A,z,!0);fe<d&&(d=fe,m=w(a,A,z))}return m&&(m.distance=Math.sqrt(d)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ko(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=Pt(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new wt,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return ti(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],m=ti(a),w=0,A=a.length;w<A;w++)m?(d[w]=Pt(a[w]),this._bounds.extend(d[w])):d[w]=this._convertLatLngs(a[w]);return d},_project:function(){var a=new it;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new Y(a,a);this._rawPxBounds&&(this._pxBounds=new it([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,m){var w=a[0]instanceof Tt,A=a.length,z,lt;if(w){for(lt=[],z=0;z<A;z++)lt[z]=this._map.latLngToLayerPoint(a[z]),m.extend(lt[z]);d.push(lt)}else for(z=0;z<A;z++)this._projectLatlngs(a[z],d,m)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,m,w,A,z,lt,St,Dt;for(m=0,A=0,z=this._rings.length;m<z;m++)for(Dt=this._rings[m],w=0,lt=Dt.length;w<lt-1;w++)St=ai(Dt[w],Dt[w+1],a,w,!0),St&&(d[A]=d[A]||[],d[A].push(St[0]),(St[1]!==Dt[w+1]||w===lt-2)&&(d[A].push(St[1]),A++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,m=0,w=a.length;m<w;m++)a[m]=uu(a[m],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var m,w,A,z,lt,St,Dt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(m=0,z=this._parts.length;m<z;m++)for(St=this._parts[m],w=0,lt=St.length,A=lt-1;w<lt;A=w++)if(!(!d&&w===0)&&Wo(a,St[A],St[w])<=Dt)return!0;return!1}});function ea(a,d){return new Si(a,d)}Si._flat=Xo;var Xr=Si.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return au(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var d=Si.prototype._convertLatLngs.call(this,a),m=d.length;return m>=2&&d[0]instanceof Tt&&d[0].equals(d[m-1])&&d.pop(),d},_setLatLngs:function(a){Si.prototype._setLatLngs.call(this,a),ti(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ti(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,m=new Y(d,d);if(a=new it(a.min.subtract(m),a.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,A=this._rings.length,z;w<A;w++)z=ou(this._rings[w],a,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,m,w,A,z,lt,St,Dt,Ut;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(z=0,Dt=this._parts.length;z<Dt;z++)for(m=this._parts[z],lt=0,Ut=m.length,St=Ut-1;lt<Ut;St=lt++)w=m[lt],A=m[St],w.y>a.y!=A.y>a.y&&a.x<(A.x-w.x)*(a.y-w.y)/(A.y-w.y)+w.x&&(d=!d);return d||Si.prototype._containsPoint.call(this,a,!0)}});function gu(a,d){return new Xr(a,d)}var Ci=Hi.extend({initialize:function(a,d){N(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=nt(a)?a:a.features,m,w,A;if(d){for(m=0,w=d.length;m<w;m++)A=d[m],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var z=this.options;if(z.filter&&!z.filter(a))return this;var lt=io(a,z);return lt?(lt.feature=c(a),lt.defaultOptions=lt.options,this.resetStyle(lt),z.onEachFeature&&z.onEachFeature(a,lt),this.addLayer(lt)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function io(a,d){var m=a.type==="Feature"?a.geometry:a,w=m?m.coordinates:null,A=[],z=d&&d.pointToLayer,lt=d&&d.coordsToLatLng||ir,St,Dt,Ut,te;if(!w&&!m)return null;switch(m.type){case"Point":return St=lt(w),pu(z,a,St,d);case"MultiPoint":for(Ut=0,te=w.length;Ut<te;Ut++)St=lt(w[Ut]),A.push(pu(z,a,St,d));return new Hi(A);case"LineString":case"MultiLineString":return Dt=ro(w,m.type==="LineString"?0:1,lt),new Si(Dt,d);case"Polygon":case"MultiPolygon":return Dt=ro(w,m.type==="Polygon"?1:2,lt),new Xr(Dt,d);case"GeometryCollection":for(Ut=0,te=m.geometries.length;Ut<te;Ut++){var fe=io({geometry:m.geometries[Ut],type:"Feature",properties:a.properties},d);fe&&A.push(fe)}return new Hi(A);case"FeatureCollection":for(Ut=0,te=m.features.length;Ut<te;Ut++){var Ee=io(m.features[Ut],d);Ee&&A.push(Ee)}return new Hi(A);default:throw new Error("Invalid GeoJSON object.")}}function pu(a,d,m,w){return a?a(d,m):new eo(m,w&&w.markersInheritOptions&&w)}function ir(a){return new Tt(a[1],a[0],a[2])}function ro(a,d,m){for(var w=[],A=0,z=a.length,lt;A<z;A++)lt=d?ro(a[A],d-1,m):(m||ir)(a[A]),w.push(lt);return w}function so(a,d){return a=Pt(a),a.alt!==void 0?[S(a.lng,d),S(a.lat,d),S(a.alt,d)]:[S(a.lng,d),S(a.lat,d)]}function Rn(a,d,m,w){for(var A=[],z=0,lt=a.length;z<lt;z++)A.push(d?Rn(a[z],ti(a[z])?0:d-1,m,w):so(a[z],w));return!d&&m&&A.length>0&&A.push(A[0].slice()),A}function Fn(a,d){return a.feature?o({},a.feature,{geometry:d}):c(d)}function c(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var r={toGeoJSON:function(a){return Fn(this,{type:"Point",coordinates:so(this.getLatLng(),a)})}};eo.include(r),no.include(r),Is.include(r),Si.include({toGeoJSON:function(a){var d=!ti(this._latlngs),m=Rn(this._latlngs,d?1:0,!1,a);return Fn(this,{type:(d?"Multi":"")+"LineString",coordinates:m})}}),Xr.include({toGeoJSON:function(a){var d=!ti(this._latlngs),m=d&&!ti(this._latlngs[0]),w=Rn(this._latlngs,m?2:d?1:0,!0,a);return d||(w=[w]),Fn(this,{type:(m?"Multi":"")+"Polygon",coordinates:w})}}),jr.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(m){d.push(m.toGeoJSON(a).geometry.coordinates)}),Fn(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var m=d==="GeometryCollection",w=[];return this.eachLayer(function(A){if(A.toGeoJSON){var z=A.toGeoJSON(a);if(m)w.push(z.geometry);else{var lt=c(z);lt.type==="FeatureCollection"?w.push.apply(w,lt.features):w.push(lt)}}}),m?Fn(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function s(a,d){return new Ci(a,d)}var l=s,g=di.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,m){this._url=a,this._bounds=Et(d),N(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&X(this._image),this},bringToBack:function(){return this._map&&_t(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Et(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:we("img");if(ot(d,"leaflet-image-layer"),this._zoomAnimated&&ot(d,"leaflet-zoom-animated"),this.options.className&&ot(d,this.options.className),d.onselectstart=x,d.onmousemove=x,d.onload=h(this.fire,this,"load"),d.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;de(this._image,m,d)},_reset:function(){var a=this._image,d=new it(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=d.getSize();ce(a,d.min),a.style.width=m.x+"px",a.style.height=m.y+"px"},_updateOpacity:function(){qt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),y=function(a,d,m){return new g(a,d,m)},k=g.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:we("video");if(ot(d,"leaflet-image-layer"),this._zoomAnimated&&ot(d,"leaflet-zoom-animated"),this.options.className&&ot(d,this.options.className),d.onselectstart=x,d.onmousemove=x,d.onloadeddata=h(this.fire,this,"load"),a){for(var m=d.getElementsByTagName("source"),w=[],A=0;A<m.length;A++)w.push(m[A].src);this._url=m.length>0?w:[d.src];return}nt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var lt=we("source");lt.src=this._url[z],d.appendChild(lt)}}});function D(a,d,m){return new k(a,d,m)}var B=g.extend({_initImage:function(){var a=this._image=this._url;ot(a,"leaflet-image-layer"),this._zoomAnimated&&ot(a,"leaflet-zoom-animated"),this.options.className&&ot(a,this.options.className),a.onselectstart=x,a.onmousemove=x}});function J(a,d,m){return new B(a,d,m)}var mt=di.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,d){a&&(a instanceof Tt||nt(a))?(this._latlng=Pt(a),N(this,d)):(N(this,a),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&qt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&qt(this._container,1),this.bringToFront(),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(qt(this._container,0),this._removeTimeout=setTimeout(h(q,void 0,this._container),200)):q(this._container),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Pt(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&X(this._container),this},bringToBack:function(){return this._map&&_t(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof Hi){d=null;var m=this._source._layers;for(var w in m)if(m[w]._map){d=m[w];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=K(this.options.offset),m=this._getAnchor();this._zoomAnimated?ce(this._container,a.add(m)):d=d.add(a).add(m);var w=this._containerBottom=-d.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=w+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(a,d,m,w){var A=d;return A instanceof a||(A=new a(w).setContent(d)),m&&A.setLatLng(m),A}}),di.include({_initOverlay:function(a,d,m,w){var A=m;return A instanceof a?(N(A,w),A._source=this):(A=d&&!w?d:new a(w,this),A.setContent(m)),A}});var kt=mt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,mt.prototype.openOn.call(this,a)},onAdd:function(a){mt.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nr||this._source.on("preclick",Tn))},onRemove:function(a){mt.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nr||this._source.off("preclick",Tn))},getEvents:function(){var a=mt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=we("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=we("div",a+"-content-wrapper",d);if(this._contentNode=we("div",a+"-content",m),Yr(d),Es(this._contentNode),me(d,"contextmenu",Tn),this._tipContainer=we("div",a+"-tip-container",d),this._tip=we("div",a+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=we("a",a+"-close-button",d);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',me(w,"click",function(A){en(A),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var m=a.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),d.width=m+1+"px",d.whiteSpace="",d.height="";var w=a.offsetHeight,A=this.options.maxHeight,z="leaflet-popup-scrolled";A&&w>A?(d.height=A+"px",ot(a,z)):At(a,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),m=this._getAnchor();ce(this._container,d.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,d=parseInt(si(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+d,w=this._containerWidth,A=new Y(this._containerLeft,-m-this._containerBottom);A._add(be(this._container));var z=a.layerPointToContainerPoint(A),lt=K(this.options.autoPanPadding),St=K(this.options.autoPanPaddingTopLeft||lt),Dt=K(this.options.autoPanPaddingBottomRight||lt),Ut=a.getSize(),te=0,fe=0;z.x+w+Dt.x>Ut.x&&(te=z.x+w-Ut.x+Dt.x),z.x-te-St.x<0&&(te=z.x-St.x),z.y+m+Dt.y>Ut.y&&(fe=z.y+m-Ut.y+Dt.y),z.y-fe-St.y<0&&(fe=z.y-St.y),(te||fe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([te,fe]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zt=function(a,d){return new kt(a,d)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(a,d,m){return this._initOverlay(kt,a,d,m).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),di.include({bindPopup:function(a,d){return this._popup=this._initOverlay(kt,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Hi||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Qi(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof nr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var jt=mt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){mt.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){mt.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=mt.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,m,w=this._map,A=this._container,z=w.latLngToContainerPoint(w.getCenter()),lt=w.layerPointToContainerPoint(a),St=this.options.direction,Dt=A.offsetWidth,Ut=A.offsetHeight,te=K(this.options.offset),fe=this._getAnchor();St==="top"?(d=Dt/2,m=Ut):St==="bottom"?(d=Dt/2,m=0):St==="center"?(d=Dt/2,m=Ut/2):St==="right"?(d=0,m=Ut/2):St==="left"?(d=Dt,m=Ut/2):lt.x<z.x?(St="right",d=0,m=Ut/2):(St="left",d=Dt+(te.x+fe.x)*2,m=Ut/2),a=a.subtract(K(d,m,!0)).add(te).add(fe),At(A,"leaflet-tooltip-right"),At(A,"leaflet-tooltip-left"),At(A,"leaflet-tooltip-top"),At(A,"leaflet-tooltip-bottom"),ot(A,"leaflet-tooltip-"+St),ce(A,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&qt(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),re=function(a,d){return new jt(a,d)};_e.include({openTooltip:function(a,d,m){return this._initOverlay(jt,a,d,m).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),di.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(jt,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[d](m),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Hi||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&(me(d,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),me(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var d=typeof a.getElement=="function"&&a.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var d=a.latlng,m,w;this._tooltip.options.sticky&&a.originalEvent&&(m=this._map.mouseEventToContainerPoint(a.originalEvent),w=this._map.containerPointToLayerPoint(m),d=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(d)}});var oe=$r.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ht(d),d.appendChild(m.html)):d.innerHTML=m.html!==!1?m.html:"",m.bgPos){var w=K(m.bgPos);d.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function Ie(a){return new oe(a)}$r.Default=Ts;var xe=di.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){N(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),q(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(X(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_t(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Y?a:new Y(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,m=-a(-1/0,1/0),w=0,A=d.length,z;w<A;w++)z=d[w].style.zIndex,d[w]!==this._container&&z&&(m=a(m,+z));isFinite(m)&&(this.options.zIndex=m+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee.ielt9){qt(this._container,this.options.opacity);var a=+new Date,d=!1,m=!1;for(var w in this._tiles){var A=this._tiles[w];if(!(!A.current||!A.loaded)){var z=Math.min(1,(a-A.loaded)/200);qt(A.el,z),z<1?d=!0:(A.active?m=!0:this._onOpaqueTile(A),A.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),d&&(M(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===a?(this._levels[m].el.style.zIndex=d-Math.abs(a-m),this._onUpdateLevel(m)):(q(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var w=this._levels[a],A=this._map;return w||(w=this._levels[a]={},w.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=d,w.origin=A.project(A.unproject(A.getPixelOrigin()),a).round(),w.zoom=a,this._setZoomTransform(w,A.getCenter(),A.getZoom()),x(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var a,d,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var w=d.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)q(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,m,w){var A=Math.floor(a/2),z=Math.floor(d/2),lt=m-1,St=new Y(+A,+z);St.z=+lt;var Dt=this._tileCoordsToKey(St),Ut=this._tiles[Dt];return Ut&&Ut.active?(Ut.retain=!0,!0):(Ut&&Ut.loaded&&(Ut.retain=!0),lt>w?this._retainParent(A,z,lt,w):!1)},_retainChildren:function(a,d,m,w){for(var A=2*a;A<2*a+2;A++)for(var z=2*d;z<2*d+2;z++){var lt=new Y(A,z);lt.z=m+1;var St=this._tileCoordsToKey(lt),Dt=this._tiles[St];if(Dt&&Dt.active){Dt.retain=!0;continue}else Dt&&Dt.loaded&&(Dt.retain=!0);m+1<w&&this._retainChildren(A,z,m+1,w)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,m,w){var A=Math.round(d);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var z=this.options.updateWhenZooming&&A!==this._tileZoom;(!w||z)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(a),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var m in this._levels)this._setZoomTransform(this._levels[m],a,d)},_setZoomTransform:function(a,d,m){var w=this._map.getZoomScale(m,a.zoom),A=a.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(d,m)).round();ee.any3d?de(a.el,A,w):ce(a.el,A)},_resetGrid:function(){var a=this._map,d=a.options.crs,m=this._tileSize=this.getTileSize(),w=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],w).x/m.x),Math.ceil(a.project([0,d.wrapLng[1]],w).x/m.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],w).y/m.x),Math.ceil(a.project([d.wrapLat[1],0],w).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,m=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),w=d.getZoomScale(m,this._tileZoom),A=d.project(a,this._tileZoom).floor(),z=d.getSize().divideBy(w*2);return new it(A.subtract(z),A.add(z))},_update:function(a){var d=this._map;if(d){var m=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(a),A=this._pxBoundsToTileRange(w),z=A.getCenter(),lt=[],St=this.options.keepBuffer,Dt=new it(A.getBottomLeft().subtract([St,-St]),A.getTopRight().add([St,-St]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ut in this._tiles){var te=this._tiles[Ut].coords;(te.z!==this._tileZoom||!Dt.contains(new Y(te.x,te.y)))&&(this._tiles[Ut].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(a,m);return}for(var fe=A.min.y;fe<=A.max.y;fe++)for(var Ee=A.min.x;Ee<=A.max.x;Ee++){var ei=new Y(Ee,fe);if(ei.z=this._tileZoom,!!this._isValidTile(ei)){var Ln=this._tiles[this._tileCoordsToKey(ei)];Ln?Ln.current=!0:lt.push(ei)}}if(lt.sort(function(ui,ao){return ui.distanceTo(z)-ao.distanceTo(z)}),lt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ii=document.createDocumentFragment();for(Ee=0;Ee<lt.length;Ee++)this._addTile(lt[Ee],Ii);this._level.el.appendChild(Ii)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var m=this._globalTileRange;if(!d.wrapLng&&(a.x<m.min.x||a.x>m.max.x)||!d.wrapLat&&(a.y<m.min.y||a.y>m.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(a);return Et(this.options.bounds).overlaps(w)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,m=this.getTileSize(),w=a.scaleBy(m),A=w.add(m),z=d.unproject(w,a.z),lt=d.unproject(A,a.z);return[z,lt]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),m=new wt(d[0],d[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),m=new Y(+d[0],+d[1]);return m.z=+d[2],m},_removeTile:function(a){var d=this._tiles[a];d&&(q(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){ot(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=x,a.onmousemove=x,ee.ielt9&&this.options.opacity<1&&qt(a,this.options.opacity)},_addTile:function(a,d){var m=this._getTilePos(a),w=this._tileCoordsToKey(a),A=this.createTile(this._wrapCoords(a),h(this._tileReady,this,a));this._initTile(A),this.createTile.length<2&&R(h(this._tileReady,this,a,null,A)),ce(A,m),this._tiles[w]={el:A,coords:a,current:!0},d.appendChild(A),this.fire("tileloadstart",{tile:A,coords:a})},_tileReady:function(a,d,m){d&&this.fire("tileerror",{error:d,tile:m,coords:a});var w=this._tileCoordsToKey(a);m=this._tiles[w],m&&(m.loaded=+new Date,this._map._fadeAnimated?(qt(m.el,0),M(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),d||(ot(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new Y(this._wrapX?v(a.x,this._wrapX):a.x,this._wrapY?v(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new it(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Ue(a){return new xe(a)}var Qe=xe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=N(this,d),d.detectRetina&&ee.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var m=document.createElement("img");return me(m,"load",h(this._tileOnLoad,this,d,m)),me(m,"error",h(this._tileOnError,this,d,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(a),m},getTileUrl:function(a){var d={r:ee.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=m),d["-y"]=m}return U(this._url,o(d,this.options))},_tileOnLoad:function(a,d){ee.ielt9?setTimeout(h(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,m){var w=this.options.errorTileUrl;w&&d.getAttribute("src")!==w&&(d.src=w),a(m,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,m=this.options.zoomReverse,w=this.options.zoomOffset;return m&&(a=d-a),a+w},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=x,d.onerror=x,!d.complete)){d.src=tt;var m=this._tiles[a].coords;q(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:m})}},_removeTile:function(a){var d=this._tiles[a];if(d)return d.el.setAttribute("src",tt),xe.prototype._removeTile.call(this,a)},_tileReady:function(a,d,m){if(!(!this._map||m&&m.getAttribute("src")===tt))return xe.prototype._tileReady.call(this,a,d,m)}});function wn(a,d){return new Qe(a,d)}var rr=Qe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var m=o({},this.defaultWmsParams);for(var w in d)w in this.options||(m[w]=d[w]);d=N(this,d);var A=d.detectRetina&&ee.retina?2:1,z=this.getTileSize();m.width=z.x*A,m.height=z.y*A,this.wmsParams=m},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,Qe.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),m=this._crs,w=bt(m.project(d[0]),m.project(d[1])),A=w.min,z=w.max,lt=(this._wmsVersion>=1.3&&this._crs===lu?[A.y,A.x,z.y,z.x]:[A.x,A.y,z.x,z.y]).join(","),St=Qe.prototype.getTileUrl.call(this,a);return St+O(this.wmsParams,St,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+lt},setParams:function(a,d){return o(this.wmsParams,a),d||this.redraw(),this}});function As(a,d){return new rr(a,d)}Qe.WMS=rr,wn.wms=As;var Ti=di.extend({options:{padding:.1},initialize:function(a){N(this,a),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var m=this._map.getZoomScale(d,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,d),z=w.multiplyBy(-m).add(A).subtract(this._map._getNewPixelOrigin(a,d));ee.any3d?de(this._container,z,m):ce(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),m=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new it(m,m.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),na=Ti.extend({options:{tolerance:0},getEvents:function(){var a=Ti.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ti.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");me(a,"mousemove",this._onMouseMove,this),me(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,q(this._container),qe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ti.prototype._update.call(this);var a=this._bounds,d=this._container,m=a.getSize(),w=ee.retina?2:1;ce(d,a.min),d.width=w*m.x,d.height=w*m.y,d.style.width=m.x+"px",d.style.height=m.y+"px",ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Ti.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[p(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,m=d.next,w=d.prev;m?m.prev=w:this._drawLast=w,w?w.next=m:this._drawFirst=m,delete a._order,delete this._layers[p(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),m=[],w,A;for(A=0;A<d.length;A++){if(w=Number(d[A]),isNaN(w))return;m.push(w)}a.options._dashArray=m}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new it,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var m=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)a=w.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(this._drawing){var m,w,A,z,lt=a._parts,St=lt.length,Dt=this._ctx;if(St){for(Dt.beginPath(),m=0;m<St;m++){for(w=0,A=lt[m].length;w<A;w++)z=lt[m][w],Dt[w?"lineTo":"moveTo"](z.x,z.y);d&&Dt.closePath()}this._fillStroke(Dt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,m=this._ctx,w=Math.max(Math.round(a._radius),1),A=(Math.max(Math.round(a._radiusY),1)||w)/w;A!==1&&(m.save(),m.scale(1,A)),m.beginPath(),m.arc(d.x,d.y/A,w,0,Math.PI*2,!1),A!==1&&m.restore(),this._fillStroke(m,a)}},_fillStroke:function(a,d){var m=d.options;m.fill&&(a.globalAlpha=m.fillOpacity,a.fillStyle=m.fillColor||m.color,a.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=m.opacity,a.lineWidth=m.weight,a.strokeStyle=m.color,a.lineCap=m.lineCap,a.lineJoin=m.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),m,w,A=this._drawFirst;A;A=A.next)m=A.layer,m.options.interactive&&m._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(m))&&(w=m);this._fireEvent(w?[w]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(At(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var m,w,A=this._drawFirst;A;A=A.next)m=A.layer,m.options.interactive&&m._containsPoint(d)&&(w=m);w!==this._hoveredLayer&&(this._handleMouseOut(a),w&&(ot(this._container,"leaflet-interactive"),this._fireEvent([w],a,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,m){this._map._fireDOMEvent(d,m||d.type,a)},_bringToFront:function(a){var d=a._order;if(d){var m=d.next,w=d.prev;if(m)m.prev=w;else return;w?w.next=m:m&&(this._drawFirst=m),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(d){var m=d.next,w=d.prev;if(w)w.next=m;else return;m?m.prev=w:w&&(this._drawLast=w),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function ia(a){return ee.canvas?new na(a):null}var Kr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),mu={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ti.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=Kr("shape");ot(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=Kr("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[p(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;q(d),a.removeInteractiveTarget(d),delete this._layers[p(a)]},_updateStyle:function(a){var d=a._stroke,m=a._fill,w=a.options,A=a._container;A.stroked=!!w.stroke,A.filled=!!w.fill,w.stroke?(d||(d=a._stroke=Kr("stroke")),A.appendChild(d),d.weight=w.weight+"px",d.color=w.color,d.opacity=w.opacity,w.dashArray?d.dashStyle=nt(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=w.lineCap.replace("butt","flat"),d.joinstyle=w.lineJoin):d&&(A.removeChild(d),a._stroke=null),w.fill?(m||(m=a._fill=Kr("fill")),A.appendChild(m),m.color=w.fillColor||w.color,m.opacity=w.fillOpacity):m&&(A.removeChild(m),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),m=Math.round(a._radius),w=Math.round(a._radiusY||m);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+m+","+w+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){X(a._container)},_bringToBack:function(a){_t(a._container)}},Ls=ee.vml?Kr:gt,Cr=Ti.extend({_initContainer:function(){this._container=Ls("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ls("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){q(this._container),qe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ti.prototype._update.call(this);var a=this._bounds,d=a.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,m.setAttribute("width",d.x),m.setAttribute("height",d.y)),ce(m,a.min),m.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Ls("path");a.options.className&&ot(d,a.options.className),a.options.interactive&&ot(d,"leaflet-interactive"),this._updateStyle(a),this._layers[p(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){q(a._path),a.removeInteractiveTarget(a._path),delete this._layers[p(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,m=a.options;d&&(m.stroke?(d.setAttribute("stroke",m.color),d.setAttribute("stroke-opacity",m.opacity),d.setAttribute("stroke-width",m.weight),d.setAttribute("stroke-linecap",m.lineCap),d.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?d.setAttribute("stroke-dasharray",m.dashArray):d.removeAttribute("stroke-dasharray"),m.dashOffset?d.setAttribute("stroke-dashoffset",m.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),m.fill?(d.setAttribute("fill",m.fillColor||m.color),d.setAttribute("fill-opacity",m.fillOpacity),d.setAttribute("fill-rule",m.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,vt(a._parts,d))},_updateCircle:function(a){var d=a._point,m=Math.max(Math.round(a._radius),1),w=Math.max(Math.round(a._radiusY),1)||m,A="a"+m+","+w+" 0 1,0 ",z=a._empty()?"M0 0":"M"+(d.x-m)+","+d.y+A+m*2+",0 "+A+-m*2+",0 ";this._setPath(a,z)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){X(a._path)},_bringToBack:function(a){_t(a._path)}});ee.vml&&Cr.include(mu);function oo(a){return ee.svg||ee.vml?new Cr(a):null}_e.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&ia(a)||oo(a)}});var af=Xr.extend({initialize:function(a,d){Xr.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Et(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function N_(a,d){return new af(a,d)}Cr.create=Ls,Cr.pointsToPath=vt,Ci.geometryToLayer=io,Ci.coordsToLatLng=ir,Ci.coordsToLatLngs=ro,Ci.latLngToCoords=so,Ci.latLngsToCoords=Rn,Ci.getFeature=Fn,Ci.asFeature=c,_e.mergeOptions({boxZoom:!0});var uf=ki.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){qe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Pe(),wr(),this._startPoint=this._map.mouseEventToContainerPoint(a),me(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new it(this._point,this._startPoint),m=d.getSize();ce(this._box,d.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(q(this._box),At(this._container,"leaflet-crosshair")),Fe(),Er(),qe(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var d=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",uf),_e.mergeOptions({doubleClickZoom:!0});var lf=ki.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,m=d.getZoom(),w=d.options.zoomDelta,A=a.originalEvent.shiftKey?m-w:m+w;d.options.doubleClickZoom==="center"?d.setZoom(A):d.setZoomAround(a.containerPoint,A)}});_e.addInitHook("addHandler","doubleClickZoom",lf),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cf=ki.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new er(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){At(this._map._container,"leaflet-grab"),At(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Et(this._map.options.maxBounds);this._offsetLimit=bt(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),m=this._initialWorldOffset,w=this._draggable._newPos.x,A=(w-d+m)%a+d-m,z=(w+d+m)%a-d-m,lt=Math.abs(A+m)<Math.abs(z+m)?A:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=lt},_onDragEnd:function(a){var d=this._map,m=d.options,w=!m.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),w)d.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,lt=m.easeLinearity,St=A.multiplyBy(lt/z),Dt=St.distanceTo([0,0]),Ut=Math.min(m.inertiaMaxSpeed,Dt),te=St.multiplyBy(Ut/Dt),fe=Ut/(m.inertiaDeceleration*lt),Ee=te.multiplyBy(-fe/2).round();!Ee.x&&!Ee.y?d.fire("moveend"):(Ee=d._limitOffset(Ee,d.options.maxBounds),R(function(){d.panBy(Ee,{duration:fe,easeLinearity:lt,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",cf),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var hf=ki.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),me(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),qe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,m=a.scrollTop||d.scrollTop,w=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(w,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},m=this.keyCodes,w,A;for(w=0,A=m.left.length;w<A;w++)d[m.left[w]]=[-1*a,0];for(w=0,A=m.right.length;w<A;w++)d[m.right[w]]=[a,0];for(w=0,A=m.down.length;w<A;w++)d[m.down[w]]=[0,a];for(w=0,A=m.up.length;w<A;w++)d[m.up[w]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},m=this.keyCodes,w,A;for(w=0,A=m.zoomIn.length;w<A;w++)d[m.zoomIn[w]]=a;for(w=0,A=m.zoomOut.length;w<A;w++)d[m.zoomOut[w]]=-a},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){qe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,m=this._map,w;if(d in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(w=this._panKeys[d],a.shiftKey&&(w=K(w).multiplyBy(3)),m.options.maxBounds&&(w=m._limitOffset(K(w),m.options.maxBounds)),m.options.worldCopyJump){var A=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(w)));m.panTo(A)}else m.panBy(w)}else if(d in this._zoomKeys)m.setZoom(m.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Qi(a)}}});_e.addInitHook("addHandler","keyboard",hf),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ff=ki.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){qe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Vo(a),m=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var w=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),w),Qi(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),m=this._map.options.zoomSnap||0;a._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,z=m?Math.ceil(A/m)*m:A,lt=a._limitZoom(d+(this._delta>0?z:-z))-d;this._delta=0,this._startTime=null,lt&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+lt):a.setZoomAround(this._lastMousePos,d+lt))}});_e.addInitHook("addHandler","scrollWheelZoom",ff);var P_=600;_e.mergeOptions({tapHold:ee.touchNative&&ee.safari&&ee.mobile,tapTolerance:15});var df=ki.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){qe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new Y(d.clientX,d.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",en),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),P_),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){qe(document,"touchend",en),qe(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),qe(document,"touchend touchcancel contextmenu",this._cancel,this),qe(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new Y(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var m=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});m._simulated=!0,d.target.dispatchEvent(m)}});_e.addInitHook("addHandler","tapHold",df),_e.mergeOptions({touchZoom:ee.touch,bounceAtZoomLimits:!0});var gf=ki.extend({addHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){At(this._map._container,"leaflet-touch-zoom"),qe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var m=d.mouseEventToContainerPoint(a.touches[0]),w=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(m.add(w)._divideBy(2))),this._startDist=m.distanceTo(w),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),en(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,m=d.mouseEventToContainerPoint(a.touches[0]),w=d.mouseEventToContainerPoint(a.touches[1]),A=m.distanceTo(w)/this._startDist;if(this._zoom=d.getScaleZoom(A,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&A<1||this._zoom>d.getMaxZoom()&&A>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var z=m._add(w)._divideBy(2)._subtract(this._centerPoint);if(A===1&&z.x===0&&z.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var lt=h(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(lt,this,!0),en(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),qe(document,"touchmove",this._onTouchMove,this),qe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",gf),_e.BoxZoom=uf,_e.DoubleClickZoom=lf,_e.Drag=cf,_e.Keyboard=hf,_e.ScrollWheelZoom=ff,_e.TapHold=df,_e.TouchZoom=gf,n.Bounds=it,n.Browser=ee,n.CRS=Yt,n.Canvas=na,n.Circle=no,n.CircleMarker=Is,n.Class=Z,n.Control=fi,n.DivIcon=oe,n.DivOverlay=mt,n.DomEvent=nc,n.DomUtil=$s,n.Draggable=er,n.Evented=V,n.FeatureGroup=Hi,n.GeoJSON=Ci,n.GridLayer=xe,n.Handler=ki,n.Icon=$r,n.ImageOverlay=g,n.LatLng=Tt,n.LatLngBounds=wt,n.Layer=di,n.LayerGroup=jr,n.LineUtil=Jo,n.Map=_e,n.Marker=eo,n.Mixin=oc,n.Path=nr,n.Point=Y,n.PolyUtil=Qn,n.Polygon=Xr,n.Polyline=Si,n.Popup=kt,n.PosAnimation=Zo,n.Projection=uc,n.Rectangle=af,n.Renderer=Ti,n.SVG=Cr,n.SVGOverlay=B,n.TileLayer=Qe,n.Tooltip=jt,n.Transformation=Ct,n.Util=G,n.VideoOverlay=k,n.bind=h,n.bounds=bt,n.canvas=ia,n.circle=dc,n.circleMarker=du,n.control=An,n.divIcon=Ie,n.extend=o,n.featureGroup=hu,n.geoJSON=s,n.geoJson=l,n.gridLayer=Ue,n.icon=hc,n.imageOverlay=y,n.latLng=Pt,n.latLngBounds=Et,n.layerGroup=cu,n.map=Js,n.marker=fc,n.point=K,n.polygon=gu,n.polyline=ea,n.popup=zt,n.rectangle=N_,n.setOptions=N,n.stamp=p,n.svg=oo,n.svgOverlay=J,n.tileLayer=wn,n.tooltip=re,n.transformation=T,n.version=i,n.videoOverlay=D;var O_=window.L;n.noConflict=function(){return window.L=O_,this},window.L=n}))})(xa,xa.exports)),xa.exports}var W0=Z0();const Jr=$l(W0);var Hn=63710088e-1,cm={centimeters:Hn*100,centimetres:Hn*100,degrees:360/(2*Math.PI),feet:Hn*3.28084,inches:Hn*39.37,kilometers:Hn/1e3,kilometres:Hn/1e3,meters:Hn,metres:Hn,miles:Hn/1609.344,millimeters:Hn*1e3,millimetres:Hn*1e3,nauticalmiles:Hn/1852,radians:1,yards:Hn*1.0936};function Zs(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function hm(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!od(e[0])||!od(e[1]))throw new Error("coordinates must contain numbers");return Zs({type:"Point",coordinates:e},t,n)}function dl(e,t,n={}){for(const o of e){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}return Zs({type:"Polygon",coordinates:e},t,n)}function Y0(e,t,n={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return Zs({type:"LineString",coordinates:e},t,n)}function mr(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function gl(e,t,n={}){return Zs({type:"MultiPolygon",coordinates:e},t,n)}function j0(e,t="kilometers"){const n=cm[t];if(!n)throw new Error(t+" units is invalid");return e*n}function $0(e,t="kilometers"){const n=cm[t];if(!n)throw new Error(t+" units is invalid");return e/n}function od(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function fm(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function X0(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function dm(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||e.type!=="FeatureCollection")throw new Error("Invalid input to "+n+", FeatureCollection required");for(const i of e.features){if(!i||i.type!=="Feature"||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+i.geometry.type)}}function K0(e){return e.type==="Feature"?e.geometry:e}function gm(e,t,n){if(e!==null)for(var i,o,u,h,f,p,_,v=0,x=0,S,C=e.type,P=C==="FeatureCollection",N=C==="Feature",O=P?e.features.length:1,j=0;j<O;j++){_=P?e.features[j].geometry:N?e.geometry:e,S=_?_.type==="GeometryCollection":!1,f=S?_.geometries.length:1;for(var U=0;U<f;U++){var nt=0,ct=0;if(h=S?_.geometries[U]:_,h!==null){p=h.coordinates;var tt=h.type;switch(v=0,tt){case null:break;case"Point":if(t(p,x,j,nt,ct)===!1)return!1;x++,nt++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(t(p[i],x,j,nt,ct)===!1)return!1;x++,tt==="MultiPoint"&&nt++}tt==="LineString"&&nt++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(o=0;o<p[i].length-v;o++){if(t(p[i][o],x,j,nt,ct)===!1)return!1;x++}tt==="MultiLineString"&&nt++,tt==="Polygon"&&ct++}tt==="Polygon"&&nt++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(ct=0,o=0;o<p[i].length;o++){for(u=0;u<p[i][o].length-v;u++){if(t(p[i][o][u],x,j,nt,ct)===!1)return!1;x++}ct++}nt++}break;case"GeometryCollection":for(i=0;i<h.geometries.length;i++)if(gm(h.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function uh(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function nu(e,t){var n,i,o,u,h,f,p,_,v,x,S=0,C=e.type==="FeatureCollection",P=e.type==="Feature",N=C?e.features.length:1;for(n=0;n<N;n++){for(f=C?e.features[n].geometry:P?e.geometry:e,_=C?e.features[n].properties:P?e.properties:{},v=C?e.features[n].bbox:P?e.bbox:void 0,x=C?e.features[n].id:P?e.id:void 0,p=f?f.type==="GeometryCollection":!1,h=p?f.geometries.length:1,o=0;o<h;o++){if(u=p?f.geometries[o]:f,u===null){if(t(null,S,_,v,x)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(u,S,_,v,x)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<u.geometries.length;i++)if(t(u.geometries[i],S,_,v,x)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function J0(e,t,n){var i=n;return nu(e,function(o,u,h,f,p){i=t(i,o,u,h,f,p)}),i}function Hh(e,t){nu(e,function(n,i,o,u,h){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(Zs(n,o,{bbox:u,id:h}),i,0)===!1?!1:void 0}var p;switch(f){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var v=n.coordinates[_],x={type:p,coordinates:v};if(t(Zs(x,o),i,_)===!1)return!1}})}function pl(e){return J0(e,(t,n)=>t+Q0(n),0)}function Q0(e){let t=0,n;switch(e.type){case"Polygon":return ad(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=ad(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ad(e){let t=0;if(e&&e.length>0){t+=Math.abs(ud(e[0]));for(let n=1;n<e.length;n++)t-=Math.abs(ud(e[n]))}return t}var tx=Hn*Hn/2,Lc=Math.PI/180;function ud(e){const t=e.length-1;if(t<=2)return 0;let n=0,i=0;for(;i<t;){const o=e[i],u=e[i+1===t?0:i+1],h=e[i+2>=t?(i+2)%t:i+2],f=o[0]*Lc,p=u[1]*Lc,_=h[0]*Lc;n+=(_-f)*Math.sin(p),i++}return n*tx}function pm(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return gm(e,i=>{n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}function ex(e,t={}){const n=pm(e),i=(n[0]+n[2])/2,o=(n[1]+n[3])/2;return hm([i,o],t.properties,t)}var ju={exports:{}},nx=ju.exports,ld;function ix(){return ld||(ld=1,(function(e,t){(function(n,i){e.exports=i()})(nx,(function(){function n(c,r){(r==null||r>c.length)&&(r=c.length);for(var s=0,l=Array(r);s<r;s++)l[s]=c[s];return l}function i(c,r,s){return r=v(r),(function(l,g){if(g&&(typeof g=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y})(l)})(c,S()?Reflect.construct(r,s||[],v(c).constructor):r.apply(c,s))}function o(c,r){if(!(c instanceof r))throw new TypeError("Cannot call a class as a function")}function u(c,r,s){if(S())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,r);var g=new(c.bind.apply(c,l));return s&&C(g,s.prototype),g}function h(c,r){for(var s=0;s<r.length;s++){var l=r[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(c,O(l.key),l)}}function f(c,r,s){return r&&h(c.prototype,r),s&&h(c,s),Object.defineProperty(c,"prototype",{writable:!1}),c}function p(c,r){var s=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!s){if(Array.isArray(c)||(s=j(c))||r){s&&(c=s);var l=0,g=function(){};return{s:g,n:function(){return l>=c.length?{done:!0}:{done:!1,value:c[l++]}},e:function(B){throw B},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,k=!0,D=!1;return{s:function(){s=s.call(c)},n:function(){var B=s.next();return k=B.done,B},e:function(B){D=!0,y=B},f:function(){try{k||s.return==null||s.return()}finally{if(D)throw y}}}}function _(){return _=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(c,r,s){var l=(function(y,k){for(;!{}.hasOwnProperty.call(y,k)&&(y=v(y))!==null;);return y})(c,r);if(l){var g=Object.getOwnPropertyDescriptor(l,r);return g.get?g.get.call(arguments.length<3?c:s):g.value}},_.apply(null,arguments)}function v(c){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v(c)}function x(c,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(r&&r.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),r&&C(c,r)}function S(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(S=function(){return!!c})()}function C(c,r){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,l){return s.__proto__=l,s},C(c,r)}function P(c,r,s,l){var g=_(v(1&l?c.prototype:c),r,s);return 2&l&&typeof g=="function"?function(y){return g.apply(s,y)}:g}function N(c){return(function(r){if(Array.isArray(r))return n(r)})(c)||(function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)})(c)||j(c)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function O(c){var r=(function(s,l){if(typeof s!="object"||!s)return s;var g=s[Symbol.toPrimitive];if(g!==void 0){var y=g.call(s,l);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)})(c,"string");return typeof r=="symbol"?r:r+""}function j(c,r){if(c){if(typeof c=="string")return n(c,r);var s={}.toString.call(c).slice(8,-1);return s==="Object"&&c.constructor&&(s=c.constructor.name),s==="Map"||s==="Set"?Array.from(c):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(c,r):void 0}}function U(c){var r=typeof Map=="function"?new Map:void 0;return U=function(s){if(s===null||!(function(g){try{return Function.toString.call(g).indexOf("[native code]")!==-1}catch{return typeof g=="function"}})(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(s))return r.get(s);r.set(s,l)}function l(){return u(s,arguments,v(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),C(l,s)},U(c)}var nt=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(r){this._quadrantSegments=r,this._quadrantSegments===0&&(this._joinStyle=c.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=c.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),r<=0&&(this._quadrantSegments=1),this._joinStyle!==c.JOIN_ROUND&&(this._quadrantSegments=c.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(r){this._joinStyle=r}},{key:"setSimplifyFactor",value:function(r){this._simplifyFactor=r<0?0:r}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(r){this._endCapStyle=r}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(r){this._mitreLimit=r}},{key:"setSingleSided",value:function(r){this._isSingleSided=r}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=c.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=c.CAP_ROUND,this._joinStyle=c.JOIN_ROUND,this._mitreLimit=c.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=c.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.setQuadrantSegments(r)}else if(arguments.length===2){var s=arguments[0],l=arguments[1];this.setQuadrantSegments(s),this.setEndCapStyle(l)}else if(arguments.length===4){var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3];this.setQuadrantSegments(g),this.setEndCapStyle(y),this.setJoinStyle(k),this.setMitreLimit(D)}}}},{key:"bufferDistanceError",value:function(r){var s=Math.PI/2/r;return 1-Math.cos(s/2)}}])})();nt.CAP_ROUND=1,nt.CAP_FLAT=2,nt.CAP_SQUARE=3,nt.JOIN_ROUND=1,nt.JOIN_MITRE=2,nt.JOIN_BEVEL=3,nt.DEFAULT_QUADRANT_SEGMENTS=8,nt.DEFAULT_MITRE_LIMIT=5,nt.DEFAULT_SIMPLIFY_FACTOR=.01;var ct=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({Exception:r})[0],l}return x(r,c),f(r,[{key:"toString",value:function(){return this.message}}])})(U(Error)),tt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({IllegalArgumentException:r})[0],l}return x(r,c),f(r)})(ct),pt=(function(){return f((function c(){o(this,c)}),[{key:"filter",value:function(c){}}])})();function st(){}function E(){}function b(){}var I,R,M,G,Z,W,$,V,Y=(function(){return f((function c(){o(this,c)}),null,[{key:"equalsWithTolerance",value:function(c,r,s){return Math.abs(c-r)<=s}}])})(),ut=(function(){return f((function c(r,s){o(this,c),this.low=s||0,this.high=r||0}),null,[{key:"toBinaryString",value:function(c){var r,s="";for(r=2147483648;r>0;r>>>=1)s+=(c.high&r)===r?"1":"0";for(r=2147483648;r>0;r>>>=1)s+=(c.low&r)===r?"1":"0";return s}}])})();function K(){}function it(){}K.NaN=NaN,K.isNaN=function(c){return Number.isNaN(c)},K.isInfinite=function(c){return!Number.isFinite(c)},K.MAX_VALUE=Number.MAX_VALUE,K.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,K.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(W=2146435072,$=new Float64Array(1),V=new Int32Array($.buffer),K.doubleToLongBits=function(c){$[0]=c;var r=0|V[0],s=0|V[1];return(s&W)===W&&1048575&s&&r!==0&&(r=0,s=2146959360),new ut(s,r)},K.longBitsToDouble=function(c){return V[0]=c.low,V[1]=c.high,$[0]}):(I=1023,R=Math.log2,M=Math.floor,G=Math.pow,Z=(function(){for(var c=53;c>0;c--){var r=G(2,c)-1;if(M(R(r))+1===c)return r}return 0})(),K.doubleToLongBits=function(c){var r,s,l,g,y,k,D,B,J;if(c<0||1/c===Number.NEGATIVE_INFINITY?(k=1<<31,c=-c):k=0,c===0)return new ut(B=k,J=0);if(c===1/0)return new ut(B=2146435072|k,J=0);if(c!=c)return new ut(B=2146959360,J=0);if(g=0,J=0,(r=M(c))>1)if(r<=Z)(g=M(R(r)))<=20?(J=0,B=r<<20-g&1048575):(J=r%(s=G(2,l=g-20))<<32-l,B=r/s&1048575);else for(l=r,J=0;(l=M(s=l/2))!==0;)g++,J>>>=1,J|=(1&B)<<31,B>>>=1,s!==l&&(B|=524288);if(D=g+I,y=r===0,r=c-r,g<52&&r!==0)for(l=0;;){if((s=2*r)>=1?(r=s-1,y?(D--,y=!1):(l<<=1,l|=1,g++)):(r=s,y?--D==0&&(g++,y=!1):(l<<=1,g++)),g===20)B|=l,l=0;else if(g===52){J|=l;break}if(s===1){g<20?B|=l<<20-g:g<52&&(J|=l<<52-g);break}}return B|=D<<20,new ut(B|=k,J)},K.longBitsToDouble=function(c){var r,s,l,g,y=c.high,k=c.low,D=y&1<<31?-1:1;for(l=((2146435072&y)>>20)-I,g=0,s=1<<19,r=1;r<=20;r++)y&s&&(g+=G(2,-r)),s>>>=1;for(s=1<<31,r=21;r<=52;r++)k&s&&(g+=G(2,-r)),s>>>=1;if(l===-1023){if(g===0)return 0*D;l=-1022}else{if(l===1024)return g===0?D/0:NaN;g+=1}return D*g*G(2,l)});var bt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({RuntimeException:r})[0],l}return x(r,c),f(r)})(ct),wt=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,null,[{key:"constructor_",value:function(){if(arguments.length===0)bt.constructor_.call(this);else if(arguments.length===1){var s=arguments[0];bt.constructor_.call(this,s)}}}])})(bt),Et=(function(){function c(){o(this,c)}return f(c,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)c.shouldNeverReachHere(null);else if(arguments.length===1){var r=arguments[0];throw new wt("Should never reach here"+(r!==null?": "+r:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var r=arguments[0];c.isTrue(r,null)}else if(arguments.length===2){var s=arguments[1];if(!arguments[0])throw s===null?new wt:new wt(s)}}},{key:"equals",value:function(){if(arguments.length===2){var r=arguments[0],s=arguments[1];c.equals(r,s,null)}else if(arguments.length===3){var l=arguments[0],g=arguments[1],y=arguments[2];if(!g.equals(l))throw new wt("Expected "+l+" but encountered "+g+(y!==null?": "+y:""))}}}])})(),Tt=new ArrayBuffer(8),Pt=new Float64Array(Tt),Yt=new Int32Array(Tt),et=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getM",value:function(){return K.NaN}},{key:"setOrdinate",value:function(r,s){switch(r){case c.X:this.x=s;break;case c.Y:this.y=s;break;case c.Z:this.setZ(s);break;default:throw new tt("Invalid ordinate index: "+r)}}},{key:"equals2D",value:function(){if(arguments.length===1){var r=arguments[0];return this.x===r.x&&this.y===r.y}if(arguments.length===2){var s=arguments[0],l=arguments[1];return!!Y.equalsWithTolerance(this.x,s.x,l)&&!!Y.equalsWithTolerance(this.y,s.y,l)}}},{key:"setM",value:function(r){throw new tt("Invalid ordinate index: "+c.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(r){switch(r){case c.X:return this.x;case c.Y:return this.y;case c.Z:return this.getZ()}throw new tt("Invalid ordinate index: "+r)}},{key:"equals3D",value:function(r){return this.x===r.x&&this.y===r.y&&(this.getZ()===r.getZ()||K.isNaN(this.getZ())&&K.isNaN(r.getZ()))}},{key:"equals",value:function(r){return r instanceof c&&this.equals2D(r)}},{key:"equalInZ",value:function(r,s){return Y.equalsWithTolerance(this.getZ(),r.getZ(),s)}},{key:"setX",value:function(r){this.x=r}},{key:"compareTo",value:function(r){var s=r;return this.x<s.x?-1:this.x>s.x?1:this.y<s.y?-1:this.y>s.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(r){this.z=r}},{key:"clone",value:function(){try{return null}catch(r){if(r instanceof CloneNotSupportedException)return Et.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw r}}},{key:"copy",value:function(){return new c(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(r){var s=this.x-r.x,l=this.y-r.y,g=this.getZ()-r.getZ();return Math.sqrt(s*s+l*l+g*g)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(r){this.y=r}},{key:"distance",value:function(r){var s=this.x-r.x,l=this.y-r.y;return Math.sqrt(s*s+l*l)}},{key:"hashCode",value:function(){var r=17;return r=37*(r=37*r+c.hashCode(this.x))+c.hashCode(this.y)}},{key:"setCoordinate",value:function(r){this.x=r.x,this.y=r.y,this.z=r.getZ()}},{key:"interfaces_",get:function(){return[st,E,b]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)c.constructor_.call(this,0,0);else if(arguments.length===1){var r=arguments[0];c.constructor_.call(this,r.x,r.y,r.getZ())}else if(arguments.length===2){var s=arguments[0],l=arguments[1];c.constructor_.call(this,s,l,c.NULL_ORDINATE)}else if(arguments.length===3){var g=arguments[0],y=arguments[1],k=arguments[2];this.x=g,this.y=y,this.z=k}}},{key:"hashCode",value:function(r){return Pt[0]=r,Yt[0]^Yt[1]}}])})(),Qt=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"compare",value:function(r,s){var l=c.compare(r.x,s.x);if(l!==0)return l;var g=c.compare(r.y,s.y);return g!==0?g:this._dimensionsToTest<=2?0:c.compare(r.getZ(),s.getZ())}},{key:"interfaces_",get:function(){return[it]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)c.constructor_.call(this,2);else if(arguments.length===1){var r=arguments[0];if(r!==2&&r!==3)throw new tt("only 2 or 3 dimensions may be specified");this._dimensionsToTest=r}}},{key:"compare",value:function(r,s){return r<s?-1:r>s?1:K.isNaN(r)?K.isNaN(s)?0:-1:K.isNaN(s)?1:0}}])})();et.DimensionalComparator=Qt,et.NULL_ORDINATE=K.NaN,et.X=0,et.Y=1,et.Z=2,et.M=3;var Ft=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(r){if(!(r instanceof c))return!1;var s=r;return this.isNull()?s.isNull():this._maxx===s.getMaxX()&&this._maxy===s.getMaxY()&&this._minx===s.getMinX()&&this._miny===s.getMinY()}},{key:"intersection",value:function(r){if(this.isNull()||r.isNull()||!this.intersects(r))return new c;var s=this._minx>r._minx?this._minx:r._minx,l=this._miny>r._miny?this._miny:r._miny;return new c(s,this._maxx<r._maxx?this._maxx:r._maxx,l,this._maxy<r._maxy?this._maxy:r._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof et){var r=arguments[0];return this.covers(r.x,r.y)}if(arguments[0]instanceof c){var s=arguments[0];return!this.isNull()&&!s.isNull()&&s.getMinX()>=this._minx&&s.getMaxX()<=this._maxx&&s.getMinY()>=this._miny&&s.getMaxY()<=this._maxy}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];return!this.isNull()&&l>=this._minx&&l<=this._maxx&&g>=this._miny&&g<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof c){var r=arguments[0];return!this.isNull()&&!r.isNull()&&!(r._minx>this._maxx||r._maxx<this._minx||r._miny>this._maxy||r._maxy<this._miny)}if(arguments[0]instanceof et){var s=arguments[0];return this.intersects(s.x,s.y)}}else if(arguments.length===2){if(arguments[0]instanceof et&&arguments[1]instanceof et){var l=arguments[0],g=arguments[1];return!this.isNull()&&!((l.x<g.x?l.x:g.x)>this._maxx)&&!((l.x>g.x?l.x:g.x)<this._minx)&&!((l.y<g.y?l.y:g.y)>this._maxy)&&!((l.y>g.y?l.y:g.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var y=arguments[0],k=arguments[1];return!this.isNull()&&!(y>this._maxx||y<this._minx||k>this._maxy||k<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var r=this.getWidth(),s=this.getHeight();return Math.sqrt(r*r+s*s)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof et){var r=arguments[0];this.expandToInclude(r.x,r.y)}else if(arguments[0]instanceof c){var s=arguments[0];if(s.isNull())return null;this.isNull()?(this._minx=s.getMinX(),this._maxx=s.getMaxX(),this._miny=s.getMinY(),this._maxy=s.getMaxY()):(s._minx<this._minx&&(this._minx=s._minx),s._maxx>this._maxx&&(this._maxx=s._maxx),s._miny<this._miny&&(this._miny=s._miny),s._maxy>this._maxy&&(this._maxy=s._maxy))}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.isNull()?(this._minx=l,this._maxx=l,this._miny=g,this._maxy=g):(l<this._minx&&(this._minx=l),l>this._maxx&&(this._maxx=l),g<this._miny&&(this._miny=g),g>this._maxy&&(this._maxy=g))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var r=this.getWidth(),s=this.getHeight();return r<s?r:s}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(r){var s=r;return this.isNull()?s.isNull()?0:-1:s.isNull()?1:this._minx<s._minx?-1:this._minx>s._minx?1:this._miny<s._miny?-1:this._miny>s._miny?1:this._maxx<s._maxx?-1:this._maxx>s._maxx?1:this._maxy<s._maxy?-1:this._maxy>s._maxy?1:0}},{key:"translate",value:function(r,s){if(this.isNull())return null;this.init(this.getMinX()+r,this.getMaxX()+r,this.getMinY()+s,this.getMaxY()+s)}},{key:"copy",value:function(){return new c(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(r){return!(!this.isNull()&&!r.isNull())||r._minx>this._maxx||r._maxx<this._minx||r._miny>this._maxy||r._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var r=this.getWidth(),s=this.getHeight();return r>s?r:s}},{key:"expandBy",value:function(){if(arguments.length===1){var r=arguments[0];this.expandBy(r,r)}else if(arguments.length===2){var s=arguments[0],l=arguments[1];if(this.isNull())return null;this._minx-=s,this._maxx+=s,this._miny-=l,this._maxy+=l,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof c){var r=arguments[0];return this.covers(r)}if(arguments[0]instanceof et){var s=arguments[0];return this.covers(s)}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];return this.covers(l,g)}}},{key:"centre",value:function(){return this.isNull()?null:new et((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof et){var r=arguments[0];this.init(r.x,r.x,r.y,r.y)}else if(arguments[0]instanceof c){var s=arguments[0];this._minx=s._minx,this._maxx=s._maxx,this._miny=s._miny,this._maxy=s._maxy}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.init(l.x,g.x,l.y,g.y)}else if(arguments.length===4){var y=arguments[0],k=arguments[1],D=arguments[2],B=arguments[3];y<k?(this._minx=y,this._maxx=k):(this._minx=k,this._maxx=y),D<B?(this._miny=D,this._maxy=B):(this._miny=B,this._maxy=D)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(r){if(this.intersects(r))return 0;var s=0;this._maxx<r._minx?s=r._minx-this._maxx:this._minx>r._maxx&&(s=this._minx-r._maxx);var l=0;return this._maxy<r._miny?l=r._miny-this._maxy:this._miny>r._maxy&&(l=this._miny-r._maxy),s===0?l:l===0?s:Math.sqrt(s*s+l*l)}},{key:"hashCode",value:function(){var r=17;return r=37*(r=37*(r=37*(r=37*r+et.hashCode(this._minx))+et.hashCode(this._maxx))+et.hashCode(this._miny))+et.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[st,b]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof et){var r=arguments[0];this.init(r.x,r.x,r.y,r.y)}else if(arguments[0]instanceof c){var s=arguments[0];this.init(s)}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.init(l.x,g.x,l.y,g.y)}else if(arguments.length===4){var y=arguments[0],k=arguments[1],D=arguments[2],B=arguments[3];this.init(y,k,D,B)}}},{key:"intersects",value:function(){if(arguments.length===3){var r=arguments[0],s=arguments[1],l=arguments[2];return l.x>=(r.x<s.x?r.x:s.x)&&l.x<=(r.x>s.x?r.x:s.x)&&l.y>=(r.y<s.y?r.y:s.y)&&l.y<=(r.y>s.y?r.y:s.y)}if(arguments.length===4){var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3],B=Math.min(k.x,D.x),J=Math.max(k.x,D.x),mt=Math.min(g.x,y.x),kt=Math.max(g.x,y.x);return!(mt>J)&&!(kt<B)&&(B=Math.min(k.y,D.y),J=Math.max(k.y,D.y),mt=Math.min(g.y,y.y),kt=Math.max(g.y,y.y),!(mt>J)&&!(kt<B))}}}])})(),Ct=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===c.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(r){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(r){return this===r||this.equalsExact(r,0)}},{key:"geometryChanged",value:function(){this.apply(c.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(r){return r!==null&&this.norm().equalsExact(r.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var r;if(arguments.length===1){var s=arguments[0];return r=s,this.getTypeCode()!==r.getTypeCode()?this.getTypeCode()-r.getTypeCode():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(s)}if(arguments.length===2){var l=arguments[0],g=arguments[1];return r=l,this.getTypeCode()!==r.getTypeCode()?this.getTypeCode()-r.getTypeCode():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(l,g)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(r){if(r.getTypeCode()===c.TYPECODE_GEOMETRYCOLLECTION)throw new tt("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(r,s,l){return l===0?r.equals(s):r.distance(s)<=l}},{key:"norm",value:function(){var r=this.copy();return r.normalize(),r}},{key:"reverse",value:function(){var r=this.reverseInternal();return this.envelope!=null&&(r.envelope=this.envelope.copy()),r.setSRID(this.getSRID()),r}},{key:"copy",value:function(){var r=this.copyInternal();return r.envelope=this._envelope==null?null:this._envelope.copy(),r._SRID=this._SRID,r._userData=this._userData,r}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ft(this._envelope)}},{key:"setSRID",value:function(r){this._SRID=r}},{key:"setUserData",value:function(r){this._userData=r}},{key:"compare",value:function(r,s){for(var l=r.iterator(),g=s.iterator();l.hasNext()&&g.hasNext();){var y=l.next(),k=g.next(),D=y.compareTo(k);if(D!==0)return D}return l.hasNext()?1:g.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(r){return this.getClass()===r.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===c.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===c.TYPECODE_MULTIPOINT||this.getTypeCode()===c.TYPECODE_MULTILINESTRING||this.getTypeCode()===c.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[E,st,b]}},{key:"getClass",value:function(){return c}}],[{key:"hasNonEmptyElements",value:function(r){for(var s=0;s<r.length;s++)if(!r[s].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(r){for(var s=0;s<r.length;s++)if(r[s]===null)return!0;return!1}}])})();Ct.constructor_=function(c){c&&(this._envelope=null,this._userData=null,this._factory=c,this._SRID=c.getSRID())},Ct.TYPECODE_POINT=0,Ct.TYPECODE_MULTIPOINT=1,Ct.TYPECODE_LINESTRING=2,Ct.TYPECODE_LINEARRING=3,Ct.TYPECODE_MULTILINESTRING=4,Ct.TYPECODE_POLYGON=5,Ct.TYPECODE_MULTIPOLYGON=6,Ct.TYPECODE_GEOMETRYCOLLECTION=7,Ct.TYPENAME_POINT="Point",Ct.TYPENAME_MULTIPOINT="MultiPoint",Ct.TYPENAME_LINESTRING="LineString",Ct.TYPENAME_LINEARRING="LinearRing",Ct.TYPENAME_MULTILINESTRING="MultiLineString",Ct.TYPENAME_POLYGON="Polygon",Ct.TYPENAME_MULTIPOLYGON="MultiPolygon",Ct.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Ct.geometryChangedFilter={get interfaces_(){return[pt]},filter:function(c){c.geometryChangedAction()}};var T=(function(){function c(){o(this,c)}return f(c,null,[{key:"toLocationSymbol",value:function(r){switch(r){case c.EXTERIOR:return"e";case c.BOUNDARY:return"b";case c.INTERIOR:return"i";case c.NONE:return"-"}throw new tt("Unknown location value: "+r)}}])})();T.INTERIOR=0,T.BOUNDARY=1,T.EXTERIOR=2,T.NONE=-1;var Q=(function(){return f((function c(){o(this,c)}),[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),dt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({NoSuchElementException:r})[0],l}return x(r,c),f(r)})(ct),gt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({UnsupportedOperationException:r})[0],l}return x(r,c),f(r)})(ct),vt=(function(c){function r(){return o(this,r),i(this,r,arguments)}return x(r,c),f(r,[{key:"contains",value:function(){}}])})(Q),Nt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r)).map=new Map,s instanceof Q&&l.addAll(s),l}return x(r,c),f(r,[{key:"contains",value:function(s){var l=s.hashCode?s.hashCode():s;return!!this.map.has(l)}},{key:"add",value:function(s){var l=s.hashCode?s.hashCode():s;return!this.map.has(l)&&!!this.map.set(l,s)}},{key:"addAll",value:function(s){var l,g=p(s);try{for(g.s();!(l=g.n()).done;){var y=l.value;this.add(y)}}catch(k){g.e(k)}finally{g.f()}return!0}},{key:"remove",value:function(){throw new gt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Ot(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(vt),Ot=(function(){return f((function c(r){o(this,c),this.iterator=r.values();var s=this.iterator.next(),l=s.done,g=s.value;this.done=l,this.value=g}),[{key:"next",value:function(){if(this.done)throw new dt;var c=this.value,r=this.iterator.next(),s=r.done,l=r.value;return this.done=s,this.value=l,c}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new gt}}])})(),ft=(function(){function c(){o(this,c)}return f(c,null,[{key:"opposite",value:function(r){return r===c.LEFT?c.RIGHT:r===c.RIGHT?c.LEFT:r}}])})();ft.ON=0,ft.LEFT=1,ft.RIGHT=2;var Rt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({EmptyStackException:r})[0],l}return x(r,c),f(r)})(ct),Lt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r,[s])).name=Object.keys({IndexOutOfBoundsException:r})[0],l}return x(r,c),f(r)})(ct),Ht=(function(c){function r(){return o(this,r),i(this,r,arguments)}return x(r,c),f(r,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(Q),Zt=(function(c){function r(){var s;return o(this,r),(s=i(this,r)).array=[],s}return x(r,c),f(r,[{key:"add",value:function(s){return this.array.push(s),!0}},{key:"get",value:function(s){if(s<0||s>=this.size())throw new Lt;return this.array[s]}},{key:"push",value:function(s){return this.array.push(s),s}},{key:"pop",value:function(){if(this.array.length===0)throw new Rt;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new Rt;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(s){return this.array.indexOf(s)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(Ht);function Mt(c,r){return c.interfaces_&&c.interfaces_.indexOf(r)>-1}var Xt=(function(){return f((function c(r){o(this,c),this.str=r}),[{key:"append",value:function(c){this.str+=c}},{key:"setCharAt",value:function(c,r){this.str=this.str.substr(0,c)+r+this.str.substr(c+1)}},{key:"toString",value:function(){return this.str}}])})(),Jt=(function(){function c(r){o(this,c),this.value=r}return f(c,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(r){return this.value<r?-1:this.value>r?1:0}}],[{key:"compare",value:function(r,s){return r<s?-1:r>s?1:0}},{key:"isNan",value:function(r){return Number.isNaN(r)}},{key:"valueOf",value:function(r){return new c(r)}}])})(),se=(function(){return f((function c(){o(this,c)}),null,[{key:"isWhitespace",value:function(c){return c<=32&&c>=0||c===127}},{key:"toUpperCase",value:function(c){return c.toUpperCase()}}])})(),Gt=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"le",value:function(r){return this._hi<r._hi||this._hi===r._hi&&this._lo<=r._lo}},{key:"extractSignificantDigits",value:function(r,s){var l=this.abs(),g=c.magnitude(l._hi),y=c.TEN.pow(g);(l=l.divide(y)).gt(c.TEN)?(l=l.divide(c.TEN),g+=1):l.lt(c.ONE)&&(l=l.multiply(c.TEN),g-=1);for(var k=g+1,D=new Xt,B=c.MAX_PRINT_DIGITS-1,J=0;J<=B;J++){r&&J===k&&D.append(".");var mt=Math.trunc(l._hi);if(mt<0)break;var kt=!1,zt=0;mt>9?(kt=!0,zt="9"):zt="0"+mt,D.append(zt),l=l.subtract(c.valueOf(mt)).multiply(c.TEN),kt&&l.selfAdd(c.TEN);var jt=!0,re=c.magnitude(l._hi);if(re<0&&Math.abs(re)>=B-J&&(jt=!1),!jt)break}return s[0]=g,D.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof c){var r=arguments[0];return this.add(r.negate())}if(typeof arguments[0]=="number"){var s=arguments[0];return this.add(-s)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof c){var r=arguments[0];return this._hi===r._hi&&this._lo===r._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof c){var r=arguments[0];return this.isNaN()?this:this.selfAdd(-r._hi,-r._lo)}if(typeof arguments[0]=="number"){var s=arguments[0];return this.isNaN()?this:this.selfAdd(-s,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(r){return this.le(r)?this:r}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof c){var r=arguments[0];return this.selfDivide(r._hi,r._lo)}if(typeof arguments[0]=="number"){var s=arguments[0];return this.selfDivide(s,0)}}else if(arguments.length===2){var l,g,y,k,D=arguments[0],B=arguments[1],J=null,mt=null,kt=null,zt=null;return y=this._hi/D,zt=(J=(kt=c.SPLIT*y)-(J=kt-y))*(mt=(zt=c.SPLIT*D)-(mt=zt-D))-(k=y*D)+J*(g=D-mt)+(l=y-J)*mt+l*g,zt=y+(kt=(this._hi-k-zt+this._lo-y*B)/D),this._hi=zt,this._lo=y-zt+kt,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof c){var r,s,l,g,y=arguments[0],k=null,D=null,B=null,J=null;return r=(l=this._hi/y._hi)-(k=(B=c.SPLIT*l)-(k=B-l)),J=k*(D=(J=c.SPLIT*y._hi)-(D=J-y._hi))-(g=l*y._hi)+k*(s=y._hi-D)+r*D+r*s,new c(J=l+(B=(this._hi-g-J+this._lo-l*y._lo)/y._hi),l-J+B)}if(typeof arguments[0]=="number"){var mt=arguments[0];return K.isNaN(mt)?c.createNaN():c.copy(this).selfDivide(mt,0)}}},{key:"ge",value:function(r){return this._hi>r._hi||this._hi===r._hi&&this._lo>=r._lo}},{key:"pow",value:function(r){if(r===0)return c.valueOf(1);var s=new c(this),l=c.valueOf(1),g=Math.abs(r);if(g>1)for(;g>0;)g%2==1&&l.selfMultiply(s),(g/=2)>0&&(s=s.sqr());else l=s;return r<0?l.reciprocal():l}},{key:"ceil",value:function(){if(this.isNaN())return c.NaN;var r=Math.ceil(this._hi),s=0;return r===this._hi&&(s=Math.ceil(this._lo)),new c(r,s)}},{key:"compareTo",value:function(r){var s=r;return this._hi<s._hi?-1:this._hi>s._hi?1:this._lo<s._lo?-1:this._lo>s._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof c){var r=arguments[0];return this.init(r),this}if(typeof arguments[0]=="number"){var s=arguments[0];return this.init(s),this}}},{key:"max",value:function(r){return this.ge(r)?this:r}},{key:"sqrt",value:function(){if(this.isZero())return c.valueOf(0);if(this.isNegative())return c.NaN;var r=1/Math.sqrt(this._hi),s=this._hi*r,l=c.valueOf(s),g=this.subtract(l.sqr())._hi*(.5*r);return l.add(g)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof c){var r=arguments[0];return this.selfAdd(r._hi,r._lo)}if(typeof arguments[0]=="number"){var s,l,g,y,k,D=arguments[0],B=null;return B=(g=this._hi+D)-(y=g-this._hi),l=(k=(B=D-y+(this._hi-B))+this._lo)+(g-(s=g+k)),this._hi=s+l,this._lo=l+(s-this._hi),this}}else if(arguments.length===2){var J,mt,kt,zt,jt=arguments[0],re=arguments[1],oe=null,Ie=null,xe=null;kt=this._hi+jt,mt=this._lo+re,Ie=kt-(xe=kt-this._hi),oe=mt-(zt=mt-this._lo);var Ue=(J=kt+(xe=(Ie=jt-xe+(this._hi-Ie))+mt))+(xe=(oe=re-zt+(this._lo-oe))+(xe+(kt-J))),Qe=xe+(J-Ue);return this._hi=Ue,this._lo=Qe,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof c){var r=arguments[0];return this.selfMultiply(r._hi,r._lo)}if(typeof arguments[0]=="number"){var s=arguments[0];return this.selfMultiply(s,0)}}else if(arguments.length===2){var l,g,y=arguments[0],k=arguments[1],D=null,B=null,J=null,mt=null;D=(J=c.SPLIT*this._hi)-this._hi,mt=c.SPLIT*y,D=J-D,l=this._hi-D,B=mt-y;var kt=(J=this._hi*y)+(mt=D*(B=mt-B)-J+D*(g=y-B)+l*B+l*g+(this._hi*k+this._lo*y)),zt=mt+(D=J-kt);return this._hi=kt,this._lo=zt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return c.NaN;var r=Math.floor(this._hi),s=0;return r===this._hi&&(s=Math.floor(this._lo)),new c(r,s)}},{key:"negate",value:function(){return this.isNaN()?this:new c(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(r){if(r instanceof CloneNotSupportedException)return null;throw r}}},{key:"multiply",value:function(){if(arguments[0]instanceof c){var r=arguments[0];return r.isNaN()?c.createNaN():c.copy(this).selfMultiply(r)}if(typeof arguments[0]=="number"){var s=arguments[0];return K.isNaN(s)?c.createNaN():c.copy(this).selfMultiply(s,0)}}},{key:"isNaN",value:function(){return K.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var r=c.magnitude(this._hi);return r>=-3&&r<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var r=this.getSpecialNumberString();if(r!==null)return r;var s=new Array(1).fill(null),l=this.extractSignificantDigits(!0,s),g=s[0]+1,y=l;if(l.charAt(0)===".")y="0"+l;else if(g<0)y="0."+c.stringOfChar("0",-g)+l;else if(l.indexOf(".")===-1){var k=g-l.length;y=l+c.stringOfChar("0",k)+".0"}return this.isNegative()?"-"+y:y}},{key:"reciprocal",value:function(){var r,s,l,g,y=null,k=null,D=null,B=null;r=(l=1/this._hi)-(y=(D=c.SPLIT*l)-(y=D-l)),k=(B=c.SPLIT*this._hi)-this._hi;var J=l+(D=(1-(g=l*this._hi)-(B=y*(k=B-k)-g+y*(s=this._hi-k)+r*k+r*s)-l*this._lo)/this._hi);return new c(J,l-J+D)}},{key:"toSciNotation",value:function(){if(this.isZero())return c.SCI_NOT_ZERO;var r=this.getSpecialNumberString();if(r!==null)return r;var s=new Array(1).fill(null),l=this.extractSignificantDigits(!1,s),g=c.SCI_NOT_EXPONENT_CHAR+s[0];if(l.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+l);var y="";l.length>1&&(y=l.substring(1));var k=l.charAt(0)+"."+y;return this.isNegative()?"-"+k+g:k+g}},{key:"abs",value:function(){return this.isNaN()?c.NaN:this.isNegative()?this.negate():new c(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(r){return this._hi<r._hi||this._hi===r._hi&&this._lo<r._lo}},{key:"add",value:function(){if(arguments[0]instanceof c){var r=arguments[0];return c.copy(this).selfAdd(r)}if(typeof arguments[0]=="number"){var s=arguments[0];return c.copy(this).selfAdd(s)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var r=arguments[0];this._hi=r,this._lo=0}else if(arguments[0]instanceof c){var s=arguments[0];this._hi=s._hi,this._lo=s._lo}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this._hi=l,this._lo=g}}},{key:"gt",value:function(r){return this._hi>r._hi||this._hi===r._hi&&this._lo>r._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?c.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[b,st,E]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var r=arguments[0];this.init(r)}else if(arguments[0]instanceof c){var s=arguments[0];this.init(s)}else if(typeof arguments[0]=="string"){var l=arguments[0];c.constructor_.call(this,c.parse(l))}}else if(arguments.length===2){var g=arguments[0],y=arguments[1];this.init(g,y)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],s=arguments[1],l=arguments[2],g=arguments[3];return c.determinant(c.valueOf(r),c.valueOf(s),c.valueOf(l),c.valueOf(g))}if(arguments[3]instanceof c&&arguments[2]instanceof c&&arguments[0]instanceof c&&arguments[1]instanceof c){var y=arguments[1],k=arguments[2],D=arguments[3];return arguments[0].multiply(D).selfSubtract(y.multiply(k))}}},{key:"sqr",value:function(r){return c.valueOf(r).selfMultiply(r)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var r=arguments[0];return c.parse(r)}if(typeof arguments[0]=="number")return new c(arguments[0])}},{key:"sqrt",value:function(r){return c.valueOf(r).sqrt()}},{key:"parse",value:function(r){for(var s=0,l=r.length;se.isWhitespace(r.charAt(s));)s++;var g=!1;if(s<l){var y=r.charAt(s);y!=="-"&&y!=="+"||(s++,y==="-"&&(g=!0))}for(var k=new c,D=0,B=0,J=0,mt=!1;!(s>=l);){var kt=r.charAt(s);if(s++,se.isDigit(kt)){var zt=kt-"0";k.selfMultiply(c.TEN),k.selfAdd(zt),D++}else{if(kt!=="."){if(kt==="e"||kt==="E"){var jt=r.substring(s);try{J=Jt.parseInt(jt)}catch(Ue){throw Ue instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+jt+" in string "+r):Ue}break}throw new NumberFormatException("Unexpected character '"+kt+"' at position "+s+" in string "+r)}B=D,mt=!0}}var re=k;mt||(B=D);var oe=D-B-J;if(oe===0)re=k;else if(oe>0){var Ie=c.TEN.pow(oe);re=k.divide(Ie)}else if(oe<0){var xe=c.TEN.pow(-oe);re=k.multiply(xe)}return g?re.negate():re}},{key:"createNaN",value:function(){return new c(K.NaN,K.NaN)}},{key:"copy",value:function(r){return new c(r)}},{key:"magnitude",value:function(r){var s=Math.abs(r),l=Math.log(s)/Math.log(10),g=Math.trunc(Math.floor(l));return 10*Math.pow(10,g)<=s&&(g+=1),g}},{key:"stringOfChar",value:function(r,s){for(var l=new Xt,g=0;g<s;g++)l.append(r);return l.toString()}}])})();Gt.PI=new Gt(3.141592653589793,12246467991473532e-32),Gt.TWO_PI=new Gt(6.283185307179586,24492935982947064e-32),Gt.PI_2=new Gt(1.5707963267948966,6123233995736766e-32),Gt.E=new Gt(2.718281828459045,14456468917292502e-32),Gt.NaN=new Gt(K.NaN,K.NaN),Gt.EPS=123259516440783e-46,Gt.SPLIT=134217729,Gt.MAX_PRINT_DIGITS=32,Gt.TEN=Gt.valueOf(10),Gt.ONE=Gt.valueOf(1),Gt.SCI_NOT_EXPONENT_CHAR="E",Gt.SCI_NOT_ZERO="0.0E0";var Ne=(function(){function c(){o(this,c)}return f(c,null,[{key:"orientationIndex",value:function(r,s,l){var g=c.orientationIndexFilter(r,s,l);if(g<=1)return g;var y=Gt.valueOf(s.x).selfAdd(-r.x),k=Gt.valueOf(s.y).selfAdd(-r.y),D=Gt.valueOf(l.x).selfAdd(-s.x),B=Gt.valueOf(l.y).selfAdd(-s.y);return y.selfMultiply(B).selfSubtract(k.selfMultiply(D)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Gt&&arguments[2]instanceof Gt&&arguments[0]instanceof Gt&&arguments[1]instanceof Gt){var r=arguments[1],s=arguments[2],l=arguments[3];return arguments[0].multiply(l).selfSubtract(r.multiply(s)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3],B=Gt.valueOf(g),J=Gt.valueOf(y),mt=Gt.valueOf(k),kt=Gt.valueOf(D);return B.multiply(kt).selfSubtract(J.multiply(mt)).signum()}}},{key:"intersection",value:function(r,s,l,g){var y=new Gt(r.y).selfSubtract(s.y),k=new Gt(s.x).selfSubtract(r.x),D=new Gt(r.x).selfMultiply(s.y).selfSubtract(new Gt(s.x).selfMultiply(r.y)),B=new Gt(l.y).selfSubtract(g.y),J=new Gt(g.x).selfSubtract(l.x),mt=new Gt(l.x).selfMultiply(g.y).selfSubtract(new Gt(g.x).selfMultiply(l.y)),kt=k.multiply(mt).selfSubtract(J.multiply(D)),zt=B.multiply(D).selfSubtract(y.multiply(mt)),jt=y.multiply(J).selfSubtract(B.multiply(k)),re=kt.selfDivide(jt).doubleValue(),oe=zt.selfDivide(jt).doubleValue();return K.isNaN(re)||K.isInfinite(re)||K.isNaN(oe)||K.isInfinite(oe)?null:new et(re,oe)}},{key:"orientationIndexFilter",value:function(r,s,l){var g=null,y=(r.x-l.x)*(s.y-l.y),k=(r.y-l.y)*(s.x-l.x),D=y-k;if(y>0){if(k<=0)return c.signum(D);g=y+k}else{if(!(y<0)||k>=0)return c.signum(D);g=-y-k}var B=c.DP_SAFE_EPSILON*g;return D>=B||-D>=B?c.signum(D):2}},{key:"signum",value:function(r){return r>0?1:r<0?-1:0}}])})();Ne.DP_SAFE_EPSILON=1e-15;var ie=(function(){return f((function c(){o(this,c)}),[{key:"getM",value:function(c){if(this.hasM()){var r=this.getDimension()-this.getMeasures();return this.getOrdinate(c,r)}return K.NaN}},{key:"setOrdinate",value:function(c,r,s){}},{key:"getZ",value:function(c){return this.hasZ()?this.getOrdinate(c,2):K.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(c,r){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(c){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(c){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(c){}},{key:"copy",value:function(){}},{key:"getY",value:function(c){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[E]}}])})();ie.X=0,ie.Y=1,ie.Z=2,ie.M=3;var $t=(function(){function c(){o(this,c)}return f(c,null,[{key:"index",value:function(r,s,l){return Ne.orientationIndex(r,s,l)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var r=arguments[0],s=r.length-1;if(s<3)throw new tt("Ring has fewer than 4 points, so orientation cannot be determined");for(var l=r[0],g=0,y=1;y<=s;y++){var k=r[y];k.y>l.y&&(l=k,g=y)}var D=g;do(D-=1)<0&&(D=s);while(r[D].equals2D(l)&&D!==g);var B=g;do B=(B+1)%s;while(r[B].equals2D(l)&&B!==g);var J=r[D],mt=r[B];if(J.equals2D(l)||mt.equals2D(l)||J.equals2D(mt))return!1;var kt=c.index(J,l,mt);return kt===0?J.x>mt.x:kt>0}if(Mt(arguments[0],ie)){var zt=arguments[0],jt=zt.size()-1;if(jt<3)throw new tt("Ring has fewer than 4 points, so orientation cannot be determined");for(var re=zt.getCoordinate(0),oe=0,Ie=1;Ie<=jt;Ie++){var xe=zt.getCoordinate(Ie);xe.y>re.y&&(re=xe,oe=Ie)}var Ue=null,Qe=oe;do(Qe-=1)<0&&(Qe=jt),Ue=zt.getCoordinate(Qe);while(Ue.equals2D(re)&&Qe!==oe);var wn=null,rr=oe;do rr=(rr+1)%jt,wn=zt.getCoordinate(rr);while(wn.equals2D(re)&&rr!==oe);if(Ue.equals2D(re)||wn.equals2D(re)||Ue.equals2D(wn))return!1;var As=c.index(Ue,re,wn);return As===0?Ue.x>wn.x:As>0}}}])})();$t.CLOCKWISE=-1,$t.RIGHT=$t.CLOCKWISE,$t.COUNTERCLOCKWISE=1,$t.LEFT=$t.COUNTERCLOCKWISE,$t.COLLINEAR=0,$t.STRAIGHT=$t.COLLINEAR;var Se=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(c,r){var s=this.getRightmostSideOfSegment(c,r);return s<0&&(s=this.getRightmostSideOfSegment(c,r-1)),s<0&&(this._minCoord=null,this.checkForRightmostCoordinate(c)),s}},{key:"findRightmostEdgeAtVertex",value:function(){var c=this._minDe.getEdge().getCoordinates();Et.isTrue(this._minIndex>0&&this._minIndex<c.length,"rightmost point expected to be interior vertex of edge");var r=c[this._minIndex-1],s=c[this._minIndex+1],l=$t.index(this._minCoord,s,r),g=!1;(r.y<this._minCoord.y&&s.y<this._minCoord.y&&l===$t.COUNTERCLOCKWISE||r.y>this._minCoord.y&&s.y>this._minCoord.y&&l===$t.CLOCKWISE)&&(g=!0),g&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(c,r){var s=c.getEdge().getCoordinates();if(r<0||r+1>=s.length||s[r].y===s[r+1].y)return-1;var l=ft.LEFT;return s[r].y<s[r+1].y&&(l=ft.RIGHT),l}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(c){for(var r=c.getEdge().getCoordinates(),s=0;s<r.length-1;s++)(this._minCoord===null||r[s].x>this._minCoord.x)&&(this._minDe=c,this._minIndex=s,this._minCoord=r[s])}},{key:"findRightmostEdgeAtNode",value:function(){var c=this._minDe.getNode().getEdges();this._minDe=c.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(c){for(var r=c.iterator();r.hasNext();){var s=r.next();s.isForward()&&this.checkForRightmostCoordinate(s)}Et.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ft.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),Le=(function(c){function r(s,l){var g;return o(this,r),(g=i(this,r,[l?s+" [ "+l+" ]":s])).pt=l?new et(l):void 0,g.name=Object.keys({TopologyException:r})[0],g}return x(r,c),f(r,[{key:"getCoordinate",value:function(){return this.pt}}])})(bt),ln=(function(){return f((function c(){o(this,c),this.array=[]}),[{key:"addLast",value:function(c){this.array.push(c)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),Kt=(function(c){function r(s){var l;return o(this,r),(l=i(this,r)).array=[],s instanceof Q&&l.addAll(s),l}return x(r,c),f(r,[{key:"interfaces_",get:function(){return[Ht,Q]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(s){return arguments.length===1?this.array.push(s):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(s){var l,g=p(s);try{for(g.s();!(l=g.n()).done;){var y=l.value;this.array.push(y)}}catch(k){g.e(k)}finally{g.f()}}},{key:"set",value:function(s,l){var g=this.array[s];return this.array[s]=l,g}},{key:"iterator",value:function(){return new on(this)}},{key:"get",value:function(s){if(s<0||s>=this.size())throw new Lt;return this.array[s]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(s){s?this.array.sort((function(l,g){return s.compare(l,g)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(s){for(var l=0,g=this.array.length;l<g;l++)if(this.array[l]===s)return!!this.array.splice(l,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(Ht),on=(function(){return f((function c(r){o(this,c),this.arrayList=r,this.position=0}),[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new dt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(c){return this.arrayList.set(this.position-1,c)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),cn=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"clearVisitedEdges",value:function(){for(var c=this._dirEdgeList.iterator();c.hasNext();)c.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(c){for(var r=null,s=c.getEdges().iterator();s.hasNext();){var l=s.next();if(l.isVisited()||l.getSym().isVisited()){r=l;break}}if(r===null)throw new Le("unable to find edge to compute depths at "+c.getCoordinate());c.getEdges().computeDepths(r);for(var g=c.getEdges().iterator();g.hasNext();){var y=g.next();y.setVisited(!0),this.copySymDepths(y)}}},{key:"computeDepth",value:function(c){this.clearVisitedEdges();var r=this._finder.getEdge();r.getNode(),r.getLabel(),r.setEdgeDepths(ft.RIGHT,c),this.copySymDepths(r),this.computeDepths(r)}},{key:"create",value:function(c){this.addReachable(c),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var c=this._dirEdgeList.iterator();c.hasNext();){var r=c.next();r.getDepth(ft.RIGHT)>=1&&r.getDepth(ft.LEFT)<=0&&!r.isInteriorAreaEdge()&&r.setInResult(!0)}}},{key:"computeDepths",value:function(c){var r=new Nt,s=new ln,l=c.getNode();for(s.addLast(l),r.add(l),c.setVisited(!0);!s.isEmpty();){var g=s.removeFirst();r.add(g),this.computeNodeDepth(g);for(var y=g.getEdges().iterator();y.hasNext();){var k=y.next().getSym();if(!k.isVisited()){var D=k.getNode();r.contains(D)||(s.addLast(D),r.add(D))}}}}},{key:"compareTo",value:function(c){var r=c;return this._rightMostCoord.x<r._rightMostCoord.x?-1:this._rightMostCoord.x>r._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var c=new Ft,r=this._dirEdgeList.iterator();r.hasNext();)for(var s=r.next().getEdge().getCoordinates(),l=0;l<s.length-1;l++)c.expandToInclude(s[l]);this._env=c}return this._env}},{key:"addReachable",value:function(c){var r=new Zt;for(r.add(c);!r.empty();){var s=r.pop();this.add(s,r)}}},{key:"copySymDepths",value:function(c){var r=c.getSym();r.setDepth(ft.LEFT,c.getDepth(ft.RIGHT)),r.setDepth(ft.RIGHT,c.getDepth(ft.LEFT))}},{key:"add",value:function(c,r){c.setVisited(!0),this._nodes.add(c);for(var s=c.getEdges().iterator();s.hasNext();){var l=s.next();this._dirEdgeList.add(l);var g=l.getSym().getNode();g.isVisited()||r.push(g)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new Kt,this._nodes=new Kt,this._rightMostCoord=null,this._env=null,this._finder=new Se}}])})(),hn=(function(){return f((function c(){o(this,c)}),null,[{key:"intersection",value:function(c,r,s,l){var g=c.x<r.x?c.x:r.x,y=c.y<r.y?c.y:r.y,k=c.x>r.x?c.x:r.x,D=c.y>r.y?c.y:r.y,B=s.x<l.x?s.x:l.x,J=s.y<l.y?s.y:l.y,mt=s.x>l.x?s.x:l.x,kt=s.y>l.y?s.y:l.y,zt=((g>B?g:B)+(k<mt?k:mt))/2,jt=((y>J?y:J)+(D<kt?D:kt))/2,re=c.x-zt,oe=c.y-jt,Ie=r.x-zt,xe=r.y-jt,Ue=s.x-zt,Qe=s.y-jt,wn=l.x-zt,rr=l.y-jt,As=oe-xe,Ti=Ie-re,na=re*xe-Ie*oe,ia=Qe-rr,Kr=wn-Ue,mu=Ue*rr-wn*Qe,Ls=As*Kr-ia*Ti,Cr=(Ti*mu-Kr*na)/Ls,oo=(ia*na-As*mu)/Ls;return K.isNaN(Cr)||K.isInfinite(Cr)||K.isNaN(oo)||K.isInfinite(oo)?null:new et(Cr+zt,oo+jt)}}])})(),tn=(function(){return f((function c(){o(this,c)}),null,[{key:"arraycopy",value:function(c,r,s,l,g){for(var y=0,k=r;k<r+g;k++)s[l+y]=c[k],y++}},{key:"getProperty",value:function(c){return{"line.separator":`
`}[c]}}])})(),je=(function(){function c(){o(this,c)}return f(c,null,[{key:"log10",value:function(r){var s=Math.log(r);return K.isInfinite(s)||K.isNaN(s)?s:s/c.LOG_10}},{key:"min",value:function(r,s,l,g){var y=r;return s<y&&(y=s),l<y&&(y=l),g<y&&(y=g),y}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],s=arguments[1],l=arguments[2];return r<s?s:r>l?l:r}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],y=arguments[1],k=arguments[2];return g<y?y:g>k?k:g}}},{key:"wrap",value:function(r,s){return r<0?s- -r%s:r%s}},{key:"max",value:function(){if(arguments.length===3){var r=arguments[1],s=arguments[2],l=arguments[0];return r>l&&(l=r),s>l&&(l=s),l}if(arguments.length===4){var g=arguments[1],y=arguments[2],k=arguments[3],D=arguments[0];return g>D&&(D=g),y>D&&(D=y),k>D&&(D=k),D}}},{key:"average",value:function(r,s){return(r+s)/2}}])})();je.LOG_10=Math.log(10);var fn=(function(){function c(){o(this,c)}return f(c,null,[{key:"segmentToSegment",value:function(r,s,l,g){if(r.equals(s))return c.pointToSegment(r,l,g);if(l.equals(g))return c.pointToSegment(g,r,s);var y=!1;if(Ft.intersects(r,s,l,g)){var k=(s.x-r.x)*(g.y-l.y)-(s.y-r.y)*(g.x-l.x);if(k===0)y=!0;else{var D=(r.y-l.y)*(g.x-l.x)-(r.x-l.x)*(g.y-l.y),B=((r.y-l.y)*(s.x-r.x)-(r.x-l.x)*(s.y-r.y))/k,J=D/k;(J<0||J>1||B<0||B>1)&&(y=!0)}}else y=!0;return y?je.min(c.pointToSegment(r,l,g),c.pointToSegment(s,l,g),c.pointToSegment(l,r,s),c.pointToSegment(g,r,s)):0}},{key:"pointToSegment",value:function(r,s,l){if(s.x===l.x&&s.y===l.y)return r.distance(s);var g=(l.x-s.x)*(l.x-s.x)+(l.y-s.y)*(l.y-s.y),y=((r.x-s.x)*(l.x-s.x)+(r.y-s.y)*(l.y-s.y))/g;if(y<=0)return r.distance(s);if(y>=1)return r.distance(l);var k=((s.y-r.y)*(l.x-s.x)-(s.x-r.x)*(l.y-s.y))/g;return Math.abs(k)*Math.sqrt(g)}},{key:"pointToLinePerpendicular",value:function(r,s,l){var g=(l.x-s.x)*(l.x-s.x)+(l.y-s.y)*(l.y-s.y),y=((s.y-r.y)*(l.x-s.x)-(s.x-r.x)*(l.y-s.y))/g;return Math.abs(y)*Math.sqrt(g)}},{key:"pointToSegmentString",value:function(r,s){if(s.length===0)throw new tt("Line array must contain at least one vertex");for(var l=r.distance(s[0]),g=0;g<s.length-1;g++){var y=c.pointToSegment(r,s[g],s[g+1]);y<l&&(l=y)}return l}}])})(),Zr=(function(){return f((function c(){o(this,c)}),[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Mt(arguments[0],ie);else if(arguments.length!==2){if(arguments.length===3){var c=arguments[0],r=arguments[1];return this.create(c,r)}}}}])})(),F=(function(){return f((function c(){o(this,c)}),[{key:"filter",value:function(c){}}])})(),H=(function(){return f((function c(){o(this,c)}),null,[{key:"ofLine",value:function(c){var r=c.size();if(r<=1)return 0;var s=0,l=new et;c.getCoordinate(0,l);for(var g=l.x,y=l.y,k=1;k<r;k++){c.getCoordinate(k,l);var D=l.x,B=l.y,J=D-g,mt=B-y;s+=Math.sqrt(J*J+mt*mt),g=D,y=B}return s}}])})(),at=f((function c(){o(this,c)})),It=(function(){function c(){o(this,c)}return f(c,null,[{key:"copyCoord",value:function(r,s,l,g){for(var y=Math.min(r.getDimension(),l.getDimension()),k=0;k<y;k++)l.setOrdinate(g,k,r.getOrdinate(s,k))}},{key:"isRing",value:function(r){var s=r.size();return s===0||!(s<=3)&&r.getOrdinate(0,ie.X)===r.getOrdinate(s-1,ie.X)&&r.getOrdinate(0,ie.Y)===r.getOrdinate(s-1,ie.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Mt(arguments[0],ie)&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1];c.scroll(r,s,c.isRing(r))}else if(Mt(arguments[0],ie)&&arguments[1]instanceof et){var l=arguments[0],g=arguments[1],y=c.indexOf(g,l);if(y<=0)return null;c.scroll(l,y)}}else if(arguments.length===3){var k=arguments[0],D=arguments[1],B=arguments[2];if(D<=0)return null;for(var J=k.copy(),mt=B?k.size()-1:k.size(),kt=0;kt<mt;kt++)for(var zt=0;zt<k.getDimension();zt++)k.setOrdinate(kt,zt,J.getOrdinate((D+kt)%mt,zt));if(B)for(var jt=0;jt<k.getDimension();jt++)k.setOrdinate(mt,jt,k.getOrdinate(0,jt))}}},{key:"isEqual",value:function(r,s){var l=r.size();if(l!==s.size())return!1;for(var g=Math.min(r.getDimension(),s.getDimension()),y=0;y<l;y++)for(var k=0;k<g;k++){var D=r.getOrdinate(y,k),B=s.getOrdinate(y,k);if(r.getOrdinate(y,k)!==s.getOrdinate(y,k)&&(!K.isNaN(D)||!K.isNaN(B)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var r=arguments[0];return c.minCoordinateIndex(r,0,r.size()-1)}if(arguments.length===3){for(var s=arguments[0],l=arguments[2],g=-1,y=null,k=arguments[1];k<=l;k++){var D=s.getCoordinate(k);(y===null||y.compareTo(D)>0)&&(y=D,g=k)}return g}}},{key:"extend",value:function(r,s,l){var g=r.create(l,s.getDimension()),y=s.size();if(c.copy(s,0,g,0,y),y>0)for(var k=y;k<l;k++)c.copy(s,y-1,g,k,1);return g}},{key:"reverse",value:function(r){for(var s=r.size()-1,l=Math.trunc(s/2),g=0;g<=l;g++)c.swap(r,g,s-g)}},{key:"swap",value:function(r,s,l){if(s===l)return null;for(var g=0;g<r.getDimension();g++){var y=r.getOrdinate(s,g);r.setOrdinate(s,g,r.getOrdinate(l,g)),r.setOrdinate(l,g,y)}}},{key:"copy",value:function(r,s,l,g,y){for(var k=0;k<y;k++)c.copyCoord(r,s+k,l,g+k)}},{key:"ensureValidRing",value:function(r,s){var l=s.size();return l===0?s:l<=3?c.createClosedRing(r,s,4):s.getOrdinate(0,ie.X)===s.getOrdinate(l-1,ie.X)&&s.getOrdinate(0,ie.Y)===s.getOrdinate(l-1,ie.Y)?s:c.createClosedRing(r,s,l+1)}},{key:"indexOf",value:function(r,s){for(var l=0;l<s.size();l++)if(r.x===s.getOrdinate(l,ie.X)&&r.y===s.getOrdinate(l,ie.Y))return l;return-1}},{key:"createClosedRing",value:function(r,s,l){var g=r.create(l,s.getDimension()),y=s.size();c.copy(s,0,g,0,y);for(var k=y;k<l;k++)c.copy(s,0,g,k,1);return g}},{key:"minCoordinate",value:function(r){for(var s=null,l=0;l<r.size();l++){var g=r.getCoordinate(l);(s===null||s.compareTo(g)>0)&&(s=g)}return s}}])})(),xt=(function(){function c(){o(this,c)}return f(c,null,[{key:"toDimensionSymbol",value:function(r){switch(r){case c.FALSE:return c.SYM_FALSE;case c.TRUE:return c.SYM_TRUE;case c.DONTCARE:return c.SYM_DONTCARE;case c.P:return c.SYM_P;case c.L:return c.SYM_L;case c.A:return c.SYM_A}throw new tt("Unknown dimension value: "+r)}},{key:"toDimensionValue",value:function(r){switch(se.toUpperCase(r)){case c.SYM_FALSE:return c.FALSE;case c.SYM_TRUE:return c.TRUE;case c.SYM_DONTCARE:return c.DONTCARE;case c.SYM_P:return c.P;case c.SYM_L:return c.L;case c.SYM_A:return c.A}throw new tt("Unknown dimension symbol: "+r)}}])})();xt.P=0,xt.L=1,xt.A=2,xt.FALSE=-1,xt.TRUE=-2,xt.DONTCARE=-3,xt.SYM_FALSE="F",xt.SYM_TRUE="T",xt.SYM_DONTCARE="*",xt.SYM_P="0",xt.SYM_L="1",xt.SYM_A="2";var ae=(function(){return f((function c(){o(this,c)}),[{key:"filter",value:function(c){}}])})(),Ce=(function(){return f((function c(){o(this,c)}),[{key:"filter",value:function(c,r){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),Ke=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Ft:this._points.expandEnvelope(new Ft)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new r(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];if(!this.isEquivalentClass(s))return!1;var g=s;if(this._points.size()!==g._points.size())return!1;for(var y=0;y<this._points.size();y++)if(!this.equal(this._points.getCoordinate(y),g._points.getCoordinate(y),l))return!1;return!0}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var s=0;s<Math.trunc(this._points.size()/2);s++){var l=this._points.size()-1-s;if(!this._points.getCoordinate(s).equals(this._points.getCoordinate(l))){if(this._points.getCoordinate(s).compareTo(this._points.getCoordinate(l))>0){var g=this._points.copy();It.reverse(g),this._points=g}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?xt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var s=this._points.copy();return It.reverse(s),this.getFactory().createLineString(s)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return H.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var s=arguments[0],l=0,g=0;l<this._points.size()&&g<s._points.size();){var y=this._points.getCoordinate(l).compareTo(s._points.getCoordinate(g));if(y!==0)return y;l++,g++}return l<this._points.size()?1:g<s._points.size()?-1:0}if(arguments.length===2){var k=arguments[0];return arguments[1].compare(this._points,k._points)}}},{key:"apply",value:function(){if(Mt(arguments[0],F))for(var s=arguments[0],l=0;l<this._points.size();l++)s.filter(this._points.getCoordinate(l));else if(Mt(arguments[0],Ce)){var g=arguments[0];if(this._points.size()===0)return null;for(var y=0;y<this._points.size()&&(g.filter(this._points,y),!g.isDone());y++);g.isGeometryChanged()&&this.geometryChanged()}else Mt(arguments[0],ae)?arguments[0].filter(this):Mt(arguments[0],pt)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new gt}},{key:"isEquivalentClass",value:function(s){return s instanceof r}},{key:"getCoordinateN",value:function(s){return this._points.getCoordinate(s)}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(s){if(s===null&&(s=this.getFactory().getCoordinateSequenceFactory().create([])),s.size()===1)throw new tt("Invalid number of points in LineString (found "+s.size()+" - must be 0 or >= 2)");this._points=s}},{key:"isCoordinate",value:function(s){for(var l=0;l<this._points.size();l++)if(this._points.getCoordinate(l).equals(s))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(s){return this.getFactory().createPoint(this._points.getCoordinate(s))}},{key:"interfaces_",get:function(){return[at]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var s=arguments[0],l=arguments[1];Ct.constructor_.call(this,l),this.init(s)}}}}])})(Ct),kn=f((function c(){o(this,c)})),xn=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Ft;var s=new Ft;return s.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),s}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new r(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&(!(!this.isEmpty()||!s.isEmpty())||this.isEmpty()===s.isEmpty()&&this.equal(s.getCoordinate(),this.getCoordinate(),l))}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return xt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var s=arguments[0];return this.getCoordinate().compareTo(s.getCoordinate())}if(arguments.length===2){var l=arguments[0];return arguments[1].compare(this._coordinates,l._coordinates)}}},{key:"apply",value:function(){if(Mt(arguments[0],F)){var s=arguments[0];if(this.isEmpty())return null;s.filter(this.getCoordinate())}else if(Mt(arguments[0],Ce)){var l=arguments[0];if(this.isEmpty())return null;l.filter(this._coordinates,0),l.isGeometryChanged()&&this.geometryChanged()}else Mt(arguments[0],ae)?arguments[0].filter(this):Mt(arguments[0],pt)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(s){s===null&&(s=this.getFactory().getCoordinateSequenceFactory().create([])),Et.isTrue(s.size()<=1),this._coordinates=s}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[kn]}}],[{key:"constructor_",value:function(){this._coordinates=null;var s=arguments[0],l=arguments[1];Ct.constructor_.call(this,l),this.init(s)}}])})(Ct),qn=(function(){function c(){o(this,c)}return f(c,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var r=arguments[0];return Math.abs(c.ofRingSigned(r))}if(Mt(arguments[0],ie)){var s=arguments[0];return Math.abs(c.ofRingSigned(s))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var r=arguments[0];if(r.length<3)return 0;for(var s=0,l=r[0].x,g=1;g<r.length-1;g++){var y=r[g].x-l,k=r[g+1].y;s+=y*(r[g-1].y-k)}return s/2}if(Mt(arguments[0],ie)){var D=arguments[0],B=D.size();if(B<3)return 0;var J=new et,mt=new et,kt=new et;D.getCoordinate(0,mt),D.getCoordinate(1,kt);var zt=mt.x;kt.x-=zt;for(var jt=0,re=1;re<B-1;re++)J.y=mt.y,mt.x=kt.x,mt.y=kt.y,D.getCoordinate(re+1,kt),kt.x-=zt,jt+=mt.x*(J.y-kt.y);return jt/2}}}])})(),ze=(function(){return f((function c(){o(this,c)}),null,[{key:"sort",value:function(){var c=arguments,r=arguments[0];if(arguments.length===1)r.sort((function(zt,jt){return zt.compareTo(jt)}));else if(arguments.length===2)r.sort((function(zt,jt){return c[1].compare(zt,jt)}));else if(arguments.length===3){var s=r.slice(arguments[1],arguments[2]);s.sort();var l=r.slice(0,arguments[1]).concat(s,r.slice(arguments[2],r.length));r.splice(0,r.length);var g,y=p(l);try{for(y.s();!(g=y.n()).done;){var k=g.value;r.push(k)}}catch(zt){y.e(zt)}finally{y.f()}}else if(arguments.length===4){var D=r.slice(arguments[1],arguments[2]);D.sort((function(zt,jt){return c[3].compare(zt,jt)}));var B=r.slice(0,arguments[1]).concat(D,r.slice(arguments[2],r.length));r.splice(0,r.length);var J,mt=p(B);try{for(mt.s();!(J=mt.n()).done;){var kt=J.value;r.push(kt)}}catch(zt){mt.e(zt)}finally{mt.f()}}}},{key:"asList",value:function(c){var r,s=new Kt,l=p(c);try{for(l.s();!(r=l.n()).done;){var g=r.value;s.add(g)}}catch(y){l.e(y)}finally{l.f()}return s}},{key:"copyOf",value:function(c,r){return c.slice(0,r)}}])})(),ee=f((function c(){o(this,c)})),On=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var s=new Array(this.getNumPoints()).fill(null),l=-1,g=this._shell.getCoordinates(),y=0;y<g.length;y++)s[++l]=g[y];for(var k=0;k<this._holes.length;k++)for(var D=this._holes[k].getCoordinates(),B=0;B<D.length;B++)s[++l]=D[B];return s}},{key:"getArea",value:function(){var s=0;s+=qn.ofRing(this._shell.getCoordinateSequence());for(var l=0;l<this._holes.length;l++)s-=qn.ofRing(this._holes[l].getCoordinateSequence());return s}},{key:"copyInternal",value:function(){for(var s=this._shell.copy(),l=new Array(this._holes.length).fill(null),g=0;g<this._holes.length;g++)l[g]=this._holes[g].copy();return new r(s,l,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var s=this._shell.getCoordinateSequence(),l=this.getEnvelopeInternal(),g=0;g<5;g++){var y=s.getX(g);if(y!==l.getMinX()&&y!==l.getMaxX())return!1;var k=s.getY(g);if(k!==l.getMinY()&&k!==l.getMaxY())return!1}for(var D=s.getX(0),B=s.getY(0),J=1;J<=4;J++){var mt=s.getX(J),kt=s.getY(J);if(mt!==D==(kt!==B))return!1;D=mt,B=kt}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];if(!this.isEquivalentClass(s))return!1;var g=s,y=this._shell,k=g._shell;if(!y.equalsExact(k,l)||this._holes.length!==g._holes.length)return!1;for(var D=0;D<this._holes.length;D++)if(!this._holes[D].equalsExact(g._holes[D],l))return!1;return!0}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var s=0;s<this._holes.length;s++)this._holes[s]=this.normalized(this._holes[s],!1);ze.sort(this._holes)}else if(arguments.length===2){var l=arguments[0],g=arguments[1];if(l.isEmpty())return null;var y=l.getCoordinateSequence(),k=It.minCoordinateIndex(y,0,y.size()-2);It.scroll(y,k,!0),$t.isCCW(y)===g&&It.reverse(y)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var s=this.getExteriorRing().reverse(),l=new Array(this.getNumInteriorRing()).fill(null),g=0;g<l.length;g++)l[g]=this.getInteriorRingN(g).reverse();return this.getFactory().createPolygon(s,l)}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var s=0;s+=this._shell.getLength();for(var l=0;l<this._holes.length;l++)s+=this._holes[l].getLength();return s}},{key:"getNumPoints",value:function(){for(var s=this._shell.getNumPoints(),l=0;l<this._holes.length;l++)s+=this._holes[l].getNumPoints();return s}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(s,l){var g=s.copy();return this.normalize(g,l),g}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var s=arguments[0],l=this._shell,g=s._shell;return l.compareToSameClass(g)}if(arguments.length===2){var y=arguments[1],k=arguments[0],D=this._shell,B=k._shell,J=D.compareToSameClass(B,y);if(J!==0)return J;for(var mt=this.getNumInteriorRing(),kt=k.getNumInteriorRing(),zt=0;zt<mt&&zt<kt;){var jt=this.getInteriorRingN(zt),re=k.getInteriorRingN(zt),oe=jt.compareToSameClass(re,y);if(oe!==0)return oe;zt++}return zt<mt?1:zt<kt?-1:0}}},{key:"apply",value:function(){if(Mt(arguments[0],F)){var s=arguments[0];this._shell.apply(s);for(var l=0;l<this._holes.length;l++)this._holes[l].apply(s)}else if(Mt(arguments[0],Ce)){var g=arguments[0];if(this._shell.apply(g),!g.isDone())for(var y=0;y<this._holes.length&&(this._holes[y].apply(g),!g.isDone());y++);g.isGeometryChanged()&&this.geometryChanged()}else if(Mt(arguments[0],ae))arguments[0].filter(this);else if(Mt(arguments[0],pt)){var k=arguments[0];k.filter(this),this._shell.apply(k);for(var D=0;D<this._holes.length;D++)this._holes[D].apply(k)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var s=new Array(this._holes.length+1).fill(null);s[0]=this._shell;for(var l=0;l<this._holes.length;l++)s[l+1]=this._holes[l];return s.length<=1?this.getFactory().createLinearRing(s[0].getCoordinateSequence()):this.getFactory().createMultiLineString(s)}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(s){return this._holes[s]}},{key:"interfaces_",get:function(){return[ee]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var s=arguments[0],l=arguments[1],g=arguments[2];if(Ct.constructor_.call(this,g),s===null&&(s=this.getFactory().createLinearRing()),l===null&&(l=[]),Ct.hasNullElements(l))throw new tt("holes must not contain null elements");if(s.isEmpty()&&Ct.hasNonEmptyElements(l))throw new tt("shell is empty but holes are not");this._shell=s,this._holes=l}}])})(Ct),Mn=(function(c){function r(){return o(this,r),i(this,r,arguments)}return x(r,c),f(r)})(vt),Kn=(function(c){function r(s){var l;return o(this,r),(l=i(this,r)).array=[],s instanceof Q&&l.addAll(s),l}return x(r,c),f(r,[{key:"contains",value:function(s){var l,g=p(this.array);try{for(g.s();!(l=g.n()).done;)if(l.value.compareTo(s)===0)return!0}catch(y){g.e(y)}finally{g.f()}return!1}},{key:"add",value:function(s){if(this.contains(s))return!1;for(var l=0,g=this.array.length;l<g;l++)if(this.array[l].compareTo(s)===1)return!!this.array.splice(l,0,s);return this.array.push(s),!0}},{key:"addAll",value:function(s){var l,g=p(s);try{for(g.s();!(l=g.n()).done;){var y=l.value;this.add(y)}}catch(k){g.e(k)}finally{g.f()}return!0}},{key:"remove",value:function(){throw new gt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new vi(this.array)}}])})(Mn),vi=(function(){return f((function c(r){o(this,c),this.array=r,this.position=0}),[{key:"next",value:function(){if(this.position===this.array.length)throw new dt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new gt}}])})(),Te=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"computeEnvelopeInternal",value:function(){for(var s=new Ft,l=0;l<this._geometries.length;l++)s.expandToInclude(this._geometries[l].getEnvelopeInternal());return s}},{key:"getGeometryN",value:function(s){return this._geometries[s]}},{key:"getCoordinates",value:function(){for(var s=new Array(this.getNumPoints()).fill(null),l=-1,g=0;g<this._geometries.length;g++)for(var y=this._geometries[g].getCoordinates(),k=0;k<y.length;k++)s[++l]=y[k];return s}},{key:"getArea",value:function(){for(var s=0,l=0;l<this._geometries.length;l++)s+=this._geometries[l].getArea();return s}},{key:"copyInternal",value:function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new r(s,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];if(!this.isEquivalentClass(s))return!1;var g=s;if(this._geometries.length!==g._geometries.length)return!1;for(var y=0;y<this._geometries.length;y++)if(!this._geometries[y].equalsExact(g._geometries[y],l))return!1;return!0}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var s=0;s<this._geometries.length;s++)this._geometries[s].normalize();ze.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var s=xt.FALSE,l=0;l<this._geometries.length;l++)s=Math.max(s,this._geometries[l].getBoundaryDimension());return s}},{key:"reverseInternal",value:function(){for(var s=this._geometries.length,l=new Kt(s),g=0;g<s;g++)l.add(this._geometries[g].reverse());return this.getFactory().buildGeometry(l)}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var s=xt.FALSE,l=0;l<this._geometries.length;l++)s=Math.max(s,this._geometries[l].getDimension());return s}},{key:"getLength",value:function(){for(var s=0,l=0;l<this._geometries.length;l++)s+=this._geometries[l].getLength();return s}},{key:"getNumPoints",value:function(){for(var s=0,l=0;l<this._geometries.length;l++)s+=this._geometries[l].getNumPoints();return s}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var s=arguments[0],l=new Kn(ze.asList(this._geometries)),g=new Kn(ze.asList(s._geometries));return this.compare(l,g)}if(arguments.length===2){for(var y=arguments[1],k=arguments[0],D=this.getNumGeometries(),B=k.getNumGeometries(),J=0;J<D&&J<B;){var mt=this.getGeometryN(J),kt=k.getGeometryN(J),zt=mt.compareToSameClass(kt,y);if(zt!==0)return zt;J++}return J<D?1:J<B?-1:0}}},{key:"apply",value:function(){if(Mt(arguments[0],F))for(var s=arguments[0],l=0;l<this._geometries.length;l++)this._geometries[l].apply(s);else if(Mt(arguments[0],Ce)){var g=arguments[0];if(this._geometries.length===0)return null;for(var y=0;y<this._geometries.length&&(this._geometries[y].apply(g),!g.isDone());y++);g.isGeometryChanged()&&this.geometryChanged()}else if(Mt(arguments[0],ae)){var k=arguments[0];k.filter(this);for(var D=0;D<this._geometries.length;D++)this._geometries[D].apply(k)}else if(Mt(arguments[0],pt)){var B=arguments[0];B.filter(this);for(var J=0;J<this._geometries.length;J++)this._geometries[J].apply(B)}}},{key:"getBoundary",value:function(){return Ct.checkNotGeometryCollection(this),Et.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var s=arguments[0],l=arguments[1];if(Ct.constructor_.call(this,l),s===null&&(s=[]),Ct.hasNullElements(s))throw new tt("geometries must not contain null elements");this._geometries=s}}}}])})(Ct),Bi=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"copyInternal",value:function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new r(s,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&P(r,"equalsExact",this,1).call(this,s,l)}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var s=arguments[0];return this._geometries[s].getCoordinate()}return P(r,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return xt.FALSE}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[kn]}}],[{key:"constructor_",value:function(){var s=arguments[0],l=arguments[1];Te.constructor_.call(this,s,l)}}])})(Te),dn=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"copyInternal",value:function(){return new r(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return xt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||P(r,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var s=this._points.copy();return It.reverse(s),this.getFactory().createLinearRing(s)}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!P(r,"isClosed",this,1).call(this))throw new tt("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<r.MINIMUM_VALID_SIZE)throw new tt("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var s=arguments[0],l=arguments[1];Ke.constructor_.call(this,s,l),this.validateConstruction()}}])})(Ke);dn.MINIMUM_VALID_SIZE=4;var Jn=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"setOrdinate",value:function(s,l){switch(s){case r.X:this.x=l;break;case r.Y:this.y=l;break;default:throw new tt("Invalid ordinate index: "+s)}}},{key:"getZ",value:function(){return et.NULL_ORDINATE}},{key:"getOrdinate",value:function(s){switch(s){case r.X:return this.x;case r.Y:return this.y}throw new tt("Invalid ordinate index: "+s)}},{key:"setZ",value:function(s){throw new tt("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(s){this.x=s.x,this.y=s.y,this.z=s.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)et.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof r){var s=arguments[0];et.constructor_.call(this,s.x,s.y)}else if(arguments[0]instanceof et){var l=arguments[0];et.constructor_.call(this,l.x,l.y)}}else if(arguments.length===2){var g=arguments[0],y=arguments[1];et.constructor_.call(this,g,y,et.NULL_ORDINATE)}}}])})(et);Jn.X=0,Jn.Y=1,Jn.Z=-1,Jn.M=-1;var zi=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(s,l){switch(s){case r.X:this.x=l;break;case r.Y:this.y=l;break;case r.M:this._m=l;break;default:throw new tt("Invalid ordinate index: "+s)}}},{key:"setM",value:function(s){this._m=s}},{key:"getZ",value:function(){return et.NULL_ORDINATE}},{key:"getOrdinate",value:function(s){switch(s){case r.X:return this.x;case r.Y:return this.y;case r.M:return this._m}throw new tt("Invalid ordinate index: "+s)}},{key:"setZ",value:function(s){throw new tt("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(s){this.x=s.x,this.y=s.y,this.z=s.getZ(),this._m=s.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)et.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof r){var s=arguments[0];et.constructor_.call(this,s.x,s.y),this._m=s._m}else if(arguments[0]instanceof et){var l=arguments[0];et.constructor_.call(this,l.x,l.y),this._m=this.getM()}}else if(arguments.length===3){var g=arguments[0],y=arguments[1],k=arguments[2];et.constructor_.call(this,g,y,et.NULL_ORDINATE),this._m=k}}}])})(et);zi.X=0,zi.Y=1,zi.Z=-1,zi.M=2;var ys=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(s,l){switch(s){case et.X:this.x=l;break;case et.Y:this.y=l;break;case et.Z:this.z=l;break;case et.M:this._m=l;break;default:throw new tt("Invalid ordinate index: "+s)}}},{key:"setM",value:function(s){this._m=s}},{key:"getOrdinate",value:function(s){switch(s){case et.X:return this.x;case et.Y:return this.y;case et.Z:return this.getZ();case et.M:return this.getM()}throw new tt("Invalid ordinate index: "+s)}},{key:"copy",value:function(){return new r(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(s){this.x=s.x,this.y=s.y,this.z=s.getZ(),this._m=s.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)et.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof r){var s=arguments[0];et.constructor_.call(this,s),this._m=s._m}else if(arguments[0]instanceof et){var l=arguments[0];et.constructor_.call(this,l),this._m=this.getM()}}else if(arguments.length===4){var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3];et.constructor_.call(this,g,y,k),this._m=D}}}])})(et),Wr=(function(){function c(){o(this,c)}return f(c,null,[{key:"measures",value:function(r){return r instanceof Jn?0:r instanceof zi||r instanceof ys?1:0}},{key:"dimension",value:function(r){return r instanceof Jn?2:r instanceof zi?3:r instanceof ys?4:3}},{key:"create",value:function(){if(arguments.length===1){var r=arguments[0];return c.create(r,0)}if(arguments.length===2){var s=arguments[0],l=arguments[1];return s===2?new Jn:s===3&&l===0?new et:s===3&&l===1?new zi:s===4&&l===1?new ys:new et}}}])})(),vr=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"getCoordinate",value:function(s){return this.get(s)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Mt(arguments[0],Q)){for(var s=arguments[1],l=!1,g=arguments[0].iterator();g.hasNext();)this.add(g.next(),s),l=!0;return l}return P(r,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var s=P(r,"clone",this,1).call(this),l=0;l<this.size();l++)s.add(l,this.get(l).clone());return s}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(r.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(r.coordArrayType);for(var s=this.size(),l=new Array(s).fill(null),g=0;g<s;g++)l[g]=this.get(s-g-1);return l}}},{key:"add",value:function(){if(arguments.length===1){var s=arguments[0];return P(r,"add",this,1).call(this,s)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var l=arguments[0],g=arguments[1];return this.add(l,g,!0),!0}if(arguments[0]instanceof et&&typeof arguments[1]=="boolean"){var y=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(y))return null;P(r,"add",this,1).call(this,y)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var k=arguments[0],D=arguments[1];return this.add(k,D),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var B=arguments[0],J=arguments[1];if(arguments[2])for(var mt=0;mt<B.length;mt++)this.add(B[mt],J);else for(var kt=B.length-1;kt>=0;kt--)this.add(B[kt],J);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof et){var zt=arguments[0],jt=arguments[1];if(!arguments[2]){var re=this.size();if(re>0&&(zt>0&&this.get(zt-1).equals2D(jt)||zt<re&&this.get(zt).equals2D(jt)))return null}P(r,"add",this,1).call(this,zt,jt)}}else if(arguments.length===4){var oe=arguments[0],Ie=arguments[1],xe=arguments[2],Ue=arguments[3],Qe=1;xe>Ue&&(Qe=-1);for(var wn=xe;wn!==Ue;wn+=Qe)this.add(oe[wn],Ie);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var s=this.get(0).copy();this.add(s,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var s=arguments[0];this.ensureCapacity(s.length),this.add(s,!0)}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.ensureCapacity(l.length),this.add(l,g)}}}}])})(Kt);vr.coordArrayType=new Array(0).fill(null);var Je=(function(){function c(){o(this,c)}return f(c,null,[{key:"isRing",value:function(r){return!(r.length<4)&&!!r[0].equals2D(r[r.length-1])}},{key:"ptNotInList",value:function(r,s){for(var l=0;l<r.length;l++){var g=r[l];if(c.indexOf(g,s)<0)return g}return null}},{key:"scroll",value:function(r,s){var l=c.indexOf(s,r);if(l<0)return null;var g=new Array(r.length).fill(null);tn.arraycopy(r,l,g,0,r.length-l),tn.arraycopy(r,0,g,r.length-l,l),tn.arraycopy(g,0,r,0,r.length)}},{key:"equals",value:function(){if(arguments.length===2){var r=arguments[0],s=arguments[1];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var l=0;l<r.length;l++)if(!r[l].equals(s[l]))return!1;return!0}if(arguments.length===3){var g=arguments[0],y=arguments[1],k=arguments[2];if(g===y)return!0;if(g===null||y===null||g.length!==y.length)return!1;for(var D=0;D<g.length;D++)if(k.compare(g[D],y[D])!==0)return!1;return!0}}},{key:"intersection",value:function(r,s){for(var l=new vr,g=0;g<r.length;g++)s.intersects(r[g])&&l.add(r[g],!0);return l.toCoordinateArray()}},{key:"measures",value:function(r){if(r===null||r.length===0)return 0;var s,l=0,g=p(r);try{for(g.s();!(s=g.n()).done;){var y=s.value;l=Math.max(l,Wr.measures(y))}}catch(k){g.e(k)}finally{g.f()}return l}},{key:"hasRepeatedPoints",value:function(r){for(var s=1;s<r.length;s++)if(r[s-1].equals(r[s]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(r){return c.hasRepeatedPoints(r)?new vr(r,!1).toCoordinateArray():r}},{key:"reverse",value:function(r){for(var s=r.length-1,l=Math.trunc(s/2),g=0;g<=l;g++){var y=r[g];r[g]=r[s-g],r[s-g]=y}}},{key:"removeNull",value:function(r){for(var s=0,l=0;l<r.length;l++)r[l]!==null&&s++;var g=new Array(s).fill(null);if(s===0)return g;for(var y=0,k=0;k<r.length;k++)r[k]!==null&&(g[y++]=r[k]);return g}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var r=arguments[0],s=new Array(r.length).fill(null),l=0;l<r.length;l++)s[l]=r[l].copy();return s}if(arguments.length===5)for(var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3],B=arguments[4],J=0;J<B;J++)k[D+J]=g[y+J].copy()}},{key:"isEqualReversed",value:function(r,s){for(var l=0;l<r.length;l++){var g=r[l],y=s[r.length-l-1];if(g.compareTo(y)!==0)return!1}return!0}},{key:"envelope",value:function(r){for(var s=new Ft,l=0;l<r.length;l++)s.expandToInclude(r[l]);return s}},{key:"toCoordinateArray",value:function(r){return r.toArray(c.coordArrayType)}},{key:"dimension",value:function(r){if(r===null||r.length===0)return 3;var s,l=0,g=p(r);try{for(g.s();!(s=g.n()).done;){var y=s.value;l=Math.max(l,Wr.dimension(y))}}catch(k){g.e(k)}finally{g.f()}return l}},{key:"atLeastNCoordinatesOrNothing",value:function(r,s){return s.length>=r?s:[]}},{key:"indexOf",value:function(r,s){for(var l=0;l<s.length;l++)if(r.equals(s[l]))return l;return-1}},{key:"increasingDirection",value:function(r){for(var s=0;s<Math.trunc(r.length/2);s++){var l=r.length-1-s,g=r[s].compareTo(r[l]);if(g!==0)return g}return 1}},{key:"compare",value:function(r,s){for(var l=0;l<r.length&&l<s.length;){var g=r[l].compareTo(s[l]);if(g!==0)return g;l++}return l<s.length?-1:l<r.length?1:0}},{key:"minCoordinate",value:function(r){for(var s=null,l=0;l<r.length;l++)(s===null||s.compareTo(r[l])>0)&&(s=r[l]);return s}},{key:"extract",value:function(r,s,l){s=je.clamp(s,0,r.length);var g=(l=je.clamp(l,-1,r.length))-s+1;l<0&&(g=0),s>=r.length&&(g=0),l<s&&(g=0);var y=new Array(g).fill(null);if(g===0)return y;for(var k=0,D=s;D<=l;D++)y[k++]=r[D];return y}}])})(),qo=(function(){return f((function c(){o(this,c)}),[{key:"compare",value:function(c,r){var s=c,l=r;return Je.compare(s,l)}},{key:"interfaces_",get:function(){return[it]}}])})(),yr=(function(){return f((function c(){o(this,c)}),[{key:"compare",value:function(c,r){var s=c,l=r;if(s.length<l.length)return-1;if(s.length>l.length)return 1;if(s.length===0)return 0;var g=Je.compare(s,l);return Je.isEqualReversed(s,l)?0:g}},{key:"OLDcompare",value:function(c,r){var s=c,l=r;if(s.length<l.length)return-1;if(s.length>l.length)return 1;if(s.length===0)return 0;for(var g=Je.increasingDirection(s),y=Je.increasingDirection(l),k=g>0?0:s.length-1,D=y>0?0:s.length-1,B=0;B<s.length;B++){var J=s[k].compareTo(l[D]);if(J!==0)return J;k+=g,D+=y}return 0}},{key:"interfaces_",get:function(){return[it]}}])})();Je.ForwardComparator=qo,Je.BidirectionalComparator=yr,Je.coordArrayType=new Array(0).fill(null);var yi=(function(){return f((function c(r){o(this,c),this.str=r}),[{key:"append",value:function(c){this.str+=c}},{key:"setCharAt",value:function(c,r){this.str=this.str.substr(0,c)+r+this.str.substr(c+1)}},{key:"toString",value:function(){return this.str}}])})(),Xi=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getM",value:function(r){return this.hasM()?this._coordinates[r].getM():K.NaN}},{key:"setOrdinate",value:function(r,s,l){switch(s){case ie.X:this._coordinates[r].x=l;break;case ie.Y:this._coordinates[r].y=l;break;default:this._coordinates[r].setOrdinate(s,l)}}},{key:"getZ",value:function(r){return this.hasZ()?this._coordinates[r].getZ():K.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(r,s){switch(s){case ie.X:return this._coordinates[r].x;case ie.Y:return this._coordinates[r].y;default:return this._coordinates[r].getOrdinate(s)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var r=arguments[0];return this._coordinates[r]}if(arguments.length===2){var s=arguments[0];arguments[1].setCoordinate(this._coordinates[s])}}},{key:"getCoordinateCopy",value:function(r){var s=this.createCoordinate();return s.setCoordinate(this._coordinates[r]),s}},{key:"createCoordinate",value:function(){return Wr.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(r){return this._coordinates[r].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(r){for(var s=0;s<this._coordinates.length;s++)r.expandToInclude(this._coordinates[s]);return r}},{key:"copy",value:function(){for(var r=new Array(this.size()).fill(null),s=0;s<this._coordinates.length;s++){var l=this.createCoordinate();l.setCoordinate(this._coordinates[s]),r[s]=l}return new c(r,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var r=new yi(17*this._coordinates.length);r.append("("),r.append(this._coordinates[0]);for(var s=1;s<this._coordinates.length;s++)r.append(", "),r.append(this._coordinates[s]);return r.append(")"),r.toString()}return"()"}},{key:"getY",value:function(r){return this._coordinates[r].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ie,b]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];c.constructor_.call(this,r,Je.dimension(r),Je.measures(r))}else if(Number.isInteger(arguments[0])){var s=arguments[0];this._coordinates=new Array(s).fill(null);for(var l=0;l<s;l++)this._coordinates[l]=new et}else if(Mt(arguments[0],ie)){var g=arguments[0];if(g===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=g.getDimension(),this._measures=g.getMeasures(),this._coordinates=new Array(g.size()).fill(null);for(var y=0;y<this._coordinates.length;y++)this._coordinates[y]=g.getCoordinateCopy(y)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var k=arguments[0],D=arguments[1];c.constructor_.call(this,k,D,Je.measures(k))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var B=arguments[0],J=arguments[1];this._coordinates=new Array(B).fill(null),this._dimension=J;for(var mt=0;mt<B;mt++)this._coordinates[mt]=Wr.create(J)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var kt=arguments[0],zt=arguments[1],jt=arguments[2];this._dimension=zt,this._measures=jt,this._coordinates=kt===null?new Array(0).fill(null):kt}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var re=arguments[0],oe=arguments[1],Ie=arguments[2];this._coordinates=new Array(re).fill(null),this._dimension=oe,this._measures=Ie;for(var xe=0;xe<re;xe++)this._coordinates[xe]=this.createCoordinate()}}}}])})(),xi=(function(){function c(){o(this,c)}return f(c,[{key:"readResolve",value:function(){return c.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Xi(arguments[0]);if(Mt(arguments[0],ie))return new Xi(arguments[0])}else{if(arguments.length===2){var r=arguments[1];return r>3&&(r=3),r<2&&(r=2),new Xi(arguments[0],r)}if(arguments.length===3){var s=arguments[2],l=arguments[1]-s;return s>1&&(s=1),l>3&&(l=3),l<2&&(l=2),new Xi(arguments[0],l+s,s)}}}},{key:"interfaces_",get:function(){return[Zr,b]}}],[{key:"instance",value:function(){return c.instanceObject}}])})();xi.instanceObject=new xi;var xs=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"copyInternal",value:function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new r(s,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&P(r,"equalsExact",this,1).call(this,s,l)}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var s=new Kt,l=0;l<this._geometries.length;l++)for(var g=this._geometries[l].getBoundary(),y=0;y<g.getNumGeometries();y++)s.add(g.getGeometryN(y));var k=new Array(s.size()).fill(null);return this.getFactory().createMultiLineString(s.toArray(k))}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[ee]}}],[{key:"constructor_",value:function(){var s=arguments[0],l=arguments[1];Te.constructor_.call(this,s,l)}}])})(Te),xr=(function(){return f((function c(){o(this,c)}),[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),br=(function(c){function r(){var s;return o(this,r),(s=i(this,r)).map=new Map,s}return x(r,c),f(r,[{key:"get",value:function(s){return this.map.get(s)||null}},{key:"put",value:function(s,l){return this.map.set(s,l),l}},{key:"values",value:function(){for(var s=new Kt,l=this.map.values(),g=l.next();!g.done;)s.add(g.value),g=l.next();return s}},{key:"entrySet",value:function(){var s=new Nt;return this.map.entries().forEach((function(l){return s.add(l)})),s}},{key:"size",value:function(){return this.map.size()}}])})(xr),bn=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"equals",value:function(r){if(!(r instanceof c))return!1;var s=r;return this._modelType===s._modelType&&this._scale===s._scale}},{key:"compareTo",value:function(r){var s=r,l=this.getMaximumSignificantDigits(),g=s.getMaximumSignificantDigits();return Jt.compare(l,g)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===c.FLOATING||this._modelType===c.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var r="UNKNOWN";return this._modelType===c.FLOATING?r="Floating":this._modelType===c.FLOATING_SINGLE?r="Floating-Single":this._modelType===c.FIXED&&(r="Fixed (Scale="+this.getScale()+")"),r}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var r=arguments[0];return K.isNaN(r)||this._modelType===c.FLOATING_SINGLE?r:this._modelType===c.FIXED?Math.round(r*this._scale)/this._scale:r}if(arguments[0]instanceof et){var s=arguments[0];if(this._modelType===c.FLOATING)return null;s.x=this.makePrecise(s.x),s.y=this.makePrecise(s.y)}}},{key:"getMaximumSignificantDigits",value:function(){var r=16;return this._modelType===c.FLOATING?r=16:this._modelType===c.FLOATING_SINGLE?r=6:this._modelType===c.FIXED&&(r=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),r}},{key:"setScale",value:function(r){this._scale=Math.abs(r)}},{key:"interfaces_",get:function(){return[b,st]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=c.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof qi){var r=arguments[0];this._modelType=r,r===c.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var s=arguments[0];this._modelType=c.FIXED,this.setScale(s)}else if(arguments[0]instanceof c){var l=arguments[0];this._modelType=l._modelType,this._scale=l._scale}}}},{key:"mostPrecise",value:function(r,s){return r.compareTo(s)>=0?r:s}}])})(),qi=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"readResolve",value:function(){return c.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._name=null;var r=arguments[0];this._name=r,c.nameToTypeMap.put(r,this)}}])})();qi.nameToTypeMap=new br,bn.Type=qi,bn.FIXED=new qi("FIXED"),bn.FLOATING=new qi("FLOATING"),bn.FLOATING_SINGLE=new qi("FLOATING SINGLE"),bn.maximumPreciseValue=9007199254740992;var Ki=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"copyInternal",value:function(){for(var s=new Array(this._geometries.length).fill(null),l=0;l<s.length;l++)s[l]=this._geometries[l].copy();return new r(s,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof Ct){var s=arguments[0],l=arguments[1];return!!this.isEquivalentClass(s)&&P(r,"equalsExact",this,1).call(this,s,l)}return P(r,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?xt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Ct.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new gt}},{key:"getGeometryType",value:function(){return Ct.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[at]}}],[{key:"constructor_",value:function(){var s=arguments[0],l=arguments[1];Te.constructor_.call(this,s,l)}}])})(Te),si=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"createEmpty",value:function(r){switch(r){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new tt("Invalid dimension: "+r)}}},{key:"toGeometry",value:function(r){return r.isNull()?this.createPoint():r.getMinX()===r.getMaxX()&&r.getMinY()===r.getMaxY()?this.createPoint(new et(r.getMinX(),r.getMinY())):r.getMinX()===r.getMaxX()||r.getMinY()===r.getMaxY()?this.createLineString([new et(r.getMinX(),r.getMinY()),new et(r.getMaxX(),r.getMaxY())]):this.createPolygon(this.createLinearRing([new et(r.getMinX(),r.getMinY()),new et(r.getMinX(),r.getMaxY()),new et(r.getMaxX(),r.getMaxY()),new et(r.getMaxX(),r.getMinY()),new et(r.getMinX(),r.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];return this.createLineString(r!==null?this.getCoordinateSequenceFactory().create(r):null)}if(Mt(arguments[0],ie))return new Ke(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new Ki(null,this):arguments.length===1?new Ki(arguments[0],this):void 0}},{key:"buildGeometry",value:function(r){for(var s=null,l=!1,g=!1,y=r.iterator();y.hasNext();){var k=y.next(),D=k.getTypeCode();s===null&&(s=D),D!==s&&(l=!0),k instanceof Te&&(g=!0)}if(s===null)return this.createGeometryCollection();if(l||g)return this.createGeometryCollection(c.toGeometryArray(r));var B=r.iterator().next();if(r.size()>1){if(B instanceof On)return this.createMultiPolygon(c.toPolygonArray(r));if(B instanceof Ke)return this.createMultiLineString(c.toLineStringArray(r));if(B instanceof xn)return this.createMultiPoint(c.toPointArray(r));Et.shouldNeverReachHere("Unhandled geometry type: "+B.getGeometryType())}return B}},{key:"createMultiPointFromCoords",value:function(r){return this.createMultiPoint(r!==null?this.getCoordinateSequenceFactory().create(r):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof et){var r=arguments[0];return this.createPoint(r!==null?this.getCoordinateSequenceFactory().create([r]):null)}if(Mt(arguments[0],ie))return new xn(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Mt(arguments[0],ie)){var r=arguments[0];return this.createPolygon(this.createLinearRing(r))}if(arguments[0]instanceof Array){var s=arguments[0];return this.createPolygon(this.createLinearRing(s))}if(arguments[0]instanceof dn){var l=arguments[0];return this.createPolygon(l,null)}}else if(arguments.length===2)return new On(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Te(null,this):arguments.length===1?new Te(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];return this.createLinearRing(r!==null?this.getCoordinateSequenceFactory().create(r):null)}if(Mt(arguments[0],ie))return new dn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new xs(null,this):arguments.length===1?new xs(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Bi(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Bi(arguments[0],this);if(Mt(arguments[0],ie)){var r=arguments[0];if(r===null)return this.createMultiPoint(new Array(0).fill(null));for(var s=new Array(r.size()).fill(null),l=0;l<r.size();l++){var g=this.getCoordinateSequenceFactory().create(1,r.getDimension(),r.getMeasures());It.copy(r,l,g,0,1),s[l]=this.createPoint(g)}return this.createMultiPoint(s)}}}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)c.constructor_.call(this,new bn,0);else if(arguments.length===1){if(Mt(arguments[0],Zr)){var r=arguments[0];c.constructor_.call(this,new bn,0,r)}else if(arguments[0]instanceof bn){var s=arguments[0];c.constructor_.call(this,s,0,c.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];c.constructor_.call(this,l,g,c.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var y=arguments[0],k=arguments[1],D=arguments[2];this._precisionModel=y,this._coordinateSequenceFactory=D,this._SRID=k}}},{key:"toMultiPolygonArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"toGeometryArray",value:function(r){if(r===null)return null;var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return xi.instance()}},{key:"toMultiLineStringArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"toLineStringArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"toMultiPointArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"toLinearRingArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"toPointArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"toPolygonArray",value:function(r){var s=new Array(r.size()).fill(null);return r.toArray(s)}},{key:"createPointFromInternalCoord",value:function(r,s){return s.getPrecisionModel().makePrecise(r),s.getFactory().createPoint(r)}}])})(),we="XY",q="XYZ",ht="XYM",X="XYZM",_t={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},yt="EMPTY",ot=1,At=2,Bt=3,Vt=4,qt=5,Wt=6;for(var ne in _t)_t[ne].toUpperCase();var de=(function(){return f((function c(r){o(this,c),this.wkt=r,this.index_=-1}),[{key:"isAlpha_",value:function(c){return c>="a"&&c<="z"||c>="A"&&c<="Z"}},{key:"isNumeric_",value:function(c,r){return c>="0"&&c<="9"||c=="."&&!(r!==void 0&&r)}},{key:"isWhiteSpace_",value:function(c){return c==" "||c=="	"||c=="\r"||c==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var c,r=this.nextChar_(),s=this.index_,l=r;if(r=="(")c=At;else if(r==",")c=qt;else if(r==")")c=Bt;else if(this.isNumeric_(r)||r=="-")c=Vt,l=this.readNumber_();else if(this.isAlpha_(r))c=ot,l=this.readText_();else{if(this.isWhiteSpace_(r))return this.nextToken();if(r!=="")throw new Error("Unexpected character: "+r);c=Wt}return{position:s,value:l,type:c}}},{key:"readNumber_",value:function(){var c,r=this.index_,s=!1,l=!1;do c=="."?s=!0:c!="e"&&c!="E"||(l=!0),c=this.nextChar_();while(this.isNumeric_(c,s)||!l&&(c=="e"||c=="E")||l&&(c=="-"||c=="+"));return parseFloat(this.wkt.substring(r,this.index_--))}},{key:"readText_",value:function(){var c,r=this.index_;do c=this.nextChar_();while(this.isAlpha_(c));return this.wkt.substring(r,this.index_--).toUpperCase()}}])})(),ce=(function(){return f((function c(r,s){o(this,c),this.lexer_=r,this.token_,this.layout_=we,this.factory=s}),[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(c){return this.token_.type==c}},{key:"match",value:function(c){var r=this.isTokenType(c);return r&&this.consume_(),r}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var c=we,r=this.token_;if(this.isTokenType(ot)){var s=r.value;s==="Z"?c=q:s==="M"?c=ht:s==="ZM"&&(c=X),c!==we&&this.consume_()}return c}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(At)){var c=[];do c.push(this.parseGeometry_());while(this.match(qt));if(this.match(Bt))return c}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(At)){var c=this.parsePoint_();if(this.match(Bt))return c}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(At)){var c=this.parsePointList_();if(this.match(Bt))return c}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(At)){var c=this.parseLineStringTextList_();if(this.match(Bt))return c}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var c;if(this.match(At)){if(c=this.token_.type==At?this.parsePointTextList_():this.parsePointList_(),this.match(Bt))return c}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(At)){var c=this.parseLineStringTextList_();if(this.match(Bt))return c}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(At)){var c=this.parsePolygonTextList_();if(this.match(Bt))return c}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var c=[],r=this.layout_.length,s=0;s<r;++s){var l=this.token_;if(!this.match(Vt))break;c.push(l.value)}if(c.length==r)return c;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var c=[this.parsePoint_()];this.match(qt);)c.push(this.parsePoint_());return c}},{key:"parsePointTextList_",value:function(){for(var c=[this.parsePointText_()];this.match(qt);)c.push(this.parsePointText_());return c}},{key:"parseLineStringTextList_",value:function(){for(var c=[this.parseLineStringText_()];this.match(qt);)c.push(this.parseLineStringText_());return c}},{key:"parsePolygonTextList_",value:function(){for(var c=[this.parsePolygonText_()];this.match(qt);)c.push(this.parsePolygonText_());return c}},{key:"isEmptyGeometry_",value:function(){var c=this.isTokenType(ot)&&this.token_.value==yt;return c&&this.consume_(),c}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var c=this.factory,r=function(oe){return u(et,N(oe))},s=function(oe){var Ie=oe.map((function(xe){return c.createLinearRing(xe.map(r))}));return Ie.length>1?c.createPolygon(Ie[0],Ie.slice(1)):c.createPolygon(Ie[0])},l=this.token_;if(this.match(ot)){var g=l.value;if(this.layout_=this.parseGeometryLayout_(),g=="GEOMETRYCOLLECTION"){var y=this.parseGeometryCollectionText_();return c.createGeometryCollection(y)}switch(g){case"POINT":var k=this.parsePointText_();return k?c.createPoint(u(et,N(k))):c.createPoint();case"LINESTRING":var D=this.parseLineStringText_().map(r);return c.createLineString(D);case"LINEARRING":var B=this.parseLineStringText_().map(r);return c.createLinearRing(B);case"POLYGON":var J=this.parsePolygonText_();return J&&J.length!==0?s(J):c.createPolygon();case"MULTIPOINT":var mt=this.parseMultiPointText_();if(!mt||mt.length===0)return c.createMultiPoint();var kt=mt.map(r).map((function(oe){return c.createPoint(oe)}));return c.createMultiPoint(kt);case"MULTILINESTRING":var zt=this.parseMultiLineStringText_().map((function(oe){return c.createLineString(oe.map(r))}));return c.createMultiLineString(zt);case"MULTIPOLYGON":var jt=this.parseMultiPolygonText_();if(!jt||jt.length===0)return c.createMultiPolygon();var re=jt.map(s);return c.createMultiPolygon(re);default:throw new Error("Invalid geometry type: "+g)}}throw new Error(this.formatErrorMessage_())}}])})();function be(c){if(c.isEmpty())return"";var r=c.getCoordinate(),s=[r.x,r.y];return r.z===void 0||Number.isNaN(r.z)||s.push(r.z),r.m===void 0||Number.isNaN(r.m)||s.push(r.m),s.join(" ")}function Pe(c){for(var r=c.getCoordinates().map((function(y){var k=[y.x,y.y];return y.z===void 0||Number.isNaN(y.z)||k.push(y.z),y.m===void 0||Number.isNaN(y.m)||k.push(y.m),k})),s=[],l=0,g=r.length;l<g;++l)s.push(r[l].join(" "));return s.join(", ")}function Fe(c){var r=[];r.push("("+Pe(c.getExteriorRing())+")");for(var s=0,l=c.getNumInteriorRing();s<l;++s)r.push("("+Pe(c.getInteriorRingN(s))+")");return r.join(", ")}var Sn={Point:be,LineString:Pe,LinearRing:Pe,Polygon:Fe,MultiPoint:function(c){for(var r=[],s=0,l=c.getNumGeometries();s<l;++s)r.push("("+be(c.getGeometryN(s))+")");return r.join(", ")},MultiLineString:function(c){for(var r=[],s=0,l=c.getNumGeometries();s<l;++s)r.push("("+Pe(c.getGeometryN(s))+")");return r.join(", ")},MultiPolygon:function(c){for(var r=[],s=0,l=c.getNumGeometries();s<l;++s)r.push("("+Fe(c.getGeometryN(s))+")");return r.join(", ")},GeometryCollection:function(c){for(var r=[],s=0,l=c.getNumGeometries();s<l;++s)r.push(oi(c.getGeometryN(s)));return r.join(", ")}};function oi(c){var r=c.getGeometryType(),s=Sn[r];r=r.toUpperCase();var l=(function(g){var y="";if(g.isEmpty())return y;var k=g.getCoordinate();return k.z===void 0||Number.isNaN(k.z)||(y+="Z"),k.m===void 0||Number.isNaN(k.m)||(y+="M"),y})(c);return l.length>0&&(r+=" "+l),c.isEmpty()?r+" "+yt:r+" ("+s(c)+")"}var wr=(function(){return f((function c(r){o(this,c),this.geometryFactory=r||new si,this.precisionModel=this.geometryFactory.getPrecisionModel()}),[{key:"read",value:function(c){var r=new de(c);return new ce(r,this.geometryFactory).parse()}},{key:"write",value:function(c){return oi(c)}}])})(),Er=(function(){return f((function c(r){o(this,c),this.parser=new wr(r)}),[{key:"write",value:function(c){return this.parser.write(c)}}],[{key:"toLineString",value:function(c,r){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+c.x+" "+c.y+", "+r.x+" "+r.y+" )"}}])})(),De=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getIndexAlongSegment",value:function(r,s){return this.computeIntLineIndex(),this._intLineIndex[r][s]}},{key:"getTopologySummary",value:function(){var r=new yi;return this.isEndPoint()&&r.append(" endpoint"),this._isProper&&r.append(" proper"),this.isCollinear()&&r.append(" collinear"),r.toString()}},{key:"computeIntersection",value:function(r,s,l,g){this._inputLines[0][0]=r,this._inputLines[0][1]=s,this._inputLines[1][0]=l,this._inputLines[1][1]=g,this._result=this.computeIntersect(r,s,l,g)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var r=arguments[0];this.getEdgeDistance(r,0)>this.getEdgeDistance(r,1)?(this._intLineIndex[r][0]=0,this._intLineIndex[r][1]=1):(this._intLineIndex[r][0]=1,this._intLineIndex[r][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(r){this._precisionModel=r}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var r=arguments[0],s=0;s<this._result;s++)if(!this._intPt[s].equals2D(this._inputLines[r][0])&&!this._intPt[s].equals2D(this._inputLines[r][1]))return!0;return!1}}},{key:"getIntersection",value:function(r){return this._intPt[r]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==c.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(r,s){return c.computeEdgeDistance(this._intPt[s],this._inputLines[r][0],this._inputLines[r][1])}},{key:"isCollinear",value:function(){return this._result===c.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Er.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Er.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(r,s){return this._inputLines[r][s]}},{key:"isIntersection",value:function(r){for(var s=0;s<this._result;s++)if(this._intPt[s].equals2D(r))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(r,s){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[r][s]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new et,this._intPt[1]=new et,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(r,s,l){var g=Math.abs(l.x-s.x),y=Math.abs(l.y-s.y),k=-1;if(r.equals(s))k=0;else if(r.equals(l))k=g>y?g:y;else{var D=Math.abs(r.x-s.x),B=Math.abs(r.y-s.y);(k=g>y?D:B)!==0||r.equals(s)||(k=Math.max(D,B))}return Et.isTrue(!(k===0&&!r.equals(s)),"Bad distance calculation"),k}},{key:"nonRobustComputeEdgeDistance",value:function(r,s,l){var g=r.x-s.x,y=r.y-s.y,k=Math.sqrt(g*g+y*y);return Et.isTrue(!(k===0&&!r.equals(s)),"Invalid distance calculation"),k}}])})();De.DONT_INTERSECT=0,De.DO_INTERSECT=1,De.COLLINEAR=2,De.NO_INTERSECTION=0,De.POINT_INTERSECTION=1,De.COLLINEAR_INTERSECTION=2;var bi=(function(c){function r(){return o(this,r),i(this,r)}return x(r,c),f(r,[{key:"isInSegmentEnvelopes",value:function(s){var l=new Ft(this._inputLines[0][0],this._inputLines[0][1]),g=new Ft(this._inputLines[1][0],this._inputLines[1][1]);return l.contains(s)&&g.contains(s)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return P(r,"computeIntersection",this,1).apply(this,arguments);var s=arguments[0],l=arguments[1],g=arguments[2];if(this._isProper=!1,Ft.intersects(l,g,s)&&$t.index(l,g,s)===0&&$t.index(g,l,s)===0)return this._isProper=!0,(s.equals(l)||s.equals(g))&&(this._isProper=!1),this._result=De.POINT_INTERSECTION,null;this._result=De.NO_INTERSECTION}},{key:"intersection",value:function(s,l,g,y){var k=this.intersectionSafe(s,l,g,y);return this.isInSegmentEnvelopes(k)||(k=new et(r.nearestEndpoint(s,l,g,y))),this._precisionModel!==null&&this._precisionModel.makePrecise(k),k}},{key:"checkDD",value:function(s,l,g,y,k){var D=Ne.intersection(s,l,g,y),B=this.isInSegmentEnvelopes(D);tn.out.println("DD in env = "+B+"  --------------------- "+D),k.distance(D)>1e-4&&tn.out.println("Distance = "+k.distance(D))}},{key:"intersectionSafe",value:function(s,l,g,y){var k=hn.intersection(s,l,g,y);return k===null&&(k=r.nearestEndpoint(s,l,g,y)),k}},{key:"computeCollinearIntersection",value:function(s,l,g,y){var k=Ft.intersects(s,l,g),D=Ft.intersects(s,l,y),B=Ft.intersects(g,y,s),J=Ft.intersects(g,y,l);return k&&D?(this._intPt[0]=g,this._intPt[1]=y,De.COLLINEAR_INTERSECTION):B&&J?(this._intPt[0]=s,this._intPt[1]=l,De.COLLINEAR_INTERSECTION):k&&B?(this._intPt[0]=g,this._intPt[1]=s,!g.equals(s)||D||J?De.COLLINEAR_INTERSECTION:De.POINT_INTERSECTION):k&&J?(this._intPt[0]=g,this._intPt[1]=l,!g.equals(l)||D||B?De.COLLINEAR_INTERSECTION:De.POINT_INTERSECTION):D&&B?(this._intPt[0]=y,this._intPt[1]=s,!y.equals(s)||k||J?De.COLLINEAR_INTERSECTION:De.POINT_INTERSECTION):D&&J?(this._intPt[0]=y,this._intPt[1]=l,!y.equals(l)||k||B?De.COLLINEAR_INTERSECTION:De.POINT_INTERSECTION):De.NO_INTERSECTION}},{key:"computeIntersect",value:function(s,l,g,y){if(this._isProper=!1,!Ft.intersects(s,l,g,y))return De.NO_INTERSECTION;var k=$t.index(s,l,g),D=$t.index(s,l,y);if(k>0&&D>0||k<0&&D<0)return De.NO_INTERSECTION;var B=$t.index(g,y,s),J=$t.index(g,y,l);return B>0&&J>0||B<0&&J<0?De.NO_INTERSECTION:k===0&&D===0&&B===0&&J===0?this.computeCollinearIntersection(s,l,g,y):(k===0||D===0||B===0||J===0?(this._isProper=!1,s.equals2D(g)||s.equals2D(y)?this._intPt[0]=s:l.equals2D(g)||l.equals2D(y)?this._intPt[0]=l:k===0?this._intPt[0]=new et(g):D===0?this._intPt[0]=new et(y):B===0?this._intPt[0]=new et(s):J===0&&(this._intPt[0]=new et(l))):(this._isProper=!0,this._intPt[0]=this.intersection(s,l,g,y)),De.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(s,l,g,y){var k=s,D=fn.pointToSegment(s,g,y),B=fn.pointToSegment(l,g,y);return B<D&&(D=B,k=l),(B=fn.pointToSegment(g,s,l))<D&&(D=B,k=g),(B=fn.pointToSegment(y,s,l))<D&&(D=B,k=y),k}}])})(De),bs=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"countSegment",value:function(r,s){if(r.x<this._p.x&&s.x<this._p.x)return null;if(this._p.x===s.x&&this._p.y===s.y)return this._isPointOnSegment=!0,null;if(r.y===this._p.y&&s.y===this._p.y){var l=r.x,g=s.x;return l>g&&(l=s.x,g=r.x),this._p.x>=l&&this._p.x<=g&&(this._isPointOnSegment=!0),null}if(r.y>this._p.y&&s.y<=this._p.y||s.y>this._p.y&&r.y<=this._p.y){var y=$t.index(r,s,this._p);if(y===$t.COLLINEAR)return this._isPointOnSegment=!0,null;s.y<r.y&&(y=-y),y===$t.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==T.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?T.BOUNDARY:this._crossingCount%2==1?T.INTERIOR:T.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var r=arguments[0];this._p=r}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof et&&Mt(arguments[1],ie)){for(var r=arguments[1],s=new c(arguments[0]),l=new et,g=new et,y=1;y<r.size();y++)if(r.getCoordinate(y,l),r.getCoordinate(y-1,g),s.countSegment(l,g),s.isOnSegment())return s.getLocation();return s.getLocation()}if(arguments[0]instanceof et&&arguments[1]instanceof Array){for(var k=arguments[1],D=new c(arguments[0]),B=1;B<k.length;B++){var J=k[B],mt=k[B-1];if(D.countSegment(J,mt),D.isOnSegment())return D.getLocation()}return D.getLocation()}}}])})(),Ji=(function(){function c(){o(this,c)}return f(c,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof et&&Mt(arguments[1],ie)){for(var r=arguments[0],s=arguments[1],l=new bi,g=new et,y=new et,k=s.size(),D=1;D<k;D++)if(s.getCoordinate(D-1,g),s.getCoordinate(D,y),l.computeIntersection(r,g,y),l.hasIntersection())return!0;return!1}if(arguments[0]instanceof et&&arguments[1]instanceof Array){for(var B=arguments[0],J=arguments[1],mt=new bi,kt=1;kt<J.length;kt++){var zt=J[kt-1],jt=J[kt];if(mt.computeIntersection(B,zt,jt),mt.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(r,s){return bs.locatePointInRing(r,s)}},{key:"isInRing",value:function(r,s){return c.locateInRing(r,s)!==T.EXTERIOR}}])})(),Cn=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"setAllLocations",value:function(r){for(var s=0;s<this.location.length;s++)this.location[s]=r}},{key:"isNull",value:function(){for(var r=0;r<this.location.length;r++)if(this.location[r]!==T.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(r){for(var s=0;s<this.location.length;s++)this.location[s]===T.NONE&&(this.location[s]=r)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(r){if(r.location.length>this.location.length){var s=new Array(3).fill(null);s[ft.ON]=this.location[ft.ON],s[ft.LEFT]=T.NONE,s[ft.RIGHT]=T.NONE,this.location=s}for(var l=0;l<this.location.length;l++)this.location[l]===T.NONE&&l<r.location.length&&(this.location[l]=r.location[l])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var r=this.location[ft.LEFT];this.location[ft.LEFT]=this.location[ft.RIGHT],this.location[ft.RIGHT]=r}},{key:"toString",value:function(){var r=new Xt;return this.location.length>1&&r.append(T.toLocationSymbol(this.location[ft.LEFT])),r.append(T.toLocationSymbol(this.location[ft.ON])),this.location.length>1&&r.append(T.toLocationSymbol(this.location[ft.RIGHT])),r.toString()}},{key:"setLocations",value:function(r,s,l){this.location[ft.ON]=r,this.location[ft.LEFT]=s,this.location[ft.RIGHT]=l}},{key:"get",value:function(r){return r<this.location.length?this.location[r]:T.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var r=0;r<this.location.length;r++)if(this.location[r]===T.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var r=arguments[0];this.setLocation(ft.ON,r)}else if(arguments.length===2){var s=arguments[0],l=arguments[1];this.location[s]=l}}},{key:"init",value:function(r){this.location=new Array(r).fill(null),this.setAllLocations(T.NONE)}},{key:"isEqualOnSide",value:function(r,s){return this.location[s]===r.location[s]}},{key:"allPositionsEqual",value:function(r){for(var s=0;s<this.location.length;s++)if(this.location[s]!==r)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var s=arguments[0];this.init(1),this.location[ft.ON]=s}else if(arguments[0]instanceof c){var l=arguments[0];if(this.init(l.location.length),l!==null)for(var g=0;g<this.location.length;g++)this.location[g]=l.location[g]}}else if(arguments.length===3){var y=arguments[0],k=arguments[1],D=arguments[2];this.init(3),this.location[ft.ON]=y,this.location[ft.LEFT]=k,this.location[ft.RIGHT]=D}}}])})(),Un=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getGeometryCount",value:function(){var r=0;return this.elt[0].isNull()||r++,this.elt[1].isNull()||r++,r}},{key:"setAllLocations",value:function(r,s){this.elt[r].setAllLocations(s)}},{key:"isNull",value:function(r){return this.elt[r].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var r=arguments[0];this.setAllLocationsIfNull(0,r),this.setAllLocationsIfNull(1,r)}else if(arguments.length===2){var s=arguments[0],l=arguments[1];this.elt[s].setAllLocationsIfNull(l)}}},{key:"isLine",value:function(r){return this.elt[r].isLine()}},{key:"merge",value:function(r){for(var s=0;s<2;s++)this.elt[s]===null&&r.elt[s]!==null?this.elt[s]=new Cn(r.elt[s]):this.elt[s].merge(r.elt[s])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var r=arguments[0];return this.elt[r].get(ft.ON)}if(arguments.length===2){var s=arguments[0],l=arguments[1];return this.elt[s].get(l)}}},{key:"toString",value:function(){var r=new Xt;return this.elt[0]!==null&&(r.append("A:"),r.append(this.elt[0].toString())),this.elt[1]!==null&&(r.append(" B:"),r.append(this.elt[1].toString())),r.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var r=arguments[0];return this.elt[r].isArea()}}},{key:"isAnyNull",value:function(r){return this.elt[r].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var r=arguments[0],s=arguments[1];this.elt[r].setLocation(ft.ON,s)}else if(arguments.length===3){var l=arguments[0],g=arguments[1],y=arguments[2];this.elt[l].setLocation(g,y)}}},{key:"isEqualOnSide",value:function(r,s){return this.elt[0].isEqualOnSide(r.elt[0],s)&&this.elt[1].isEqualOnSide(r.elt[1],s)}},{key:"allPositionsEqual",value:function(r,s){return this.elt[r].allPositionsEqual(s)}},{key:"toLine",value:function(r){this.elt[r].isArea()&&(this.elt[r]=new Cn(this.elt[r].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var r=arguments[0];this.elt[0]=new Cn(r),this.elt[1]=new Cn(r)}else if(arguments[0]instanceof c){var s=arguments[0];this.elt[0]=new Cn(s.elt[0]),this.elt[1]=new Cn(s.elt[1])}}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.elt[0]=new Cn(T.NONE),this.elt[1]=new Cn(T.NONE),this.elt[l].setLocation(g)}else if(arguments.length===3){var y=arguments[0],k=arguments[1],D=arguments[2];this.elt[0]=new Cn(y,k,D),this.elt[1]=new Cn(y,k,D)}else if(arguments.length===4){var B=arguments[0],J=arguments[1],mt=arguments[2],kt=arguments[3];this.elt[0]=new Cn(T.NONE,T.NONE,T.NONE),this.elt[1]=new Cn(T.NONE,T.NONE,T.NONE),this.elt[B].setLocations(J,mt,kt)}}},{key:"toLineLabel",value:function(r){for(var s=new c(T.NONE),l=0;l<2;l++)s.setLocation(l,r.getLocation(l));return s}}])})(),$s=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var c=new Array(this._pts.size()).fill(null),r=0;r<this._pts.size();r++)c[r]=this._pts.get(r);this._ring=this._geometryFactory.createLinearRing(c),this._isHole=$t.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(c){this._startDe=c;var r=c,s=!0;do{if(r===null)throw new Le("Found null DirectedEdge");if(r.getEdgeRing()===this)throw new Le("Directed Edge visited twice during ring-building at "+r.getCoordinate());this._edges.add(r);var l=r.getLabel();Et.isTrue(l.isArea()),this.mergeLabel(l),this.addPoints(r.getEdge(),r.isForward(),s),s=!1,this.setEdgeRing(r,this),r=this.getNext(r)}while(r!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(c){return this._pts.get(c)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var c=this._startDe;do{var r=c.getNode().getEdges().getOutgoingDegree(this);r>this._maxNodeDegree&&(this._maxNodeDegree=r),c=this.getNext(c)}while(c!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(c,r,s){var l=c.getCoordinates();if(r){var g=1;s&&(g=0);for(var y=g;y<l.length;y++)this._pts.add(l[y])}else{var k=l.length-2;s&&(k=l.length-1);for(var D=k;D>=0;D--)this._pts.add(l[D])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var c=this._startDe;do c.getEdge().setInResult(!0),c=c.getNext();while(c!==this._startDe)}},{key:"containsPoint",value:function(c){var r=this.getLinearRing();if(!r.getEnvelopeInternal().contains(c)||!Ji.isInRing(c,r.getCoordinates()))return!1;for(var s=this._holes.iterator();s.hasNext();)if(s.next().containsPoint(c))return!1;return!0}},{key:"addHole",value:function(c){this._holes.add(c)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var c=arguments[0];this.mergeLabel(c,0),this.mergeLabel(c,1)}else if(arguments.length===2){var r=arguments[1],s=arguments[0].getLocation(r,ft.RIGHT);if(s===T.NONE)return null;if(this._label.getLocation(r)===T.NONE)return this._label.setLocation(r,s),null}}},{key:"setShell",value:function(c){this._shell=c,c!==null&&c.addHole(this)}},{key:"toPolygon",value:function(c){for(var r=new Array(this._holes.size()).fill(null),s=0;s<this._holes.size();s++)r[s]=this._holes.get(s).getLinearRing();return c.createPolygon(this.getLinearRing(),r)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new Kt,this._pts=new Kt,this._label=new Un(T.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Kt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var c=arguments[0],r=arguments[1];this._geometryFactory=r,this.computePoints(c),this.computeRing()}}}}])})(),me=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"setEdgeRing",value:function(s,l){s.setMinEdgeRing(l)}},{key:"getNext",value:function(s){return s.getNextMin()}}],[{key:"constructor_",value:function(){var s=arguments[0],l=arguments[1];$s.constructor_.call(this,s,l)}}])})($s),wi=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"buildMinimalRings",value:function(){var s=new Kt,l=this._startDe;do{if(l.getMinEdgeRing()===null){var g=new me(l,this._geometryFactory);s.add(g)}l=l.getNext()}while(l!==this._startDe);return s}},{key:"setEdgeRing",value:function(s,l){s.setEdgeRing(l)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var s=this._startDe;do s.getNode().getEdges().linkMinimalDirectedEdges(this),s=s.getNext();while(s!==this._startDe)}},{key:"getNext",value:function(s){return s.getNext()}}],[{key:"constructor_",value:function(){var s=arguments[0],l=arguments[1];$s.constructor_.call(this,s,l)}}])})($s),qe=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"setVisited",value:function(c){this._isVisited=c}},{key:"setInResult",value:function(c){this._isInResult=c}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(c){this._label=c}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(c){this._isCovered=c,this._isCoveredSet=!0}},{key:"updateIM",value:function(c){Et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(c)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var c=arguments[0];this._label=c}}}}])})(),ws=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"isIncidentEdgeInResult",value:function(){for(var s=this.getEdges().getEdges().iterator();s.hasNext();)if(s.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(s){s.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(s){}},{key:"computeMergedLocation",value:function(s,l){var g=T.NONE;if(g=this._label.getLocation(l),!s.isNull(l)){var y=s.getLocation(l);g!==T.BOUNDARY&&(g=y)}return g}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return P(r,"setLabel",this,1).apply(this,arguments);var s=arguments[0],l=arguments[1];this._label===null?this._label=new Un(s,l):this._label.setLocation(s,l)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof r){var s=arguments[0];this.mergeLabel(s._label)}else if(arguments[0]instanceof Un)for(var l=arguments[0],g=0;g<2;g++){var y=this.computeMergedLocation(l,g);this._label.getLocation(g)===T.NONE&&this._label.setLocation(g,y)}}},{key:"add",value:function(s){this._edges.insert(s),s.setNode(this)}},{key:"setLabelBoundary",value:function(s){if(this._label===null)return null;var l=T.NONE;this._label!==null&&(l=this._label.getLocation(s));var g=null;switch(l){case T.BOUNDARY:g=T.INTERIOR;break;case T.INTERIOR:default:g=T.BOUNDARY}this._label.setLocation(s,g)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var s=arguments[0],l=arguments[1];this._coord=s,this._edges=l,this._label=new Un(0,T.NONE)}}])})(qe),Uo=(function(c){function r(){return o(this,r),i(this,r,arguments)}return x(r,c),f(r)})(xr);function Xs(c){return c==null?0:c.color}function Ae(c){return c==null?null:c.parent}function Tn(c,r){c!==null&&(c.color=r)}function Es(c){return c==null?null:c.left}function Yr(c){return c==null?null:c.right}var en=(function(c){function r(){var s;return o(this,r),(s=i(this,r)).root_=null,s.size_=0,s}return x(r,c),f(r,[{key:"get",value:function(s){for(var l=this.root_;l!==null;){var g=s.compareTo(l.key);if(g<0)l=l.left;else{if(!(g>0))return l.value;l=l.right}}return null}},{key:"put",value:function(s,l){if(this.root_===null)return this.root_={key:s,value:l,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var g,y,k=this.root_;do if(g=k,(y=s.compareTo(k.key))<0)k=k.left;else{if(!(y>0)){var D=k.value;return k.value=l,D}k=k.right}while(k!==null);var B={key:s,left:null,right:null,value:l,parent:g,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return y<0?g.left=B:g.right=B,this.fixAfterInsertion(B),this.size_++,null}},{key:"fixAfterInsertion",value:function(s){var l;for(s.color=1;s!=null&&s!==this.root_&&s.parent.color===1;)Ae(s)===Es(Ae(Ae(s)))?Xs(l=Yr(Ae(Ae(s))))===1?(Tn(Ae(s),0),Tn(l,0),Tn(Ae(Ae(s)),1),s=Ae(Ae(s))):(s===Yr(Ae(s))&&(s=Ae(s),this.rotateLeft(s)),Tn(Ae(s),0),Tn(Ae(Ae(s)),1),this.rotateRight(Ae(Ae(s)))):Xs(l=Es(Ae(Ae(s))))===1?(Tn(Ae(s),0),Tn(l,0),Tn(Ae(Ae(s)),1),s=Ae(Ae(s))):(s===Es(Ae(s))&&(s=Ae(s),this.rotateRight(s)),Tn(Ae(s),0),Tn(Ae(Ae(s)),1),this.rotateLeft(Ae(Ae(s))));this.root_.color=0}},{key:"values",value:function(){var s=new Kt,l=this.getFirstEntry();if(l!==null)for(s.add(l.value);(l=r.successor(l))!==null;)s.add(l.value);return s}},{key:"entrySet",value:function(){var s=new Nt,l=this.getFirstEntry();if(l!==null)for(s.add(l);(l=r.successor(l))!==null;)s.add(l);return s}},{key:"rotateLeft",value:function(s){if(s!=null){var l=s.right;s.right=l.left,l.left!=null&&(l.left.parent=s),l.parent=s.parent,s.parent==null?this.root_=l:s.parent.left===s?s.parent.left=l:s.parent.right=l,l.left=s,s.parent=l}}},{key:"rotateRight",value:function(s){if(s!=null){var l=s.left;s.left=l.right,l.right!=null&&(l.right.parent=s),l.parent=s.parent,s.parent==null?this.root_=l:s.parent.right===s?s.parent.right=l:s.parent.left=l,l.right=s,s.parent=l}}},{key:"getFirstEntry",value:function(){var s=this.root_;if(s!=null)for(;s.left!=null;)s=s.left;return s}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(s){for(var l=this.root_;l!==null;){var g=s.compareTo(l.key);if(g<0)l=l.left;else{if(!(g>0))return!0;l=l.right}}return!1}}],[{key:"successor",value:function(s){var l;if(s===null)return null;if(s.right!==null){for(l=s.right;l.left!==null;)l=l.left;return l}l=s.parent;for(var g=s;l!==null&&g===l.right;)g=l,l=l.parent;return l}}])})(Uo),Qi=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"find",value:function(c){return this.nodeMap.get(c)}},{key:"addNode",value:function(){if(arguments[0]instanceof et){var c=arguments[0],r=this.nodeMap.get(c);return r===null&&(r=this.nodeFact.createNode(c),this.nodeMap.put(c,r)),r}if(arguments[0]instanceof ws){var s=arguments[0],l=this.nodeMap.get(s.getCoordinate());return l===null?(this.nodeMap.put(s.getCoordinate(),s),s):(l.mergeLabel(s),l)}}},{key:"print",value:function(c){for(var r=this.iterator();r.hasNext();)r.next().print(c)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(c){for(var r=new Kt,s=this.iterator();s.hasNext();){var l=s.next();l.getLabel().getLocation(c)===T.BOUNDARY&&r.add(l)}return r}},{key:"add",value:function(c){var r=c.getCoordinate();this.addNode(r).add(c)}}],[{key:"constructor_",value:function(){this.nodeMap=new en,this.nodeFact=null;var c=arguments[0];this.nodeFact=c}}])})(),In=(function(){function c(){o(this,c)}return f(c,null,[{key:"isNorthern",value:function(r){return r===c.NE||r===c.NW}},{key:"isOpposite",value:function(r,s){return r!==s&&(r-s+4)%4===2}},{key:"commonHalfPlane",value:function(r,s){if(r===s)return r;if((r-s+4)%4===2)return-1;var l=r<s?r:s;return l===0&&(r>s?r:s)===3?3:l}},{key:"isInHalfPlane",value:function(r,s){return s===c.SE?r===c.SE||r===c.SW:r===s||r===s+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],s=arguments[1];if(r===0&&s===0)throw new tt("Cannot compute the quadrant for point ( "+r+", "+s+" )");return r>=0?s>=0?c.NE:c.SE:s>=0?c.NW:c.SW}if(arguments[0]instanceof et&&arguments[1]instanceof et){var l=arguments[0],g=arguments[1];if(g.x===l.x&&g.y===l.y)throw new tt("Cannot compute the quadrant for two identical points "+l);return g.x>=l.x?g.y>=l.y?c.NE:c.SE:g.y>=l.y?c.NW:c.SW}}}])})();In.NE=0,In.NW=1,In.SW=2,In.SE=3;var Ho=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"compareDirection",value:function(r){return this._dx===r._dx&&this._dy===r._dy?0:this._quadrant>r._quadrant?1:this._quadrant<r._quadrant?-1:$t.index(r._p0,r._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(r){this._node=r}},{key:"print",value:function(r){var s=Math.atan2(this._dy,this._dx),l=this.getClass().getName(),g=l.lastIndexOf("."),y=l.substring(g+1);r.print("  "+y+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+s+"   "+this._label)}},{key:"compareTo",value:function(r){var s=r;return this.compareDirection(s)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var r=Math.atan2(this._dy,this._dx),s=this.getClass().getName(),l=s.lastIndexOf(".");return"  "+s.substring(l+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+r+"   "+this._label}},{key:"computeLabel",value:function(r){}},{key:"init",value:function(r,s){this._p0=r,this._p1=s,this._dx=s.x-r.x,this._dy=s.y-r.y,this._quadrant=In.quadrant(this._dx,this._dy),Et.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var r=arguments[0];this._edge=r}else if(arguments.length===3){var s=arguments[0],l=arguments[1],g=arguments[2];c.constructor_.call(this,s,l,g,null)}else if(arguments.length===4){var y=arguments[0],k=arguments[1],D=arguments[2],B=arguments[3];c.constructor_.call(this,y),this.init(k,D),this._label=B}}}])})(),Go=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(s){return this._depth[s]}},{key:"setVisited",value:function(s){this._isVisited=s}},{key:"computeDirectedLabel",value:function(){this._label=new Un(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(s,l){if(this._depth[s]!==-999&&this._depth[s]!==l)throw new Le("assigned depths do not match",this.getCoordinate());this._depth[s]=l}},{key:"isInteriorAreaEdge",value:function(){for(var s=!0,l=0;l<2;l++)this._label.isArea(l)&&this._label.getLocation(l,ft.LEFT)===T.INTERIOR&&this._label.getLocation(l,ft.RIGHT)===T.INTERIOR||(s=!1);return s}},{key:"setNextMin",value:function(s){this._nextMin=s}},{key:"print",value:function(s){P(r,"print",this,1).call(this,s),s.print(" "+this._depth[ft.LEFT]+"/"+this._depth[ft.RIGHT]),s.print(" ("+this.getDepthDelta()+")"),this._isInResult&&s.print(" inResult")}},{key:"setMinEdgeRing",value:function(s){this._minEdgeRing=s}},{key:"isLineEdge",value:function(){var s=this._label.isLine(0)||this._label.isLine(1),l=!this._label.isArea(0)||this._label.allPositionsEqual(0,T.EXTERIOR),g=!this._label.isArea(1)||this._label.allPositionsEqual(1,T.EXTERIOR);return s&&l&&g}},{key:"setEdgeRing",value:function(s){this._edgeRing=s}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var s=this._edge.getDepthDelta();return this._isForward||(s=-s),s}},{key:"setInResult",value:function(s){this._isInResult=s}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(s){this.print(s),s.print(" "),this._isForward?this._edge.print(s):this._edge.printReverse(s)}},{key:"setSym",value:function(s){this._sym=s}},{key:"setVisitedEdge",value:function(s){this.setVisited(s),this._sym.setVisited(s)}},{key:"setEdgeDepths",value:function(s,l){var g=this.getEdge().getDepthDelta();this._isForward||(g=-g);var y=1;s===ft.LEFT&&(y=-1);var k=ft.opposite(s),D=l+g*y;this.setDepth(s,l),this.setDepth(k,D)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(s){this._next=s}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var s=arguments[0],l=arguments[1];if(Ho.constructor_.call(this,s),this._isForward=l,l)this.init(s.getCoordinate(0),s.getCoordinate(1));else{var g=s.getNumPoints()-1;this.init(s.getCoordinate(g),s.getCoordinate(g-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(s,l){return s===T.EXTERIOR&&l===T.INTERIOR?1:s===T.INTERIOR&&l===T.EXTERIOR?-1:0}}])})(Ho),Vo=(function(){return f((function c(){o(this,c)}),[{key:"createNode",value:function(c){return new ws(c,null)}}])})(),Ks=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"printEdges",value:function(c){c.println("Edges:");for(var r=0;r<this._edges.size();r++){c.println("edge "+r+":");var s=this._edges.get(r);s.print(c),s.eiList.print(c)}}},{key:"find",value:function(c){return this._nodes.find(c)}},{key:"addNode",value:function(){if(arguments[0]instanceof ws){var c=arguments[0];return this._nodes.addNode(c)}if(arguments[0]instanceof et){var r=arguments[0];return this._nodes.addNode(r)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var c=this._nodes.iterator();c.hasNext();)c.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(c){tn.out.println(c)}},{key:"isBoundaryNode",value:function(c,r){var s=this._nodes.find(r);if(s===null)return!1;var l=s.getLabel();return l!==null&&l.getLocation(c)===T.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var c=this._nodes.iterator();c.hasNext();)c.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(c,r,s,l){return!!c.equals(s)&&$t.index(c,r,l)===$t.COLLINEAR&&In.quadrant(c,r)===In.quadrant(s,l)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(c){tn.out.print(c)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(c,r){for(var s=0;s<this._edges.size();s++){var l=this._edges.get(s),g=l.getCoordinates();if(this.matchInSameDirection(c,r,g[0],g[1])||this.matchInSameDirection(c,r,g[g.length-1],g[g.length-2]))return l}return null}},{key:"insertEdge",value:function(c){this._edges.add(c)}},{key:"findEdgeEnd",value:function(c){for(var r=this.getEdgeEnds().iterator();r.hasNext();){var s=r.next();if(s.getEdge()===c)return s}return null}},{key:"addEdges",value:function(c){for(var r=c.iterator();r.hasNext();){var s=r.next();this._edges.add(s);var l=new Go(s,!0),g=new Go(s,!1);l.setSym(g),g.setSym(l),this.add(l),this.add(g)}}},{key:"add",value:function(c){this._nodes.add(c),this._edgeEndList.add(c)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(c,r){for(var s=0;s<this._edges.size();s++){var l=this._edges.get(s),g=l.getCoordinates();if(c.equals(g[0])&&r.equals(g[1]))return l}return null}}],[{key:"constructor_",value:function(){if(this._edges=new Kt,this._nodes=null,this._edgeEndList=new Kt,arguments.length===0)this._nodes=new Qi(new Vo);else if(arguments.length===1){var c=arguments[0];this._nodes=new Qi(c)}}},{key:"linkResultDirectedEdges",value:function(c){for(var r=c.iterator();r.hasNext();)r.next().getEdges().linkResultDirectedEdges()}}])})(),nc=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"sortShellsAndHoles",value:function(r,s,l){for(var g=r.iterator();g.hasNext();){var y=g.next();y.isHole()?l.add(y):s.add(y)}}},{key:"computePolygons",value:function(r){for(var s=new Kt,l=r.iterator();l.hasNext();){var g=l.next().toPolygon(this._geometryFactory);s.add(g)}return s}},{key:"placeFreeHoles",value:function(r,s){for(var l=s.iterator();l.hasNext();){var g=l.next();if(g.getShell()===null){var y=c.findEdgeRingContaining(g,r);if(y===null)throw new Le("unable to assign hole to a shell",g.getCoordinate(0));g.setShell(y)}}}},{key:"buildMinimalEdgeRings",value:function(r,s,l){for(var g=new Kt,y=r.iterator();y.hasNext();){var k=y.next();if(k.getMaxNodeDegree()>2){k.linkDirectedEdgesForMinimalEdgeRings();var D=k.buildMinimalRings(),B=this.findShell(D);B!==null?(this.placePolygonHoles(B,D),s.add(B)):l.addAll(D)}else g.add(k)}return g}},{key:"buildMaximalEdgeRings",value:function(r){for(var s=new Kt,l=r.iterator();l.hasNext();){var g=l.next();if(g.isInResult()&&g.getLabel().isArea()&&g.getEdgeRing()===null){var y=new wi(g,this._geometryFactory);s.add(y),y.setInResult()}}return s}},{key:"placePolygonHoles",value:function(r,s){for(var l=s.iterator();l.hasNext();){var g=l.next();g.isHole()&&g.setShell(r)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(r){for(var s=0,l=null,g=r.iterator();g.hasNext();){var y=g.next();y.isHole()||(l=y,s++)}return Et.isTrue(s<=1,"found two shells in MinimalEdgeRing list"),l}},{key:"add",value:function(){if(arguments.length===1){var r=arguments[0];this.add(r.getEdgeEnds(),r.getNodes())}else if(arguments.length===2){var s=arguments[0],l=arguments[1];Ks.linkResultDirectedEdges(l);var g=this.buildMaximalEdgeRings(s),y=new Kt,k=this.buildMinimalEdgeRings(g,this._shellList,y);this.sortShellsAndHoles(k,this._shellList,y),this.placeFreeHoles(this._shellList,y)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new Kt;var r=arguments[0];this._geometryFactory=r}},{key:"findEdgeRingContaining",value:function(r,s){for(var l=r.getLinearRing(),g=l.getEnvelopeInternal(),y=l.getCoordinateN(0),k=null,D=null,B=s.iterator();B.hasNext();){var J=B.next(),mt=J.getLinearRing(),kt=mt.getEnvelopeInternal();if(!kt.equals(g)&&kt.contains(g)){y=Je.ptNotInList(l.getCoordinates(),mt.getCoordinates());var zt=!1;Ji.isInRing(y,mt.getCoordinates())&&(zt=!0),zt&&(k===null||D.contains(kt))&&(D=(k=J).getLinearRing().getEnvelopeInternal())}}return k}}])})(),Zo=(function(){return f((function c(){o(this,c)}),[{key:"getBounds",value:function(){}}])})(),_e=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Zo,b]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var c=arguments[0],r=arguments[1];this._bounds=c,this._item=r}}])})(),Js=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"poll",value:function(){if(this.isEmpty())return null;var c=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),c}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(c){for(var r=null,s=this._items.get(c);2*c<=this._size&&((r=2*c)!==this._size&&this._items.get(r+1).compareTo(this._items.get(r))<0&&r++,this._items.get(r).compareTo(s)<0);c=r)this._items.set(c,this._items.get(r));this._items.set(c,s)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(c){this._items.add(null),this._size+=1;var r=this._size;for(this._items.set(0,c);c.compareTo(this._items.get(Math.trunc(r/2)))<0;r/=2)this._items.set(r,this._items.get(Math.trunc(r/2)));this._items.set(r,c)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new Kt,this._items.add(null)}}])})(),fi=(function(){return f((function c(){o(this,c)}),[{key:"insert",value:function(c,r){}},{key:"remove",value:function(c,r){}},{key:"query",value:function(){}}])})(),An=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(c){Et.isTrue(this._bounds===null),this._childBoundables.add(c)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Zo,b]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new Kt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var c=arguments[0];this._level=c}}}}])})(),kr={reverseOrder:function(){return{compare:function(c,r){return r.compareTo(c)}}},min:function(c){return kr.sort(c),c.get(0)},sort:function(c,r){var s=c.toArray();r?ze.sort(s,r):ze.sort(s);for(var l=c.iterator(),g=0,y=s.length;g<y;g++)l.next(),l.set(s[g])},singletonList:function(c){var r=new Kt;return r.add(c),r}},ic=(function(){function c(){o(this,c)}return f(c,null,[{key:"maxDistance",value:function(r,s,l,g,y,k,D,B){var J=c.distance(r,s,y,k);return J=Math.max(J,c.distance(r,s,D,B)),J=Math.max(J,c.distance(l,g,y,k)),J=Math.max(J,c.distance(l,g,D,B))}},{key:"distance",value:function(r,s,l,g){var y=l-r,k=g-s;return Math.sqrt(y*y+k*k)}},{key:"maximumDistance",value:function(r,s){var l=Math.min(r.getMinX(),s.getMinX()),g=Math.min(r.getMinY(),s.getMinY()),y=Math.max(r.getMaxX(),s.getMaxX()),k=Math.max(r.getMaxY(),s.getMaxY());return c.distance(l,g,y,k)}},{key:"minMaxDistance",value:function(r,s){var l=r.getMinX(),g=r.getMinY(),y=r.getMaxX(),k=r.getMaxY(),D=s.getMinX(),B=s.getMinY(),J=s.getMaxX(),mt=s.getMaxY(),kt=c.maxDistance(l,g,l,k,D,B,D,mt);return kt=Math.min(kt,c.maxDistance(l,g,l,k,D,B,J,B)),kt=Math.min(kt,c.maxDistance(l,g,l,k,J,mt,D,mt)),kt=Math.min(kt,c.maxDistance(l,g,l,k,J,mt,J,B)),kt=Math.min(kt,c.maxDistance(l,g,y,g,D,B,D,mt)),kt=Math.min(kt,c.maxDistance(l,g,y,g,D,B,J,B)),kt=Math.min(kt,c.maxDistance(l,g,y,g,J,mt,D,mt)),kt=Math.min(kt,c.maxDistance(l,g,y,g,J,mt,J,B)),kt=Math.min(kt,c.maxDistance(y,k,l,k,D,B,D,mt)),kt=Math.min(kt,c.maxDistance(y,k,l,k,D,B,J,B)),kt=Math.min(kt,c.maxDistance(y,k,l,k,J,mt,D,mt)),kt=Math.min(kt,c.maxDistance(y,k,l,k,J,mt,J,B)),kt=Math.min(kt,c.maxDistance(y,k,y,g,D,B,D,mt)),kt=Math.min(kt,c.maxDistance(y,k,y,g,D,B,J,B)),kt=Math.min(kt,c.maxDistance(y,k,y,g,J,mt,D,mt)),kt=Math.min(kt,c.maxDistance(y,k,y,g,J,mt,J,B))}}])})(),tr=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"maximumDistance",value:function(){return ic.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(r,s){var l=c.isComposite(this._boundable1),g=c.isComposite(this._boundable2);if(l&&g)return c.area(this._boundable1)>c.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,r,s),null):(this.expand(this._boundable2,this._boundable1,!0,r,s),null);if(l)return this.expand(this._boundable1,this._boundable2,!1,r,s),null;if(g)return this.expand(this._boundable2,this._boundable1,!0,r,s),null;throw new tt("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(c.isComposite(this._boundable1)||c.isComposite(this._boundable2))}},{key:"compareTo",value:function(r){var s=r;return this._distance<s._distance?-1:this._distance>s._distance?1:0}},{key:"expand",value:function(r,s,l,g,y){for(var k=r.getChildBoundables().iterator();k.hasNext();){var D=k.next(),B=null;(B=l?new c(s,D,this._itemDistance):new c(D,s,this._itemDistance)).getDistance()<y&&g.add(B)}}},{key:"getBoundable",value:function(r){return r===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var r=arguments[0],s=arguments[1],l=arguments[2];this._boundable1=r,this._boundable2=s,this._itemDistance=l,this._distance=this.distance()}},{key:"area",value:function(r){return r.getBounds().getArea()}},{key:"isComposite",value:function(r){return r instanceof An}}])})(),ru=(function(){return f((function c(){o(this,c)}),[{key:"visitItem",value:function(c){}}])})(),Sr=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"queryInternal",value:function(){if(Mt(arguments[2],ru)&&arguments[0]instanceof Object&&arguments[1]instanceof An)for(var r=arguments[0],s=arguments[2],l=arguments[1].getChildBoundables(),g=0;g<l.size();g++){var y=l.get(g);this.getIntersectsOp().intersects(y.getBounds(),r)&&(y instanceof An?this.queryInternal(r,y,s):y instanceof _e?s.visitItem(y.getItem()):Et.shouldNeverReachHere())}else if(Mt(arguments[2],Ht)&&arguments[0]instanceof Object&&arguments[1]instanceof An)for(var k=arguments[0],D=arguments[2],B=arguments[1].getChildBoundables(),J=0;J<B.size();J++){var mt=B.get(J);this.getIntersectsOp().intersects(mt.getBounds(),k)&&(mt instanceof An?this.queryInternal(k,mt,D):mt instanceof _e?D.add(mt.getItem()):Et.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(r){return r.get(r.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var r=0,s=arguments[0].getChildBoundables().iterator();s.hasNext();){var l=s.next();l instanceof An?r+=this.size(l):l instanceof _e&&(r+=1)}return r}}},{key:"removeItem",value:function(r,s){for(var l=null,g=r.getChildBoundables().iterator();g.hasNext();){var y=g.next();y instanceof _e&&y.getItem()===s&&(l=y)}return l!==null&&(r.getChildBoundables().remove(l),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var r=this.itemsTree(this._root);return r===null?new Kt:r}if(arguments.length===1){for(var s=arguments[0],l=new Kt,g=s.getChildBoundables().iterator();g.hasNext();){var y=g.next();if(y instanceof An){var k=this.itemsTree(y);k!==null&&l.add(k)}else y instanceof _e?l.add(y.getItem()):Et.shouldNeverReachHere()}return l.size()<=0?null:l}}},{key:"insert",value:function(r,s){Et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new _e(r,s))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var r=arguments[0],s=new Kt;return this.boundablesAtLevel(r,this._root,s),s}if(arguments.length===3){var l=arguments[0],g=arguments[1],y=arguments[2];if(Et.isTrue(l>-2),g.getLevel()===l)return y.add(g),null;for(var k=g.getChildBoundables().iterator();k.hasNext();){var D=k.next();D instanceof An?this.boundablesAtLevel(l,D,y):(Et.isTrue(D instanceof _e),l===-1&&y.add(D))}return null}}},{key:"query",value:function(){if(arguments.length===1){var r=arguments[0];this.build();var s=new Kt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.queryInternal(r,this._root,s),s}if(arguments.length===2){var l=arguments[0],g=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),l)&&this.queryInternal(l,this._root,g)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var r=arguments[0],s=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.remove(r,this._root,s)}if(arguments.length===3){var l=arguments[0],g=arguments[1],y=arguments[2],k=this.removeItem(g,y);if(k)return!0;for(var D=null,B=g.getChildBoundables().iterator();B.hasNext();){var J=B.next();if(this.getIntersectsOp().intersects(J.getBounds(),l)&&J instanceof An&&(k=this.remove(l,J,y))){D=J;break}}return D!==null&&D.getChildBoundables().isEmpty()&&g.getChildBoundables().remove(D),k}}},{key:"createHigherLevels",value:function(r,s){Et.isTrue(!r.isEmpty());var l=this.createParentBoundables(r,s+1);return l.size()===1?l.get(0):this.createHigherLevels(l,s+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var r=0,s=arguments[0].getChildBoundables().iterator();s.hasNext();){var l=s.next();if(l instanceof An){var g=this.depth(l);g>r&&(r=g)}}return r+1}}},{key:"createParentBoundables",value:function(r,s){Et.isTrue(!r.isEmpty());var l=new Kt;l.add(this.createNode(s));var g=new Kt(r);kr.sort(g,this.getComparator());for(var y=g.iterator();y.hasNext();){var k=y.next();this.lastNode(l).getChildBoundables().size()===this.getNodeCapacity()&&l.add(this.createNode(s)),this.lastNode(l).addChildBoundable(k)}return l}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new Kt,this._nodeCapacity=null,arguments.length===0)c.constructor_.call(this,c.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var r=arguments[0];Et.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}}},{key:"compareDoubles",value:function(r,s){return r>s?1:r<s?-1:0}}])})();Sr.IntersectsOp=function(){},Sr.DEFAULT_NODE_CAPACITY=10;var rc=(function(){return f((function c(){o(this,c)}),[{key:"distance",value:function(c,r){}}])})(),Ei=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"createParentBoundablesFromVerticalSlices",value:function(s,l){Et.isTrue(s.length>0);for(var g=new Kt,y=0;y<s.length;y++)g.addAll(this.createParentBoundablesFromVerticalSlice(s[y],l));return g}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var s=arguments[0],l=arguments[1];return this.nearestNeighbourK(s,K.POSITIVE_INFINITY,l)}if(arguments.length===3){var g=arguments[0],y=arguments[2],k=arguments[1],D=new Js;D.add(g);for(var B=new Js;!D.isEmpty()&&k>=0;){var J=D.poll(),mt=J.getDistance();if(mt>=k)break;J.isLeaves()?B.size()<y?B.add(J):(B.peek().getDistance()>mt&&(B.poll(),B.add(J)),k=B.peek().getDistance()):J.expandToQueue(D,k)}return r.getItems(B)}}},{key:"createNode",value:function(s){return new Qs(s)}},{key:"size",value:function(){return arguments.length===0?P(r,"size",this,1).call(this):P(r,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ft))return P(r,"insert",this,1).apply(this,arguments);var s=arguments[0],l=arguments[1];if(s.isNull())return null;P(r,"insert",this,1).call(this,s,l)}},{key:"getIntersectsOp",value:function(){return r.intersectsOp}},{key:"verticalSlices",value:function(s,l){for(var g=Math.trunc(Math.ceil(s.size()/l)),y=new Array(l).fill(null),k=s.iterator(),D=0;D<l;D++){y[D]=new Kt;for(var B=0;k.hasNext()&&B<g;){var J=k.next();y[D].add(J),B++}}return y}},{key:"query",value:function(){if(arguments.length===1){var s=arguments[0];return P(r,"query",this,1).call(this,s)}if(arguments.length===2){var l=arguments[0],g=arguments[1];P(r,"query",this,1).call(this,l,g)}}},{key:"getComparator",value:function(){return r.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(s,l){return P(r,"createParentBoundables",this,1).call(this,s,l)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Ft){var s=arguments[0],l=arguments[1];return P(r,"remove",this,1).call(this,s,l)}return P(r,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?P(r,"depth",this,1).call(this):P(r,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(s,l){Et.isTrue(!s.isEmpty());var g=Math.trunc(Math.ceil(s.size()/this.getNodeCapacity())),y=new Kt(s);kr.sort(y,r.xComparator);var k=this.verticalSlices(y,Math.trunc(Math.ceil(Math.sqrt(g))));return this.createParentBoundablesFromVerticalSlices(k,l)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Mt(arguments[0],rc)){var s=arguments[0];if(this.isEmpty())return null;var l=new tr(this.getRoot(),this.getRoot(),s);return this.nearestNeighbour(l)}if(arguments[0]instanceof tr){var g=arguments[0],y=K.POSITIVE_INFINITY,k=null,D=new Js;for(D.add(g);!D.isEmpty()&&y>0;){var B=D.poll(),J=B.getDistance();if(J>=y)break;B.isLeaves()?(y=J,k=B):B.expandToQueue(D,y)}return k===null?null:[k.getBoundable(0).getItem(),k.getBoundable(1).getItem()]}}else{if(arguments.length===2){var mt=arguments[0],kt=arguments[1];if(this.isEmpty()||mt.isEmpty())return null;var zt=new tr(this.getRoot(),mt.getRoot(),kt);return this.nearestNeighbour(zt)}if(arguments.length===3){var jt=arguments[2],re=new _e(arguments[0],arguments[1]),oe=new tr(this.getRoot(),re,jt);return this.nearestNeighbour(oe)[0]}if(arguments.length===4){var Ie=arguments[2],xe=arguments[3],Ue=new _e(arguments[0],arguments[1]),Qe=new tr(this.getRoot(),Ue,Ie);return this.nearestNeighbourK(Qe,xe)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var s=arguments[0],l=arguments[1],g=K.POSITIVE_INFINITY,y=new Js;for(y.add(s);!y.isEmpty();){var k=y.poll(),D=k.getDistance();if(D>l)return!1;if(k.maximumDistance()<=l)return!0;if(k.isLeaves()){if((g=D)<=l)return!0}else k.expandToQueue(y,g)}return!1}if(arguments.length===3){var B=arguments[0],J=arguments[1],mt=arguments[2],kt=new tr(this.getRoot(),B.getRoot(),J);return this.isWithinDistance(kt,mt)}}},{key:"interfaces_",get:function(){return[fi,b]}}],[{key:"constructor_",value:function(){if(arguments.length===0)r.constructor_.call(this,r.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var s=arguments[0];Sr.constructor_.call(this,s)}}},{key:"centreX",value:function(s){return r.avg(s.getMinX(),s.getMaxX())}},{key:"avg",value:function(s,l){return(s+l)/2}},{key:"getItems",value:function(s){for(var l=new Array(s.size()).fill(null),g=0;!s.isEmpty();){var y=s.poll();l[g]=y.getBoundable(0).getItem(),g++}return l}},{key:"centreY",value:function(s){return r.avg(s.getMinY(),s.getMaxY())}}])})(Sr),Qs=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"computeBounds",value:function(){for(var s=null,l=this.getChildBoundables().iterator();l.hasNext();){var g=l.next();s===null?s=new Ft(g.getBounds()):s.expandToInclude(g.getBounds())}return s}}],[{key:"constructor_",value:function(){var s=arguments[0];An.constructor_.call(this,s)}}])})(An);Ei.STRtreeNode=Qs,Ei.xComparator=new((function(){return f((function c(){o(this,c)}),[{key:"interfaces_",get:function(){return[it]}},{key:"compare",value:function(c,r){return Sr.compareDoubles(Ei.centreX(c.getBounds()),Ei.centreX(r.getBounds()))}}])})()),Ei.yComparator=new((function(){return f((function c(){o(this,c)}),[{key:"interfaces_",get:function(){return[it]}},{key:"compare",value:function(c,r){return Sr.compareDoubles(Ei.centreY(c.getBounds()),Ei.centreY(r.getBounds()))}}])})()),Ei.intersectsOp=new((function(){return f((function c(){o(this,c)}),[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(c,r){return c.intersects(r)}}])})()),Ei.DEFAULT_NODE_CAPACITY=10;var sc=(function(){function c(){o(this,c)}return f(c,null,[{key:"relativeSign",value:function(r,s){return r<s?-1:r>s?1:0}},{key:"compare",value:function(r,s,l){if(s.equals2D(l))return 0;var g=c.relativeSign(s.x,l.x),y=c.relativeSign(s.y,l.y);switch(r){case 0:return c.compareValue(g,y);case 1:return c.compareValue(y,g);case 2:return c.compareValue(y,-g);case 3:return c.compareValue(-g,y);case 4:return c.compareValue(-g,-y);case 5:return c.compareValue(-y,-g);case 6:return c.compareValue(-y,g);case 7:return c.compareValue(g,-y)}return Et.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(r,s){return r<0?-1:r>0?1:s<0?-1:s>0?1:0}}])})(),ki=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(c){c.print(this.coord),c.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(c){var r=c;return this.segmentIndex<r.segmentIndex?-1:this.segmentIndex>r.segmentIndex?1:this.coord.equals2D(r.coord)?0:this._isInterior?r._isInterior?sc.compare(this._segmentOctant,this.coord,r.coord):1:-1}},{key:"isEndPoint",value:function(c){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===c}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var c=arguments[0],r=arguments[1],s=arguments[2],l=arguments[3];this._segString=c,this.coord=new et(r),this.segmentIndex=s,this._segmentOctant=l,this._isInterior=!r.equals2D(c.getCoordinate(s))}}])})(),oc=(function(){return f((function c(){o(this,c)}),[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),su=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getSplitCoordinates",value:function(){var c=new vr;this.addEndpoints();for(var r=this.iterator(),s=r.next();r.hasNext();){var l=r.next();this.addEdgeCoordinates(s,l,c),s=l}return c.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var c=new Kt;this.findCollapsesFromInsertedNodes(c),this.findCollapsesFromExistingVertices(c);for(var r=c.iterator();r.hasNext();){var s=r.next().intValue();this.add(this._edge.getCoordinate(s),s)}}},{key:"createSplitEdgePts",value:function(c,r){var s=r.segmentIndex-c.segmentIndex+2;if(s===2)return[new et(c.coord),new et(r.coord)];var l=this._edge.getCoordinate(r.segmentIndex),g=r.isInterior()||!r.coord.equals2D(l);g||s--;var y=new Array(s).fill(null),k=0;y[k++]=new et(c.coord);for(var D=c.segmentIndex+1;D<=r.segmentIndex;D++)y[k++]=this._edge.getCoordinate(D);return g&&(y[k]=new et(r.coord)),y}},{key:"print",value:function(c){c.println("Intersections:");for(var r=this.iterator();r.hasNext();)r.next().print(c)}},{key:"findCollapsesFromExistingVertices",value:function(c){for(var r=0;r<this._edge.size()-2;r++){var s=this._edge.getCoordinate(r);this._edge.getCoordinate(r+1);var l=this._edge.getCoordinate(r+2);s.equals2D(l)&&c.add(Jt.valueOf(r+1))}}},{key:"addEdgeCoordinates",value:function(c,r,s){var l=this.createSplitEdgePts(c,r);s.add(l,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(c){this.addEndpoints(),this.addCollapsedNodes();for(var r=this.iterator(),s=r.next();r.hasNext();){var l=r.next(),g=this.createSplitEdge(s,l);c.add(g),s=l}}},{key:"findCollapseIndex",value:function(c,r,s){if(!c.coord.equals2D(r.coord))return!1;var l=r.segmentIndex-c.segmentIndex;return r.isInterior()||l--,l===1&&(s[0]=c.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(c){for(var r=new Array(1).fill(null),s=this.iterator(),l=s.next();s.hasNext();){var g=s.next();this.findCollapseIndex(l,g,r)&&c.add(Jt.valueOf(r[0])),l=g}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var c=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(c),c)}},{key:"createSplitEdge",value:function(c,r){var s=this.createSplitEdgePts(c,r);return new Ui(s,this._edge.getData())}},{key:"add",value:function(c,r){var s=new ki(this._edge,c,r,this._edge.getSegmentOctant(r)),l=this._nodeMap.get(s);return l!==null?(Et.isTrue(l.coord.equals2D(c),"Found equal nodes with different coordinates"),l):(this._nodeMap.put(s,s),s)}},{key:"checkSplitEdgesCorrectness",value:function(c){var r=this._edge.getCoordinates(),s=c.get(0).getCoordinate(0);if(!s.equals2D(r[0]))throw new bt("bad split edge start point at "+s);var l=c.get(c.size()-1).getCoordinates(),g=l[l.length-1];if(!g.equals2D(r[r.length-1]))throw new bt("bad split edge end point at "+g)}}],[{key:"constructor_",value:function(){this._nodeMap=new en,this._edge=null;var c=arguments[0];this._edge=c}}])})(),er=(function(){function c(){o(this,c)}return f(c,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],s=arguments[1];if(r===0&&s===0)throw new tt("Cannot compute the octant for point ( "+r+", "+s+" )");var l=Math.abs(r),g=Math.abs(s);return r>=0?s>=0?l>=g?0:1:l>=g?7:6:s>=0?l>=g?3:2:l>=g?4:5}if(arguments[0]instanceof et&&arguments[1]instanceof et){var y=arguments[0],k=arguments[1],D=k.x-y.x,B=k.y-y.y;if(D===0&&B===0)throw new tt("Cannot compute the octant for two identical points "+y);return c.octant(D,B)}}}])})(),ou=(function(){return f((function c(){o(this,c)}),[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(c){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(c){}},{key:"getData",value:function(){}}])})(),au=(function(){return f((function c(){o(this,c)}),[{key:"addIntersection",value:function(c,r){}},{key:"interfaces_",get:function(){return[ou]}}])})(),Ui=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(r){return this._pts[r]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(r){return r===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(r),this.getCoordinate(r+1))}},{key:"setData",value:function(r){this._data=r}},{key:"safeOctant",value:function(r,s){return r.equals2D(s)?0:er.octant(r,s)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var r=arguments[0],s=arguments[1];this.addIntersectionNode(r,s)}else if(arguments.length===4){var l=arguments[1],g=arguments[3],y=new et(arguments[0].getIntersection(g));this.addIntersection(y,l)}}},{key:"toString",value:function(){return Er.toLineString(new Xi(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(r,s){var l=s,g=l+1;if(g<this._pts.length){var y=this._pts[g];r.equals2D(y)&&(l=g)}return this._nodeList.add(r,l)}},{key:"addIntersections",value:function(r,s,l){for(var g=0;g<r.getIntersectionNum();g++)this.addIntersection(r,s,l,g)}},{key:"interfaces_",get:function(){return[au]}}],[{key:"constructor_",value:function(){this._nodeList=new su(this),this._pts=null,this._data=null;var r=arguments[0],s=arguments[1];this._pts=r,this._data=s}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var r=arguments[0],s=new Kt;return c.getNodedSubstrings(r,s),s}if(arguments.length===2)for(var l=arguments[1],g=arguments[0].iterator();g.hasNext();)g.next().getNodeList().addSplitEdges(l)}}])})(),Qn=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof c){var r=arguments[0],s=$t.index(this.p0,this.p1,r.p0),l=$t.index(this.p0,this.p1,r.p1);return s>=0&&l>=0||s<=0&&l<=0?Math.max(s,l):0}if(arguments[0]instanceof et){var g=arguments[0];return $t.index(this.p0,this.p1,g)}}},{key:"toGeometry",value:function(r){return r.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(r){if(!(r instanceof c))return!1;var s=r;return this.p0.equals(s.p0)&&this.p1.equals(s.p1)}},{key:"intersection",value:function(r){var s=new bi;return s.computeIntersection(this.p0,this.p1,r.p0,r.p1),s.hasIntersection()?s.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof et){var r=arguments[0];if(r.equals(this.p0)||r.equals(this.p1))return new et(r);var s=this.projectionFactor(r),l=new et;return l.x=this.p0.x+s*(this.p1.x-this.p0.x),l.y=this.p0.y+s*(this.p1.y-this.p0.y),l}if(arguments[0]instanceof c){var g=arguments[0],y=this.projectionFactor(g.p0),k=this.projectionFactor(g.p1);if(y>=1&&k>=1||y<=0&&k<=0)return null;var D=this.project(g.p0);y<0&&(D=this.p0),y>1&&(D=this.p1);var B=this.project(g.p1);return k<0&&(B=this.p0),k>1&&(B=this.p1),new c(D,B)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(r){return r===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(r){return fn.pointToLinePerpendicular(r,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return c.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(r){if(r.equals(this.p0))return 0;if(r.equals(this.p1))return 1;var s=this.p1.x-this.p0.x,l=this.p1.y-this.p0.y,g=s*s+l*l;return g<=0?K.NaN:((r.x-this.p0.x)*s+(r.y-this.p0.y)*l)/g}},{key:"closestPoints",value:function(r){var s=this.intersection(r);if(s!==null)return[s,s];var l=new Array(2).fill(null),g=K.MAX_VALUE,y=null,k=this.closestPoint(r.p0);g=k.distance(r.p0),l[0]=k,l[1]=r.p0;var D=this.closestPoint(r.p1);(y=D.distance(r.p1))<g&&(g=y,l[0]=D,l[1]=r.p1);var B=r.closestPoint(this.p0);(y=B.distance(this.p0))<g&&(g=y,l[0]=this.p0,l[1]=B);var J=r.closestPoint(this.p1);return(y=J.distance(this.p1))<g&&(g=y,l[0]=this.p1,l[1]=J),l}},{key:"closestPoint",value:function(r){var s=this.projectionFactor(r);return s>0&&s<1?this.project(r):this.p0.distance(r)<this.p1.distance(r)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(r){var s=r,l=this.p0.compareTo(s.p0);return l!==0?l:this.p1.compareTo(s.p1)}},{key:"reverse",value:function(){var r=this.p0;this.p0=this.p1,this.p1=r}},{key:"equalsTopo",value:function(r){return this.p0.equals(r.p0)&&this.p1.equals(r.p1)||this.p0.equals(r.p1)&&this.p1.equals(r.p0)}},{key:"lineIntersection",value:function(r){return hn.intersection(this.p0,this.p1,r.p0,r.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(r,s){var l=this.p0.x+r*(this.p1.x-this.p0.x),g=this.p0.y+r*(this.p1.y-this.p0.y),y=this.p1.x-this.p0.x,k=this.p1.y-this.p0.y,D=Math.sqrt(y*y+k*k),B=0,J=0;if(s!==0){if(D<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");B=s*y/D,J=s*k/D}return new et(l-J,g+B)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var r=arguments[0];this.setCoordinates(r.p0,r.p1)}else if(arguments.length===2){var s=arguments[0],l=arguments[1];this.p0.x=s.x,this.p0.y=s.y,this.p1.x=l.x,this.p1.y=l.y}}},{key:"segmentFraction",value:function(r){var s=this.projectionFactor(r);return s<0?s=0:(s>1||K.isNaN(s))&&(s=1),s}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(r){var s=this.p1.getY()-this.p0.getY(),l=this.p0.getX()-this.p1.getX(),g=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),y=s*s+l*l,k=s*s-l*l,D=r.getX(),B=r.getY();return new et((-k*D-2*s*l*B-2*s*g)/y,(k*B-2*s*l*D-2*l*g)/y)}},{key:"distance",value:function(){if(arguments[0]instanceof c){var r=arguments[0];return fn.segmentToSegment(this.p0,this.p1,r.p0,r.p1)}if(arguments[0]instanceof et){var s=arguments[0];return fn.pointToSegment(s,this.p0,this.p1)}}},{key:"pointAlong",value:function(r){var s=new et;return s.x=this.p0.x+r*(this.p1.x-this.p0.x),s.y=this.p0.y+r*(this.p1.y-this.p0.y),s}},{key:"hashCode",value:function(){var r=K.doubleToLongBits(this.p0.x);r^=31*K.doubleToLongBits(this.p0.y);var s=Math.trunc(r)^Math.trunc(r>>32),l=K.doubleToLongBits(this.p1.x);return l^=31*K.doubleToLongBits(this.p1.y),s^(Math.trunc(l)^Math.trunc(l>>32))}},{key:"interfaces_",get:function(){return[st,b]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)c.constructor_.call(this,new et,new et);else if(arguments.length===1){var r=arguments[0];c.constructor_.call(this,r.p0,r.p1)}else if(arguments.length===2){var s=arguments[0],l=arguments[1];this.p0=s,this.p1=l}else if(arguments.length===4){var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3];c.constructor_.call(this,new et(g,y),new et(k,D))}}},{key:"midPoint",value:function(r,s){return new et((r.x+s.x)/2,(r.y+s.y)/2)}}])})(),uu=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var c=arguments[1],r=arguments[2],s=arguments[3];arguments[0].getLineSegment(c,this._overlapSeg1),r.getLineSegment(s,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new Qn,this._overlapSeg2=new Qn}}])})(),Wo=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getLineSegment",value:function(c,r){r.p0=this._pts[c],r.p1=this._pts[c+1]}},{key:"computeSelect",value:function(c,r,s,l){var g=this._pts[r],y=this._pts[s];if(s-r==1)return l.select(this,r),null;if(!c.intersects(g,y))return null;var k=Math.trunc((r+s)/2);r<k&&this.computeSelect(c,r,k,l),k<s&&this.computeSelect(c,k,s,l)}},{key:"getCoordinates",value:function(){for(var c=new Array(this._end-this._start+1).fill(null),r=0,s=this._start;s<=this._end;s++)c[r++]=this._pts[s];return c}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var c=arguments[0],r=arguments[1];this.computeOverlaps(this._start,this._end,c,c._start,c._end,r)}else if(arguments.length===6){var s=arguments[0],l=arguments[1],g=arguments[2],y=arguments[3],k=arguments[4],D=arguments[5];if(l-s==1&&k-y==1)return D.overlap(this,s,g,y),null;if(!this.overlaps(s,l,g,y,k))return null;var B=Math.trunc((s+l)/2),J=Math.trunc((y+k)/2);s<B&&(y<J&&this.computeOverlaps(s,B,g,y,J,D),J<k&&this.computeOverlaps(s,B,g,J,k,D)),B<l&&(y<J&&this.computeOverlaps(B,l,g,y,J,D),J<k&&this.computeOverlaps(B,l,g,J,k,D))}}},{key:"setId",value:function(c){this._id=c}},{key:"select",value:function(c,r){this.computeSelect(c,this._start,this._end,r)}},{key:"getEnvelope",value:function(){if(this._env===null){var c=this._pts[this._start],r=this._pts[this._end];this._env=new Ft(c,r)}return this._env}},{key:"overlaps",value:function(c,r,s,l,g){return Ft.intersects(this._pts[c],this._pts[r],s._pts[l],s._pts[g])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var c=arguments[0],r=arguments[1],s=arguments[2],l=arguments[3];this._pts=c,this._start=r,this._end=s,this._context=l}}])})(),ac=(function(){function c(){o(this,c)}return f(c,null,[{key:"findChainEnd",value:function(r,s){for(var l=s;l<r.length-1&&r[l].equals2D(r[l+1]);)l++;if(l>=r.length-1)return r.length-1;for(var g=In.quadrant(r[l],r[l+1]),y=s+1;y<r.length&&!(!r[y-1].equals2D(r[y])&&In.quadrant(r[y-1],r[y])!==g);)y++;return y-1}},{key:"getChains",value:function(){if(arguments.length===1){var r=arguments[0];return c.getChains(r,null)}if(arguments.length===2){var s=arguments[0],l=arguments[1],g=new Kt,y=0;do{var k=c.findChainEnd(s,y),D=new Wo(s,y,k,l);g.add(D),y=k}while(y<s.length-1);return g}}}])})(),Yo=(function(){return f((function c(){o(this,c)}),[{key:"computeNodes",value:function(c){}},{key:"getNodedSubstrings",value:function(){}}])})(),to=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"setSegmentIntersector",value:function(c){this._segInt=c}},{key:"interfaces_",get:function(){return[Yo]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var c=arguments[0];this.setSegmentIntersector(c)}}}}])})(),jo=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Ui.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(s){for(var l=ac.getChains(s.getCoordinates(),s).iterator();l.hasNext();){var g=l.next();g.setId(this._idCounter++),this._index.insert(g.getEnvelope(),g),this._monoChains.add(g)}}},{key:"computeNodes",value:function(s){this._nodedSegStrings=s;for(var l=s.iterator();l.hasNext();)this.add(l.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var s=new $o(this._segInt),l=this._monoChains.iterator();l.hasNext();)for(var g=l.next(),y=this._index.query(g.getEnvelope()).iterator();y.hasNext();){var k=y.next();if(k.getId()>g.getId()&&(g.computeOverlaps(k,s),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new Kt,this._index=new Ei,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var s=arguments[0];to.constructor_.call(this,s)}}}}])})(to),$o=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"overlap",value:function(){if(arguments.length!==4)return P(r,"overlap",this,1).apply(this,arguments);var s=arguments[1],l=arguments[2],g=arguments[3],y=arguments[0].getContext(),k=l.getContext();this._si.processIntersections(y,s,k,g)}}],[{key:"constructor_",value:function(){this._si=null;var s=arguments[0];this._si=s}}])})(uu);jo.SegmentOverlapAction=$o;var ai=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"isDeletable",value:function(r,s,l,g){var y=this._inputLine[r],k=this._inputLine[s],D=this._inputLine[l];return!!this.isConcave(y,k,D)&&!!this.isShallow(y,k,D,g)&&this.isShallowSampled(y,k,r,l,g)}},{key:"deleteShallowConcavities",value:function(){for(var r=1,s=this.findNextNonDeletedIndex(r),l=this.findNextNonDeletedIndex(s),g=!1;l<this._inputLine.length;){var y=!1;this.isDeletable(r,s,l,this._distanceTol)&&(this._isDeleted[s]=c.DELETE,y=!0,g=!0),r=y?l:s,s=this.findNextNonDeletedIndex(r),l=this.findNextNonDeletedIndex(s)}return g}},{key:"isShallowConcavity",value:function(r,s,l,g){return $t.index(r,s,l)===this._angleOrientation&&fn.pointToSegment(s,r,l)<g}},{key:"isShallowSampled",value:function(r,s,l,g,y){var k=Math.trunc((g-l)/c.NUM_PTS_TO_CHECK);k<=0&&(k=1);for(var D=l;D<g;D+=k)if(!this.isShallow(r,s,this._inputLine[D],y))return!1;return!0}},{key:"isConcave",value:function(r,s,l){var g=$t.index(r,s,l)===this._angleOrientation;return g}},{key:"simplify",value:function(r){this._distanceTol=Math.abs(r),r<0&&(this._angleOrientation=$t.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var s=!1;do s=this.deleteShallowConcavities();while(s);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(r){for(var s=r+1;s<this._inputLine.length&&this._isDeleted[s]===c.DELETE;)s++;return s}},{key:"isShallow",value:function(r,s,l,g){return fn.pointToSegment(s,r,l)<g}},{key:"collapseLine",value:function(){for(var r=new vr,s=0;s<this._inputLine.length;s++)this._isDeleted[s]!==c.DELETE&&r.add(this._inputLine[s]);return r.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=$t.COUNTERCLOCKWISE;var r=arguments[0];this._inputLine=r}},{key:"simplify",value:function(r,s){return new c(r).simplify(s)}}])})();ai.INIT=0,ai.DELETE=1,ai.KEEP=1,ai.NUM_PTS_TO_CHECK=10;var ks=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getCoordinates",value:function(){return this._ptList.toArray(c.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(r){this._precisionModel=r}},{key:"addPt",value:function(r){var s=new et(r);if(this._precisionModel.makePrecise(s),this.isRedundant(s))return null;this._ptList.add(s)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(r,s){if(s)for(var l=0;l<r.length;l++)this.addPt(r[l]);else for(var g=r.length-1;g>=0;g--)this.addPt(r[g])}},{key:"isRedundant",value:function(r){if(this._ptList.size()<1)return!1;var s=this._ptList.get(this._ptList.size()-1);return r.distance(s)<this._minimimVertexDistance}},{key:"toString",value:function(){return new si().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var r=new et(this._ptList.get(0)),s=this._ptList.get(this._ptList.size()-1);if(r.equals(s))return null;this._ptList.add(r)}},{key:"setMinimumVertexDistance",value:function(r){this._minimimVertexDistance=r}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Kt}}])})();ks.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var gn=(function(){function c(){o(this,c)}return f(c,null,[{key:"toDegrees",value:function(r){return 180*r/Math.PI}},{key:"normalize",value:function(r){for(;r>Math.PI;)r-=c.PI_TIMES_2;for(;r<=-Math.PI;)r+=c.PI_TIMES_2;return r}},{key:"angle",value:function(){if(arguments.length===1){var r=arguments[0];return Math.atan2(r.y,r.x)}if(arguments.length===2){var s=arguments[0],l=arguments[1],g=l.x-s.x,y=l.y-s.y;return Math.atan2(y,g)}}},{key:"isAcute",value:function(r,s,l){var g=r.x-s.x,y=r.y-s.y;return g*(l.x-s.x)+y*(l.y-s.y)>0}},{key:"isObtuse",value:function(r,s,l){var g=r.x-s.x,y=r.y-s.y;return g*(l.x-s.x)+y*(l.y-s.y)<0}},{key:"interiorAngle",value:function(r,s,l){var g=c.angle(s,r),y=c.angle(s,l);return Math.abs(y-g)}},{key:"normalizePositive",value:function(r){if(r<0){for(;r<0;)r+=c.PI_TIMES_2;r>=c.PI_TIMES_2&&(r=0)}else{for(;r>=c.PI_TIMES_2;)r-=c.PI_TIMES_2;r<0&&(r=0)}return r}},{key:"angleBetween",value:function(r,s,l){var g=c.angle(s,r),y=c.angle(s,l);return c.diff(g,y)}},{key:"diff",value:function(r,s){var l=null;return(l=r<s?s-r:r-s)>Math.PI&&(l=2*Math.PI-l),l}},{key:"toRadians",value:function(r){return r*Math.PI/180}},{key:"getTurn",value:function(r,s){var l=Math.sin(s-r);return l>0?c.COUNTERCLOCKWISE:l<0?c.CLOCKWISE:c.NONE}},{key:"angleBetweenOriented",value:function(r,s,l){var g=c.angle(s,r),y=c.angle(s,l)-g;return y<=-Math.PI?y+c.PI_TIMES_2:y>Math.PI?y-c.PI_TIMES_2:y}}])})();gn.PI_TIMES_2=2*Math.PI,gn.PI_OVER_2=Math.PI/2,gn.PI_OVER_4=Math.PI/4,gn.COUNTERCLOCKWISE=$t.COUNTERCLOCKWISE,gn.CLOCKWISE=$t.CLOCKWISE,gn.NONE=$t.COLLINEAR;var Ss=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"addNextSegment",value:function(r,s){if(this._s0=this._s1,this._s1=this._s2,this._s2=r,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var l=$t.index(this._s0,this._s1,this._s2),g=l===$t.CLOCKWISE&&this._side===ft.LEFT||l===$t.COUNTERCLOCKWISE&&this._side===ft.RIGHT;l===0?this.addCollinear(s):g?this.addOutsideTurn(l,s):this.addInsideTurn(l,s)}},{key:"addLineEndCap",value:function(r,s){var l=new Qn(r,s),g=new Qn;this.computeOffsetSegment(l,ft.LEFT,this._distance,g);var y=new Qn;this.computeOffsetSegment(l,ft.RIGHT,this._distance,y);var k=s.x-r.x,D=s.y-r.y,B=Math.atan2(D,k);switch(this._bufParams.getEndCapStyle()){case nt.CAP_ROUND:this._segList.addPt(g.p1),this.addDirectedFillet(s,B+Math.PI/2,B-Math.PI/2,$t.CLOCKWISE,this._distance),this._segList.addPt(y.p1);break;case nt.CAP_FLAT:this._segList.addPt(g.p1),this._segList.addPt(y.p1);break;case nt.CAP_SQUARE:var J=new et;J.x=Math.abs(this._distance)*Math.cos(B),J.y=Math.abs(this._distance)*Math.sin(B);var mt=new et(g.p1.x+J.x,g.p1.y+J.y),kt=new et(y.p1.x+J.x,y.p1.y+J.y);this._segList.addPt(mt),this._segList.addPt(kt)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(r,s,l,g){var y=hn.intersection(s.p0,s.p1,l.p0,l.p1);if(y!==null&&(g<=0?1:y.distance(r)/Math.abs(g))<=this._bufParams.getMitreLimit())return this._segList.addPt(y),null;this.addLimitedMitreJoin(s,l,g,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(r,s){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*c.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===nt.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===nt.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(s&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,r,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(r){this._segList.addPt(new et(r.x+this._distance,r.y+this._distance)),this._segList.addPt(new et(r.x+this._distance,r.y-this._distance)),this._segList.addPt(new et(r.x-this._distance,r.y-this._distance)),this._segList.addPt(new et(r.x-this._distance,r.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(r,s){this._segList.addPts(r,s)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(r,s,l,g,y){var k=s.x-r.x,D=s.y-r.y,B=Math.atan2(D,k),J=l.x-r.x,mt=l.y-r.y,kt=Math.atan2(mt,J);g===$t.CLOCKWISE?B<=kt&&(B+=2*Math.PI):B>=kt&&(B-=2*Math.PI),this._segList.addPt(s),this.addDirectedFillet(r,B,kt,g,y),this._segList.addPt(l)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(r,s,l){this._s1=r,this._s2=s,this._side=l,this._seg1.setCoordinates(r,s),this.computeOffsetSegment(this._seg1,l,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(r,s,l,g){var y=this._seg0.p1,k=gn.angle(y,this._seg0.p0),D=gn.angleBetweenOriented(this._seg0.p0,y,this._seg1.p1)/2,B=gn.normalize(k+D),J=gn.normalize(B+Math.PI),mt=g*l,kt=l-mt*Math.abs(Math.sin(D)),zt=y.x+mt*Math.cos(J),jt=y.y+mt*Math.sin(J),re=new et(zt,jt),oe=new Qn(y,re),Ie=oe.pointAlongOffset(1,kt),xe=oe.pointAlongOffset(1,-kt);this._side===ft.LEFT?(this._segList.addPt(Ie),this._segList.addPt(xe)):(this._segList.addPt(xe),this._segList.addPt(Ie))}},{key:"addDirectedFillet",value:function(r,s,l,g,y){var k=g===$t.CLOCKWISE?-1:1,D=Math.abs(s-l),B=Math.trunc(D/this._filletAngleQuantum+.5);if(B<1)return null;for(var J=D/B,mt=new et,kt=0;kt<B;kt++){var zt=s+k*kt*J;mt.x=r.x+y*Math.cos(zt),mt.y=r.y+y*Math.sin(zt),this._segList.addPt(mt)}}},{key:"computeOffsetSegment",value:function(r,s,l,g){var y=s===ft.LEFT?1:-1,k=r.p1.x-r.p0.x,D=r.p1.y-r.p0.y,B=Math.sqrt(k*k+D*D),J=y*l*k/B,mt=y*l*D/B;g.p0.x=r.p0.x-mt,g.p0.y=r.p0.y+J,g.p1.x=r.p1.x-mt,g.p1.y=r.p1.y+J}},{key:"addInsideTurn",value:function(r,s){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*c.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var l=new et((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(l);var g=new et((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(g)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(r){var s=new et(r.x+this._distance,r.y);this._segList.addPt(s),this.addDirectedFillet(r,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(r,s){this._segList.addPt(r.p1),this._segList.addPt(s.p0)}},{key:"init",value:function(r){this._distance=r,this._maxCurveSegmentError=r*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ks,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(r*c.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(r){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===nt.JOIN_BEVEL||this._bufParams.getJoinStyle()===nt.JOIN_MITRE?(r&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,$t.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Qn,this._seg1=new Qn,this._offset0=new Qn,this._offset1=new Qn,this._side=0,this._hasNarrowConcaveAngle=!1;var r=arguments[0],s=arguments[1],l=arguments[2];this._precisionModel=r,this._bufParams=s,this._li=new bi,this._filletAngleQuantum=Math.PI/2/s.getQuadrantSegments(),s.getQuadrantSegments()>=8&&s.getJoinStyle()===nt.JOIN_ROUND&&(this._closingSegLengthFactor=c.MAX_CLOSING_SEG_LEN_FACTOR),this.init(l)}}])})();Ss.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ss.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ss.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ss.MAX_CLOSING_SEG_LEN_FACTOR=80;var Cs=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getOffsetCurve",value:function(r,s){if(this._distance=s,s===0)return null;var l=s<0,g=Math.abs(s),y=this.getSegGen(g);r.length<=1?this.computePointCurve(r[0],y):this.computeOffsetCurve(r,l,y);var k=y.getCoordinates();return l&&Je.reverse(k),k}},{key:"computeSingleSidedBufferCurve",value:function(r,s,l){var g=this.simplifyTolerance(this._distance);if(s){l.addSegments(r,!0);var y=ai.simplify(r,-g),k=y.length-1;l.initSideSegments(y[k],y[k-1],ft.LEFT),l.addFirstSegment();for(var D=k-2;D>=0;D--)l.addNextSegment(y[D],!0)}else{l.addSegments(r,!1);var B=ai.simplify(r,g),J=B.length-1;l.initSideSegments(B[0],B[1],ft.LEFT),l.addFirstSegment();for(var mt=2;mt<=J;mt++)l.addNextSegment(B[mt],!0)}l.addLastSegment(),l.closeRing()}},{key:"computeRingBufferCurve",value:function(r,s,l){var g=this.simplifyTolerance(this._distance);s===ft.RIGHT&&(g=-g);var y=ai.simplify(r,g),k=y.length-1;l.initSideSegments(y[k-1],y[0],s);for(var D=1;D<=k;D++){var B=D!==1;l.addNextSegment(y[D],B)}l.closeRing()}},{key:"computeLineBufferCurve",value:function(r,s){var l=this.simplifyTolerance(this._distance),g=ai.simplify(r,l),y=g.length-1;s.initSideSegments(g[0],g[1],ft.LEFT);for(var k=2;k<=y;k++)s.addNextSegment(g[k],!0);s.addLastSegment(),s.addLineEndCap(g[y-1],g[y]);var D=ai.simplify(r,-l),B=D.length-1;s.initSideSegments(D[B],D[B-1],ft.LEFT);for(var J=B-2;J>=0;J--)s.addNextSegment(D[J],!0);s.addLastSegment(),s.addLineEndCap(D[1],D[0]),s.closeRing()}},{key:"computePointCurve",value:function(r,s){switch(this._bufParams.getEndCapStyle()){case nt.CAP_ROUND:s.createCircle(r);break;case nt.CAP_SQUARE:s.createSquare(r)}}},{key:"getLineCurve",value:function(r,s){if(this._distance=s,this.isLineOffsetEmpty(s))return null;var l=Math.abs(s),g=this.getSegGen(l);if(r.length<=1)this.computePointCurve(r[0],g);else if(this._bufParams.isSingleSided()){var y=s<0;this.computeSingleSidedBufferCurve(r,y,g)}else this.computeLineBufferCurve(r,g);return g.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(r){return r*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(r,s,l){if(this._distance=l,r.length<=2)return this.getLineCurve(r,l);if(l===0)return c.copyCoordinates(r);var g=this.getSegGen(l);return this.computeRingBufferCurve(r,s,g),g.getCoordinates()}},{key:"computeOffsetCurve",value:function(r,s,l){var g=this.simplifyTolerance(this._distance);if(s){var y=ai.simplify(r,-g),k=y.length-1;l.initSideSegments(y[k],y[k-1],ft.LEFT),l.addFirstSegment();for(var D=k-2;D>=0;D--)l.addNextSegment(y[D],!0)}else{var B=ai.simplify(r,g),J=B.length-1;l.initSideSegments(B[0],B[1],ft.LEFT),l.addFirstSegment();for(var mt=2;mt<=J;mt++)l.addNextSegment(B[mt],!0)}l.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(r){return r===0||r<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(r){return new Ss(this._precisionModel,this._bufParams,r)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var r=arguments[0],s=arguments[1];this._precisionModel=r,this._bufParams=s}},{key:"copyCoordinates",value:function(r){for(var s=new Array(r.length).fill(null),l=0;l<s.length;l++)s[l]=new et(r[l]);return s}}])})(),ti=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var c=arguments[0],r=new Kt,s=this._subgraphs.iterator();s.hasNext();){var l=s.next(),g=l.getEnvelope();c.y<g.getMinY()||c.y>g.getMaxY()||this.findStabbedSegments(c,l.getDirectedEdges(),r)}return r}if(arguments.length===3){if(Mt(arguments[2],Ht)&&arguments[0]instanceof et&&arguments[1]instanceof Go){for(var y=arguments[0],k=arguments[1],D=arguments[2],B=k.getEdge().getCoordinates(),J=0;J<B.length-1;J++)if(this._seg.p0=B[J],this._seg.p1=B[J+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<y.x||this._seg.isHorizontal()||y.y<this._seg.p0.y||y.y>this._seg.p1.y||$t.index(this._seg.p0,this._seg.p1,y)===$t.RIGHT)){var mt=k.getDepth(ft.LEFT);this._seg.p0.equals(B[J])||(mt=k.getDepth(ft.RIGHT));var kt=new Xo(this._seg,mt);D.add(kt)}}else if(Mt(arguments[2],Ht)&&arguments[0]instanceof et&&Mt(arguments[1],Ht))for(var zt=arguments[0],jt=arguments[2],re=arguments[1].iterator();re.hasNext();){var oe=re.next();oe.isForward()&&this.findStabbedSegments(zt,oe,jt)}}}},{key:"getDepth",value:function(c){var r=this.findStabbedSegments(c);return r.size()===0?0:kr.min(r)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new Qn;var c=arguments[0];this._subgraphs=c}}])})(),Xo=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"compareTo",value:function(c){var r=c;if(this._upwardSeg.minX()>=r._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=r._upwardSeg.minX())return-1;var s=this._upwardSeg.orientationIndex(r._upwardSeg);return s!==0||(s=-1*r._upwardSeg.orientationIndex(this._upwardSeg))!==0?s:this._upwardSeg.compareTo(r._upwardSeg)}},{key:"compareX",value:function(c,r){var s=c.p0.compareTo(r.p0);return s!==0?s:c.p1.compareTo(r.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var c=arguments[0],r=arguments[1];this._upwardSeg=new Qn(c),this._leftDepth=r}}])})();ti.DepthSegment=Xo;var Ko=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,null,[{key:"constructor_",value:function(){ct.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(ct),Jo=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getY",value:function(){var r=this.y/this.w;if(K.isNaN(r)||K.isInfinite(r))throw new Ko;return r}},{key:"getX",value:function(){var r=this.x/this.w;if(K.isNaN(r)||K.isInfinite(r))throw new Ko;return r}},{key:"getCoordinate",value:function(){var r=new et;return r.x=this.getX(),r.y=this.getY(),r}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var r=arguments[0];this.x=r.x,this.y=r.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],l=arguments[1];this.x=s,this.y=l,this.w=1}else if(arguments[0]instanceof c&&arguments[1]instanceof c){var g=arguments[0],y=arguments[1];this.x=g.y*y.w-y.y*g.w,this.y=y.x*g.w-g.x*y.w,this.w=g.x*y.y-y.x*g.y}else if(arguments[0]instanceof et&&arguments[1]instanceof et){var k=arguments[0],D=arguments[1];this.x=k.y-D.y,this.y=D.x-k.x,this.w=k.x*D.y-D.x*k.y}}else if(arguments.length===3){var B=arguments[0],J=arguments[1],mt=arguments[2];this.x=B,this.y=J,this.w=mt}else if(arguments.length===4){var kt=arguments[0],zt=arguments[1],jt=arguments[2],re=arguments[3],oe=kt.y-zt.y,Ie=zt.x-kt.x,xe=kt.x*zt.y-zt.x*kt.y,Ue=jt.y-re.y,Qe=re.x-jt.x,wn=jt.x*re.y-re.x*jt.y;this.x=Ie*wn-Qe*xe,this.y=Ue*xe-oe*wn,this.w=oe*Qe-Ue*Ie}}}])})(),Qo=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"area",value:function(){return c.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return c.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(r){if(r===null)throw new tt("Supplied point is null.");return c.interpolateZ(r,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return c.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return c.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return c.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return c.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return c.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return c.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var r=arguments[0],s=arguments[1],l=arguments[2];this.p0=r,this.p1=s,this.p2=l}},{key:"area",value:function(r,s,l){return Math.abs(((l.x-r.x)*(s.y-r.y)-(s.x-r.x)*(l.y-r.y))/2)}},{key:"signedArea",value:function(r,s,l){return((l.x-r.x)*(s.y-r.y)-(s.x-r.x)*(l.y-r.y))/2}},{key:"det",value:function(r,s,l,g){return r*g-s*l}},{key:"interpolateZ",value:function(r,s,l,g){var y=s.x,k=s.y,D=l.x-y,B=g.x-y,J=l.y-k,mt=g.y-k,kt=D*mt-B*J,zt=r.x-y,jt=r.y-k,re=(mt*zt-B*jt)/kt,oe=(-J*zt+D*jt)/kt;return s.getZ()+re*(l.getZ()-s.getZ())+oe*(g.getZ()-s.getZ())}},{key:"longestSideLength",value:function(r,s,l){var g=r.distance(s),y=s.distance(l),k=l.distance(r),D=g;return y>D&&(D=y),k>D&&(D=k),D}},{key:"circumcentreDD",value:function(r,s,l){var g=Gt.valueOf(r.x).subtract(l.x),y=Gt.valueOf(r.y).subtract(l.y),k=Gt.valueOf(s.x).subtract(l.x),D=Gt.valueOf(s.y).subtract(l.y),B=Gt.determinant(g,y,k,D).multiply(2),J=g.sqr().add(y.sqr()),mt=k.sqr().add(D.sqr()),kt=Gt.determinant(y,J,D,mt),zt=Gt.determinant(g,J,k,mt),jt=Gt.valueOf(l.x).subtract(kt.divide(B)).doubleValue(),re=Gt.valueOf(l.y).add(zt.divide(B)).doubleValue();return new et(jt,re)}},{key:"isAcute",value:function(r,s,l){return!!gn.isAcute(r,s,l)&&!!gn.isAcute(s,l,r)&&!!gn.isAcute(l,r,s)}},{key:"circumcentre",value:function(r,s,l){var g=l.x,y=l.y,k=r.x-g,D=r.y-y,B=s.x-g,J=s.y-y,mt=2*c.det(k,D,B,J),kt=c.det(D,k*k+D*D,J,B*B+J*J),zt=c.det(k,k*k+D*D,B,B*B+J*J);return new et(g-kt/mt,y+zt/mt)}},{key:"perpendicularBisector",value:function(r,s){var l=s.x-r.x,g=s.y-r.y,y=new Jo(r.x+l/2,r.y+g/2,1),k=new Jo(r.x-g+l/2,r.y+l+g/2,1);return new Jo(y,k)}},{key:"angleBisector",value:function(r,s,l){var g=s.distance(r),y=g/(g+s.distance(l)),k=l.x-r.x,D=l.y-r.y;return new et(r.x+y*k,r.y+y*D)}},{key:"area3D",value:function(r,s,l){var g=s.x-r.x,y=s.y-r.y,k=s.getZ()-r.getZ(),D=l.x-r.x,B=l.y-r.y,J=l.getZ()-r.getZ(),mt=y*J-k*B,kt=k*D-g*J,zt=g*B-y*D,jt=mt*mt+kt*kt+zt*zt,re=Math.sqrt(jt)/2;return re}},{key:"centroid",value:function(r,s,l){var g=(r.x+s.x+l.x)/3,y=(r.y+s.y+l.y)/3;return new et(g,y)}},{key:"inCentre",value:function(r,s,l){var g=s.distance(l),y=r.distance(l),k=r.distance(s),D=g+y+k,B=(g*r.x+y*s.x+k*l.x)/D,J=(g*r.y+y*s.y+k*l.y)/D;return new et(B,J)}}])})(),ta=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"addRingSide",value:function(c,r,s,l,g){if(r===0&&c.length<dn.MINIMUM_VALID_SIZE)return null;var y=l,k=g;c.length>=dn.MINIMUM_VALID_SIZE&&$t.isCCW(c)&&(y=g,k=l,s=ft.opposite(s));var D=this._curveBuilder.getRingCurve(c,s,r);this.addCurve(D,y,k)}},{key:"addRingBothSides",value:function(c,r){this.addRingSide(c,r,ft.LEFT,T.EXTERIOR,T.INTERIOR),this.addRingSide(c,r,ft.RIGHT,T.INTERIOR,T.EXTERIOR)}},{key:"addPoint",value:function(c){if(this._distance<=0)return null;var r=c.getCoordinates(),s=this._curveBuilder.getLineCurve(r,this._distance);this.addCurve(s,T.EXTERIOR,T.INTERIOR)}},{key:"addPolygon",value:function(c){var r=this._distance,s=ft.LEFT;this._distance<0&&(r=-this._distance,s=ft.RIGHT);var l=c.getExteriorRing(),g=Je.removeRepeatedPoints(l.getCoordinates());if(this._distance<0&&this.isErodedCompletely(l,this._distance)||this._distance<=0&&g.length<3)return null;this.addRingSide(g,r,s,T.EXTERIOR,T.INTERIOR);for(var y=0;y<c.getNumInteriorRing();y++){var k=c.getInteriorRingN(y),D=Je.removeRepeatedPoints(k.getCoordinates());this._distance>0&&this.isErodedCompletely(k,-this._distance)||this.addRingSide(D,r,ft.opposite(s),T.INTERIOR,T.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(c,r){var s=new Qo(c[0],c[1],c[2]),l=s.inCentre();return fn.pointToSegment(l,s.p0,s.p1)<Math.abs(r)}},{key:"addLineString",value:function(c){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var r=Je.removeRepeatedPoints(c.getCoordinates());if(Je.isRing(r)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(r,this._distance);else{var s=this._curveBuilder.getLineCurve(r,this._distance);this.addCurve(s,T.EXTERIOR,T.INTERIOR)}}},{key:"addCurve",value:function(c,r,s){if(c===null||c.length<2)return null;var l=new Ui(c,new Un(0,T.BOUNDARY,r,s));this._curveList.add(l)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(c){if(c.isEmpty())return null;if(c instanceof On)this.addPolygon(c);else if(c instanceof Ke)this.addLineString(c);else if(c instanceof xn)this.addPoint(c);else if(c instanceof Bi)this.addCollection(c);else if(c instanceof Ki)this.addCollection(c);else if(c instanceof xs)this.addCollection(c);else{if(!(c instanceof Te))throw new gt(c.getGeometryType());this.addCollection(c)}}},{key:"isErodedCompletely",value:function(c,r){var s=c.getCoordinates();if(s.length<4)return r<0;if(s.length===4)return this.isTriangleErodedCompletely(s,r);var l=c.getEnvelopeInternal(),g=Math.min(l.getHeight(),l.getWidth());return r<0&&2*Math.abs(r)>g}},{key:"addCollection",value:function(c){for(var r=0;r<c.getNumGeometries();r++){var s=c.getGeometryN(r);this.add(s)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Kt;var c=arguments[0],r=arguments[1],s=arguments[2];this._inputGeom=c,this._distance=r,this._curveBuilder=s}}])})(),uc=(function(){return f((function c(){o(this,c)}),[{key:"locate",value:function(c){}}])})(),lc=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,c.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new dt;var r=this._parent.getGeometryN(this._index++);return r instanceof Te?(this._subcollectionIterator=new c(r),this._subcollectionIterator.next()):r}},{key:"remove",value:function(){throw new gt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[oc]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var r=arguments[0];this._parent=r,this._atStart=!0,this._index=0,this._max=r.getNumGeometries()}},{key:"isAtomic",value:function(r){return!(r instanceof Te)}}])})(),lu=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"locate",value:function(r){return c.locate(r,this._geom)}},{key:"interfaces_",get:function(){return[uc]}}],[{key:"constructor_",value:function(){this._geom=null;var r=arguments[0];this._geom=r}},{key:"locatePointInPolygon",value:function(r,s){if(s.isEmpty())return T.EXTERIOR;var l=s.getExteriorRing(),g=c.locatePointInRing(r,l);if(g!==T.INTERIOR)return g;for(var y=0;y<s.getNumInteriorRing();y++){var k=s.getInteriorRingN(y),D=c.locatePointInRing(r,k);if(D===T.BOUNDARY)return T.BOUNDARY;if(D===T.INTERIOR)return T.EXTERIOR}return T.INTERIOR}},{key:"locatePointInRing",value:function(r,s){return s.getEnvelopeInternal().intersects(r)?Ji.locateInRing(r,s.getCoordinates()):T.EXTERIOR}},{key:"containsPointInPolygon",value:function(r,s){return T.EXTERIOR!==c.locatePointInPolygon(r,s)}},{key:"locateInGeometry",value:function(r,s){if(s instanceof On)return c.locatePointInPolygon(r,s);if(s instanceof Te)for(var l=new lc(s);l.hasNext();){var g=l.next();if(g!==s){var y=c.locateInGeometry(r,g);if(y!==T.EXTERIOR)return y}}return T.EXTERIOR}},{key:"isContained",value:function(r,s){return T.EXTERIOR!==c.locate(r,s)}},{key:"locate",value:function(r,s){return s.isEmpty()?T.EXTERIOR:s.getEnvelopeInternal().intersects(r)?c.locateInGeometry(r,s):T.EXTERIOR}}])})(),cc=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getNextCW",value:function(c){this.getEdges();var r=this._edgeList.indexOf(c),s=r-1;return r===0&&(s=this._edgeList.size()-1),this._edgeList.get(s)}},{key:"propagateSideLabels",value:function(c){for(var r=T.NONE,s=this.iterator();s.hasNext();){var l=s.next().getLabel();l.isArea(c)&&l.getLocation(c,ft.LEFT)!==T.NONE&&(r=l.getLocation(c,ft.LEFT))}if(r===T.NONE)return null;for(var g=r,y=this.iterator();y.hasNext();){var k=y.next(),D=k.getLabel();if(D.getLocation(c,ft.ON)===T.NONE&&D.setLocation(c,ft.ON,g),D.isArea(c)){var B=D.getLocation(c,ft.LEFT),J=D.getLocation(c,ft.RIGHT);if(J!==T.NONE){if(J!==g)throw new Le("side location conflict",k.getCoordinate());B===T.NONE&&Et.shouldNeverReachHere("found single null side (at "+k.getCoordinate()+")"),g=B}else Et.isTrue(D.getLocation(c,ft.LEFT)===T.NONE,"found single null side"),D.setLocation(c,ft.RIGHT,g),D.setLocation(c,ft.LEFT,g)}}}},{key:"getCoordinate",value:function(){var c=this.iterator();return c.hasNext()?c.next().getCoordinate():null}},{key:"print",value:function(c){tn.out.println("EdgeEndStar:   "+this.getCoordinate());for(var r=this.iterator();r.hasNext();)r.next().print(c)}},{key:"isAreaLabelsConsistent",value:function(c){return this.computeEdgeEndLabels(c.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(c){var r=this.getEdges();if(r.size()<=0)return!0;var s=r.size()-1,l=r.get(s).getLabel().getLocation(c,ft.LEFT);Et.isTrue(l!==T.NONE,"Found unlabelled area edge");for(var g=l,y=this.iterator();y.hasNext();){var k=y.next().getLabel();Et.isTrue(k.isArea(c),"Found non-area edge");var D=k.getLocation(c,ft.LEFT),B=k.getLocation(c,ft.RIGHT);if(D===B||B!==g)return!1;g=D}return!0}},{key:"findIndex",value:function(c){this.iterator();for(var r=0;r<this._edgeList.size();r++)if(this._edgeList.get(r)===c)return r;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new Kt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(c,r,s){return this._ptInAreaLocation[c]===T.NONE&&(this._ptInAreaLocation[c]=lu.locate(r,s[c].getGeometry())),this._ptInAreaLocation[c]}},{key:"toString",value:function(){var c=new Xt;c.append("EdgeEndStar:   "+this.getCoordinate()),c.append(`
`);for(var r=this.iterator();r.hasNext();){var s=r.next();c.append(s),c.append(`
`)}return c.toString()}},{key:"computeEdgeEndLabels",value:function(c){for(var r=this.iterator();r.hasNext();)r.next().computeLabel(c)}},{key:"computeLabelling",value:function(c){this.computeEdgeEndLabels(c[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var r=[!1,!1],s=this.iterator();s.hasNext();)for(var l=s.next().getLabel(),g=0;g<2;g++)l.isLine(g)&&l.getLocation(g)===T.BOUNDARY&&(r[g]=!0);for(var y=this.iterator();y.hasNext();)for(var k=y.next(),D=k.getLabel(),B=0;B<2;B++)if(D.isAnyNull(B)){var J=T.NONE;if(r[B])J=T.EXTERIOR;else{var mt=k.getCoordinate();J=this.getLocation(B,mt,c)}D.setAllLocationsIfNull(B,J)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(c,r){this._edgeMap.put(c,r),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new en,this._edgeList=null,this._ptInAreaLocation=[T.NONE,T.NONE]}}])})(),di=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var s=null,l=null,g=this._SCANNING_FOR_INCOMING,y=0;y<this._resultAreaEdgeList.size();y++){var k=this._resultAreaEdgeList.get(y),D=k.getSym();if(k.getLabel().isArea())switch(s===null&&k.isInResult()&&(s=k),g){case this._SCANNING_FOR_INCOMING:if(!D.isInResult())continue;l=D,g=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!k.isInResult())continue;l.setNext(k),g=this._SCANNING_FOR_INCOMING}}if(g===this._LINKING_TO_OUTGOING){if(s===null)throw new Le("no outgoing dirEdge found",this.getCoordinate());Et.isTrue(s.isInResult(),"unable to link last incoming dirEdge"),l.setNext(s)}}},{key:"insert",value:function(s){var l=s;this.insertEdgeEnd(l,l)}},{key:"getRightmostEdge",value:function(){var s=this.getEdges(),l=s.size();if(l<1)return null;var g=s.get(0);if(l===1)return g;var y=s.get(l-1),k=g.getQuadrant(),D=y.getQuadrant();return In.isNorthern(k)&&In.isNorthern(D)?g:In.isNorthern(k)||In.isNorthern(D)?g.getDy()!==0?g:y.getDy()!==0?y:(Et.shouldNeverReachHere("found two horizontal edges incident on node"),null):y}},{key:"print",value:function(s){tn.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var l=this.iterator();l.hasNext();){var g=l.next();s.print("out "),g.print(s),s.println(),s.print("in "),g.getSym().print(s),s.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Kt;for(var s=this.iterator();s.hasNext();){var l=s.next();(l.isInResult()||l.getSym().isInResult())&&this._resultAreaEdgeList.add(l)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(s){for(var l=this.iterator();l.hasNext();){var g=l.next().getLabel();g.setAllLocationsIfNull(0,s.getLocation(0)),g.setAllLocationsIfNull(1,s.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var s=null,l=null,g=this._edgeList.size()-1;g>=0;g--){var y=this._edgeList.get(g),k=y.getSym();l===null&&(l=k),s!==null&&k.setNext(s),s=y}l.setNext(s)}},{key:"computeDepths",value:function(){if(arguments.length===1){var s=arguments[0],l=this.findIndex(s),g=s.getDepth(ft.LEFT),y=s.getDepth(ft.RIGHT),k=this.computeDepths(l+1,this._edgeList.size(),g);if(this.computeDepths(0,l,k)!==y)throw new Le("depth mismatch at "+s.getCoordinate())}else if(arguments.length===3){for(var D=arguments[1],B=arguments[2],J=arguments[0];J<D;J++){var mt=this._edgeList.get(J);mt.setEdgeDepths(ft.RIGHT,B),B=mt.getDepth(ft.LEFT)}return B}}},{key:"mergeSymLabels",value:function(){for(var s=this.iterator();s.hasNext();){var l=s.next();l.getLabel().merge(l.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(s){for(var l=null,g=null,y=this._SCANNING_FOR_INCOMING,k=this._resultAreaEdgeList.size()-1;k>=0;k--){var D=this._resultAreaEdgeList.get(k),B=D.getSym();switch(l===null&&D.getEdgeRing()===s&&(l=D),y){case this._SCANNING_FOR_INCOMING:if(B.getEdgeRing()!==s)continue;g=B,y=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(D.getEdgeRing()!==s)continue;g.setNextMin(D),y=this._SCANNING_FOR_INCOMING}}y===this._LINKING_TO_OUTGOING&&(Et.isTrue(l!==null,"found null for first outgoing dirEdge"),Et.isTrue(l.getEdgeRing()===s,"unable to link last incoming dirEdge"),g.setNextMin(l))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var s=0,l=this.iterator();l.hasNext();)l.next().isInResult()&&s++;return s}if(arguments.length===1){for(var g=arguments[0],y=0,k=this.iterator();k.hasNext();)k.next().getEdgeRing()===g&&y++;return y}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var s=T.NONE,l=this.iterator();l.hasNext();){var g=l.next(),y=g.getSym();if(!g.isLineEdge()){if(g.isInResult()){s=T.INTERIOR;break}if(y.isInResult()){s=T.EXTERIOR;break}}}if(s===T.NONE)return null;for(var k=s,D=this.iterator();D.hasNext();){var B=D.next(),J=B.getSym();B.isLineEdge()?B.getEdge().setCovered(k===T.INTERIOR):(B.isInResult()&&(k=T.EXTERIOR),J.isInResult()&&(k=T.INTERIOR))}}},{key:"computeLabelling",value:function(s){P(r,"computeLabelling",this,1).call(this,s),this._label=new Un(T.NONE);for(var l=this.iterator();l.hasNext();)for(var g=l.next().getEdge().getLabel(),y=0;y<2;y++){var k=g.getLocation(y);k!==T.INTERIOR&&k!==T.BOUNDARY||this._label.setLocation(y,T.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(cc),jr=(function(c){function r(){return o(this,r),i(this,r)}return x(r,c),f(r,[{key:"createNode",value:function(s){return new ws(s,new di)}}])})(Vo),cu=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"compareTo",value:function(r){var s=r;return c.compareOriented(this._pts,this._orientation,s._pts,s._orientation)}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var r=arguments[0];this._pts=r,this._orientation=c.orientation(r)}},{key:"orientation",value:function(r){return Je.increasingDirection(r)===1}},{key:"compareOriented",value:function(r,s,l,g){for(var y=s?1:-1,k=g?1:-1,D=s?r.length:-1,B=g?l.length:-1,J=s?0:r.length-1,mt=g?0:l.length-1;;){var kt=r[J].compareTo(l[mt]);if(kt!==0)return kt;var zt=(J+=y)===D,jt=(mt+=k)===B;if(zt&&!jt)return-1;if(!zt&&jt)return 1;if(zt&&jt)return 0}}}])})(),Hi=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"print",value:function(c){c.print("MULTILINESTRING ( ");for(var r=0;r<this._edges.size();r++){var s=this._edges.get(r);r>0&&c.print(","),c.print("(");for(var l=s.getCoordinates(),g=0;g<l.length;g++)g>0&&c.print(","),c.print(l[g].x+" "+l[g].y);c.println(")")}c.print(")  ")}},{key:"addAll",value:function(c){for(var r=c.iterator();r.hasNext();)this.add(r.next())}},{key:"findEdgeIndex",value:function(c){for(var r=0;r<this._edges.size();r++)if(this._edges.get(r).equals(c))return r;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(c){return this._edges.get(c)}},{key:"findEqualEdge",value:function(c){var r=new cu(c.getCoordinates());return this._ocaMap.get(r)}},{key:"add",value:function(c){this._edges.add(c);var r=new cu(c.getCoordinates());this._ocaMap.put(r,c)}}],[{key:"constructor_",value:function(){this._edges=new Kt,this._ocaMap=new en}}])})(),hu=(function(){return f((function c(){o(this,c)}),[{key:"processIntersections",value:function(c,r,s,l){}},{key:"isDone",value:function(){}}])})(),$r=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"isTrivialIntersection",value:function(r,s,l,g){if(r===l&&this._li.getIntersectionNum()===1){if(c.isAdjacentSegments(s,g))return!0;if(r.isClosed()){var y=r.size()-1;if(s===0&&g===y||g===0&&s===y)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(r,s,l,g){if(r===l&&s===g)return null;this.numTests++;var y=r.getCoordinates()[s],k=r.getCoordinates()[s+1],D=l.getCoordinates()[g],B=l.getCoordinates()[g+1];this._li.computeIntersection(y,k,D,B),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(r,s,l,g)||(this._hasIntersection=!0,r.addIntersections(this._li,s,0),l.addIntersections(this._li,g,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[hu]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var r=arguments[0];this._li=r}},{key:"isAdjacentSegments",value:function(r,s){return Math.abs(r-s)===1}}])})(),hc=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(c){c.print(this.coord),c.print(" seg # = "+this.segmentIndex),c.println(" dist = "+this.dist)}},{key:"compareTo",value:function(c){var r=c;return this.compare(r.segmentIndex,r.dist)}},{key:"isEndPoint",value:function(c){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===c}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(c,r){return this.segmentIndex<c?-1:this.segmentIndex>c?1:this.dist<r?-1:this.dist>r?1:0}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var c=arguments[0],r=arguments[1],s=arguments[2];this.coord=new et(c),this.segmentIndex=r,this.dist=s}}])})(),Ts=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"print",value:function(c){c.println("Intersections:");for(var r=this.iterator();r.hasNext();)r.next().print(c)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(c){this.addEndpoints();for(var r=this.iterator(),s=r.next();r.hasNext();){var l=r.next(),g=this.createSplitEdge(s,l);c.add(g),s=l}}},{key:"addEndpoints",value:function(){var c=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[c],c,0)}},{key:"createSplitEdge",value:function(c,r){var s=r.segmentIndex-c.segmentIndex+2,l=this.edge.pts[r.segmentIndex],g=r.dist>0||!r.coord.equals2D(l);g||s--;var y=new Array(s).fill(null),k=0;y[k++]=new et(c.coord);for(var D=c.segmentIndex+1;D<=r.segmentIndex;D++)y[k++]=this.edge.pts[D];return g&&(y[k]=r.coord),new du(y,new Un(this.edge._label))}},{key:"add",value:function(c,r,s){var l=new hc(c,r,s),g=this._nodeMap.get(l);return g!==null?g:(this._nodeMap.put(l,l),l)}},{key:"isIntersection",value:function(c){for(var r=this.iterator();r.hasNext();)if(r.next().coord.equals(c))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new en,this.edge=null;var c=arguments[0];this.edge=c}}])})(),fu=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])||c.isTrue(this._matrix[T.INTERIOR][T.BOUNDARY])||c.isTrue(this._matrix[T.BOUNDARY][T.INTERIOR])||c.isTrue(this._matrix[T.BOUNDARY][T.BOUNDARY]))&&this._matrix[T.EXTERIOR][T.INTERIOR]===xt.FALSE&&this._matrix[T.EXTERIOR][T.BOUNDARY]===xt.FALSE}},{key:"isCoveredBy",value:function(){return(c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])||c.isTrue(this._matrix[T.INTERIOR][T.BOUNDARY])||c.isTrue(this._matrix[T.BOUNDARY][T.INTERIOR])||c.isTrue(this._matrix[T.BOUNDARY][T.BOUNDARY]))&&this._matrix[T.INTERIOR][T.EXTERIOR]===xt.FALSE&&this._matrix[T.BOUNDARY][T.EXTERIOR]===xt.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var r=arguments[0],s=0;s<r.length;s++){var l=Math.trunc(s/3),g=s%3;this._matrix[l][g]=xt.toDimensionValue(r.charAt(s))}else if(arguments.length===3){var y=arguments[0],k=arguments[1],D=arguments[2];this._matrix[y][k]=D}}},{key:"isContains",value:function(){return c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&this._matrix[T.EXTERIOR][T.INTERIOR]===xt.FALSE&&this._matrix[T.EXTERIOR][T.BOUNDARY]===xt.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var r=arguments[0],s=0;s<r.length;s++){var l=Math.trunc(s/3),g=s%3;this.setAtLeast(l,g,xt.toDimensionValue(r.charAt(s)))}else if(arguments.length===3){var y=arguments[0],k=arguments[1],D=arguments[2];this._matrix[y][k]<D&&(this._matrix[y][k]=D)}}},{key:"setAtLeastIfValid",value:function(r,s,l){r>=0&&s>=0&&this.setAtLeast(r,s,l)}},{key:"isWithin",value:function(){return c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&this._matrix[T.INTERIOR][T.EXTERIOR]===xt.FALSE&&this._matrix[T.BOUNDARY][T.EXTERIOR]===xt.FALSE}},{key:"isTouches",value:function(r,s){return r>s?this.isTouches(s,r):(r===xt.A&&s===xt.A||r===xt.L&&s===xt.L||r===xt.L&&s===xt.A||r===xt.P&&s===xt.A||r===xt.P&&s===xt.L)&&this._matrix[T.INTERIOR][T.INTERIOR]===xt.FALSE&&(c.isTrue(this._matrix[T.INTERIOR][T.BOUNDARY])||c.isTrue(this._matrix[T.BOUNDARY][T.INTERIOR])||c.isTrue(this._matrix[T.BOUNDARY][T.BOUNDARY]))}},{key:"isOverlaps",value:function(r,s){return r===xt.P&&s===xt.P||r===xt.A&&s===xt.A?c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&c.isTrue(this._matrix[T.INTERIOR][T.EXTERIOR])&&c.isTrue(this._matrix[T.EXTERIOR][T.INTERIOR]):r===xt.L&&s===xt.L&&this._matrix[T.INTERIOR][T.INTERIOR]===1&&c.isTrue(this._matrix[T.INTERIOR][T.EXTERIOR])&&c.isTrue(this._matrix[T.EXTERIOR][T.INTERIOR])}},{key:"isEquals",value:function(r,s){return r===s&&c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&this._matrix[T.INTERIOR][T.EXTERIOR]===xt.FALSE&&this._matrix[T.BOUNDARY][T.EXTERIOR]===xt.FALSE&&this._matrix[T.EXTERIOR][T.INTERIOR]===xt.FALSE&&this._matrix[T.EXTERIOR][T.BOUNDARY]===xt.FALSE}},{key:"toString",value:function(){for(var r=new yi("123456789"),s=0;s<3;s++)for(var l=0;l<3;l++)r.setCharAt(3*s+l,xt.toDimensionSymbol(this._matrix[s][l]));return r.toString()}},{key:"setAll",value:function(r){for(var s=0;s<3;s++)for(var l=0;l<3;l++)this._matrix[s][l]=r}},{key:"get",value:function(r,s){return this._matrix[r][s]}},{key:"transpose",value:function(){var r=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=r,r=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=r,r=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=r,this}},{key:"matches",value:function(r){if(r.length!==9)throw new tt("Should be length 9: "+r);for(var s=0;s<3;s++)for(var l=0;l<3;l++)if(!c.matches(this._matrix[s][l],r.charAt(3*s+l)))return!1;return!0}},{key:"add",value:function(r){for(var s=0;s<3;s++)for(var l=0;l<3;l++)this.setAtLeast(s,l,r.get(s,l))}},{key:"isDisjoint",value:function(){return this._matrix[T.INTERIOR][T.INTERIOR]===xt.FALSE&&this._matrix[T.INTERIOR][T.BOUNDARY]===xt.FALSE&&this._matrix[T.BOUNDARY][T.INTERIOR]===xt.FALSE&&this._matrix[T.BOUNDARY][T.BOUNDARY]===xt.FALSE}},{key:"isCrosses",value:function(r,s){return r===xt.P&&s===xt.L||r===xt.P&&s===xt.A||r===xt.L&&s===xt.A?c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&c.isTrue(this._matrix[T.INTERIOR][T.EXTERIOR]):r===xt.L&&s===xt.P||r===xt.A&&s===xt.P||r===xt.A&&s===xt.L?c.isTrue(this._matrix[T.INTERIOR][T.INTERIOR])&&c.isTrue(this._matrix[T.EXTERIOR][T.INTERIOR]):r===xt.L&&s===xt.L&&this._matrix[T.INTERIOR][T.INTERIOR]===0}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(xt.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var r=arguments[0];c.constructor_.call(this),this.set(r)}else if(arguments[0]instanceof c){var s=arguments[0];c.constructor_.call(this),this._matrix[T.INTERIOR][T.INTERIOR]=s._matrix[T.INTERIOR][T.INTERIOR],this._matrix[T.INTERIOR][T.BOUNDARY]=s._matrix[T.INTERIOR][T.BOUNDARY],this._matrix[T.INTERIOR][T.EXTERIOR]=s._matrix[T.INTERIOR][T.EXTERIOR],this._matrix[T.BOUNDARY][T.INTERIOR]=s._matrix[T.BOUNDARY][T.INTERIOR],this._matrix[T.BOUNDARY][T.BOUNDARY]=s._matrix[T.BOUNDARY][T.BOUNDARY],this._matrix[T.BOUNDARY][T.EXTERIOR]=s._matrix[T.BOUNDARY][T.EXTERIOR],this._matrix[T.EXTERIOR][T.INTERIOR]=s._matrix[T.EXTERIOR][T.INTERIOR],this._matrix[T.EXTERIOR][T.BOUNDARY]=s._matrix[T.EXTERIOR][T.BOUNDARY],this._matrix[T.EXTERIOR][T.EXTERIOR]=s._matrix[T.EXTERIOR][T.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var r=arguments[0],s=arguments[1];return s===xt.SYM_DONTCARE||s===xt.SYM_TRUE&&(r>=0||r===xt.TRUE)||s===xt.SYM_FALSE&&r===xt.FALSE||s===xt.SYM_P&&r===xt.P||s===xt.SYM_L&&r===xt.L||s===xt.SYM_A&&r===xt.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var l=arguments[1];return new c(arguments[0]).matches(l)}}},{key:"isTrue",value:function(r){return r>=0||r===xt.TRUE}}])})(),eo=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(r){return r===null||r.length===0?null:(this.ensureCapacity(this._size+r.length),tn.arraycopy(r,0,this._data,this._size,r.length),void(this._size+=r.length))}},{key:"ensureCapacity",value:function(r){if(r<=this._data.length)return null;var s=Math.max(r,2*this._data.length);this._data=ze.copyOf(this._data,s)}},{key:"toArray",value:function(){var r=new Array(this._size).fill(null);return tn.arraycopy(this._data,0,r,0,this._size),r}},{key:"add",value:function(r){this.ensureCapacity(this._size+1),this._data[this._size]=r,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)c.constructor_.call(this,10);else if(arguments.length===1){var r=arguments[0];this._data=new Array(r).fill(null)}}}])})(),fc=(function(){function c(){o(this,c)}return f(c,[{key:"getChainStartIndices",value:function(r){var s=0,l=new eo(Math.trunc(r.length/2));l.add(s);do{var g=this.findChainEnd(r,s);l.add(g),s=g}while(s<r.length-1);return l.toArray()}},{key:"findChainEnd",value:function(r,s){for(var l=In.quadrant(r[s],r[s+1]),g=s+1;g<r.length&&In.quadrant(r[g-1],r[g])===l;)g++;return g-1}},{key:"OLDgetChainStartIndices",value:function(r){var s=0,l=new Kt;l.add(s);do{var g=this.findChainEnd(r,s);l.add(g),s=g}while(s<r.length-1);return c.toIntArray(l)}}],[{key:"toIntArray",value:function(r){for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l).intValue();return s}}])})(),nr=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(c){var r=this.pts[this.startIndex[c]].x,s=this.pts[this.startIndex[c+1]].x;return r>s?r:s}},{key:"getMinX",value:function(c){var r=this.pts[this.startIndex[c]].x,s=this.pts[this.startIndex[c+1]].x;return r<s?r:s}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var c=arguments[0],r=arguments[1],s=arguments[2],l=arguments[3];this.computeIntersectsForChain(this.startIndex[c],this.startIndex[c+1],r,r.startIndex[s],r.startIndex[s+1],l)}else if(arguments.length===6){var g=arguments[0],y=arguments[1],k=arguments[2],D=arguments[3],B=arguments[4],J=arguments[5];if(y-g==1&&B-D==1)return J.addIntersections(this.e,g,k.e,D),null;if(!this.overlaps(g,y,k,D,B))return null;var mt=Math.trunc((g+y)/2),kt=Math.trunc((D+B)/2);g<mt&&(D<kt&&this.computeIntersectsForChain(g,mt,k,D,kt,J),kt<B&&this.computeIntersectsForChain(g,mt,k,kt,B,J)),mt<y&&(D<kt&&this.computeIntersectsForChain(mt,y,k,D,kt,J),kt<B&&this.computeIntersectsForChain(mt,y,k,kt,B,J))}}},{key:"overlaps",value:function(c,r,s,l,g){return Ft.intersects(this.pts[c],this.pts[r],s.pts[l],s.pts[g])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(c,r){for(var s=0;s<this.startIndex.length-1;s++)for(var l=0;l<c.startIndex.length-1;l++)this.computeIntersectsForChain(s,c,l,r)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var c=arguments[0];this.e=c,this.pts=c.getCoordinates();var r=new fc;this.startIndex=r.getChainStartIndices(this.pts)}}])})(),Is=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"getDepth",value:function(r,s){return this._depth[r][s]}},{key:"setDepth",value:function(r,s,l){this._depth[r][s]=l}},{key:"isNull",value:function(){if(arguments.length===0){for(var r=0;r<2;r++)for(var s=0;s<3;s++)if(this._depth[r][s]!==c.NULL_VALUE)return!1;return!0}if(arguments.length===1){var l=arguments[0];return this._depth[l][1]===c.NULL_VALUE}if(arguments.length===2){var g=arguments[0],y=arguments[1];return this._depth[g][y]===c.NULL_VALUE}}},{key:"normalize",value:function(){for(var r=0;r<2;r++)if(!this.isNull(r)){var s=this._depth[r][1];this._depth[r][2]<s&&(s=this._depth[r][2]),s<0&&(s=0);for(var l=1;l<3;l++){var g=0;this._depth[r][l]>s&&(g=1),this._depth[r][l]=g}}}},{key:"getDelta",value:function(r){return this._depth[r][ft.RIGHT]-this._depth[r][ft.LEFT]}},{key:"getLocation",value:function(r,s){return this._depth[r][s]<=0?T.EXTERIOR:T.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var r=arguments[0],s=0;s<2;s++)for(var l=1;l<3;l++){var g=r.getLocation(s,l);g!==T.EXTERIOR&&g!==T.INTERIOR||(this.isNull(s,l)?this._depth[s][l]=c.depthAtLocation(g):this._depth[s][l]+=c.depthAtLocation(g))}else if(arguments.length===3){var y=arguments[0],k=arguments[1];arguments[2]===T.INTERIOR&&this._depth[y][k]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var r=0;r<2;r++)for(var s=0;s<3;s++)this._depth[r][s]=c.NULL_VALUE}},{key:"depthAtLocation",value:function(r){return r===T.EXTERIOR?0:r===T.INTERIOR?1:c.NULL_VALUE}}])})();Is.NULL_VALUE=-1;var du=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var s=new Array(2).fill(null);return s[0]=this.pts[0],s[1]=this.pts[1],new r(s,Un.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(s){this._isIsolated=s}},{key:"setName",value:function(s){this._name=s}},{key:"equals",value:function(s){if(!(s instanceof r))return!1;var l=s;if(this.pts.length!==l.pts.length)return!1;for(var g=!0,y=!0,k=this.pts.length,D=0;D<this.pts.length;D++)if(this.pts[D].equals2D(l.pts[D])||(g=!1),this.pts[D].equals2D(l.pts[--k])||(y=!1),!g&&!y)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var s=arguments[0];return this.pts[s]}}},{key:"print",value:function(s){s.print("edge "+this._name+": "),s.print("LINESTRING (");for(var l=0;l<this.pts.length;l++)l>0&&s.print(","),s.print(this.pts[l].x+" "+this.pts[l].y);s.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(s){r.updateIM(this._label,s)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(s){s.print("edge "+this._name+": ");for(var l=this.pts.length-1;l>=0;l--)s.print(this.pts[l]+" ");s.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new nr(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Ft;for(var s=0;s<this.pts.length;s++)this._env.expandToInclude(this.pts[s])}return this._env}},{key:"addIntersection",value:function(s,l,g,y){var k=new et(s.getIntersection(y)),D=l,B=s.getEdgeDistance(g,y),J=D+1;if(J<this.pts.length){var mt=this.pts[J];k.equals2D(mt)&&(D=J,B=0)}this.eiList.add(k,D,B)}},{key:"toString",value:function(){var s=new yi;s.append("edge "+this._name+": "),s.append("LINESTRING (");for(var l=0;l<this.pts.length;l++)l>0&&s.append(","),s.append(this.pts[l].x+" "+this.pts[l].y);return s.append(")  "+this._label+" "+this._depthDelta),s.toString()}},{key:"isPointwiseEqual",value:function(s){if(this.pts.length!==s.pts.length)return!1;for(var l=0;l<this.pts.length;l++)if(!this.pts[l].equals2D(s.pts[l]))return!1;return!0}},{key:"setDepthDelta",value:function(s){this._depthDelta=s}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(s,l,g){for(var y=0;y<s.getIntersectionNum();y++)this.addIntersection(s,l,g,y)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Ts(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Is,this._depthDelta=0,arguments.length===1){var s=arguments[0];r.constructor_.call(this,s,null)}else if(arguments.length===2){var l=arguments[0],g=arguments[1];this.pts=l,this._label=g}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof fu&&arguments[0]instanceof Un))return P(r,"updateIM",this).apply(this,arguments);var s=arguments[0],l=arguments[1];l.setAtLeastIfValid(s.getLocation(0,ft.ON),s.getLocation(1,ft.ON),1),s.isArea()&&(l.setAtLeastIfValid(s.getLocation(0,ft.LEFT),s.getLocation(1,ft.LEFT),2),l.setAtLeastIfValid(s.getLocation(0,ft.RIGHT),s.getLocation(1,ft.RIGHT),2))}}])})(qe),no=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"setWorkingPrecisionModel",value:function(r){this._workingPrecisionModel=r}},{key:"insertUniqueEdge",value:function(r){var s=this._edgeList.findEqualEdge(r);if(s!==null){var l=s.getLabel(),g=r.getLabel();s.isPointwiseEqual(r)||(g=new Un(r.getLabel())).flip(),l.merge(g);var y=c.depthDelta(g),k=s.getDepthDelta()+y;s.setDepthDelta(k)}else this._edgeList.add(r),r.setDepthDelta(c.depthDelta(r.getLabel()))}},{key:"buildSubgraphs",value:function(r,s){for(var l=new Kt,g=r.iterator();g.hasNext();){var y=g.next(),k=y.getRightmostCoordinate(),D=new ti(l).getDepth(k);y.computeDepth(D),y.findResultEdges(),l.add(y),s.add(y.getDirectedEdges(),y.getNodes())}}},{key:"createSubgraphs",value:function(r){for(var s=new Kt,l=r.getNodes().iterator();l.hasNext();){var g=l.next();if(!g.isVisited()){var y=new cn;y.create(g),s.add(y)}}return kr.sort(s,kr.reverseOrder()),s}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(r){if(this._workingNoder!==null)return this._workingNoder;var s=new jo,l=new bi;return l.setPrecisionModel(r),s.setSegmentIntersector(new $r(l)),s}},{key:"buffer",value:function(r,s){var l=this._workingPrecisionModel;l===null&&(l=r.getPrecisionModel()),this._geomFact=r.getFactory();var g=new Cs(l,this._bufParams),y=new ta(r,s,g).getCurves();if(y.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(y,l),this._graph=new Ks(new jr),this._graph.addEdges(this._edgeList.getEdges());var k=this.createSubgraphs(this._graph),D=new nc(this._geomFact);this.buildSubgraphs(k,D);var B=D.getPolygons();return B.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(B)}},{key:"computeNodedEdges",value:function(r,s){var l=this.getNoder(s);l.computeNodes(r);for(var g=l.getNodedSubstrings().iterator();g.hasNext();){var y=g.next(),k=y.getCoordinates();if(k.length!==2||!k[0].equals2D(k[1])){var D=y.getData(),B=new du(y.getCoordinates(),new Un(D));this.insertUniqueEdge(B)}}}},{key:"setNoder",value:function(r){this._workingNoder=r}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hi;var r=arguments[0];this._bufParams=r}},{key:"depthDelta",value:function(r){var s=r.getLocation(0,ft.LEFT),l=r.getLocation(0,ft.RIGHT);return s===T.INTERIOR&&l===T.EXTERIOR?1:s===T.EXTERIOR&&l===T.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(r){for(var s=new si,l=new Kt;r.hasNext();){var g=r.next(),y=s.createLineString(g.getCoordinates());l.add(y)}return s.buildGeometry(l)}}])})(),dc=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"rescale",value:function(){if(Mt(arguments[0],Q))for(var r=arguments[0].iterator();r.hasNext();){var s=r.next();this.rescale(s.getCoordinates())}else if(arguments[0]instanceof Array){for(var l=arguments[0],g=0;g<l.length;g++)l[g].x=l[g].x/this._scaleFactor+this._offsetX,l[g].y=l[g].y/this._scaleFactor+this._offsetY;l.length===2&&l[0].equals2D(l[1])&&tn.out.println(l)}}},{key:"scale",value:function(){if(Mt(arguments[0],Q)){for(var r=arguments[0],s=new Kt(r.size()),l=r.iterator();l.hasNext();){var g=l.next();s.add(new Ui(this.scale(g.getCoordinates()),g.getData()))}return s}if(arguments[0]instanceof Array){for(var y=arguments[0],k=new Array(y.length).fill(null),D=0;D<y.length;D++)k[D]=new et(Math.round((y[D].x-this._offsetX)*this._scaleFactor),Math.round((y[D].y-this._offsetY)*this._scaleFactor),y[D].getZ());return Je.removeRepeatedPoints(k)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var r=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(r),r}},{key:"computeNodes",value:function(r){var s=r;this._isScaled&&(s=this.scale(r)),this._noder.computeNodes(s)}},{key:"interfaces_",get:function(){return[Yo]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var r=arguments[0],s=arguments[1];c.constructor_.call(this,r,s,0,0)}else if(arguments.length===4){var l=arguments[0],g=arguments[1];this._noder=l,this._scaleFactor=g,this._isScaled=!this.isIntegerPrecision()}}}])})(),Si=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();){var s=r.next().getCoordinates();this.checkEndPtVertexIntersections(s[0],this._segStrings),this.checkEndPtVertexIntersections(s[s.length-1],this._segStrings)}else if(arguments.length===2){for(var l=arguments[0],g=arguments[1].iterator();g.hasNext();)for(var y=g.next().getCoordinates(),k=1;k<y.length-1;k++)if(y[k].equals(l))throw new bt("found endpt/interior pt intersection at index "+k+" :pt "+l)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();)for(var s=r.next(),l=this._segStrings.iterator();l.hasNext();){var g=l.next();this.checkInteriorIntersections(s,g)}else if(arguments.length===2)for(var y=arguments[0],k=arguments[1],D=y.getCoordinates(),B=k.getCoordinates(),J=0;J<D.length-1;J++)for(var mt=0;mt<B.length-1;mt++)this.checkInteriorIntersections(y,J,k,mt);else if(arguments.length===4){var kt=arguments[0],zt=arguments[1],jt=arguments[2],re=arguments[3];if(kt===jt&&zt===re)return null;var oe=kt.getCoordinates()[zt],Ie=kt.getCoordinates()[zt+1],xe=jt.getCoordinates()[re],Ue=jt.getCoordinates()[re+1];if(this._li.computeIntersection(oe,Ie,xe,Ue),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,oe,Ie)||this.hasInteriorIntersection(this._li,xe,Ue)))throw new bt("found non-noded intersection at "+oe+"-"+Ie+" and "+xe+"-"+Ue)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var r=this._segStrings.iterator();r.hasNext();){var s=r.next();this.checkCollapses(s)}else if(arguments.length===1)for(var l=arguments[0].getCoordinates(),g=0;g<l.length-2;g++)this.checkCollapse(l[g],l[g+1],l[g+2])}},{key:"hasInteriorIntersection",value:function(r,s,l){for(var g=0;g<r.getIntersectionNum();g++){var y=r.getIntersection(g);if(!y.equals(s)&&!y.equals(l))return!0}return!1}},{key:"checkCollapse",value:function(r,s,l){if(r.equals(l))throw new bt("found non-noded collapse at "+c.fact.createLineString([r,s,l]))}}],[{key:"constructor_",value:function(){this._li=new bi,this._segStrings=null;var r=arguments[0];this._segStrings=r}}])})();Si.fact=new si;var ea=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"intersectsScaled",value:function(r,s){var l=Math.min(r.x,s.x),g=Math.max(r.x,s.x),y=Math.min(r.y,s.y),k=Math.max(r.y,s.y),D=this._maxx<l||this._minx>g||this._maxy<y||this._miny>k;if(D)return!1;var B=this.intersectsToleranceSquare(r,s);return Et.isTrue(!(D&&B),"Found bad envelope test"),B}},{key:"initCorners",value:function(r){var s=.5;this._minx=r.x-s,this._maxx=r.x+s,this._miny=r.y-s,this._maxy=r.y+s,this._corner[0]=new et(this._maxx,this._maxy),this._corner[1]=new et(this._minx,this._maxy),this._corner[2]=new et(this._minx,this._miny),this._corner[3]=new et(this._maxx,this._miny)}},{key:"intersects",value:function(r,s){return this._scaleFactor===1?this.intersectsScaled(r,s):(this.copyScaled(r,this._p0Scaled),this.copyScaled(s,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(r){return Math.round(r*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(r,s){s.x=this.scale(r.x),s.y=this.scale(r.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var r=c.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ft(this._originalPt.x-r,this._originalPt.x+r,this._originalPt.y-r,this._originalPt.y+r)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(r,s){return this._li.computeIntersection(r,s,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(r,s,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(r,s,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(r,s,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(r,s){var l=!1,g=!1;return this._li.computeIntersection(r,s,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(r,s,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(l=!0),this._li.computeIntersection(r,s,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(g=!0),this._li.computeIntersection(r,s,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!l||!g)||!!r.equals(this._pt)||!!s.equals(this._pt))))}},{key:"addSnappedNode",value:function(r,s){var l=r.getCoordinate(s),g=r.getCoordinate(s+1);return!!this.intersects(l,g)&&(r.addIntersection(this.getCoordinate(),s),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var r=arguments[0],s=arguments[1],l=arguments[2];if(this._originalPt=r,this._pt=r,this._scaleFactor=s,this._li=l,s<=0)throw new tt("Scale factor must be non-zero");s!==1&&(this._pt=new et(this.scale(r.x),this.scale(r.y)),this._p0Scaled=new et,this._p1Scaled=new et),this.initCorners(this._pt)}}])})();ea.SAFE_ENV_EXPANSION_FACTOR=.75;var Xr=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var c=arguments[1];arguments[0].getLineSegment(c,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new Qn}}])})(),gu=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"snap",value:function(){if(arguments.length===1){var c=arguments[0];return this.snap(c,null,-1)}if(arguments.length===3){var r=arguments[0],s=arguments[1],l=arguments[2],g=r.getSafeEnvelope(),y=new Ci(r,s,l);return this._index.query(g,new((function(){return f((function k(){o(this,k)}),[{key:"interfaces_",get:function(){return[ru]}},{key:"visitItem",value:function(k){k.select(g,y)}}])})())),y.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var c=arguments[0];this._index=c}}])})(),Ci=(function(c){function r(){var s;return o(this,r),s=i(this,r),r.constructor_.apply(s,arguments),s}return x(r,c),f(r,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Wo))return P(r,"select",this,1).apply(this,arguments);var s=arguments[1],l=arguments[0].getContext();if(this._parentEdge===l&&(s===this._hotPixelVertexIndex||s+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(l,s)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var s=arguments[0],l=arguments[1],g=arguments[2];this._hotPixel=s,this._parentEdge=l,this._hotPixelVertexIndex=g}}])})(Xr);gu.HotPixelSnapAction=Ci;var io=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"processIntersections",value:function(c,r,s,l){if(c===s&&r===l)return null;var g=c.getCoordinates()[r],y=c.getCoordinates()[r+1],k=s.getCoordinates()[l],D=s.getCoordinates()[l+1];if(this._li.computeIntersection(g,y,k,D),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var B=0;B<this._li.getIntersectionNum();B++)this._interiorIntersections.add(this._li.getIntersection(B));c.addIntersections(this._li,r,0),s.addIntersections(this._li,l,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[hu]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var c=arguments[0];this._li=c,this._interiorIntersections=new Kt}}])})(),pu=(function(){return f((function c(){o(this,c),c.constructor_.apply(this,arguments)}),[{key:"checkCorrectness",value:function(c){var r=Ui.getNodedSubstrings(c),s=new Si(r);try{s.checkValid()}catch(l){if(!(l instanceof ct))throw l;l.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Ui.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(c,r){var s=this.findInteriorIntersections(c,r);this.computeIntersectionSnaps(s),this.computeVertexSnaps(c)}},{key:"findInteriorIntersections",value:function(c,r){var s=new io(r);return this._noder.setSegmentIntersector(s),this._noder.computeNodes(c),s.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Mt(arguments[0],Q))for(var c=arguments[0].iterator();c.hasNext();){var r=c.next();this.computeVertexSnaps(r)}else if(arguments[0]instanceof Ui)for(var s=arguments[0],l=s.getCoordinates(),g=0;g<l.length;g++){var y=new ea(l[g],this._scaleFactor,this._li);this._pointSnapper.snap(y,s,g)&&s.addIntersection(l[g],g)}}},{key:"computeNodes",value:function(c){this._nodedSegStrings=c,this._noder=new jo,this._pointSnapper=new gu(this._noder.getIndex()),this.snapRound(c,this._li)}},{key:"computeIntersectionSnaps",value:function(c){for(var r=c.iterator();r.hasNext();){var s=r.next(),l=new ea(s,this._scaleFactor,this._li);this._pointSnapper.snap(l)}}},{key:"interfaces_",get:function(){return[Yo]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var c=arguments[0];this._pm=c,this._li=new bi,this._li.setPrecisionModel(c),this._scaleFactor=c.getScale()}}])})(),ir=(function(){function c(){o(this,c),c.constructor_.apply(this,arguments)}return f(c,[{key:"bufferFixedPrecision",value:function(r){var s=new dc(new pu(new bn(1)),r.getScale()),l=new no(this._bufParams);l.setWorkingPrecisionModel(r),l.setNoder(s),this._resultGeometry=l.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var r=c.MAX_PRECISION_DIGITS;r>=0;r--){try{this.bufferReducedPrecision(r)}catch(y){if(!(y instanceof Le))throw y;this._saveException=y}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var s=arguments[0],l=c.precisionScaleFactor(this._argGeom,this._distance,s),g=new bn(l);this.bufferFixedPrecision(g)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var r=this._argGeom.getFactory().getPrecisionModel();r.getType()===bn.FIXED?this.bufferFixedPrecision(r):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(r){this._bufParams.setQuadrantSegments(r)}},{key:"bufferOriginalPrecision",value:function(){try{var r=new no(this._bufParams);this._resultGeometry=r.buffer(this._argGeom,this._distance)}catch(s){if(!(s instanceof bt))throw s;this._saveException=s}}},{key:"getResultGeometry",value:function(r){return this._distance=r,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(r){this._bufParams.setEndCapStyle(r)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new nt,this._resultGeometry=null,this._saveException=null,arguments.length===1){var r=arguments[0];this._argGeom=r}else if(arguments.length===2){var s=arguments[0],l=arguments[1];this._argGeom=s,this._bufParams=l}}},{key:"bufferOp",value:function(){if(arguments.length===2){var r=arguments[1];return new c(arguments[0]).getResultGeometry(r)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ct&&typeof arguments[1]=="number"){var s=arguments[1],l=arguments[2],g=new c(arguments[0]);return g.setQuadrantSegments(l),g.getResultGeometry(s)}if(arguments[2]instanceof nt&&arguments[0]instanceof Ct&&typeof arguments[1]=="number"){var y=arguments[1];return new c(arguments[0],arguments[2]).getResultGeometry(y)}}else if(arguments.length===4){var k=arguments[1],D=arguments[2],B=arguments[3],J=new c(arguments[0]);return J.setQuadrantSegments(D),J.setEndCapStyle(B),J.getResultGeometry(k)}}},{key:"precisionScaleFactor",value:function(r,s,l){var g=r.getEnvelopeInternal(),y=je.max(Math.abs(g.getMaxX()),Math.abs(g.getMaxY()),Math.abs(g.getMinX()),Math.abs(g.getMinY()))+2*(s>0?s:0),k=l-Math.trunc(Math.log(y)/Math.log(10)+1);return Math.pow(10,k)}}])})();ir.CAP_ROUND=nt.CAP_ROUND,ir.CAP_BUTT=nt.CAP_FLAT,ir.CAP_FLAT=nt.CAP_FLAT,ir.CAP_SQUARE=nt.CAP_SQUARE,ir.MAX_PRECISION_DIGITS=12;var ro=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],so=(function(){return f((function c(r){o(this,c),this.geometryFactory=r||new si}),[{key:"read",value:function(c){var r,s=(r=typeof c=="string"?JSON.parse(c):c).type;if(!Rn[s])throw new Error("Unknown GeoJSON type: "+r.type);return ro.indexOf(s)!==-1?Rn[s].call(this,r.coordinates):s==="GeometryCollection"?Rn[s].call(this,r.geometries):Rn[s].call(this,r)}},{key:"write",value:function(c){var r=c.getGeometryType();if(!Fn[r])throw new Error("Geometry is not supported");return Fn[r].call(this,c)}}])})(),Rn={Feature:function(c){var r={};for(var s in c)r[s]=c[s];if(c.geometry){var l=c.geometry.type;if(!Rn[l])throw new Error("Unknown GeoJSON type: "+c.type);r.geometry=this.read(c.geometry)}return c.bbox&&(r.bbox=Rn.bbox.call(this,c.bbox)),r},FeatureCollection:function(c){var r={};if(c.features){r.features=[];for(var s=0;s<c.features.length;++s)r.features.push(this.read(c.features[s]))}return c.bbox&&(r.bbox=this.parse.bbox.call(this,c.bbox)),r},coordinates:function(c){for(var r=[],s=0;s<c.length;++s){var l=c[s];r.push(u(et,N(l)))}return r},bbox:function(c){return this.geometryFactory.createLinearRing([new et(c[0],c[1]),new et(c[2],c[1]),new et(c[2],c[3]),new et(c[0],c[3]),new et(c[0],c[1])])},Point:function(c){var r=u(et,N(c));return this.geometryFactory.createPoint(r)},MultiPoint:function(c){for(var r=[],s=0;s<c.length;++s)r.push(Rn.Point.call(this,c[s]));return this.geometryFactory.createMultiPoint(r)},LineString:function(c){var r=Rn.coordinates.call(this,c);return this.geometryFactory.createLineString(r)},MultiLineString:function(c){for(var r=[],s=0;s<c.length;++s)r.push(Rn.LineString.call(this,c[s]));return this.geometryFactory.createMultiLineString(r)},Polygon:function(c){for(var r=Rn.coordinates.call(this,c[0]),s=this.geometryFactory.createLinearRing(r),l=[],g=1;g<c.length;++g){var y=c[g],k=Rn.coordinates.call(this,y),D=this.geometryFactory.createLinearRing(k);l.push(D)}return this.geometryFactory.createPolygon(s,l)},MultiPolygon:function(c){for(var r=[],s=0;s<c.length;++s){var l=c[s];r.push(Rn.Polygon.call(this,l))}return this.geometryFactory.createMultiPolygon(r)},GeometryCollection:function(c){for(var r=[],s=0;s<c.length;++s){var l=c[s];r.push(this.read(l))}return this.geometryFactory.createGeometryCollection(r)}},Fn={coordinate:function(c){var r=[c.x,c.y];return c.z&&r.push(c.z),c.m&&r.push(c.m),r},Point:function(c){return{type:"Point",coordinates:Fn.coordinate.call(this,c.getCoordinate())}},MultiPoint:function(c){for(var r=[],s=0;s<c._geometries.length;++s){var l=c._geometries[s],g=Fn.Point.call(this,l);r.push(g.coordinates)}return{type:"MultiPoint",coordinates:r}},LineString:function(c){for(var r=[],s=c.getCoordinates(),l=0;l<s.length;++l){var g=s[l];r.push(Fn.coordinate.call(this,g))}return{type:"LineString",coordinates:r}},MultiLineString:function(c){for(var r=[],s=0;s<c._geometries.length;++s){var l=c._geometries[s],g=Fn.LineString.call(this,l);r.push(g.coordinates)}return{type:"MultiLineString",coordinates:r}},Polygon:function(c){var r=[],s=Fn.LineString.call(this,c._shell);r.push(s.coordinates);for(var l=0;l<c._holes.length;++l){var g=c._holes[l],y=Fn.LineString.call(this,g);r.push(y.coordinates)}return{type:"Polygon",coordinates:r}},MultiPolygon:function(c){for(var r=[],s=0;s<c._geometries.length;++s){var l=c._geometries[s],g=Fn.Polygon.call(this,l);r.push(g.coordinates)}return{type:"MultiPolygon",coordinates:r}},GeometryCollection:function(c){for(var r=[],s=0;s<c._geometries.length;++s){var l=c._geometries[s],g=l.getGeometryType();r.push(Fn[g].call(this,l))}return{type:"GeometryCollection",geometries:r}}};return{BufferOp:ir,GeoJSONReader:(function(){return f((function c(r){o(this,c),this.parser=new so(r||new si)}),[{key:"read",value:function(c){return this.parser.read(c)}}])})(),GeoJSONWriter:(function(){return f((function c(){o(this,c),this.parser=new so(this.geometryFactory)}),[{key:"write",value:function(c){return this.parser.write(c)}}])})()}}))})(ju)),ju.exports}var rx=ix();const sx=$l(rx);function vs(){return new ml}function ml(){this.reset()}ml.prototype={constructor:ml,reset:function(){this.s=this.t=0},add:function(e){cd(ku,e,this.t),cd(this,ku.s,this.s),this.s?this.t+=ku.t:this.s=ku.t},valueOf:function(){return this.s}};var ku=new ml;function cd(e,t,n){var i=e.s=t+n,o=i-t,u=i-o;e.t=t-u+(n-o)}var Ye=1e-6,Oe=Math.PI,fr=Oe/2,hd=Oe/4,_r=Oe*2,Qr=180/Oe,Pi=Oe/180,Pn=Math.abs,ox=Math.atan,Lo=Math.atan2,rn=Math.cos,sn=Math.sin,Ro=Math.sqrt;function mm(e){return e>1?0:e<-1?Oe:Math.acos(e)}function Ws(e){return e>1?fr:e<-1?-fr:Math.asin(e)}function ba(){}function _l(e,t){e&&dd.hasOwnProperty(e.type)&&dd[e.type](e,t)}var fd={Feature:function(e,t){_l(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,o=n.length;++i<o;)_l(n[i].geometry,t)}},dd={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){lh(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)lh(n[i],t,0)},Polygon:function(e,t){gd(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)gd(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,o=n.length;++i<o;)_l(n[i],t)}};function lh(e,t,n){var i=-1,o=e.length-n,u;for(t.lineStart();++i<o;)u=e[i],t.point(u[0],u[1],u[2]);t.lineEnd()}function gd(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)lh(e[n],t,1);t.polygonEnd()}function ax(e,t){e&&fd.hasOwnProperty(e.type)?fd[e.type](e,t):_l(e,t)}vs();vs();function ch(e){return[Lo(e[1],e[0]),Ws(e[2])]}function Do(e){var t=e[0],n=e[1],i=rn(n);return[i*rn(t),i*sn(t),sn(n)]}function Su(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vl(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Dc(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Cu(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function hh(e){var t=Ro(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}vs();function _m(e,t){function n(i,o){return i=e(i,o),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,o){return i=t.invert(i,o),i&&e.invert(i[0],i[1])}),n}function fh(e,t){return[e>Oe?e-_r:e<-Oe?e+_r:e,t]}fh.invert=fh;function ux(e,t,n){return(e%=_r)?t||n?_m(md(e),_d(t,n)):md(e):t||n?_d(t,n):fh}function pd(e){return function(t,n){return t+=e,[t>Oe?t-_r:t<-Oe?t+_r:t,n]}}function md(e){var t=pd(e);return t.invert=pd(-e),t}function _d(e,t){var n=rn(e),i=sn(e),o=rn(t),u=sn(t);function h(f,p){var _=rn(p),v=rn(f)*_,x=sn(f)*_,S=sn(p),C=S*n+v*i;return[Lo(x*o-C*u,v*n-S*i),Ws(C*o+x*u)]}return h.invert=function(f,p){var _=rn(p),v=rn(f)*_,x=sn(f)*_,S=sn(p),C=S*o-x*u;return[Lo(x*o+S*u,v*n+C*i),Ws(C*n-v*i)]},h}function lx(e,t,n,i,o,u){if(n){var h=rn(t),f=sn(t),p=i*n;o==null?(o=t+i*_r,u=t-p/2):(o=vd(h,o),u=vd(h,u),(i>0?o<u:o>u)&&(o+=i*_r));for(var _,v=o;i>0?v>u:v<u;v-=p)_=ch([h,-f*rn(v),-f*sn(v)]),e.point(_[0],_[1])}}function vd(e,t){t=Do(t),t[0]-=e,hh(t);var n=mm(-t[1]);return((-t[2]<0?-n:n)+_r-Ye)%_r}function vm(){var e=[],t;return{point:function(n,i){t.push([n,i])},lineStart:function(){e.push(t=[])},lineEnd:ba,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function cx(e,t,n,i,o,u){var h=e[0],f=e[1],p=t[0],_=t[1],v=0,x=1,S=p-h,C=_-f,P;if(P=n-h,!(!S&&P>0)){if(P/=S,S<0){if(P<v)return;P<x&&(x=P)}else if(S>0){if(P>x)return;P>v&&(v=P)}if(P=o-h,!(!S&&P<0)){if(P/=S,S<0){if(P>x)return;P>v&&(v=P)}else if(S>0){if(P<v)return;P<x&&(x=P)}if(P=i-f,!(!C&&P>0)){if(P/=C,C<0){if(P<v)return;P<x&&(x=P)}else if(C>0){if(P>x)return;P>v&&(v=P)}if(P=u-f,!(!C&&P<0)){if(P/=C,C<0){if(P>x)return;P>v&&(v=P)}else if(C>0){if(P<v)return;P<x&&(x=P)}return v>0&&(e[0]=h+v*S,e[1]=f+v*C),x<1&&(t[0]=h+x*S,t[1]=f+x*C),!0}}}}}function $u(e,t){return Pn(e[0]-t[0])<Ye&&Pn(e[1]-t[1])<Ye}function Tu(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ym(e,t,n,i,o){var u=[],h=[],f,p;if(e.forEach(function(P){if(!((N=P.length-1)<=0)){var N,O=P[0],j=P[N],U;if($u(O,j)){for(o.lineStart(),f=0;f<N;++f)o.point((O=P[f])[0],O[1]);o.lineEnd();return}u.push(U=new Tu(O,P,null,!0)),h.push(U.o=new Tu(O,null,U,!1)),u.push(U=new Tu(j,P,null,!1)),h.push(U.o=new Tu(j,null,U,!0))}}),!!u.length){for(h.sort(t),yd(u),yd(h),f=0,p=h.length;f<p;++f)h[f].e=n=!n;for(var _=u[0],v,x;;){for(var S=_,C=!0;S.v;)if((S=S.n)===_)return;v=S.z,o.lineStart();do{if(S.v=S.o.v=!0,S.e){if(C)for(f=0,p=v.length;f<p;++f)o.point((x=v[f])[0],x[1]);else i(S.x,S.n.x,1,o);S=S.n}else{if(C)for(v=S.p.z,f=v.length-1;f>=0;--f)o.point((x=v[f])[0],x[1]);else i(S.x,S.p.x,-1,o);S=S.p}S=S.o,v=S.z,C=!C}while(!S.v);o.lineEnd()}}}function yd(e){if(t=e.length){for(var t,n=0,i=e[0],o;++n<t;)i.n=o=e[n],o.p=i,i=o;i.n=o=e[0],o.p=i}}function xm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hx(e){return e.length===1&&(e=fx(e)),{left:function(t,n,i,o){for(i==null&&(i=0),o==null&&(o=t.length);i<o;){var u=i+o>>>1;e(t[u],n)<0?i=u+1:o=u}return i},right:function(t,n,i,o){for(i==null&&(i=0),o==null&&(o=t.length);i<o;){var u=i+o>>>1;e(t[u],n)>0?o=u:i=u+1}return i}}}function fx(e){return function(t,n){return xm(e(t),n)}}hx(xm);function bm(e){for(var t=e.length,n,i=-1,o=0,u,h;++i<t;)o+=e[i].length;for(u=new Array(o);--t>=0;)for(h=e[t],n=h.length;--n>=0;)u[--o]=h[n];return u}var wa=1e9,Iu=-wa;function dx(e,t,n,i){function o(_,v){return e<=_&&_<=n&&t<=v&&v<=i}function u(_,v,x,S){var C=0,P=0;if(_==null||(C=h(_,x))!==(P=h(v,x))||p(_,v)<0^x>0)do S.point(C===0||C===3?e:n,C>1?i:t);while((C=(C+x+4)%4)!==P);else S.point(v[0],v[1])}function h(_,v){return Pn(_[0]-e)<Ye?v>0?0:3:Pn(_[0]-n)<Ye?v>0?2:1:Pn(_[1]-t)<Ye?v>0?1:0:v>0?3:2}function f(_,v){return p(_.x,v.x)}function p(_,v){var x=h(_,1),S=h(v,1);return x!==S?x-S:x===0?v[1]-_[1]:x===1?_[0]-v[0]:x===2?_[1]-v[1]:v[0]-_[0]}return function(_){var v=_,x=vm(),S,C,P,N,O,j,U,nt,ct,tt,pt,st={point:E,lineStart:M,lineEnd:G,polygonStart:I,polygonEnd:R};function E(W,$){o(W,$)&&v.point(W,$)}function b(){for(var W=0,$=0,V=C.length;$<V;++$)for(var Y=C[$],ut=1,K=Y.length,it=Y[0],bt,wt,Et=it[0],Tt=it[1];ut<K;++ut)bt=Et,wt=Tt,it=Y[ut],Et=it[0],Tt=it[1],wt<=i?Tt>i&&(Et-bt)*(i-wt)>(Tt-wt)*(e-bt)&&++W:Tt<=i&&(Et-bt)*(i-wt)<(Tt-wt)*(e-bt)&&--W;return W}function I(){v=x,S=[],C=[],pt=!0}function R(){var W=b(),$=pt&&W,V=(S=bm(S)).length;($||V)&&(_.polygonStart(),$&&(_.lineStart(),u(null,null,1,_),_.lineEnd()),V&&ym(S,f,W,u,_),_.polygonEnd()),v=_,S=C=P=null}function M(){st.point=Z,C&&C.push(P=[]),tt=!0,ct=!1,U=nt=NaN}function G(){S&&(Z(N,O),j&&ct&&x.rejoin(),S.push(x.result())),st.point=E,ct&&v.lineEnd()}function Z(W,$){var V=o(W,$);if(C&&P.push([W,$]),tt)N=W,O=$,j=V,tt=!1,V&&(v.lineStart(),v.point(W,$));else if(V&&ct)v.point(W,$);else{var Y=[U=Math.max(Iu,Math.min(wa,U)),nt=Math.max(Iu,Math.min(wa,nt))],ut=[W=Math.max(Iu,Math.min(wa,W)),$=Math.max(Iu,Math.min(wa,$))];cx(Y,ut,e,t,n,i)?(ct||(v.lineStart(),v.point(Y[0],Y[1])),v.point(ut[0],ut[1]),V||v.lineEnd(),pt=!1):V&&(v.lineStart(),v.point(W,$),pt=!1)}U=W,nt=$,ct=V}return st}}var Nc=vs();function gx(e,t){var n=t[0],i=t[1],o=[sn(n),-rn(n),0],u=0,h=0;Nc.reset();for(var f=0,p=e.length;f<p;++f)if(v=(_=e[f]).length)for(var _,v,x=_[v-1],S=x[0],C=x[1]/2+hd,P=sn(C),N=rn(C),O=0;O<v;++O,S=U,P=ct,N=tt,x=j){var j=_[O],U=j[0],nt=j[1]/2+hd,ct=sn(nt),tt=rn(nt),pt=U-S,st=pt>=0?1:-1,E=st*pt,b=E>Oe,I=P*ct;if(Nc.add(Lo(I*st*sn(E),N*tt+I*rn(E))),u+=b?pt+st*_r:pt,b^S>=n^U>=n){var R=vl(Do(x),Do(j));hh(R);var M=vl(o,R);hh(M);var G=(b^pt>=0?-1:1)*Ws(M[2]);(i>G||i===G&&(R[0]||R[1]))&&(h+=b^pt>=0?1:-1)}}return(u<-Ye||u<Ye&&Nc<-Ye)^h&1}vs();function xd(e){return e}vs();vs();var No=1/0,yl=No,Ya=-No,xl=Ya,bd={point:px,lineStart:ba,lineEnd:ba,polygonStart:ba,polygonEnd:ba,result:function(){var e=[[No,yl],[Ya,xl]];return Ya=xl=-(yl=No=1/0),e}};function px(e,t){e<No&&(No=e),e>Ya&&(Ya=e),t<yl&&(yl=t),t>xl&&(xl=t)}vs();function wm(e,t,n,i){return function(o,u){var h=t(u),f=o.invert(i[0],i[1]),p=vm(),_=t(p),v=!1,x,S,C,P={point:N,lineStart:j,lineEnd:U,polygonStart:function(){P.point=nt,P.lineStart=ct,P.lineEnd=tt,S=[],x=[]},polygonEnd:function(){P.point=N,P.lineStart=j,P.lineEnd=U,S=bm(S);var pt=gx(x,f);S.length?(v||(u.polygonStart(),v=!0),ym(S,_x,pt,n,u)):pt&&(v||(u.polygonStart(),v=!0),u.lineStart(),n(null,null,1,u),u.lineEnd()),v&&(u.polygonEnd(),v=!1),S=x=null},sphere:function(){u.polygonStart(),u.lineStart(),n(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function N(pt,st){var E=o(pt,st);e(pt=E[0],st=E[1])&&u.point(pt,st)}function O(pt,st){var E=o(pt,st);h.point(E[0],E[1])}function j(){P.point=O,h.lineStart()}function U(){P.point=N,h.lineEnd()}function nt(pt,st){C.push([pt,st]);var E=o(pt,st);_.point(E[0],E[1])}function ct(){_.lineStart(),C=[]}function tt(){nt(C[0][0],C[0][1]),_.lineEnd();var pt=_.clean(),st=p.result(),E,b=st.length,I,R,M;if(C.pop(),x.push(C),C=null,!!b){if(pt&1){if(R=st[0],(I=R.length-1)>0){for(v||(u.polygonStart(),v=!0),u.lineStart(),E=0;E<I;++E)u.point((M=R[E])[0],M[1]);u.lineEnd()}return}b>1&&pt&2&&st.push(st.pop().concat(st.shift())),S.push(st.filter(mx))}}return P}}function mx(e){return e.length>1}function _x(e,t){return((e=e.x)[0]<0?e[1]-fr-Ye:fr-e[1])-((t=t.x)[0]<0?t[1]-fr-Ye:fr-t[1])}const wd=wm(function(){return!0},vx,xx,[-Oe,-fr]);function vx(e){var t=NaN,n=NaN,i=NaN,o;return{lineStart:function(){e.lineStart(),o=1},point:function(u,h){var f=u>0?Oe:-Oe,p=Pn(u-t);Pn(p-Oe)<Ye?(e.point(t,n=(n+h)/2>0?fr:-fr),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(u,n),o=0):i!==f&&p>=Oe&&(Pn(t-i)<Ye&&(t-=i*Ye),Pn(u-f)<Ye&&(u-=f*Ye),n=yx(t,n,u,h),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(f,n),o=0),e.point(t=u,n=h),i=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-o}}}function yx(e,t,n,i){var o,u,h=sn(e-n);return Pn(h)>Ye?ox((sn(t)*(u=rn(i))*sn(n)-sn(i)*(o=rn(t))*sn(e))/(o*u*h)):(t+i)/2}function xx(e,t,n,i){var o;if(e==null)o=n*fr,i.point(-Oe,o),i.point(0,o),i.point(Oe,o),i.point(Oe,0),i.point(Oe,-o),i.point(0,-o),i.point(-Oe,-o),i.point(-Oe,0),i.point(-Oe,o);else if(Pn(e[0]-t[0])>Ye){var u=e[0]<t[0]?Oe:-Oe;o=n*u/2,i.point(-u,o),i.point(0,o),i.point(u,o)}else i.point(t[0],t[1])}function bx(e,t){var n=rn(e),i=n>0,o=Pn(n)>Ye;function u(v,x,S,C){lx(C,e,t,S,v,x)}function h(v,x){return rn(v)*rn(x)>n}function f(v){var x,S,C,P,N;return{lineStart:function(){P=C=!1,N=1},point:function(O,j){var U=[O,j],nt,ct=h(O,j),tt=i?ct?0:_(O,j):ct?_(O+(O<0?Oe:-Oe),j):0;if(!x&&(P=C=ct)&&v.lineStart(),ct!==C&&(nt=p(x,U),(!nt||$u(x,nt)||$u(U,nt))&&(U[0]+=Ye,U[1]+=Ye,ct=h(U[0],U[1]))),ct!==C)N=0,ct?(v.lineStart(),nt=p(U,x),v.point(nt[0],nt[1])):(nt=p(x,U),v.point(nt[0],nt[1]),v.lineEnd()),x=nt;else if(o&&x&&i^ct){var pt;!(tt&S)&&(pt=p(U,x,!0))&&(N=0,i?(v.lineStart(),v.point(pt[0][0],pt[0][1]),v.point(pt[1][0],pt[1][1]),v.lineEnd()):(v.point(pt[1][0],pt[1][1]),v.lineEnd(),v.lineStart(),v.point(pt[0][0],pt[0][1])))}ct&&(!x||!$u(x,U))&&v.point(U[0],U[1]),x=U,C=ct,S=tt},lineEnd:function(){C&&v.lineEnd(),x=null},clean:function(){return N|(P&&C)<<1}}}function p(v,x,S){var C=Do(v),P=Do(x),N=[1,0,0],O=vl(C,P),j=Su(O,O),U=O[0],nt=j-U*U;if(!nt)return!S&&v;var ct=n*j/nt,tt=-n*U/nt,pt=vl(N,O),st=Cu(N,ct),E=Cu(O,tt);Dc(st,E);var b=pt,I=Su(st,b),R=Su(b,b),M=I*I-R*(Su(st,st)-1);if(!(M<0)){var G=Ro(M),Z=Cu(b,(-I-G)/R);if(Dc(Z,st),Z=ch(Z),!S)return Z;var W=v[0],$=x[0],V=v[1],Y=x[1],ut;$<W&&(ut=W,W=$,$=ut);var K=$-W,it=Pn(K-Oe)<Ye,bt=it||K<Ye;if(!it&&Y<V&&(ut=V,V=Y,Y=ut),bt?it?V+Y>0^Z[1]<(Pn(Z[0]-W)<Ye?V:Y):V<=Z[1]&&Z[1]<=Y:K>Oe^(W<=Z[0]&&Z[0]<=$)){var wt=Cu(b,(-I+G)/R);return Dc(wt,st),[Z,ch(wt)]}}}function _(v,x){var S=i?e:Oe-e,C=0;return v<-S?C|=1:v>S&&(C|=2),x<-S?C|=4:x>S&&(C|=8),C}return wm(h,f,u,i?[0,-e]:[-Oe,e-Oe])}function Em(e){return function(t){var n=new dh;for(var i in e)n[i]=e[i];return n.stream=t,n}}function dh(){}dh.prototype={constructor:dh,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function km(e,t,n){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],u=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),u!=null&&e.clipExtent(null),ax(n,e.stream(bd));var h=bd.result(),f=Math.min(i/(h[1][0]-h[0][0]),o/(h[1][1]-h[0][1])),p=+t[0][0]+(i-f*(h[1][0]+h[0][0]))/2,_=+t[0][1]+(o-f*(h[1][1]+h[0][1]))/2;return u!=null&&e.clipExtent(u),e.scale(f*150).translate([p,_])}function wx(e,t,n){return km(e,[[0,0],t],n)}var Ed=16,Ex=rn(30*Pi);function kd(e,t){return+t?Sx(e,t):kx(e)}function kx(e){return Em({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Sx(e,t){function n(i,o,u,h,f,p,_,v,x,S,C,P,N,O){var j=_-i,U=v-o,nt=j*j+U*U;if(nt>4*t&&N--){var ct=h+S,tt=f+C,pt=p+P,st=Ro(ct*ct+tt*tt+pt*pt),E=Ws(pt/=st),b=Pn(Pn(pt)-1)<Ye||Pn(u-x)<Ye?(u+x)/2:Lo(tt,ct),I=e(b,E),R=I[0],M=I[1],G=R-i,Z=M-o,W=U*G-j*Z;(W*W/nt>t||Pn((j*G+U*Z)/nt-.5)>.3||h*S+f*C+p*P<Ex)&&(n(i,o,u,h,f,p,R,M,b,ct/=st,tt/=st,pt,N,O),O.point(R,M),n(R,M,b,ct,tt,pt,_,v,x,S,C,P,N,O))}}return function(i){var o,u,h,f,p,_,v,x,S,C,P,N,O={point:j,lineStart:U,lineEnd:ct,polygonStart:function(){i.polygonStart(),O.lineStart=tt},polygonEnd:function(){i.polygonEnd(),O.lineStart=U}};function j(E,b){E=e(E,b),i.point(E[0],E[1])}function U(){x=NaN,O.point=nt,i.lineStart()}function nt(E,b){var I=Do([E,b]),R=e(E,b);n(x,S,v,C,P,N,x=R[0],S=R[1],v=E,C=I[0],P=I[1],N=I[2],Ed,i),i.point(x,S)}function ct(){O.point=j,i.lineEnd()}function tt(){U(),O.point=pt,O.lineEnd=st}function pt(E,b){nt(o=E,b),u=x,h=S,f=C,p=P,_=N,O.point=nt}function st(){n(x,S,v,C,P,N,u,h,o,f,p,_,Ed,i),O.lineEnd=ct,ct()}return O}}var Cx=Em({point:function(e,t){this.stream.point(e*Pi,t*Pi)}});function Tx(e){return Ix(function(){return e})()}function Ix(e){var t,n=150,i=480,o=250,u,h,f=0,p=0,_=0,v=0,x=0,S,C,P=null,N=wd,O=null,j,U,nt,ct=xd,tt=.5,pt=kd(R,tt),st,E;function b(Z){return Z=C(Z[0]*Pi,Z[1]*Pi),[Z[0]*n+u,h-Z[1]*n]}function I(Z){return Z=C.invert((Z[0]-u)/n,(h-Z[1])/n),Z&&[Z[0]*Qr,Z[1]*Qr]}function R(Z,W){return Z=t(Z,W),[Z[0]*n+u,h-Z[1]*n]}b.stream=function(Z){return st&&E===Z?st:st=Cx(N(S,pt(ct(E=Z))))},b.clipAngle=function(Z){return arguments.length?(N=+Z?bx(P=Z*Pi,6*Pi):(P=null,wd),G()):P*Qr},b.clipExtent=function(Z){return arguments.length?(ct=Z==null?(O=j=U=nt=null,xd):dx(O=+Z[0][0],j=+Z[0][1],U=+Z[1][0],nt=+Z[1][1]),G()):O==null?null:[[O,j],[U,nt]]},b.scale=function(Z){return arguments.length?(n=+Z,M()):n},b.translate=function(Z){return arguments.length?(i=+Z[0],o=+Z[1],M()):[i,o]},b.center=function(Z){return arguments.length?(f=Z[0]%360*Pi,p=Z[1]%360*Pi,M()):[f*Qr,p*Qr]},b.rotate=function(Z){return arguments.length?(_=Z[0]%360*Pi,v=Z[1]%360*Pi,x=Z.length>2?Z[2]%360*Pi:0,M()):[_*Qr,v*Qr,x*Qr]},b.precision=function(Z){return arguments.length?(pt=kd(R,tt=Z*Z),G()):Ro(tt)},b.fitExtent=function(Z,W){return km(b,Z,W)},b.fitSize=function(Z,W){return wx(b,Z,W)};function M(){C=_m(S=ux(_,v,x),t);var Z=t(f,p);return u=i-Z[0]*n,h=o+Z[1]*n,G()}function G(){return st=E=null,b}return function(){return t=e.apply(this,arguments),b.invert=t.invert&&I,M()}}function Sm(e){return function(t,n){var i=rn(t),o=rn(n),u=e(i*o);return[u*o*sn(t),u*sn(n)]}}function Cm(e){return function(t,n){var i=Ro(t*t+n*n),o=e(i),u=sn(o),h=rn(o);return[Lo(t*u,i*h),Ws(i&&n*u/i)]}}var Ax=Sm(function(e){return Ro(2/(1+e))});Ax.invert=Cm(function(e){return 2*Ws(e/2)});var Tm=Sm(function(e){return(e=mm(e))&&e/sn(e)});Tm.invert=Cm(function(e){return e});function Lx(){return Tx(Tm).scale(79.4188).clipAngle(180-.001)}function Sd(e,t){return[e,t]}Sd.invert=Sd;var{BufferOp:Dx,GeoJSONReader:Nx,GeoJSONWriter:Px}=sx;function Ox(e,t,n){n=n||{};var i=n.units||"kilometers",o=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof o!="number")throw new Error("steps must be an number");if(t===void 0)throw new Error("radius is required");if(o<=0)throw new Error("steps must be greater than 0");var u=[];switch(e.type){case"GeometryCollection":return nu(e,function(h){var f=Xu(h,t,i,o);f&&u.push(f)}),mr(u);case"FeatureCollection":return uh(e,function(h){var f=Xu(h,t,i,o);f&&uh(f,function(p){p&&u.push(p)})}),mr(u)}return Xu(e,t,i,o)}function Xu(e,t,n,i){var o=e.properties||{},u=e.type==="Feature"?e.geometry:e;if(u.type==="GeometryCollection"){var h=[];return nu(e,function(N){var O=Xu(N,t,n,i);O&&h.push(O)}),mr(h)}var f=Mx(u),p={type:u.type,coordinates:Am(u.coordinates,f)},_=new Nx,v=_.read(p),x=j0($0(t,n),"meters"),S=Dx.bufferOp(v,x,i),C=new Px;if(S=C.write(S),!Im(S.coordinates)){var P={type:S.type,coordinates:Lm(S.coordinates,f)};return Zs(P,o)}}function Im(e){return Array.isArray(e[0])?Im(e[0]):isNaN(e[0])}function Am(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return Am(n,t)})}function Lm(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return Lm(n,t)})}function Mx(e){var t=ex(e).geometry.coordinates,n=[-t[0],-t[1]];return Lx().rotate(n).scale(Hn)}function Rx(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Dm(e);case"FeatureCollection":return Fx(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Vh(e);default:throw new Error("unknown GeoJSON type")}}function Dm(e){const t={type:"Feature"};return Object.keys(e).forEach(n=>{switch(n){case"type":case"properties":case"geometry":return;default:t[n]=e[n]}}),t.properties=Gh(e.properties),e.geometry==null?t.geometry=null:t.geometry=Vh(e.geometry),t}function Gh(e){const t={};return e&&Object.keys(e).forEach(n=>{const i=e[n];typeof i=="object"?i===null?t[n]=null:Array.isArray(i)?t[n]=i.map(o=>o):t[n]=Gh(i):t[n]=i}),t}function Fx(e){const t={type:"FeatureCollection"};return Object.keys(e).forEach(n=>{switch(n){case"type":case"features":return;default:t[n]=e[n]}}),t.features=e.features.map(n=>Dm(n)),t}function Vh(e){const t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(n=>Vh(n)),t):(t.coordinates=Nm(e.coordinates),t)}function Nm(e){const t=e;return typeof t[0]!="object"?t.slice():t.map(n=>Nm(n))}var Bx=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Pc=Math.ceil,Di=Math.floor,ci="[BigNumber Error] ",Cd=ci+"Number primitive has more than 15 significant digits: ",Gi=1e14,ve=14,Oc=9007199254740991,Mc=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ts=1e7,Dn=1e9;function Pm(e){var t,n,i,o=U.prototype={constructor:U,toString:null,valueOf:null},u=new U(1),h=20,f=4,p=-7,_=21,v=-1e7,x=1e7,S=!1,C=1,P=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},O="0123456789abcdefghijklmnopqrstuvwxyz",j=!0;function U(E,b){var I,R,M,G,Z,W,$,V,Y=this;if(!(Y instanceof U))return new U(E,b);if(b==null){if(E&&E._isBigNumber===!0){Y.s=E.s,!E.c||E.e>x?Y.c=Y.e=null:E.e<v?Y.c=[Y.e=0]:(Y.e=E.e,Y.c=E.c.slice());return}if((W=typeof E=="number")&&E*0==0){if(Y.s=1/E<0?(E=-E,-1):1,E===~~E){for(G=0,Z=E;Z>=10;Z/=10,G++);G>x?Y.c=Y.e=null:(Y.e=G,Y.c=[E]);return}V=String(E)}else{if(!Bx.test(V=String(E)))return i(Y,V,W);Y.s=V.charCodeAt(0)==45?(V=V.slice(1),-1):1}(G=V.indexOf("."))>-1&&(V=V.replace(".","")),(Z=V.search(/e/i))>0?(G<0&&(G=Z),G+=+V.slice(Z+1),V=V.substring(0,Z)):G<0&&(G=V.length)}else{if(nn(b,2,O.length,"Base"),b==10&&j)return Y=new U(E),pt(Y,h+Y.e+1,f);if(V=String(E),W=typeof E=="number"){if(E*0!=0)return i(Y,V,W,b);if(Y.s=1/E<0?(V=V.slice(1),-1):1,U.DEBUG&&V.replace(/^0\.0*|\./,"").length>15)throw Error(Cd+E)}else Y.s=V.charCodeAt(0)===45?(V=V.slice(1),-1):1;for(I=O.slice(0,b),G=Z=0,$=V.length;Z<$;Z++)if(I.indexOf(R=V.charAt(Z))<0){if(R=="."){if(Z>G){G=$;continue}}else if(!M&&(V==V.toUpperCase()&&(V=V.toLowerCase())||V==V.toLowerCase()&&(V=V.toUpperCase()))){M=!0,Z=-1,G=0;continue}return i(Y,String(E),W,b)}W=!1,V=n(V,b,10,Y.s),(G=V.indexOf("."))>-1?V=V.replace(".",""):G=V.length}for(Z=0;V.charCodeAt(Z)===48;Z++);for($=V.length;V.charCodeAt(--$)===48;);if(V=V.slice(Z,++$)){if($-=Z,W&&U.DEBUG&&$>15&&(E>Oc||E!==Di(E)))throw Error(Cd+Y.s*E);if((G=G-Z-1)>x)Y.c=Y.e=null;else if(G<v)Y.c=[Y.e=0];else{if(Y.e=G,Y.c=[],Z=(G+1)%ve,G<0&&(Z+=ve),Z<$){for(Z&&Y.c.push(+V.slice(0,Z)),$-=ve;Z<$;)Y.c.push(+V.slice(Z,Z+=ve));Z=ve-(V=V.slice(Z)).length}else Z-=$;for(;Z--;V+="0");Y.c.push(+V)}}else Y.c=[Y.e=0]}U.clone=Pm,U.ROUND_UP=0,U.ROUND_DOWN=1,U.ROUND_CEIL=2,U.ROUND_FLOOR=3,U.ROUND_HALF_UP=4,U.ROUND_HALF_DOWN=5,U.ROUND_HALF_EVEN=6,U.ROUND_HALF_CEIL=7,U.ROUND_HALF_FLOOR=8,U.EUCLID=9,U.config=U.set=function(E){var b,I;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(b="DECIMAL_PLACES")&&(I=E[b],nn(I,0,Dn,b),h=I),E.hasOwnProperty(b="ROUNDING_MODE")&&(I=E[b],nn(I,0,8,b),f=I),E.hasOwnProperty(b="EXPONENTIAL_AT")&&(I=E[b],I&&I.pop?(nn(I[0],-Dn,0,b),nn(I[1],0,Dn,b),p=I[0],_=I[1]):(nn(I,-Dn,Dn,b),p=-(_=I<0?-I:I))),E.hasOwnProperty(b="RANGE"))if(I=E[b],I&&I.pop)nn(I[0],-Dn,-1,b),nn(I[1],1,Dn,b),v=I[0],x=I[1];else if(nn(I,-Dn,Dn,b),I)v=-(x=I<0?-I:I);else throw Error(ci+b+" cannot be zero: "+I);if(E.hasOwnProperty(b="CRYPTO"))if(I=E[b],I===!!I)if(I)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=I;else throw S=!I,Error(ci+"crypto unavailable");else S=I;else throw Error(ci+b+" not true or false: "+I);if(E.hasOwnProperty(b="MODULO_MODE")&&(I=E[b],nn(I,0,9,b),C=I),E.hasOwnProperty(b="POW_PRECISION")&&(I=E[b],nn(I,0,Dn,b),P=I),E.hasOwnProperty(b="FORMAT"))if(I=E[b],typeof I=="object")N=I;else throw Error(ci+b+" not an object: "+I);if(E.hasOwnProperty(b="ALPHABET"))if(I=E[b],typeof I=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(I))j=I.slice(0,10)=="0123456789",O=I;else throw Error(ci+b+" invalid: "+I)}else throw Error(ci+"Object expected: "+E);return{DECIMAL_PLACES:h,ROUNDING_MODE:f,EXPONENTIAL_AT:[p,_],RANGE:[v,x],CRYPTO:S,MODULO_MODE:C,POW_PRECISION:P,FORMAT:N,ALPHABET:O}},U.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!U.DEBUG)return!0;var b,I,R=E.c,M=E.e,G=E.s;t:if({}.toString.call(R)=="[object Array]"){if((G===1||G===-1)&&M>=-Dn&&M<=Dn&&M===Di(M)){if(R[0]===0){if(M===0&&R.length===1)return!0;break t}if(b=(M+1)%ve,b<1&&(b+=ve),String(R[0]).length==b){for(b=0;b<R.length;b++)if(I=R[b],I<0||I>=Gi||I!==Di(I))break t;if(I!==0)return!0}}}else if(R===null&&M===null&&(G===null||G===1||G===-1))return!0;throw Error(ci+"Invalid BigNumber: "+E)},U.maximum=U.max=function(){return ct(arguments,-1)},U.minimum=U.min=function(){return ct(arguments,1)},U.random=(function(){var E=9007199254740992,b=Math.random()*E&2097151?function(){return Di(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(I){var R,M,G,Z,W,$=0,V=[],Y=new U(u);if(I==null?I=h:nn(I,0,Dn),Z=Pc(I/ve),S)if(crypto.getRandomValues){for(R=crypto.getRandomValues(new Uint32Array(Z*=2));$<Z;)W=R[$]*131072+(R[$+1]>>>11),W>=9e15?(M=crypto.getRandomValues(new Uint32Array(2)),R[$]=M[0],R[$+1]=M[1]):(V.push(W%1e14),$+=2);$=Z/2}else if(crypto.randomBytes){for(R=crypto.randomBytes(Z*=7);$<Z;)W=(R[$]&31)*281474976710656+R[$+1]*1099511627776+R[$+2]*4294967296+R[$+3]*16777216+(R[$+4]<<16)+(R[$+5]<<8)+R[$+6],W>=9e15?crypto.randomBytes(7).copy(R,$):(V.push(W%1e14),$+=7);$=Z/7}else throw S=!1,Error(ci+"crypto unavailable");if(!S)for(;$<Z;)W=b(),W<9e15&&(V[$++]=W%1e14);for(Z=V[--$],I%=ve,Z&&I&&(W=Mc[ve-I],V[$]=Di(Z/W)*W);V[$]===0;V.pop(),$--);if($<0)V=[G=0];else{for(G=-1;V[0]===0;V.splice(0,1),G-=ve);for($=1,W=V[0];W>=10;W/=10,$++);$<ve&&(G-=ve-$)}return Y.e=G,Y.c=V,Y}})(),U.sum=function(){for(var E=1,b=arguments,I=new U(b[0]);E<b.length;)I=I.plus(b[E++]);return I},n=(function(){var E="0123456789";function b(I,R,M,G){for(var Z,W=[0],$,V=0,Y=I.length;V<Y;){for($=W.length;$--;W[$]*=R);for(W[0]+=G.indexOf(I.charAt(V++)),Z=0;Z<W.length;Z++)W[Z]>M-1&&(W[Z+1]==null&&(W[Z+1]=0),W[Z+1]+=W[Z]/M|0,W[Z]%=M)}return W.reverse()}return function(I,R,M,G,Z){var W,$,V,Y,ut,K,it,bt,wt=I.indexOf("."),Et=h,Tt=f;for(wt>=0&&(Y=P,P=0,I=I.replace(".",""),bt=new U(R),K=bt.pow(I.length-wt),P=Y,bt.c=b(Ar(Ai(K.c),K.e,"0"),10,M,E),bt.e=bt.c.length),it=b(I,R,M,Z?(W=O,E):(W=E,O)),V=Y=it.length;it[--Y]==0;it.pop());if(!it[0])return W.charAt(0);if(wt<0?--V:(K.c=it,K.e=V,K.s=G,K=t(K,bt,Et,Tt,M),it=K.c,ut=K.r,V=K.e),$=V+Et+1,wt=it[$],Y=M/2,ut=ut||$<0||it[$+1]!=null,ut=Tt<4?(wt!=null||ut)&&(Tt==0||Tt==(K.s<0?3:2)):wt>Y||wt==Y&&(Tt==4||ut||Tt==6&&it[$-1]&1||Tt==(K.s<0?8:7)),$<1||!it[0])I=ut?Ar(W.charAt(1),-Et,W.charAt(0)):W.charAt(0);else{if(it.length=$,ut)for(--M;++it[--$]>M;)it[$]=0,$||(++V,it=[1].concat(it));for(Y=it.length;!it[--Y];);for(wt=0,I="";wt<=Y;I+=W.charAt(it[wt++]));I=Ar(I,V,W.charAt(0))}return I}})(),t=(function(){function E(R,M,G){var Z,W,$,V,Y=0,ut=R.length,K=M%ts,it=M/ts|0;for(R=R.slice();ut--;)$=R[ut]%ts,V=R[ut]/ts|0,Z=it*$+V*K,W=K*$+Z%ts*ts+Y,Y=(W/G|0)+(Z/ts|0)+it*V,R[ut]=W%G;return Y&&(R=[Y].concat(R)),R}function b(R,M,G,Z){var W,$;if(G!=Z)$=G>Z?1:-1;else for(W=$=0;W<G;W++)if(R[W]!=M[W]){$=R[W]>M[W]?1:-1;break}return $}function I(R,M,G,Z){for(var W=0;G--;)R[G]-=W,W=R[G]<M[G]?1:0,R[G]=W*Z+R[G]-M[G];for(;!R[0]&&R.length>1;R.splice(0,1));}return function(R,M,G,Z,W){var $,V,Y,ut,K,it,bt,wt,Et,Tt,Pt,Yt,et,Qt,Ft,Ct,T,Q=R.s==M.s?1:-1,dt=R.c,gt=M.c;if(!dt||!dt[0]||!gt||!gt[0])return new U(!R.s||!M.s||(dt?gt&&dt[0]==gt[0]:!gt)?NaN:dt&&dt[0]==0||!gt?Q*0:Q/0);for(wt=new U(Q),Et=wt.c=[],V=R.e-M.e,Q=G+V+1,W||(W=Gi,V=Ni(R.e/ve)-Ni(M.e/ve),Q=Q/ve|0),Y=0;gt[Y]==(dt[Y]||0);Y++);if(gt[Y]>(dt[Y]||0)&&V--,Q<0)Et.push(1),ut=!0;else{for(Qt=dt.length,Ct=gt.length,Y=0,Q+=2,K=Di(W/(gt[0]+1)),K>1&&(gt=E(gt,K,W),dt=E(dt,K,W),Ct=gt.length,Qt=dt.length),et=Ct,Tt=dt.slice(0,Ct),Pt=Tt.length;Pt<Ct;Tt[Pt++]=0);T=gt.slice(),T=[0].concat(T),Ft=gt[0],gt[1]>=W/2&&Ft++;do{if(K=0,$=b(gt,Tt,Ct,Pt),$<0){if(Yt=Tt[0],Ct!=Pt&&(Yt=Yt*W+(Tt[1]||0)),K=Di(Yt/Ft),K>1)for(K>=W&&(K=W-1),it=E(gt,K,W),bt=it.length,Pt=Tt.length;b(it,Tt,bt,Pt)==1;)K--,I(it,Ct<bt?T:gt,bt,W),bt=it.length,$=1;else K==0&&($=K=1),it=gt.slice(),bt=it.length;if(bt<Pt&&(it=[0].concat(it)),I(Tt,it,Pt,W),Pt=Tt.length,$==-1)for(;b(gt,Tt,Ct,Pt)<1;)K++,I(Tt,Ct<Pt?T:gt,Pt,W),Pt=Tt.length}else $===0&&(K++,Tt=[0]);Et[Y++]=K,Tt[0]?Tt[Pt++]=dt[et]||0:(Tt=[dt[et]],Pt=1)}while((et++<Qt||Tt[0]!=null)&&Q--);ut=Tt[0]!=null,Et[0]||Et.splice(0,1)}if(W==Gi){for(Y=1,Q=Et[0];Q>=10;Q/=10,Y++);pt(wt,G+(wt.e=Y+V*ve-1)+1,Z,ut)}else wt.e=V,wt.r=+ut;return wt}})();function nt(E,b,I,R){var M,G,Z,W,$;if(I==null?I=f:nn(I,0,8),!E.c)return E.toString();if(M=E.c[0],Z=E.e,b==null)$=Ai(E.c),$=R==1||R==2&&(Z<=p||Z>=_)?Lu($,Z):Ar($,Z,"0");else if(E=pt(new U(E),b,I),G=E.e,$=Ai(E.c),W=$.length,R==1||R==2&&(b<=G||G<=p)){for(;W<b;$+="0",W++);$=Lu($,G)}else if(b-=Z+(R===2&&G>Z),$=Ar($,G,"0"),G+1>W){if(--b>0)for($+=".";b--;$+="0");}else if(b+=G-W,b>0)for(G+1==W&&($+=".");b--;$+="0");return E.s<0&&M?"-"+$:$}function ct(E,b){for(var I,R,M=1,G=new U(E[0]);M<E.length;M++)R=new U(E[M]),(!R.s||(I=Os(G,R))===b||I===0&&G.s===b)&&(G=R);return G}function tt(E,b,I){for(var R=1,M=b.length;!b[--M];b.pop());for(M=b[0];M>=10;M/=10,R++);return(I=R+I*ve-1)>x?E.c=E.e=null:I<v?E.c=[E.e=0]:(E.e=I,E.c=b),E}i=(function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,I=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,M=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,Z,W,$){var V,Y=W?Z:Z.replace(M,"");if(R.test(Y))G.s=isNaN(Y)?null:Y<0?-1:1;else{if(!W&&(Y=Y.replace(E,function(ut,K,it){return V=(it=it.toLowerCase())=="x"?16:it=="b"?2:8,!$||$==V?K:ut}),$&&(V=$,Y=Y.replace(b,"$1").replace(I,"0.$1")),Z!=Y))return new U(Y,V);if(U.DEBUG)throw Error(ci+"Not a"+($?" base "+$:"")+" number: "+Z);G.s=null}G.c=G.e=null}})();function pt(E,b,I,R){var M,G,Z,W,$,V,Y,ut=E.c,K=Mc;if(ut){t:{for(M=1,W=ut[0];W>=10;W/=10,M++);if(G=b-M,G<0)G+=ve,Z=b,$=ut[V=0],Y=Di($/K[M-Z-1]%10);else if(V=Pc((G+1)/ve),V>=ut.length)if(R){for(;ut.length<=V;ut.push(0));$=Y=0,M=1,G%=ve,Z=G-ve+1}else break t;else{for($=W=ut[V],M=1;W>=10;W/=10,M++);G%=ve,Z=G-ve+M,Y=Z<0?0:Di($/K[M-Z-1]%10)}if(R=R||b<0||ut[V+1]!=null||(Z<0?$:$%K[M-Z-1]),R=I<4?(Y||R)&&(I==0||I==(E.s<0?3:2)):Y>5||Y==5&&(I==4||R||I==6&&(G>0?Z>0?$/K[M-Z]:0:ut[V-1])%10&1||I==(E.s<0?8:7)),b<1||!ut[0])return ut.length=0,R?(b-=E.e+1,ut[0]=K[(ve-b%ve)%ve],E.e=-b||0):ut[0]=E.e=0,E;if(G==0?(ut.length=V,W=1,V--):(ut.length=V+1,W=K[ve-G],ut[V]=Z>0?Di($/K[M-Z]%K[Z])*W:0),R)for(;;)if(V==0){for(G=1,Z=ut[0];Z>=10;Z/=10,G++);for(Z=ut[0]+=W,W=1;Z>=10;Z/=10,W++);G!=W&&(E.e++,ut[0]==Gi&&(ut[0]=1));break}else{if(ut[V]+=W,ut[V]!=Gi)break;ut[V--]=0,W=1}for(G=ut.length;ut[--G]===0;ut.pop());}E.e>x?E.c=E.e=null:E.e<v&&(E.c=[E.e=0])}return E}function st(E){var b,I=E.e;return I===null?E.toString():(b=Ai(E.c),b=I<=p||I>=_?Lu(b,I):Ar(b,I,"0"),E.s<0?"-"+b:b)}return o.absoluteValue=o.abs=function(){var E=new U(this);return E.s<0&&(E.s=1),E},o.comparedTo=function(E,b){return Os(this,new U(E,b))},o.decimalPlaces=o.dp=function(E,b){var I,R,M,G=this;if(E!=null)return nn(E,0,Dn),b==null?b=f:nn(b,0,8),pt(new U(G),E+G.e+1,b);if(!(I=G.c))return null;if(R=((M=I.length-1)-Ni(this.e/ve))*ve,M=I[M])for(;M%10==0;M/=10,R--);return R<0&&(R=0),R},o.dividedBy=o.div=function(E,b){return t(this,new U(E,b),h,f)},o.dividedToIntegerBy=o.idiv=function(E,b){return t(this,new U(E,b),0,1)},o.exponentiatedBy=o.pow=function(E,b){var I,R,M,G,Z,W,$,V,Y,ut=this;if(E=new U(E),E.c&&!E.isInteger())throw Error(ci+"Exponent not an integer: "+st(E));if(b!=null&&(b=new U(b)),W=E.e>14,!ut.c||!ut.c[0]||ut.c[0]==1&&!ut.e&&ut.c.length==1||!E.c||!E.c[0])return Y=new U(Math.pow(+st(ut),W?E.s*(2-Au(E)):+st(E))),b?Y.mod(b):Y;if($=E.s<0,b){if(b.c?!b.c[0]:!b.s)return new U(NaN);R=!$&&ut.isInteger()&&b.isInteger(),R&&(ut=ut.mod(b))}else{if(E.e>9&&(ut.e>0||ut.e<-1||(ut.e==0?ut.c[0]>1||W&&ut.c[1]>=24e7:ut.c[0]<8e13||W&&ut.c[0]<=9999975e7)))return G=ut.s<0&&Au(E)?-0:0,ut.e>-1&&(G=1/G),new U($?1/G:G);P&&(G=Pc(P/ve+2))}for(W?(I=new U(.5),$&&(E.s=1),V=Au(E)):(M=Math.abs(+st(E)),V=M%2),Y=new U(u);;){if(V){if(Y=Y.times(ut),!Y.c)break;G?Y.c.length>G&&(Y.c.length=G):R&&(Y=Y.mod(b))}if(M){if(M=Di(M/2),M===0)break;V=M%2}else if(E=E.times(I),pt(E,E.e+1,1),E.e>14)V=Au(E);else{if(M=+st(E),M===0)break;V=M%2}ut=ut.times(ut),G?ut.c&&ut.c.length>G&&(ut.c.length=G):R&&(ut=ut.mod(b))}return R?Y:($&&(Y=u.div(Y)),b?Y.mod(b):G?pt(Y,P,f,Z):Y)},o.integerValue=function(E){var b=new U(this);return E==null?E=f:nn(E,0,8),pt(b,b.e+1,E)},o.isEqualTo=o.eq=function(E,b){return Os(this,new U(E,b))===0},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(E,b){return Os(this,new U(E,b))>0},o.isGreaterThanOrEqualTo=o.gte=function(E,b){return(b=Os(this,new U(E,b)))===1||b===0},o.isInteger=function(){return!!this.c&&Ni(this.e/ve)>this.c.length-2},o.isLessThan=o.lt=function(E,b){return Os(this,new U(E,b))<0},o.isLessThanOrEqualTo=o.lte=function(E,b){return(b=Os(this,new U(E,b)))===-1||b===0},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&this.c[0]==0},o.minus=function(E,b){var I,R,M,G,Z=this,W=Z.s;if(E=new U(E,b),b=E.s,!W||!b)return new U(NaN);if(W!=b)return E.s=-b,Z.plus(E);var $=Z.e/ve,V=E.e/ve,Y=Z.c,ut=E.c;if(!$||!V){if(!Y||!ut)return Y?(E.s=-b,E):new U(ut?Z:NaN);if(!Y[0]||!ut[0])return ut[0]?(E.s=-b,E):new U(Y[0]?Z:f==3?-0:0)}if($=Ni($),V=Ni(V),Y=Y.slice(),W=$-V){for((G=W<0)?(W=-W,M=Y):(V=$,M=ut),M.reverse(),b=W;b--;M.push(0));M.reverse()}else for(R=(G=(W=Y.length)<(b=ut.length))?W:b,W=b=0;b<R;b++)if(Y[b]!=ut[b]){G=Y[b]<ut[b];break}if(G&&(M=Y,Y=ut,ut=M,E.s=-E.s),b=(R=ut.length)-(I=Y.length),b>0)for(;b--;Y[I++]=0);for(b=Gi-1;R>W;){if(Y[--R]<ut[R]){for(I=R;I&&!Y[--I];Y[I]=b);--Y[I],Y[R]+=Gi}Y[R]-=ut[R]}for(;Y[0]==0;Y.splice(0,1),--V);return Y[0]?tt(E,Y,V):(E.s=f==3?-1:1,E.c=[E.e=0],E)},o.modulo=o.mod=function(E,b){var I,R,M=this;return E=new U(E,b),!M.c||!E.s||E.c&&!E.c[0]?new U(NaN):!E.c||M.c&&!M.c[0]?new U(M):(C==9?(R=E.s,E.s=1,I=t(M,E,0,3),E.s=R,I.s*=R):I=t(M,E,0,C),E=M.minus(I.times(E)),!E.c[0]&&C==1&&(E.s=M.s),E)},o.multipliedBy=o.times=function(E,b){var I,R,M,G,Z,W,$,V,Y,ut,K,it,bt,wt,Et,Tt=this,Pt=Tt.c,Yt=(E=new U(E,b)).c;if(!Pt||!Yt||!Pt[0]||!Yt[0])return!Tt.s||!E.s||Pt&&!Pt[0]&&!Yt||Yt&&!Yt[0]&&!Pt?E.c=E.e=E.s=null:(E.s*=Tt.s,!Pt||!Yt?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(R=Ni(Tt.e/ve)+Ni(E.e/ve),E.s*=Tt.s,$=Pt.length,ut=Yt.length,$<ut&&(bt=Pt,Pt=Yt,Yt=bt,M=$,$=ut,ut=M),M=$+ut,bt=[];M--;bt.push(0));for(wt=Gi,Et=ts,M=ut;--M>=0;){for(I=0,K=Yt[M]%Et,it=Yt[M]/Et|0,Z=$,G=M+Z;G>M;)V=Pt[--Z]%Et,Y=Pt[Z]/Et|0,W=it*V+Y*K,V=K*V+W%Et*Et+bt[G]+I,I=(V/wt|0)+(W/Et|0)+it*Y,bt[G--]=V%wt;bt[G]=I}return I?++R:bt.splice(0,1),tt(E,bt,R)},o.negated=function(){var E=new U(this);return E.s=-E.s||null,E},o.plus=function(E,b){var I,R=this,M=R.s;if(E=new U(E,b),b=E.s,!M||!b)return new U(NaN);if(M!=b)return E.s=-b,R.minus(E);var G=R.e/ve,Z=E.e/ve,W=R.c,$=E.c;if(!G||!Z){if(!W||!$)return new U(M/0);if(!W[0]||!$[0])return $[0]?E:new U(W[0]?R:M*0)}if(G=Ni(G),Z=Ni(Z),W=W.slice(),M=G-Z){for(M>0?(Z=G,I=$):(M=-M,I=W),I.reverse();M--;I.push(0));I.reverse()}for(M=W.length,b=$.length,M-b<0&&(I=$,$=W,W=I,b=M),M=0;b;)M=(W[--b]=W[b]+$[b]+M)/Gi|0,W[b]=Gi===W[b]?0:W[b]%Gi;return M&&(W=[M].concat(W),++Z),tt(E,W,Z)},o.precision=o.sd=function(E,b){var I,R,M,G=this;if(E!=null&&E!==!!E)return nn(E,1,Dn),b==null?b=f:nn(b,0,8),pt(new U(G),E,b);if(!(I=G.c))return null;if(M=I.length-1,R=M*ve+1,M=I[M]){for(;M%10==0;M/=10,R--);for(M=I[0];M>=10;M/=10,R++);}return E&&G.e+1>R&&(R=G.e+1),R},o.shiftedBy=function(E){return nn(E,-Oc,Oc),this.times("1e"+E)},o.squareRoot=o.sqrt=function(){var E,b,I,R,M,G=this,Z=G.c,W=G.s,$=G.e,V=h+4,Y=new U("0.5");if(W!==1||!Z||!Z[0])return new U(!W||W<0&&(!Z||Z[0])?NaN:Z?G:1/0);if(W=Math.sqrt(+st(G)),W==0||W==1/0?(b=Ai(Z),(b.length+$)%2==0&&(b+="0"),W=Math.sqrt(+b),$=Ni(($+1)/2)-($<0||$%2),W==1/0?b="5e"+$:(b=W.toExponential(),b=b.slice(0,b.indexOf("e")+1)+$),I=new U(b)):I=new U(W+""),I.c[0]){for($=I.e,W=$+V,W<3&&(W=0);;)if(M=I,I=Y.times(M.plus(t(G,M,V,1))),Ai(M.c).slice(0,W)===(b=Ai(I.c)).slice(0,W))if(I.e<$&&--W,b=b.slice(W-3,W+1),b=="9999"||!R&&b=="4999"){if(!R&&(pt(M,M.e+h+2,0),M.times(M).eq(G))){I=M;break}V+=4,W+=4,R=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(pt(I,I.e+h+2,1),E=!I.times(I).eq(G));break}}return pt(I,I.e+h+1,f,E)},o.toExponential=function(E,b){return E!=null&&(nn(E,0,Dn),E++),nt(this,E,b,1)},o.toFixed=function(E,b){return E!=null&&(nn(E,0,Dn),E=E+this.e+1),nt(this,E,b)},o.toFormat=function(E,b,I){var R,M=this;if(I==null)E!=null&&b&&typeof b=="object"?(I=b,b=null):E&&typeof E=="object"?(I=E,E=b=null):I=N;else if(typeof I!="object")throw Error(ci+"Argument not an object: "+I);if(R=M.toFixed(E,b),M.c){var G,Z=R.split("."),W=+I.groupSize,$=+I.secondaryGroupSize,V=I.groupSeparator||"",Y=Z[0],ut=Z[1],K=M.s<0,it=K?Y.slice(1):Y,bt=it.length;if($&&(G=W,W=$,$=G,bt-=G),W>0&&bt>0){for(G=bt%W||W,Y=it.substr(0,G);G<bt;G+=W)Y+=V+it.substr(G,W);$>0&&(Y+=V+it.slice(G)),K&&(Y="-"+Y)}R=ut?Y+(I.decimalSeparator||"")+(($=+I.fractionGroupSize)?ut.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(I.fractionGroupSeparator||"")):ut):Y}return(I.prefix||"")+R+(I.suffix||"")},o.toFraction=function(E){var b,I,R,M,G,Z,W,$,V,Y,ut,K,it=this,bt=it.c;if(E!=null&&(W=new U(E),!W.isInteger()&&(W.c||W.s!==1)||W.lt(u)))throw Error(ci+"Argument "+(W.isInteger()?"out of range: ":"not an integer: ")+st(W));if(!bt)return new U(it);for(b=new U(u),V=I=new U(u),R=$=new U(u),K=Ai(bt),G=b.e=K.length-it.e-1,b.c[0]=Mc[(Z=G%ve)<0?ve+Z:Z],E=!E||W.comparedTo(b)>0?G>0?b:V:W,Z=x,x=1/0,W=new U(K),$.c[0]=0;Y=t(W,b,0,1),M=I.plus(Y.times(R)),M.comparedTo(E)!=1;)I=R,R=M,V=$.plus(Y.times(M=V)),$=M,b=W.minus(Y.times(M=b)),W=M;return M=t(E.minus(I),R,0,1),$=$.plus(M.times(V)),I=I.plus(M.times(R)),$.s=V.s=it.s,G=G*2,ut=t(V,R,G,f).minus(it).abs().comparedTo(t($,I,G,f).minus(it).abs())<1?[V,R]:[$,I],x=Z,ut},o.toNumber=function(){return+st(this)},o.toPrecision=function(E,b){return E!=null&&nn(E,1,Dn),nt(this,E,b,2)},o.toString=function(E){var b,I=this,R=I.s,M=I.e;return M===null?R?(b="Infinity",R<0&&(b="-"+b)):b="NaN":(E==null?b=M<=p||M>=_?Lu(Ai(I.c),M):Ar(Ai(I.c),M,"0"):E===10&&j?(I=pt(new U(I),h+M+1,f),b=Ar(Ai(I.c),I.e,"0")):(nn(E,2,O.length,"Base"),b=n(Ar(Ai(I.c),M,"0"),10,E,R,!0)),R<0&&I.c[0]&&(b="-"+b)),b},o.valueOf=o.toJSON=function(){return st(this)},o._isBigNumber=!0,o[Symbol.toStringTag]="BigNumber",o[Symbol.for("nodejs.util.inspect.custom")]=o.valueOf,e!=null&&U.set(e),U}function Ni(e){var t=e|0;return e>0||e===t?t:t-1}function Ai(e){for(var t,n,i=1,o=e.length,u=e[0]+"";i<o;){for(t=e[i++]+"",n=ve-t.length;n--;t="0"+t);u+=t}for(o=u.length;u.charCodeAt(--o)===48;);return u.slice(0,o+1||1)}function Os(e,t){var n,i,o=e.c,u=t.c,h=e.s,f=t.s,p=e.e,_=t.e;if(!h||!f)return null;if(n=o&&!o[0],i=u&&!u[0],n||i)return n?i?0:-f:h;if(h!=f)return h;if(n=h<0,i=p==_,!o||!u)return i?0:!o^n?1:-1;if(!i)return p>_^n?1:-1;for(f=(p=o.length)<(_=u.length)?p:_,h=0;h<f;h++)if(o[h]!=u[h])return o[h]>u[h]^n?1:-1;return p==_?0:p>_^n?1:-1}function nn(e,t,n,i){if(e<t||e>n||e!==Di(e))throw Error(ci+(i||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Au(e){var t=e.c.length-1;return Ni(e.e/ve)==t&&e.c[t]%2!=0}function Lu(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Ar(e,t,n){var i,o;if(t<0){for(o=n+".";++t;o+=n);e=o+e}else if(i=e.length,++t>i){for(o=n,t-=i;--t;o+=n);e+=o}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}var dr=Pm(),zx=class{key;left=null;right=null;constructor(e){this.key=e}},la=class extends zx{constructor(e){super(e)}},qx=class{size=0;modificationCount=0;splayCount=0;splay(e){const t=this.root;if(t==null)return this.compare(e,e),-1;let n=null,i=null,o=null,u=null,h=t;const f=this.compare;let p;for(;;)if(p=f(h.key,e),p>0){let _=h.left;if(_==null||(p=f(_.key,e),p>0&&(h.left=_.right,_.right=h,h=_,_=h.left,_==null)))break;n==null?i=h:n.left=h,n=h,h=_}else if(p<0){let _=h.right;if(_==null||(p=f(_.key,e),p<0&&(h.right=_.left,_.left=h,h=_,_=h.right,_==null)))break;o==null?u=h:o.right=h,o=h,h=_}else break;return o!=null&&(o.right=h.left,h.left=u),n!=null&&(n.left=h.right,h.right=i),this.root!==h&&(this.root=h,this.splayCount++),p}splayMin(e){let t=e,n=t.left;for(;n!=null;){const i=n;t.left=i.right,i.right=t,t=i,n=t.left}return t}splayMax(e){let t=e,n=t.right;for(;n!=null;){const i=n;t.right=i.left,i.left=t,t=i,n=t.right}return t}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let n=this.root;const i=n,o=n.left;if(this.size--,o==null)this.root=n.right;else{const u=n.right;n=this.splayMax(o),n.right=u,this.root=n}return this.modificationCount++,i}addNewRoot(e,t){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=e;return}t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,t)=>e<t?-1:e>t?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},bl=class Ea extends qx{root=null;compare;validKey;constructor(t,n){super(),this.compare=t??this.defaultCompare(),this.validKey=n??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const n of t)this.delete(n)}forEach(t){const n=this[Symbol.iterator]();let i;for(;i=n.next(),!i.done;)t(i.value,i.value,this)}add(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new la(t),n),this}addAndReturn(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new la(t),n),this.root.key}addAll(t){for(const n of t)this.add(n)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let o=i.right;for(;o!=null;)i=o,o=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let o=i.left;for(;o!=null;)i=o,o=i.left;return i.key}retainAll(t){const n=new Ea(this.compare,this.validKey),i=this.modificationCount;for(const o of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(o)&&this.splay(o)==0&&n.add(this.root.key)}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const n=new Ea(this.compare,this.validKey);for(const i of this)t.has(i)&&n.add(i);return n}difference(t){const n=new Ea(this.compare,this.validKey);for(const i of this)t.has(i)||n.add(i);return n}union(t){const n=this.clone();return n.addAll(t),n}clone(){const t=new Ea(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function n(o,u){let h,f;do{if(h=o.left,f=o.right,h!=null){const p=new la(h.key);u.left=p,n(h,p)}if(f!=null){const p=new la(f.key);u.right=p,o=f,u=p}}while(f!=null)}const i=new la(t.key);return n(t,i),i}toSet(){return this.clone()}entries(){return new Hx(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new Ux(this.wrap())}[Symbol.toStringTag]="[object Set]"},Om=class{tree;path=new Array;modificationCount=null;splayCount;constructor(e){this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],t=e.right;if(t!=null){for(;t!=null;)this.path.push(t),t=t.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},Ux=class extends Om{getValue(e){return e.key}},Hx=class extends Om{getValue(e){return[e.key,e.key]}},Mm=e=>()=>e,gh=e=>{const t=e?(n,i)=>i.minus(n).abs().isLessThanOrEqualTo(e):Mm(!1);return(n,i)=>t(n,i)?0:n.comparedTo(i)};function Gx(e){const t=e?(n,i,o,u,h)=>n.exponentiatedBy(2).isLessThanOrEqualTo(u.minus(i).exponentiatedBy(2).plus(h.minus(o).exponentiatedBy(2)).times(e)):Mm(!1);return(n,i,o)=>{const u=n.x,h=n.y,f=o.x,p=o.y,_=h.minus(p).times(i.x.minus(f)).minus(u.minus(f).times(i.y.minus(p)));return t(_,u,h,f,p)?0:_.comparedTo(0)}}var Vx=e=>e,Zx=e=>{if(e){const t=new bl(gh(e)),n=new bl(gh(e)),i=(u,h)=>h.addAndReturn(u),o=u=>({x:i(u.x,t),y:i(u.y,n)});return o({x:new dr(0),y:new dr(0)}),o}return Vx},ph=e=>({set:t=>{Hr=ph(t)},reset:()=>ph(e),compare:gh(e),snap:Zx(e),orient:Gx(e)}),Hr=ph(),ca=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),mh=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;const n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,i=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,o=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,u=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:n,y:o},ur:{x:i,y:u}}},Ku=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),Rm=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),wl=e=>Rm(e,e).sqrt(),Wx=(e,t,n)=>{const i={x:t.x.minus(e.x),y:t.y.minus(e.y)},o={x:n.x.minus(e.x),y:n.y.minus(e.y)};return Ku(o,i).div(wl(o)).div(wl(i))},Yx=(e,t,n)=>{const i={x:t.x.minus(e.x),y:t.y.minus(e.y)},o={x:n.x.minus(e.x),y:n.y.minus(e.y)};return Rm(o,i).div(wl(o)).div(wl(i))},Td=(e,t,n)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n},Id=(e,t,n)=>t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))},jx=(e,t,n,i)=>{if(t.x.isZero())return Id(n,i,e.x);if(i.x.isZero())return Id(e,t,n.x);if(t.y.isZero())return Td(n,i,e.y);if(i.y.isZero())return Td(e,t,n.y);const o=Ku(t,i);if(o.isZero())return null;const u={x:n.x.minus(e.x),y:n.y.minus(e.y)},h=Ku(u,t).div(o),f=Ku(u,i).div(o),p=e.x.plus(f.times(t.x)),_=n.x.plus(h.times(i.x)),v=e.y.plus(f.times(t.y)),x=n.y.plus(h.times(i.y)),S=p.plus(_).div(2),C=v.plus(x).div(2);return{x:S,y:C}},cr=class Fm{point;isLeft;segment;otherSE;consumedBy;static compare(t,n){const i=Fm.comparePoints(t.point,n.point);return i!==0?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:kl.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x.isLessThan(n.x)?-1:t.x.isGreaterThan(n.x)?1:t.y.isLessThan(n.y)?-1:t.y.isGreaterThan(n.y)?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let i=0,o=n.length;i<o;i++){const u=n[i];this.point.events.push(u),u.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const i=this.point.events[n];if(i.segment.consumedBy===void 0)for(let o=n+1;o<t;o++){const u=this.point.events[o];u.consumedBy===void 0&&i.otherSE.point.events===u.otherSE.point.events&&i.segment.consume(u.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,i=this.point.events.length;n<i;n++){const o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&t.push(o)}return t}getLeftmostComparator(t){const n=new Map,i=o=>{const u=o.otherSE;n.set(o,{sine:Wx(this.point,t.point,u.point),cosine:Yx(this.point,t.point,u.point)})};return(o,u)=>{n.has(o)||i(o),n.has(u)||i(u);const{sine:h,cosine:f}=n.get(o),{sine:p,cosine:_}=n.get(u);return h.isGreaterThanOrEqualTo(0)&&p.isGreaterThanOrEqualTo(0)?f.isLessThan(_)?1:f.isGreaterThan(_)?-1:0:h.isLessThan(0)&&p.isLessThan(0)?f.isLessThan(_)?-1:f.isGreaterThan(_)?1:0:p.isLessThan(h)?-1:p.isGreaterThan(h)?1:0}}},$x=class _h{events;poly;_isExteriorRing;_enclosingRing;static factory(t){const n=[];for(let i=0,o=t.length;i<o;i++){const u=t[i];if(!u.isInResult()||u.ringOut)continue;let h=null,f=u.leftSE,p=u.rightSE;const _=[f],v=f.point,x=[];for(;h=f,f=p,_.push(f),f.point!==v;)for(;;){const S=f.getAvailableLinkedEvents();if(S.length===0){const N=_[0].point,O=_[_.length-1].point;throw new Error(`Unable to complete output ring starting at [${N.x}, ${N.y}]. Last matching segment found ends at [${O.x}, ${O.y}].`)}if(S.length===1){p=S[0].otherSE;break}let C=null;for(let N=0,O=x.length;N<O;N++)if(x[N].point===f.point){C=N;break}if(C!==null){const N=x.splice(C)[0],O=_.splice(N.index);O.unshift(O[0].otherSE),n.push(new _h(O.reverse()));continue}x.push({index:_.length,point:f.point});const P=f.getLeftmostComparator(h);p=S.sort(P)[0].otherSE;break}n.push(new _h(_))}return n}constructor(t){this.events=t;for(let n=0,i=t.length;n<i;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let _=1,v=this.events.length-1;_<v;_++){const x=this.events[_].point,S=this.events[_+1].point;Hr.orient(x,t,S)!==0&&(n.push(x),t=x)}if(n.length===1)return null;const i=n[0],o=n[1];Hr.orient(i,t,o)===0&&n.shift(),n.push(n[0]);const u=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:n.length-1,f=this.isExteriorRing()?n.length:-1,p=[];for(let _=h;_!=f;_+=u)p.push([n[_].x.toNumber(),n[_].y.toNumber()]);return p}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const h=this.events[o];cr.compare(t,h)>0&&(t=h)}let n=t.segment.prevInResult(),i=n?n.prevInResult():null;for(;;){if(!n)return null;if(!i)return n.ringOut;if(i.ringOut!==n.ringOut)return i.ringOut?.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut?.enclosingRing();n=i.prevInResult(),i=n?n.prevInResult():null}}},Ad=class{exteriorRing;interiorRings;constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const t=[e];for(let n=0,i=this.interiorRings.length;n<i;n++){const o=this.interiorRings[n].getGeom();o!==null&&t.push(o)}return t}},Xx=class{rings;polys;constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const i=this.polys[t].getGeom();i!==null&&e.push(i)}return e}_composePolys(e){const t=[];for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.poly)if(o.isExteriorRing())t.push(new Ad(o));else{const u=o.enclosingRing();u?.poly||t.push(new Ad(u)),u?.poly?.addInterior(o)}}return t}},Kx=class{queue;tree;segments;constructor(e,t=kl.compare){this.queue=e,this.tree=new bl(t),this.segments=[]}process(e){const t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);let i=t,o=t;do i=this.tree.lastBefore(i);while(i!=null&&i.consumedBy!=null);do o=this.tree.firstAfter(o);while(o!=null&&o.consumedBy!=null);if(e.isLeft){let u=null;if(i){const f=i.getIntersection(t);if(f!==null&&(t.isAnEndpoint(f)||(u=f),!i.isAnEndpoint(f))){const p=this._splitSafely(i,f);for(let _=0,v=p.length;_<v;_++)n.push(p[_])}}let h=null;if(o){const f=o.getIntersection(t);if(f!==null&&(t.isAnEndpoint(f)||(h=f),!o.isAnEndpoint(f))){const p=this._splitSafely(o,f);for(let _=0,v=p.length;_<v;_++)n.push(p[_])}}if(u!==null||h!==null){let f=null;u===null?f=h:h===null?f=u:f=cr.comparePoints(u,h)<=0?u:h,this.queue.delete(t.rightSE),n.push(t.rightSE);const p=t.split(f);for(let _=0,v=p.length;_<v;_++)n.push(p[_])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=i)}else{if(i&&o){const u=i.getIntersection(o);if(u!==null){if(!i.isAnEndpoint(u)){const h=this._splitSafely(i,u);for(let f=0,p=h.length;f<p;f++)n.push(h[f])}if(!o.isAnEndpoint(u)){const h=this._splitSafely(o,u);for(let f=0,p=h.length;f<p;f++)n.push(h[f])}}}this.tree.delete(t)}return n}_splitSafely(e,t){this.tree.delete(e);const n=e.rightSE;this.queue.delete(n);const i=e.split(t);return i.push(n),e.consumedBy===void 0&&this.tree.add(e),i}},Jx=class{type;numMultiPolys;run(e,t,n){ka.type=e;const i=[new Dd(t,!0)];for(let _=0,v=n.length;_<v;_++)i.push(new Dd(n[_],!1));if(ka.numMultiPolys=i.length,ka.type==="difference"){const _=i[0];let v=1;for(;v<i.length;)mh(i[v].bbox,_.bbox)!==null?v++:i.splice(v,1)}if(ka.type==="intersection")for(let _=0,v=i.length;_<v;_++){const x=i[_];for(let S=_+1,C=i.length;S<C;S++)if(mh(x.bbox,i[S].bbox)===null)return[]}const o=new bl(cr.compare);for(let _=0,v=i.length;_<v;_++){const x=i[_].getSweepEvents();for(let S=0,C=x.length;S<C;S++)o.add(x[S])}const u=new Kx(o);let h=null;for(o.size!=0&&(h=o.first(),o.delete(h));h;){const _=u.process(h);for(let v=0,x=_.length;v<x;v++){const S=_[v];S.consumedBy===void 0&&o.add(S)}o.size!=0?(h=o.first(),o.delete(h)):h=null}Hr.reset();const f=$x.factory(u.segments);return new Xx(f).getGeom()}},ka=new Jx,El=ka,Qx=0,kl=class Ju{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(t,n){const i=t.leftSE.point.x,o=n.leftSE.point.x,u=t.rightSE.point.x,h=n.rightSE.point.x;if(h.isLessThan(i))return 1;if(u.isLessThan(o))return-1;const f=t.leftSE.point.y,p=n.leftSE.point.y,_=t.rightSE.point.y,v=n.rightSE.point.y;if(i.isLessThan(o)){if(p.isLessThan(f)&&p.isLessThan(_))return 1;if(p.isGreaterThan(f)&&p.isGreaterThan(_))return-1;const x=t.comparePoint(n.leftSE.point);if(x<0)return 1;if(x>0)return-1;const S=n.comparePoint(t.rightSE.point);return S!==0?S:-1}if(i.isGreaterThan(o)){if(f.isLessThan(p)&&f.isLessThan(v))return-1;if(f.isGreaterThan(p)&&f.isGreaterThan(v))return 1;const x=n.comparePoint(t.leftSE.point);if(x!==0)return x;const S=t.comparePoint(n.rightSE.point);return S<0?1:S>0?-1:1}if(f.isLessThan(p))return-1;if(f.isGreaterThan(p))return 1;if(u.isLessThan(h)){const x=n.comparePoint(t.rightSE.point);if(x!==0)return x}if(u.isGreaterThan(h)){const x=t.comparePoint(n.rightSE.point);if(x<0)return 1;if(x>0)return-1}if(!u.eq(h)){const x=_.minus(f),S=u.minus(i),C=v.minus(p),P=h.minus(o);if(x.isGreaterThan(S)&&C.isLessThan(P))return 1;if(x.isLessThan(S)&&C.isGreaterThan(P))return-1}return u.isGreaterThan(h)?1:u.isLessThan(h)||_.isLessThan(v)?-1:_.isGreaterThan(v)?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,i,o){this.id=++Qx,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=i,this.windings=o}static fromRing(t,n,i){let o,u,h;const f=cr.comparePoints(t,n);if(f<0)o=t,u=n,h=1;else if(f>0)o=n,u=t,h=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const p=new cr(o,!0),_=new cr(u,!1);return new Ju(p,_,[i],[h])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(n)?t:n},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(n)?t:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}comparePoint(t){return Hr.orient(this.leftSE.point,t,this.rightSE.point)}getIntersection(t){const n=this.bbox(),i=t.bbox(),o=mh(n,i);if(o===null)return null;const u=this.leftSE.point,h=this.rightSE.point,f=t.leftSE.point,p=t.rightSE.point,_=ca(n,f)&&this.comparePoint(f)===0,v=ca(i,u)&&t.comparePoint(u)===0,x=ca(n,p)&&this.comparePoint(p)===0,S=ca(i,h)&&t.comparePoint(h)===0;if(v&&_)return S&&!x?h:!S&&x?p:null;if(v)return x&&u.x.eq(p.x)&&u.y.eq(p.y)?null:u;if(_)return S&&h.x.eq(f.x)&&h.y.eq(f.y)?null:f;if(S&&x)return null;if(S)return h;if(x)return p;const C=jx(u,this.vector(),f,t.vector());return C===null||!ca(o,C)?null:Hr.snap(C)}split(t){const n=[],i=t.events!==void 0,o=new cr(t,!0),u=new cr(t,!1),h=this.rightSE;this.replaceRightSE(u),n.push(u),n.push(o);const f=new Ju(o,h,this.rings.slice(),this.windings.slice());return cr.comparePoints(f.leftSE.point,f.rightSE.point)>0&&f.swapEvents(),cr.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(o.checkForConsuming(),u.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}consume(t){let n=this,i=t;for(;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;const o=Ju.compare(n,i);if(o!==0){if(o>0){const u=n;n=i,i=u}if(n.prev===i){const u=n;n=i,i=u}for(let u=0,h=i.rings.length;u<h;u++){const f=i.rings[u],p=i.windings[u],_=n.rings.indexOf(f);_===-1?(n.rings.push(f),n.windings.push(p)):n.windings[_]+=p}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,i=this._afterState.windings,o=this._afterState.multiPolys;for(let f=0,p=this.rings.length;f<p;f++){const _=this.rings[f],v=this.windings[f],x=n.indexOf(_);x===-1?(n.push(_),i.push(v)):i[x]+=v}const u=[],h=[];for(let f=0,p=n.length;f<p;f++){if(i[f]===0)continue;const _=n[f],v=_.poly;if(h.indexOf(v)===-1)if(_.isExterior)u.push(v);else{h.indexOf(v)===-1&&h.push(v);const x=u.indexOf(_.poly);x!==-1&&u.splice(x,1)}}for(let f=0,p=u.length;f<p;f++){const _=u[f].multiPoly;o.indexOf(_)===-1&&o.push(_)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(El.type){case"union":{const i=t.length===0,o=n.length===0;this._isInResult=i!==o;break}case"intersection":{let i,o;t.length<n.length?(i=t.length,o=n.length):(i=n.length,o=t.length),this._isInResult=o===El.numMultiPolys&&i<o;break}case"xor":{const i=Math.abs(t.length-n.length);this._isInResult=i%2===1;break}case"difference":{const i=o=>o.length===1&&o[0].isSubject;this._isInResult=i(t)!==i(n);break}}return this._isInResult}},Ld=class{poly;isExterior;segments;bbox;constructor(e,t,n){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=Hr.snap({x:new dr(e[0][0]),y:new dr(e[0][1])});this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let o=i;for(let u=1,h=e.length;u<h;u++){if(typeof e[u][0]!="number"||typeof e[u][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const f=Hr.snap({x:new dr(e[u][0]),y:new dr(e[u][1])});f.x.eq(o.x)&&f.y.eq(o.y)||(this.segments.push(kl.fromRing(o,f,this)),f.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=f.x),f.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=f.y),f.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=f.x),f.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=f.y),o=f)}(!i.x.eq(o.x)||!i.y.eq(o.y))&&this.segments.push(kl.fromRing(o,i,this))}getSweepEvents(){const e=[];for(let t=0,n=this.segments.length;t<n;t++){const i=this.segments[t];e.push(i.leftSE),e.push(i.rightSE)}return e}},t1=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ld(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,i=e.length;n<i;n++){const o=new Ld(e[n],this,!1);o.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){const i=this.interiorRings[t].getSweepEvents();for(let o=0,u=i.length;o<u;o++)e.push(i[o])}return e}},Dd=class{isSubject;polys;bbox;constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new dr(Number.POSITIVE_INFINITY),y:new dr(Number.POSITIVE_INFINITY)},ur:{x:new dr(Number.NEGATIVE_INFINITY),y:new dr(Number.NEGATIVE_INFINITY)}};for(let n=0,i=e.length;n<i;n++){const o=new t1(e[n],this);o.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,n=this.polys.length;t<n;t++){const i=this.polys[t].getSweepEvents();for(let o=0,u=i.length;o<u;o++)e.push(i[o])}return e}},Nd=(e,...t)=>El.run("union",e,t),e1=(e,...t)=>El.run("intersection",e,t);Hr.set;function vh(e){if(!e)throw new Error("geojson is required");var t=[];return Hh(e,function(n){t.push(n)}),mr(t)}function n1(e,t={}){if(t=t||{},!fm(t))throw new Error("options is invalid");const{propertyName:n}=t;dm(e,"Polygon","dissolve");const i=[];if(n){const o={};uh(e,function(h){h.properties&&(Object.prototype.hasOwnProperty.call(o,h.properties[n])||(o[h.properties[n]]=[]),o[h.properties[n]].push(h))});const u=Object.keys(o);for(let h=0;h<u.length;h++){const f=gl(Nd.apply(null,o[u[h]].map(function(p){return p.geometry.coordinates})));f&&f.properties&&(f.properties[n]=u[h],i.push(f))}}else return vh(gl(Nd.apply(null,e.features.map(function(o){return o.geometry.coordinates}))));return vh(mr(i))}function i1(e,t={}){const n=[];if(nu(e,o=>{n.push(o.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const i=e1(n[0],...n.slice(1));return i.length===0?null:i.length===1?dl(i[0],t.properties):gl(i,t.properties)}function r1(e,t={}){var n,i,o,u=t.properties,h=(n=t.autoComplete)!=null?n:!0,f=(i=t.orderCoords)!=null?i:!0,p=(o=t.mutate)!=null?o:!1;if(p||(e=Rx(e)),e.type==="FeatureCollection"){var _=[];return e.features.forEach(function(v){_.push(X0(Pd(v,{},h,f)))}),gl(_,u)}else return Pd(e,u,h,f)}function Pd(e,t,n,i){t=t||(e.type==="Feature"?e.properties:{});var o=K0(e),u=o.coordinates,h=o.type;if(!u.length)throw new Error("line must contain coordinates");switch(h){case"LineString":return n&&(u=Od(u)),dl([u],t);case"MultiLineString":var f=[],p=0;return u.forEach(function(_){if(n&&(_=Od(_)),i){var v=s1(pm(Y0(_)));v>p?(f.unshift(_),p=v):f.push(_)}else f.push(_)}),dl(f,t);default:throw new Error("geometry type "+h+" is not supported")}}function Od(e){var t=e[0],n=t[0],i=t[1],o=e[e.length-1],u=o[0],h=o[1];return(n!==u||i!==h)&&e.push(t),e}function s1(e){var t=e[0],n=e[1],i=e[2],o=e[3];return Math.abs(t-i)*Math.abs(n-o)}function Md(e){return function(){return e}}function o1(e){return e[0]}function a1(e){return e[1]}function Sl(){this._=null}function Kl(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Sl.prototype={constructor:Sl,insert:function(e,t){var n,i,o;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Rd(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)i=n.U,n===i.L?(o=i.R,o&&o.C?(n.C=o.C=!1,i.C=!0,e=i):(e===n.R&&(ha(this,n),e=n,n=e.U),n.C=!1,i.C=!0,fa(this,i))):(o=i.L,o&&o.C?(n.C=o.C=!1,i.C=!0,e=i):(e===n.L&&(fa(this,n),e=n,n=e.U),n.C=!1,i.C=!0,ha(this,i))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,i=e.L,o=e.R,u,h;if(i?o?u=Rd(o):u=i:u=o,t?t.L===e?t.L=u:t.R=u:this._=u,i&&o?(h=u.C,u.C=e.C,u.L=i,i.U=u,u!==o?(t=u.U,u.U=e.U,e=u.R,t.L=e,u.R=o,o.U=u):(u.U=t,t=u,e=u.R)):(h=e.C,e=u),e&&(e.U=t),!h){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,ha(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,fa(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,ha(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,fa(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,ha(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,fa(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function ha(e,t){var n=t,i=t.R,o=n.U;o?o.L===n?o.L=i:o.R=i:e._=i,i.U=o,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function fa(e,t){var n=t,i=t.L,o=n.U;o?o.L===n?o.L=i:o.R=i:e._=i,i.U=o,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Rd(e){for(;e.L;)e=e.L;return e}function Sa(e,t,n,i){var o=[null,null],u=Zn.push(o)-1;return o.left=e,o.right=t,n&&Cl(o,e,t,n),i&&Cl(o,t,e,i),pi[e.index].halfedges.push(u),pi[t.index].halfedges.push(u),o}function da(e,t,n){var i=[t,n];return i.left=e,i}function Cl(e,t,n,i){!e[0]&&!e[1]?(e[0]=i,e.left=t,e.right=n):e.left===n?e[1]=i:e[0]=i}function u1(e,t,n,i,o){var u=e[0],h=e[1],f=u[0],p=u[1],_=h[0],v=h[1],x=0,S=1,C=_-f,P=v-p,N;if(N=t-f,!(!C&&N>0)){if(N/=C,C<0){if(N<x)return;N<S&&(S=N)}else if(C>0){if(N>S)return;N>x&&(x=N)}if(N=i-f,!(!C&&N<0)){if(N/=C,C<0){if(N>S)return;N>x&&(x=N)}else if(C>0){if(N<x)return;N<S&&(S=N)}if(N=n-p,!(!P&&N>0)){if(N/=P,P<0){if(N<x)return;N<S&&(S=N)}else if(P>0){if(N>S)return;N>x&&(x=N)}if(N=o-p,!(!P&&N<0)){if(N/=P,P<0){if(N>S)return;N>x&&(x=N)}else if(P>0){if(N<x)return;N<S&&(S=N)}return!(x>0)&&!(S<1)||(x>0&&(e[0]=[f+x*C,p+x*P]),S<1&&(e[1]=[f+S*C,p+S*P])),!0}}}}}function l1(e,t,n,i,o){var u=e[1];if(u)return!0;var h=e[0],f=e.left,p=e.right,_=f[0],v=f[1],x=p[0],S=p[1],C=(_+x)/2,P=(v+S)/2,N,O;if(S===v){if(C<t||C>=i)return;if(_>x){if(!h)h=[C,n];else if(h[1]>=o)return;u=[C,o]}else{if(!h)h=[C,o];else if(h[1]<n)return;u=[C,n]}}else if(N=(_-x)/(S-v),O=P-N*C,N<-1||N>1)if(_>x){if(!h)h=[(n-O)/N,n];else if(h[1]>=o)return;u=[(o-O)/N,o]}else{if(!h)h=[(o-O)/N,o];else if(h[1]<n)return;u=[(n-O)/N,n]}else if(v<S){if(!h)h=[t,N*t+O];else if(h[0]>=i)return;u=[i,N*i+O]}else{if(!h)h=[i,N*i+O];else if(h[0]<t)return;u=[t,N*t+O]}return e[0]=h,e[1]=u,!0}function c1(e,t,n,i){for(var o=Zn.length,u;o--;)(!l1(u=Zn[o],e,t,n,i)||!u1(u,e,t,n,i)||!(Math.abs(u[0][0]-u[1][0])>Ge||Math.abs(u[0][1]-u[1][1])>Ge))&&delete Zn[o]}function h1(e){return pi[e.index]={site:e,halfedges:[]}}function f1(e,t){var n=e.site,i=t.left,o=t.right;return n===o&&(o=i,i=n),o?Math.atan2(o[1]-i[1],o[0]-i[0]):(n===i?(i=t[1],o=t[0]):(i=t[0],o=t[1]),Math.atan2(i[0]-o[0],o[1]-i[1]))}function Bm(e,t){return t[+(t.left!==e.site)]}function d1(e,t){return t[+(t.left===e.site)]}function g1(){for(var e=0,t=pi.length,n,i,o,u;e<t;++e)if((n=pi[e])&&(u=(i=n.halfedges).length)){var h=new Array(u),f=new Array(u);for(o=0;o<u;++o)h[o]=o,f[o]=f1(n,Zn[i[o]]);for(h.sort(function(p,_){return f[_]-f[p]}),o=0;o<u;++o)f[o]=i[h[o]];for(o=0;o<u;++o)i[o]=f[o]}}function p1(e,t,n,i){var o=pi.length,u,h,f,p,_,v,x,S,C,P,N,O,j=!0;for(u=0;u<o;++u)if(h=pi[u]){for(f=h.site,_=h.halfedges,p=_.length;p--;)Zn[_[p]]||_.splice(p,1);for(p=0,v=_.length;p<v;)P=d1(h,Zn[_[p]]),N=P[0],O=P[1],x=Bm(h,Zn[_[++p%v]]),S=x[0],C=x[1],(Math.abs(N-S)>Ge||Math.abs(O-C)>Ge)&&(_.splice(p,0,Zn.push(da(f,P,Math.abs(N-e)<Ge&&i-O>Ge?[e,Math.abs(S-e)<Ge?C:i]:Math.abs(O-i)<Ge&&n-N>Ge?[Math.abs(C-i)<Ge?S:n,i]:Math.abs(N-n)<Ge&&O-t>Ge?[n,Math.abs(S-n)<Ge?C:t]:Math.abs(O-t)<Ge&&N-e>Ge?[Math.abs(C-t)<Ge?S:e,t]:null))-1),++v);v&&(j=!1)}if(j){var U,nt,ct,tt=1/0;for(u=0,j=null;u<o;++u)(h=pi[u])&&(f=h.site,U=f[0]-e,nt=f[1]-t,ct=U*U+nt*nt,ct<tt&&(tt=ct,j=h));if(j){var pt=[e,t],st=[e,i],E=[n,i],b=[n,t];j.halfedges.push(Zn.push(da(f=j.site,pt,st))-1,Zn.push(da(f,st,E))-1,Zn.push(da(f,E,b))-1,Zn.push(da(f,b,pt))-1)}}for(u=0;u<o;++u)(h=pi[u])&&(h.halfedges.length||delete pi[u])}var zm=[],Zh;function m1(){Kl(this),this.x=this.y=this.arc=this.site=this.cy=null}function _o(e){var t=e.P,n=e.N;if(!(!t||!n)){var i=t.site,o=e.site,u=n.site;if(i!==u){var h=o[0],f=o[1],p=i[0]-h,_=i[1]-f,v=u[0]-h,x=u[1]-f,S=2*(p*x-_*v);if(!(S>=-1e-12)){var C=p*p+_*_,P=v*v+x*x,N=(x*C-_*P)/S,O=(p*P-v*C)/S,j=zm.pop()||new m1;j.arc=e,j.site=o,j.x=N+h,j.y=(j.cy=O+f)+Math.sqrt(N*N+O*O),e.circle=j;for(var U=null,nt=ja._;nt;)if(j.y<nt.y||j.y===nt.y&&j.x<=nt.x)if(nt.L)nt=nt.L;else{U=nt.P;break}else if(nt.R)nt=nt.R;else{U=nt;break}ja.insert(U,j),U||(Zh=j)}}}}function Eo(e){var t=e.circle;t&&(t.P||(Zh=t.N),ja.remove(t),zm.push(t),Kl(t),e.circle=null)}var qm=[];function _1(){Kl(this),this.edge=this.site=this.circle=null}function Fd(e){var t=qm.pop()||new _1;return t.site=e,t}function Rc(e){Eo(e),ko.remove(e),qm.push(e),Kl(e)}function v1(e){var t=e.circle,n=t.x,i=t.cy,o=[n,i],u=e.P,h=e.N,f=[e];Rc(e);for(var p=u;p.circle&&Math.abs(n-p.circle.x)<Ge&&Math.abs(i-p.circle.cy)<Ge;)u=p.P,f.unshift(p),Rc(p),p=u;f.unshift(p),Eo(p);for(var _=h;_.circle&&Math.abs(n-_.circle.x)<Ge&&Math.abs(i-_.circle.cy)<Ge;)h=_.N,f.push(_),Rc(_),_=h;f.push(_),Eo(_);var v=f.length,x;for(x=1;x<v;++x)_=f[x],p=f[x-1],Cl(_.edge,p.site,_.site,o);p=f[0],_=f[v-1],_.edge=Sa(p.site,_.site,null,o),_o(p),_o(_)}function y1(e){for(var t=e[0],n=e[1],i,o,u,h,f=ko._;f;)if(u=Um(f,n)-t,u>Ge)f=f.L;else if(h=t-x1(f,n),h>Ge){if(!f.R){i=f;break}f=f.R}else{u>-Ge?(i=f.P,o=f):h>-Ge?(i=f,o=f.N):i=o=f;break}h1(e);var p=Fd(e);if(ko.insert(i,p),!(!i&&!o)){if(i===o){Eo(i),o=Fd(i.site),ko.insert(p,o),p.edge=o.edge=Sa(i.site,p.site),_o(i),_o(o);return}if(!o){p.edge=Sa(i.site,p.site);return}Eo(i),Eo(o);var _=i.site,v=_[0],x=_[1],S=e[0]-v,C=e[1]-x,P=o.site,N=P[0]-v,O=P[1]-x,j=2*(S*O-C*N),U=S*S+C*C,nt=N*N+O*O,ct=[(O*U-C*nt)/j+v,(S*nt-N*U)/j+x];Cl(o.edge,_,P,ct),p.edge=Sa(_,e,null,ct),o.edge=Sa(e,P,null,ct),_o(i),_o(o)}}function Um(e,t){var n=e.site,i=n[0],o=n[1],u=o-t;if(!u)return i;var h=e.P;if(!h)return-1/0;n=h.site;var f=n[0],p=n[1],_=p-t;if(!_)return f;var v=f-i,x=1/u-1/_,S=v/_;return x?(-S+Math.sqrt(S*S-2*x*(v*v/(-2*_)-p+_/2+o-u/2)))/x+i:(i+f)/2}function x1(e,t){var n=e.N;if(n)return Um(n,t);var i=e.site;return i[1]===t?i[0]:1/0}var Ge=1e-6,ko,pi,ja,Zn;function b1(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function w1(e,t){return t[1]-e[1]||t[0]-e[0]}function yh(e,t){var n=e.sort(w1).pop(),i,o,u;for(Zn=[],pi=new Array(e.length),ko=new Sl,ja=new Sl;;)if(u=Zh,n&&(!u||n[1]<u.y||n[1]===u.y&&n[0]<u.x))(n[0]!==i||n[1]!==o)&&(y1(n),i=n[0],o=n[1]),n=e.pop();else if(u)v1(u.arc);else break;if(g1(),t){var h=+t[0][0],f=+t[0][1],p=+t[1][0],_=+t[1][1];c1(h,f,p,_),p1(h,f,p,_)}this.edges=Zn,this.cells=pi,ko=ja=Zn=pi=null}yh.prototype={constructor:yh,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(i){return Bm(t,e[i])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,i){if(f=(u=n.halfedges).length)for(var o=n.site,u,h=-1,f,p,_=t[u[f-1]],v=_.left===o?_.right:_.left;++h<f;)p=v,_=t[u[h]],v=_.left===o?_.right:_.left,p&&v&&i<p.index&&i<v.index&&b1(o,p,v)<0&&e.push([o.data,p.data,v.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var i=this,o,u=i._found||0,h=i.cells.length,f;!(f=i.cells[u]);)if(++u>=h)return null;var p=e-f.site[0],_=t-f.site[1],v=p*p+_*_;do f=i.cells[o=u],u=null,f.halfedges.forEach(function(x){var S=i.edges[x],C=S.left;if(!((C===f.site||!C)&&!(C=S.right))){var P=e-C[0],N=t-C[1],O=P*P+N*N;O<v&&(v=O,u=C.index)}});while(u!==null);return i._found=o,n==null||v<=n*n?f.site:null}};function E1(){var e=o1,t=a1,n=null;function i(o){return new yh(o.map(function(u,h){var f=[Math.round(e(u,h,o)/Ge)*Ge,Math.round(t(u,h,o)/Ge)*Ge];return f.index=h,f.data=u,f}),n)}return i.polygons=function(o){return i(o).polygons()},i.links=function(o){return i(o).links()},i.triangles=function(o){return i(o).triangles()},i.x=function(o){return arguments.length?(e=typeof o=="function"?o:Md(+o),i):e},i.y=function(o){return arguments.length?(t=typeof o=="function"?o:Md(+o),i):t},i.extent=function(o){return arguments.length?(n=o==null?null:[[+o[0][0],+o[0][1]],[+o[1][0],+o[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(o){return arguments.length?(n=o==null?null:[[0,0],[+o[0],+o[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}function k1(e){return e=e.slice(),e.push(e[0]),dl([e])}function S1(e,t){if(t=t||{},!fm(t))throw new Error("options is invalid");const n=t.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return dm(e,"Point","points"),mr(E1().x(i=>i.geometry.coordinates[0]).y(i=>i.geometry.coordinates[1]).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(e.features).map(function(i,o){return Object.assign(k1(i),{properties:Gh(e.features[o].properties)})}))}const C1=[6.5,47.5,9,50],T1=(e,t,n)=>{const i=e.filter(_=>_.Latitude&&_.Longitude&&_["Nom du PAS"]).map(_=>hm([_.Longitude,_.Latitude],{pas:_["Nom du PAS"],circo:_.Circonscription}));if(i.length<3)return{features:[],mask:null};const o=mr(i),u=I1(t);if(!u)return{features:[],mask:null};const h=A1(u);if(!h)return{features:[],mask:null};const f=S1(o,{bbox:C1}),p=[];return f.features.forEach((_,v)=>{if(!_||!i[v])return;const x=i[v].properties.pas;if(n.includes(x)){_.properties={...i[v].properties,color:L1(x)};try{const S=mr([_,h]),C=i1(S);C&&(C.properties={..._.properties},p.push(C))}catch(S){console.error(`[VoronoiService] Intersection error for ${x}:`,S),p.push(_)}}}),{features:p,mask:h}},I1=e=>{if(!e)return null;const t=[];return Hh(e,n=>{if(n.geometry.type==="Polygon")t.push(n);else if(n.geometry.type==="LineString")try{const i=r1(n);i&&t.push(i)}catch{}}),t.length===0?null:(t.sort((n,i)=>pl(i)-pl(n)),t[0]||null)},A1=e=>{try{const t=Ox(e,0);if(!t)return e;if(t.type==="FeatureCollection"){const n=t;return n.features&&n.features.length>0&&[...n.features].sort((o,u)=>pl(u)-pl(o))[0]||null}return t}catch(t){return console.error("[VoronoiService] Error cleaning geometry:",t),e}},L1=e=>{let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return`hsl(${Math.abs(t)%360}, 65%, 60%)`},D1=$i({__name:"LeafletMap",setup(e){const t=_s(),n=pn(null);let i=null,o=null,u=null,h=null,f=null,p=null;const _={},v=N=>{let O=0;for(let j=0;j<N.length;j++)O=N.charCodeAt(j)+((O<<5)-O);return`hsl(${Math.abs(O)%360}, 65%, 60%)`},x=()=>{n.value&&(i=Jr.map(n.value,{zoomControl:!1,center:[48.6,7.5],zoom:9}),Jr.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap & CartoDB"}).addTo(i),u=Jr.geoJSON(null,{style:N=>{const O=N?.properties?.pas;return{fillColor:O?v(O):"#ccc",weight:1,opacity:.5,color:"white",fillOpacity:.2}},onEachFeature:(N,O)=>{N.properties?.pas&&O.bindTooltip(`${N.properties.name} (${N.properties.pas})`,{sticky:!0}),O.on("click",()=>{N.properties?.pas&&t.selectPas(N.properties.pas)})}}).addTo(i),h=Jr.geoJSON(null,{style:N=>{const O=N?.properties?.pas;return{fillColor:O?v(O):"#ccc",weight:1,opacity:1,color:"white",fillOpacity:.4}},onEachFeature:(N,O)=>{N.properties?.pas&&O.bindTooltip(`PAS: ${N.properties.pas}`,{sticky:!0}),O.on("click",()=>{N.properties?.pas&&t.selectPas(N.properties.pas)})}}).addTo(i),f=Jr.geoJSON(null,{style:()=>({fillOpacity:0,weight:3,opacity:1,color:"#000",dashArray:"5, 5"}),onEachFeature:(N,O)=>{N.properties?.circ&&O.bindTooltip(`Circonscription: ${N.properties.circ}`,{sticky:!0})}}).addTo(i),p=Jr.geoJSON(null).addTo(i),o=Jr.layerGroup().addTo(i))},S=()=>{if(!i||!u||!t.sectorsGeoJson)return;const N=new Map;t.schools.forEach(j=>{j["Nom du PAS"]&&(N.set(j["Nom complet"].toLowerCase(),j["Nom du PAS"]),j.Commune&&N.set(j.Commune.toLowerCase(),j["Nom du PAS"]))});const O=[];Hh(t.sectorsGeoJson,j=>{const U=j.properties?.name;if(U){const nt=U.toLowerCase();let ct;for(const[tt,pt]of N.entries())if(nt.includes(tt)){ct=pt;break}ct&&j.properties&&(j.properties.pas=ct),O.push(j)}}),O.length>0&&(u.clearLayers(),u.addData(mr(O)))},C=()=>{try{if(!i||!h||!f||!t.sectorsGeoJson||t.schools.length===0)return;const{features:N,mask:O}=T1(ke(t.schools),ke(t.sectorsGeoJson),ke(t.filteredPasNames));if(p&&(p.clearLayers(),O&&(p.addData(O),p.setStyle({color:"#000000",dashArray:"5, 5",weight:2,fill:!1}))),h.clearLayers(),N.length>0){const j=mr(N);h.addData(j),h.bringToBack();try{const U=vh(j),nt=n1(U,{propertyName:"circo"});f.clearLayers(),nt&&nt.features.length>0&&(f.addData(nt),f.setStyle({color:"#333333",weight:3,opacity:1,fill:!1}),f.bringToFront())}catch(U){console.error("[Voronoi] Dissolve error:",U)}}else f.clearLayers()}catch(N){console.error("[Voronoi] Error in updateVoronoiPas:",N)}},P=()=>{if(!(!i||!o)){o.clearLayers();for(const N in _)delete _[N];t.filteredSchools.forEach(N=>{if(N.Latitude&&N.Longitude){const O=N.Degr==="2nd degr",j=O?"#1e293b":"#ffffff",U=O?"#3b82f6":"#10b981",nt=t.selectedSchool?.UAI===N.UAI,ct=Jr.circleMarker([N.Latitude,N.Longitude],{radius:nt?8:O?6:4,fillColor:j,color:nt?"#ef4444":U,weight:nt?3:2,fillOpacity:1});ct.bindPopup(`
        <div class="font-bold text-sm text-slate-800">${N["Nom complet"]}</div>
        <div class="text-xs text-slate-500">${N["Nom du PAS"]}</div>
      `),ct.on("click",()=>{t.selectSchool(N.UAI)}),ct.on("mouseover",()=>{t.setHoveredSchool(N.UAI)}),ct.on("mouseout",()=>{t.setHoveredSchool(null)}),o?.addLayer(ct),_[N.UAI]=ct}})}};return Oi(()=>t.filteredSchools,()=>{P(),S()},{deep:!0}),Oi(()=>t.schools,()=>{C()},{deep:!0}),Oi(()=>t.sectorsGeoJson,()=>{S(),C()}),Oi(()=>t.filteredPasNames,()=>{C()},{deep:!0}),Oi(()=>t.selectedSchool,N=>{if(P(),N&&i){const O=_[N.UAI];O&&(i.flyTo(O.getLatLng(),11,{duration:1.5}),O.openPopup())}}),Oi(()=>t.hoveredSchoolUai,(N,O)=>{if(O&&_[O]){const j=t.schools.find(ct=>ct.UAI===O),U=j&&j.Degr==="2nd degr",nt=t.selectedSchool?.UAI===O;_[O].setRadius(nt?8:U?6:4)}N&&_[N]&&(_[N].bringToFront(),_[N].setRadius(10))}),Gl(()=>{x(),setTimeout(()=>{P(),S(),C(),i?.invalidateSize()},100)}),Vl(()=>{i?.remove()}),(N,O)=>(le(),he("div",{ref_key:"mapContainer",ref:n,class:"w-full h-full bg-slate-100 z-0"},null,512))}}),N1=["id"],P1={class:"flex justify-between items-start mb-1"},O1={key:0,class:"w-full"},M1=["id"],R1={key:2,class:"flex gap-1 flex-wrap justify-end w-1/4"},F1={key:0,class:"px-1 py-0.5 bg-red-100 text-red-700 text-[9px] font-bold rounded"},B1={key:1,class:"px-1 py-0.5 bg-purple-100 text-purple-700 text-[9px] font-bold rounded"},z1={key:2,class:"px-1 py-0.5 bg-orange-100 text-orange-700 text-[9px] font-bold rounded"},q1={class:"flex justify-between items-center text-xs text-slate-500 mt-2"},U1={class:"flex gap-2"},H1={class:"font-mono bg-slate-100 px-1 rounded"},G1=["title"],V1={class:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden"},Z1={class:"font-bold text-[10px]"},W1={class:"mt-1 text-[10px] text-slate-400 truncate"},Hm=$i({__name:"SchoolCard",props:{school:{}},setup(e){const t=_s(),n=e,i=pn(!1),o=pn(""),u=()=>{i.value=!0,o.value=n.school["Nom complet"],Io(()=>{const p=document.getElementById("edit-school-"+n.school.UAI);p&&p.focus()})},h=()=>{o.value.trim()&&o.value!==n.school["Nom complet"]&&t.renameSchool(n.school.UAI,o.value),i.value=!1},f=()=>{i.value=!1};return(p,_)=>(le(),he("div",{id:"card-"+e.school.UAI,class:Xn(["bg-white p-3 rounded shadow-sm border-l-4 cursor-grab active:cursor-grabbing hover:shadow-md transition-all duration-200",[e.school.Degr==="2nd degr"?"border-l-blue-500":"border-l-teal-400",ge(t).selectedSchool?.UAI===e.school.UAI||ge(t).hoveredSchoolUai===e.school.UAI?"ring-2 ring-blue-500 bg-blue-50/50 scale-[1.02]":""]]),draggable:"true",onMouseenter:_[2]||(_[2]=v=>ge(t).setHoveredSchool(e.school.UAI)),onMouseleave:_[3]||(_[3]=v=>ge(t).setHoveredSchool(null))},[rt("div",P1,[i.value?(le(),he("div",O1,[ol(rt("input",{id:"edit-school-"+e.school.UAI,"onUpdate:modelValue":_[0]||(_[0]=v=>o.value=v),class:"w-full px-1 py-0.5 text-xs font-bold border-2 border-blue-400 rounded outline-none",onBlur:h,onKeyup:[fl(h,["enter"]),fl(f,["esc"])],onClick:_[1]||(_[1]=ss(()=>{},["stop"]))},null,40,M1),[[hl,o.value]])])):(le(),he("h4",{key:1,class:"font-bold text-xs text-slate-800 leading-tight w-3/4 cursor-text",onDblclick:ss(u,["stop"])},ue(e.school["Nom complet"]),33)),i.value?Nn("",!0):(le(),he("div",R1,[e.school["Education prioritaire (Archipel)"]?.includes("REP")?(le(),he("span",F1,"REP")):Nn("",!0),e.school["Education prioritaire (Archipel)"]?.includes("CLA")?(le(),he("span",B1,"CLA")):Nn("",!0),e.school.Territoire==="OUI"?(le(),he("span",z1,"TER")):Nn("",!0)]))]),rt("div",q1,[rt("div",U1,[rt("span",H1,ue(e.school["Effectifs (Archipel)"])+" lves",1)]),rt("div",{class:"flex items-center gap-1",title:"IPS: "+e.school.IPS},[rt("div",V1,[rt("div",{class:"h-full bg-blue-500",style:js({width:Math.min(e.school.IPS/150*100,100)+"%"})},null,4)]),rt("span",Z1,ue(e.school.IPS),1)],8,G1)]),rt("div",W1,ue(e.school.Commune),1)],42,N1))}}),Y1={class:"flex h-full overflow-x-auto gap-4 p-4 items-start bg-slate-100"},j1=["onDrop","onClick"],$1={class:"p-3 bg-white rounded-t shadow-sm sticky top-0 z-10 space-y-2"},X1={key:0},K1=["id","onBlur","onKeyup"],J1={key:1,class:"flex justify-between items-center group"},Q1=["onDblclick"],tb=["onClick"],eb={class:"flex justify-between items-center text-[10px] bg-slate-50 p-1.5 rounded border border-slate-100 font-mono"},nb={class:"flex flex-col"},ib={class:"font-bold text-slate-700"},rb={class:"flex flex-col text-right"},sb={class:"font-bold text-slate-700"},ob={class:"flex flex-col text-right"},ab={class:"font-bold text-slate-700"},ub={class:"p-2 overflow-y-auto flex-1 min-h-[100px] space-y-4 pb-12"},lb=["onDrop"],cb=["onDragstart"],hb={class:"flex items-center gap-1"},fb={class:"truncate max-w-[180px]"},db={class:"bg-slate-800/50 px-1.5 rounded text-[9px]"},gb={class:"p-1 space-y-1.5"},pb=$i({__name:"PasBoard",setup(e){const t=_s(),n=Bn(()=>{const C={};return t.filteredPasNames.forEach(P=>{const N=t.schools.filter(j=>j["Nom du PAS"]===P),O={};N.forEach(j=>{const U=j["PAS.1.Collge de rattachement"]||"Hors Secteur";O[U]||(O[U]=[]),O[U].push(j)}),Object.keys(O).forEach(j=>{O[j].sort((U,nt)=>U.Degr==="2nd degr"?-1:1)}),C[P]=O}),C}),i=pn(null),o=pn(""),u=C=>{i.value=C,o.value=C,Io(()=>{const P=document.getElementById("edit-input-"+C);P&&P.focus()})},h=C=>{o.value.trim()&&o.value!==C&&t.renamePas(C,o.value),i.value=null},f=()=>{i.value=null},p=(C,P)=>{C.dataTransfer&&(C.dataTransfer.setData("type","SCHOOL"),C.dataTransfer.setData("uai",P.UAI),C.dataTransfer.effectAllowed="move")},_=(C,P,N)=>{C.dataTransfer&&(C.dataTransfer.setData("type","SECTOR"),C.dataTransfer.setData("sector",P),C.dataTransfer.setData("sourcePas",N),C.dataTransfer.effectAllowed="move")},v=(C,P)=>{const N=C.dataTransfer?.getData("type");if(N==="SCHOOL"){const O=C.dataTransfer?.getData("uai");O&&t.updateSchoolPas(O,P)}else if(N==="SECTOR"){const O=C.dataTransfer?.getData("sector");O&&t.updateSectorPas(O,P)}},x=(C,P,N)=>{if(C.dataTransfer?.getData("type")==="SCHOOL"){const j=C.dataTransfer?.getData("uai");j&&t.updateSchoolSector(j,P,N)}},S=C=>{let P=0;for(let N=0;N<C.length;N++)P=C.charCodeAt(N)+((P<<5)-P);return`hsl(${Math.abs(P)%360}, 65%, 60%)`};return Oi(()=>t.selectedSchool,async C=>{if(C){await Io();const P=document.getElementById("card-"+C.UAI);P&&P.scrollIntoView({behavior:"smooth",block:"center"})}}),(C,P)=>(le(),he("div",Y1,[(le(!0),he(mn,null,cs(ge(t).filteredPasNames,N=>(le(),he("div",{key:N,class:Xn(["flex-shrink-0 w-72 bg-slate-200 rounded-lg flex flex-col max-h-full border-t-4 shadow-md transition-all",{"ring-2 ring-blue-500 ring-offset-2":ge(t).selectedPas===N}]),style:js({borderTopColor:S(N)}),onDragover:P[2]||(P[2]=ss(()=>{},["prevent"])),onDrop:O=>v(O,N),onClick:O=>ge(t).selectPas(N)},[rt("div",$1,[i.value===N?(le(),he("div",X1,[ol(rt("input",{id:"edit-input-"+N,"onUpdate:modelValue":P[0]||(P[0]=O=>o.value=O),class:"w-full px-2 py-1 text-sm font-bold border-2 border-blue-500 rounded outline-none",onBlur:O=>h(N),onKeyup:[fl(O=>h(N),["enter"]),fl(f,["esc"])]},null,40,K1),[[hl,o.value]])])):(le(),he("div",J1,[rt("h3",{class:"font-extrabold text-sm text-slate-800 truncate cursor-text",onDblclick:ss(O=>u(N),["stop"])},ue(N),41,Q1),rt("button",{onClick:ss(O=>u(N),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-blue-500 transition-opacity"},[...P[3]||(P[3]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[rt("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),rt("path",{d:"m15 5 4 4"})],-1)])],8,tb)])),rt("div",eb,[rt("div",nb,[P[4]||(P[4]=rt("span",{class:"text-slate-400 uppercase text-[8px]"},"IPS",-1)),rt("span",ib,ue(ge(t).pasMetrics[N]?.ips),1)]),rt("div",rb,[P[5]||(P[5]=rt("span",{class:"text-slate-400 uppercase text-[8px]"},"Distance",-1)),rt("span",sb,ue(ge(t).pasMetrics[N]?.dist),1)]),rt("div",ob,[P[6]||(P[6]=rt("span",{class:"text-slate-400 uppercase text-[8px]"},"Effectif",-1)),rt("span",ab,ue(ge(t).pasMetrics[N]?.effectif),1)])])]),rt("div",ub,[(le(!0),he(mn,null,cs(n.value[N],(O,j)=>(le(),he("div",{key:j,class:"bg-slate-300/50 rounded-md overflow-hidden border border-slate-300/50",onDragover:P[1]||(P[1]=ss(()=>{},["prevent"])),onDrop:ss(U=>x(U,j,N),["stop"])},[rt("div",{class:"bg-slate-600 text-white px-2 py-1 text-[10px] font-bold flex justify-between items-center cursor-move hover:bg-slate-700 active:cursor-grabbing",draggable:"true",onDragstart:U=>_(U,j,N)},[rt("div",hb,[P[7]||(P[7]=rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"text-slate-300"},[rt("path",{d:"M5 9h14"}),rt("path",{d:"M5 15h14"})],-1)),rt("span",fb,ue(j),1)]),rt("span",db,ue(O.length),1)],40,cb),rt("div",gb,[(le(!0),he(mn,null,cs(O,U=>(le(),Va(Hm,{key:U.UAI,school:U,draggable:"true",onDragstart:nt=>p(nt,U),onClick:ss(nt=>ge(t).selectSchool(U.UAI),["stop"]),class:Xn(["transform transition-transform active:scale-95",{"ring-2 ring-blue-500":ge(t).selectedSchool?.UAI===U.UAI}])},null,8,["school","onDragstart","onClick","class"]))),128))])],40,lb))),128))])],46,j1))),128))]))}});function iu(e){return e+.5|0}const os=(e,t,n)=>Math.max(Math.min(e,n),t);function Ca(e){return os(iu(e*2.55),0,255)}function hs(e){return os(iu(e*255),0,255)}function Or(e){return os(iu(e/2.55)/100,0,1)}function Bd(e){return os(iu(e*100),0,100)}const Li={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xh=[..."0123456789ABCDEF"],mb=e=>xh[e&15],_b=e=>xh[(e&240)>>4]+xh[e&15],Du=e=>(e&240)>>4===(e&15),vb=e=>Du(e.r)&&Du(e.g)&&Du(e.b)&&Du(e.a);function yb(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Li[e[1]]*17,g:255&Li[e[2]]*17,b:255&Li[e[3]]*17,a:t===5?Li[e[4]]*17:255}:(t===7||t===9)&&(n={r:Li[e[1]]<<4|Li[e[2]],g:Li[e[3]]<<4|Li[e[4]],b:Li[e[5]]<<4|Li[e[6]],a:t===9?Li[e[7]]<<4|Li[e[8]]:255})),n}const xb=(e,t)=>e<255?t(e):"";function bb(e){var t=vb(e)?mb:_b;return e?"#"+t(e.r)+t(e.g)+t(e.b)+xb(e.a,t):void 0}const wb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gm(e,t,n){const i=t*Math.min(n,1-n),o=(u,h=(u+e/30)%12)=>n-i*Math.max(Math.min(h-3,9-h,1),-1);return[o(0),o(8),o(4)]}function Eb(e,t,n){const i=(o,u=(o+e/60)%6)=>n-n*t*Math.max(Math.min(u,4-u,1),0);return[i(5),i(3),i(1)]}function kb(e,t,n){const i=Gm(e,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)i[o]*=1-t-n,i[o]+=t;return i}function Sb(e,t,n,i,o){return e===o?(t-n)/i+(t<n?6:0):t===o?(n-e)/i+2:(e-t)/i+4}function Wh(e){const n=e.r/255,i=e.g/255,o=e.b/255,u=Math.max(n,i,o),h=Math.min(n,i,o),f=(u+h)/2;let p,_,v;return u!==h&&(v=u-h,_=f>.5?v/(2-u-h):v/(u+h),p=Sb(n,i,o,v,u),p=p*60+.5),[p|0,_||0,f]}function Yh(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(hs)}function jh(e,t,n){return Yh(Gm,e,t,n)}function Cb(e,t,n){return Yh(kb,e,t,n)}function Tb(e,t,n){return Yh(Eb,e,t,n)}function Vm(e){return(e%360+360)%360}function Ib(e){const t=wb.exec(e);let n=255,i;if(!t)return;t[5]!==i&&(n=t[6]?Ca(+t[5]):hs(+t[5]));const o=Vm(+t[2]),u=+t[3]/100,h=+t[4]/100;return t[1]==="hwb"?i=Cb(o,u,h):t[1]==="hsv"?i=Tb(o,u,h):i=jh(o,u,h),{r:i[0],g:i[1],b:i[2],a:n}}function Ab(e,t){var n=Wh(e);n[0]=Vm(n[0]+t),n=jh(n),e.r=n[0],e.g=n[1],e.b=n[2]}function Lb(e){if(!e)return;const t=Wh(e),n=t[0],i=Bd(t[1]),o=Bd(t[2]);return e.a<255?`hsla(${n}, ${i}%, ${o}%, ${Or(e.a)})`:`hsl(${n}, ${i}%, ${o}%)`}const zd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qd={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Db(){const e={},t=Object.keys(qd),n=Object.keys(zd);let i,o,u,h,f;for(i=0;i<t.length;i++){for(h=f=t[i],o=0;o<n.length;o++)u=n[o],f=f.replace(u,zd[u]);u=parseInt(qd[h],16),e[f]=[u>>16&255,u>>8&255,u&255]}return e}let Nu;function Nb(e){Nu||(Nu=Db(),Nu.transparent=[0,0,0,0]);const t=Nu[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Pb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ob(e){const t=Pb.exec(e);let n=255,i,o,u;if(t){if(t[7]!==i){const h=+t[7];n=t[8]?Ca(h):os(h*255,0,255)}return i=+t[1],o=+t[3],u=+t[5],i=255&(t[2]?Ca(i):os(i,0,255)),o=255&(t[4]?Ca(o):os(o,0,255)),u=255&(t[6]?Ca(u):os(u,0,255)),{r:i,g:o,b:u,a:n}}}function Mb(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Or(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Fc=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,ho=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Rb(e,t,n){const i=ho(Or(e.r)),o=ho(Or(e.g)),u=ho(Or(e.b));return{r:hs(Fc(i+n*(ho(Or(t.r))-i))),g:hs(Fc(o+n*(ho(Or(t.g))-o))),b:hs(Fc(u+n*(ho(Or(t.b))-u))),a:e.a+n*(t.a-e.a)}}function Pu(e,t,n){if(e){let i=Wh(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,t===0?360:1)),i=jh(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Zm(e,t){return e&&Object.assign(t||{},e)}function Ud(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=hs(e[3]))):(t=Zm(e,{r:0,g:0,b:0,a:1}),t.a=hs(t.a)),t}function Fb(e){return e.charAt(0)==="r"?Ob(e):Ib(e)}class $a{constructor(t){if(t instanceof $a)return t;const n=typeof t;let i;n==="object"?i=Ud(t):n==="string"&&(i=yb(t)||Nb(t)||Fb(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Zm(this._rgb);return t&&(t.a=Or(t.a)),t}set rgb(t){this._rgb=Ud(t)}rgbString(){return this._valid?Mb(this._rgb):void 0}hexString(){return this._valid?bb(this._rgb):void 0}hslString(){return this._valid?Lb(this._rgb):void 0}mix(t,n){if(t){const i=this.rgb,o=t.rgb;let u;const h=n===u?.5:n,f=2*h-1,p=i.a-o.a,_=((f*p===-1?f:(f+p)/(1+f*p))+1)/2;u=1-_,i.r=255&_*i.r+u*o.r+.5,i.g=255&_*i.g+u*o.g+.5,i.b=255&_*i.b+u*o.b+.5,i.a=h*i.a+(1-h)*o.a,this.rgb=i}return this}interpolate(t,n){return t&&(this._rgb=Rb(this._rgb,t._rgb,n)),this}clone(){return new $a(this.rgb)}alpha(t){return this._rgb.a=hs(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=iu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Pu(this._rgb,2,t),this}darken(t){return Pu(this._rgb,2,-t),this}saturate(t){return Pu(this._rgb,1,t),this}desaturate(t){return Pu(this._rgb,1,-t),this}rotate(t){return Ab(this._rgb,t),this}}function Lr(){}const Bb=(()=>{let e=0;return()=>e++})();function Ze(e){return e==null}function En(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Me(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ri(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function or(e,t){return Ri(e)?e:t}function Re(e,t){return typeof e>"u"?t:e}const zb=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function $e(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function He(e,t,n,i){let o,u,h;if(En(e))for(u=e.length,o=0;o<u;o++)t.call(n,e[o],o);else if(Me(e))for(h=Object.keys(e),u=h.length,o=0;o<u;o++)t.call(n,e[h[o]],h[o])}function Tl(e,t){let n,i,o,u;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(o=e[n],u=t[n],o.datasetIndex!==u.datasetIndex||o.index!==u.index)return!1;return!0}function Il(e){if(En(e))return e.map(Il);if(Me(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let o=0;for(;o<i;++o)t[n[o]]=Il(e[n[o]]);return t}return e}function Wm(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function qb(e,t,n,i){if(!Wm(e))return;const o=t[e],u=n[e];Me(o)&&Me(u)?Xa(o,u,i):t[e]=Il(u)}function Xa(e,t,n){const i=En(t)?t:[t],o=i.length;if(!Me(e))return e;n=n||{};const u=n.merger||qb;let h;for(let f=0;f<o;++f){if(h=i[f],!Me(h))continue;const p=Object.keys(h);for(let _=0,v=p.length;_<v;++_)u(p[_],e,h,n)}return e}function Fa(e,t){return Xa(e,t,{merger:Ub})}function Ub(e,t,n){if(!Wm(e))return;const i=t[e],o=n[e];Me(i)&&Me(o)?Fa(i,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Il(o))}const Hd={"":e=>e,x:e=>e.x,y:e=>e.y};function Hb(e){const t=e.split("."),n=[];let i="";for(const o of t)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Gb(e){const t=Hb(e);return n=>{for(const i of t){if(i==="")break;n=n&&n[i]}return n}}function Po(e,t){return(Hd[t]||(Hd[t]=Gb(t)))(e)}function $h(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ka=e=>typeof e<"u",ps=e=>typeof e=="function",Gd=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Vb(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const $n=Math.PI,fs=2*$n,Al=Number.POSITIVE_INFINITY,Zb=$n/180,Zi=$n/2,Ms=$n/4,Vd=$n*2/3,Ym=Math.log10,ds=Math.sign;function Qu(e,t,n){return Math.abs(e-t)<n}function Zd(e){const t=Math.round(e);e=Qu(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Ym(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Wb(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(n|0)&&t.push(n),t.sort((o,u)=>o-u).pop(),t}function Yb(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Ll(e){return!Yb(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function jb(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function $b(e,t,n){let i,o,u;for(i=0,o=e.length;i<o;i++)u=e[i][n],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function Us(e){return e*($n/180)}function Xb(e){return e*(180/$n)}function Wd(e){if(!Ri(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Kb(e,t){const n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);let u=Math.atan2(i,n);return u<-.5*$n&&(u+=fs),{angle:u,distance:o}}function Jb(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Rs(e){return(e%fs+fs)%fs}function Qb(e,t,n,i){const o=Rs(e),u=Rs(t),h=Rs(n),f=Rs(u-o),p=Rs(h-o),_=Rs(o-u),v=Rs(o-h);return o===u||o===h||i||f>p&&_<v}function Wi(e,t,n){return Math.max(t,Math.min(n,e))}function t2(e){return Wi(e,-32768,32767)}function vo(e,t,n,i=1e-6){return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Xh(e,t,n){n=n||(h=>e[h]<t);let i=e.length-1,o=0,u;for(;i-o>1;)u=o+i>>1,n(u)?o=u:i=u;return{lo:o,hi:i}}const bh=(e,t,n,i)=>Xh(e,n,i?o=>{const u=e[o][t];return u<n||u===n&&e[o+1][t]===n}:o=>e[o][t]<n),e2=(e,t,n)=>Xh(e,n,i=>e[i][t]>=n);function n2(e,t,n){let i=0,o=e.length;for(;i<o&&e[i]<t;)i++;for(;o>i&&e[o-1]>n;)o--;return i>0||o<e.length?e.slice(i,o):e}const jm=["push","pop","shift","splice","unshift"];function i2(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),jm.forEach(n=>{const i="_onData"+$h(n),o=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...u){const h=o.apply(this,u);return e._chartjs.listeners.forEach(f=>{typeof f[i]=="function"&&f[i](...u)}),h}})})}function Yd(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,o=i.indexOf(t);o!==-1&&i.splice(o,1),!(i.length>0)&&(jm.forEach(u=>{delete e[u]}),delete e._chartjs)}function $m(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Xm=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function Km(e,t){let n=[],i=!1;return function(...o){n=o,i||(i=!0,Xm.call(window,()=>{i=!1,e.apply(t,n)}))}}function r2(e,t){let n;return function(...i){return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}const Kh=e=>e==="start"?"left":e==="end"?"right":"center",Gn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,s2=(e,t,n,i)=>e===(i?"left":"right")?n:e==="center"?(t+n)/2:t,Ou=e=>e===0||e===1,jd=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*fs/n)),$d=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*fs/n)+1,Ba={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Zi)+1,easeOutSine:e=>Math.sin(e*Zi),easeInOutSine:e=>-.5*(Math.cos($n*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Ou(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ou(e)?e:jd(e,.075,.3),easeOutElastic:e=>Ou(e)?e:$d(e,.075,.3),easeInOutElastic(e){return Ou(e)?e:e<.5?.5*jd(e*2,.1125,.45):.5+.5*$d(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ba.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ba.easeInBounce(e*2)*.5:Ba.easeOutBounce(e*2-1)*.5+.5};function Jm(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Xd(e){return Jm(e)?e:new $a(e)}function Bc(e){return Jm(e)?e:new $a(e).saturate(.5).darken(.1).hexString()}const o2=["x","y","borderWidth","radius","tension"],a2=["color","borderColor","backgroundColor"];function u2(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:a2},numbers:{type:"number",properties:o2}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function l2(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Kd=new Map;function c2(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Kd.get(n);return i||(i=new Intl.NumberFormat(e,t),Kd.set(n,i)),i}function Qm(e,t,n){return c2(t,n).format(e)}const h2={values(e){return En(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const i=this.chart.options.locale;let o,u=e;if(n.length>1){const _=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(_<1e-4||_>1e15)&&(o="scientific"),u=f2(e,n)}const h=Ym(Math.abs(u)),f=isNaN(h)?1:Math.max(Math.min(-1*Math.floor(h),20),0),p={notation:o,minimumFractionDigits:f,maximumFractionDigits:f};return Object.assign(p,this.options.ticks.format),Qm(e,i,p)}};function f2(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var t_={formatters:h2};function d2(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:t_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ys=Object.create(null),wh=Object.create(null);function za(e,t){if(!t)return e;const n=t.split(".");for(let i=0,o=n.length;i<o;++i){const u=n[i];e=e[u]||(e[u]=Object.create(null))}return e}function zc(e,t,n){return typeof t=="string"?Xa(za(e,t),n):Xa(za(e,""),t)}class g2{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>Bc(o.backgroundColor),this.hoverBorderColor=(i,o)=>Bc(o.borderColor),this.hoverColor=(i,o)=>Bc(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return zc(this,t,n)}get(t){return za(this,t)}describe(t,n){return zc(wh,t,n)}override(t,n){return zc(Ys,t,n)}route(t,n,i,o){const u=za(this,t),h=za(this,i),f="_"+n;Object.defineProperties(u,{[f]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const p=this[f],_=h[o];return Me(p)?Object.assign({},_,p):Re(p,_)},set(p){this[f]=p}}})}apply(t){t.forEach(n=>n(this))}}var _n=new g2({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[u2,l2,d2]);function p2(e){return!e||Ze(e.size)||Ze(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Jd(e,t,n,i,o){let u=t[o];return u||(u=t[o]=e.measureText(o).width,n.push(o)),u>i&&(i=u),i}function Fs(e,t,n){const i=e.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*i)/i+o}function Qd(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function tg(e,t,n,i){e_(e,t,n,i,null)}function e_(e,t,n,i,o){let u,h,f,p,_,v,x,S;const C=t.pointStyle,P=t.rotation,N=t.radius;let O=(P||0)*Zb;if(C&&typeof C=="object"&&(u=C.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){e.save(),e.translate(n,i),e.rotate(O),e.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),C){default:o?e.ellipse(n,i,o/2,N,0,0,fs):e.arc(n,i,N,0,fs),e.closePath();break;case"triangle":v=o?o/2:N,e.moveTo(n+Math.sin(O)*v,i-Math.cos(O)*N),O+=Vd,e.lineTo(n+Math.sin(O)*v,i-Math.cos(O)*N),O+=Vd,e.lineTo(n+Math.sin(O)*v,i-Math.cos(O)*N),e.closePath();break;case"rectRounded":_=N*.516,p=N-_,h=Math.cos(O+Ms)*p,x=Math.cos(O+Ms)*(o?o/2-_:p),f=Math.sin(O+Ms)*p,S=Math.sin(O+Ms)*(o?o/2-_:p),e.arc(n-x,i-f,_,O-$n,O-Zi),e.arc(n+S,i-h,_,O-Zi,O),e.arc(n+x,i+f,_,O,O+Zi),e.arc(n-S,i+h,_,O+Zi,O+$n),e.closePath();break;case"rect":if(!P){p=Math.SQRT1_2*N,v=o?o/2:p,e.rect(n-v,i-p,2*v,2*p);break}O+=Ms;case"rectRot":x=Math.cos(O)*(o?o/2:N),h=Math.cos(O)*N,f=Math.sin(O)*N,S=Math.sin(O)*(o?o/2:N),e.moveTo(n-x,i-f),e.lineTo(n+S,i-h),e.lineTo(n+x,i+f),e.lineTo(n-S,i+h),e.closePath();break;case"crossRot":O+=Ms;case"cross":x=Math.cos(O)*(o?o/2:N),h=Math.cos(O)*N,f=Math.sin(O)*N,S=Math.sin(O)*(o?o/2:N),e.moveTo(n-x,i-f),e.lineTo(n+x,i+f),e.moveTo(n+S,i-h),e.lineTo(n-S,i+h);break;case"star":x=Math.cos(O)*(o?o/2:N),h=Math.cos(O)*N,f=Math.sin(O)*N,S=Math.sin(O)*(o?o/2:N),e.moveTo(n-x,i-f),e.lineTo(n+x,i+f),e.moveTo(n+S,i-h),e.lineTo(n-S,i+h),O+=Ms,x=Math.cos(O)*(o?o/2:N),h=Math.cos(O)*N,f=Math.sin(O)*N,S=Math.sin(O)*(o?o/2:N),e.moveTo(n-x,i-f),e.lineTo(n+x,i+f),e.moveTo(n+S,i-h),e.lineTo(n-S,i+h);break;case"line":h=o?o/2:Math.cos(O)*N,f=Math.sin(O)*N,e.moveTo(n-h,i-f),e.lineTo(n+h,i+f);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(O)*(o?o/2:N),i+Math.sin(O)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function n_(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Jh(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Qh(e){e.restore()}function m2(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ze(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function _2(e,t,n,i,o){if(o.strikethrough||o.underline){const u=e.measureText(i),h=t-u.actualBoundingBoxLeft,f=t+u.actualBoundingBoxRight,p=n-u.actualBoundingBoxAscent,_=n+u.actualBoundingBoxDescent,v=o.strikethrough?(p+_)/2:_;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(h,v),e.lineTo(f,v),e.stroke()}}function v2(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Ja(e,t,n,i,o,u={}){const h=En(t)?t:[t],f=u.strokeWidth>0&&u.strokeColor!=="";let p,_;for(e.save(),e.font=o.string,m2(e,u),p=0;p<h.length;++p)_=h[p],u.backdrop&&v2(e,u.backdrop),f&&(u.strokeColor&&(e.strokeStyle=u.strokeColor),Ze(u.strokeWidth)||(e.lineWidth=u.strokeWidth),e.strokeText(_,n,i,u.maxWidth)),e.fillText(_,n,i,u.maxWidth),_2(e,n,i,_,u),i+=Number(o.lineHeight);e.restore()}function Dl(e,t){const{x:n,y:i,w:o,h:u,radius:h}=t;e.arc(n+h.topLeft,i+h.topLeft,h.topLeft,1.5*$n,$n,!0),e.lineTo(n,i+u-h.bottomLeft),e.arc(n+h.bottomLeft,i+u-h.bottomLeft,h.bottomLeft,$n,Zi,!0),e.lineTo(n+o-h.bottomRight,i+u),e.arc(n+o-h.bottomRight,i+u-h.bottomRight,h.bottomRight,Zi,0,!0),e.lineTo(n+o,i+h.topRight),e.arc(n+o-h.topRight,i+h.topRight,h.topRight,0,-Zi,!0),e.lineTo(n+h.topLeft,i)}const y2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,x2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function b2(e,t){const n=(""+e).match(y2);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const w2=e=>+e||0;function i_(e,t){const n={},i=Me(t),o=i?Object.keys(t):t,u=Me(e)?i?h=>Re(e[h],e[t[h]]):h=>e[h]:()=>e;for(const h of o)n[h]=w2(u(h));return n}function r_(e){return i_(e,{top:"y",right:"x",bottom:"y",left:"x"})}function So(e){return i_(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Fi(e){const t=r_(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function jn(e,t){e=e||{},t=t||_n.font;let n=Re(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let i=Re(e.style,t.style);i&&!(""+i).match(x2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:Re(e.family,t.family),lineHeight:b2(Re(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Re(e.weight,t.weight),string:""};return o.string=p2(o),o}function Mu(e,t,n,i){let o,u,h;for(o=0,u=e.length;o<u;++o)if(h=e[o],h!==void 0&&h!==void 0)return h}function E2(e,t,n){const{min:i,max:o}=e,u=zb(t,(o-i)/2),h=(f,p)=>n&&f===0?0:f+p;return{min:h(i,-Math.abs(u)),max:h(o,u)}}function Fo(e,t){return Object.assign(Object.create(e),t)}function tf(e,t=[""],n,i,o=()=>e[0]){const u=n||e;typeof i>"u"&&(i=u_("_fallback",e));const h={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:u,_fallback:i,_getTarget:o,override:f=>tf([f,...e],t,u,i)};return new Proxy(h,{deleteProperty(f,p){return delete f[p],delete f._keys,delete e[0][p],!0},get(f,p){return o_(f,p,()=>D2(p,t,e,f))},getOwnPropertyDescriptor(f,p){return Reflect.getOwnPropertyDescriptor(f._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(f,p){return ng(f).includes(p)},ownKeys(f){return ng(f)},set(f,p,_){const v=f._storage||(f._storage=o());return f[p]=v[p]=_,delete f._keys,!0}})}function Oo(e,t,n,i){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:s_(e,i),setContext:u=>Oo(e,u,n,i),override:u=>Oo(e.override(u),t,n,i)};return new Proxy(o,{deleteProperty(u,h){return delete u[h],delete e[h],!0},get(u,h,f){return o_(u,h,()=>S2(u,h,f))},getOwnPropertyDescriptor(u,h){return u._descriptors.allKeys?Reflect.has(e,h)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,h)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(u,h){return Reflect.has(e,h)},ownKeys(){return Reflect.ownKeys(e)},set(u,h,f){return e[h]=f,delete u[h],!0}})}function s_(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:n,indexable:i,isScriptable:ps(n)?n:()=>n,isIndexable:ps(i)?i:()=>i}}const k2=(e,t)=>e?e+$h(t):t,ef=(e,t)=>Me(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function o_(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=n();return e[t]=i,i}function S2(e,t,n){const{_proxy:i,_context:o,_subProxy:u,_descriptors:h}=e;let f=i[t];return ps(f)&&h.isScriptable(t)&&(f=C2(t,f,e,n)),En(f)&&f.length&&(f=T2(t,f,e,h.isIndexable)),ef(t,f)&&(f=Oo(f,o,u&&u[t],h)),f}function C2(e,t,n,i){const{_proxy:o,_context:u,_subProxy:h,_stack:f}=n;if(f.has(e))throw new Error("Recursion detected: "+Array.from(f).join("->")+"->"+e);f.add(e);let p=t(u,h||i);return f.delete(e),ef(e,p)&&(p=nf(o._scopes,o,e,p)),p}function T2(e,t,n,i){const{_proxy:o,_context:u,_subProxy:h,_descriptors:f}=n;if(typeof u.index<"u"&&i(e))return t[u.index%t.length];if(Me(t[0])){const p=t,_=o._scopes.filter(v=>v!==p);t=[];for(const v of p){const x=nf(_,o,e,v);t.push(Oo(x,u,h&&h[e],f))}}return t}function a_(e,t,n){return ps(e)?e(t,n):e}const I2=(e,t)=>e===!0?t:typeof e=="string"?Po(t,e):void 0;function A2(e,t,n,i,o){for(const u of t){const h=I2(n,u);if(h){e.add(h);const f=a_(h._fallback,n,o);if(typeof f<"u"&&f!==n&&f!==i)return f}else if(h===!1&&typeof i<"u"&&n!==i)return null}return!1}function nf(e,t,n,i){const o=t._rootScopes,u=a_(t._fallback,n,i),h=[...e,...o],f=new Set;f.add(i);let p=eg(f,h,n,u||n,i);return p===null||typeof u<"u"&&u!==n&&(p=eg(f,h,u,p,i),p===null)?!1:tf(Array.from(f),[""],o,u,()=>L2(t,n,i))}function eg(e,t,n,i,o){for(;n;)n=A2(e,t,n,i,o);return n}function L2(e,t,n){const i=e._getTarget();t in i||(i[t]={});const o=i[t];return En(o)&&Me(n)?n:o||{}}function D2(e,t,n,i){let o;for(const u of t)if(o=u_(k2(u,e),n),typeof o<"u")return ef(e,o)?nf(n,i,e,o):o}function u_(e,t){for(const n of t){if(!n)continue;const i=n[e];if(typeof i<"u")return i}}function ng(e){let t=e._keys;return t||(t=e._keys=N2(e._scopes)),t}function N2(e){const t=new Set;for(const n of e)for(const i of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(i);return Array.from(t)}function rf(){return typeof window<"u"&&typeof document<"u"}function sf(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Nl(e,t,n){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[n])):i=e,i}const Jl=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function P2(e,t){return Jl(e).getPropertyValue(t)}const O2=["top","right","bottom","left"];function Vs(e,t,n){const i={};n=n?"-"+n:"";for(let o=0;o<4;o++){const u=O2[o];i[u]=parseFloat(e[t+"-"+u+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const M2=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function R2(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:o,offsetY:u}=i;let h=!1,f,p;if(M2(o,u,e.target))f=o,p=u;else{const _=t.getBoundingClientRect();f=i.clientX-_.left,p=i.clientY-_.top,h=!0}return{x:f,y:p,box:h}}function qs(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,o=Jl(n),u=o.boxSizing==="border-box",h=Vs(o,"padding"),f=Vs(o,"border","width"),{x:p,y:_,box:v}=R2(e,n),x=h.left+(v&&f.left),S=h.top+(v&&f.top);let{width:C,height:P}=t;return u&&(C-=h.width+f.width,P-=h.height+f.height),{x:Math.round((p-x)/C*n.width/i),y:Math.round((_-S)/P*n.height/i)}}function F2(e,t,n){let i,o;if(t===void 0||n===void 0){const u=e&&sf(e);if(!u)t=e.clientWidth,n=e.clientHeight;else{const h=u.getBoundingClientRect(),f=Jl(u),p=Vs(f,"border","width"),_=Vs(f,"padding");t=h.width-_.width-p.width,n=h.height-_.height-p.height,i=Nl(f.maxWidth,u,"clientWidth"),o=Nl(f.maxHeight,u,"clientHeight")}}return{width:t,height:n,maxWidth:i||Al,maxHeight:o||Al}}const as=e=>Math.round(e*10)/10;function B2(e,t,n,i){const o=Jl(e),u=Vs(o,"margin"),h=Nl(o.maxWidth,e,"clientWidth")||Al,f=Nl(o.maxHeight,e,"clientHeight")||Al,p=F2(e,t,n);let{width:_,height:v}=p;if(o.boxSizing==="content-box"){const S=Vs(o,"border","width"),C=Vs(o,"padding");_-=C.width+S.width,v-=C.height+S.height}return _=Math.max(0,_-u.width),v=Math.max(0,i?_/i:v-u.height),_=as(Math.min(_,h,p.maxWidth)),v=as(Math.min(v,f,p.maxHeight)),_&&!v&&(v=as(_/2)),(t!==void 0||n!==void 0)&&i&&p.height&&v>p.height&&(v=p.height,_=as(Math.floor(v*i))),{width:_,height:v}}function ig(e,t,n){const i=t||1,o=as(e.height*i),u=as(e.width*i);e.height=as(e.height),e.width=as(e.width);const h=e.canvas;return h.style&&(n||!h.style.height&&!h.style.width)&&(h.style.height=`${e.height}px`,h.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||h.height!==o||h.width!==u?(e.currentDevicePixelRatio=i,h.height=o,h.width=u,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const z2=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};rf()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function rg(e,t){const n=P2(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const q2=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},U2=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Co(e,t,n){return e?q2(t,n):U2()}function l_(e,t){let n,i;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function c_(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Ru(e,t,n){return e.options.clip?e[n]:t[n]}function H2(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Ru(n,t,"left"),right:Ru(n,t,"right"),top:Ru(i,t,"top"),bottom:Ru(i,t,"bottom")}:t}function G2(e,t){const n=t._clip;if(n.disabled)return!1;const i=H2(t,e.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:i.bottom+(n.bottom===!0?0:n.bottom)}}class V2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,i,o){const u=n.listeners[o],h=n.duration;u.forEach(f=>f({chart:t,initial:n.initial,numSteps:h,currentStep:Math.min(i-n.start,h)}))}_refresh(){this._request||(this._running=!0,this._request=Xm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const u=i.items;let h=u.length-1,f=!1,p;for(;h>=0;--h)p=u[h],p._active?(p._total>i.duration&&(i.duration=p._total),p.tick(t),f=!0):(u[h]=u[u.length-1],u.pop());f&&(o.draw(),this._notify(o,i,t,"progress")),u.length||(i.running=!1,this._notify(o,i,t,"complete"),i.initial=!1),n+=u.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let i=n.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,i)),i}listen(t,n,i){this._getAnims(t).listeners[n].push(i)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const i=n.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Dr=new V2;const sg="transparent",Z2={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const i=Xd(e||sg),o=i.valid&&Xd(t||sg);return o&&o.valid?o.mix(i,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class W2{constructor(t,n,i,o){const u=n[i];o=Mu([t.to,o,u,t.from]);const h=Mu([t.from,u,o]);this._active=!0,this._fn=t.fn||Z2[t.type||typeof h],this._easing=Ba[t.easing]||Ba.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=i,this._from=h,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,i){if(this._active){this._notify(!1);const o=this._target[this._prop],u=i-this._start,h=this._duration-u;this._start=i,this._duration=Math.floor(Math.max(h,t.duration)),this._total+=u,this._loop=!!t.loop,this._to=Mu([t.to,n,o,t.from]),this._from=Mu([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,i=this._duration,o=this._prop,u=this._from,h=this._loop,f=this._to;let p;if(this._active=u!==f&&(h||n<i),!this._active){this._target[o]=f,this._notify(!0);return}if(n<0){this._target[o]=u;return}p=n/i%2,p=h&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[o]=this._fn(u,f,p)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,i)=>{t.push({res:n,rej:i})})}_notify(t){const n=t?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][n]()}}class h_{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Me(t))return;const n=Object.keys(_n.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{const u=t[o];if(!Me(u))return;const h={};for(const f of n)h[f]=u[f];(En(u.properties)&&u.properties||[o]).forEach(f=>{(f===o||!i.has(f))&&i.set(f,h)})})}_animateOptions(t,n){const i=n.options,o=j2(t,i);if(!o)return[];const u=this._createAnimations(o,i);return i.$shared&&Y2(t.options.$animations,i).then(()=>{t.options=i},()=>{}),u}_createAnimations(t,n){const i=this._properties,o=[],u=t.$animations||(t.$animations={}),h=Object.keys(n),f=Date.now();let p;for(p=h.length-1;p>=0;--p){const _=h[p];if(_.charAt(0)==="$")continue;if(_==="options"){o.push(...this._animateOptions(t,n));continue}const v=n[_];let x=u[_];const S=i.get(_);if(x)if(S&&x.active()){x.update(S,v,f);continue}else x.cancel();if(!S||!S.duration){t[_]=v;continue}u[_]=x=new W2(S,t,_,v),o.push(x)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const i=this._createAnimations(t,n);if(i.length)return Dr.add(this._chart,i),!0}}function Y2(e,t){const n=[],i=Object.keys(t);for(let o=0;o<i.length;o++){const u=e[i[o]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function j2(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function og(e,t){const n=e&&e.options||{},i=n.reverse,o=n.min===void 0?t:0,u=n.max===void 0?t:0;return{start:i?u:o,end:i?o:u}}function $2(e,t,n){if(n===!1)return!1;const i=og(e,n),o=og(t,n);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function X2(e){let t,n,i,o;return Me(e)?(t=e.top,n=e.right,i=e.bottom,o=e.left):t=n=i=o=e,{top:t,right:n,bottom:i,left:o,disabled:e===!1}}function f_(e,t){const n=[],i=e._getSortedDatasetMetas(t);let o,u;for(o=0,u=i.length;o<u;++o)n.push(i[o].index);return n}function ag(e,t,n,i={}){const o=e.keys,u=i.mode==="single";let h,f,p,_;if(t===null)return;let v=!1;for(h=0,f=o.length;h<f;++h){if(p=+o[h],p===n){if(v=!0,i.all)continue;break}_=e.values[p],Ri(_)&&(u||t===0||ds(t)===ds(_))&&(t+=_)}return!v&&!i.all?0:t}function K2(e,t){const{iScale:n,vScale:i}=t,o=n.axis==="x"?"x":"y",u=i.axis==="x"?"x":"y",h=Object.keys(e),f=new Array(h.length);let p,_,v;for(p=0,_=h.length;p<_;++p)v=h[p],f[p]={[o]:v,[u]:e[v]};return f}function qc(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function J2(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Q2(e){const{min:t,max:n,minDefined:i,maxDefined:o}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function tw(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function ug(e,t,n,i){for(const o of t.getMatchingVisibleMetas(i).reverse()){const u=e[o.index];if(n&&u>0||!n&&u<0)return o.index}return null}function lg(e,t){const{chart:n,_cachedMeta:i}=e,o=n._stacks||(n._stacks={}),{iScale:u,vScale:h,index:f}=i,p=u.axis,_=h.axis,v=J2(u,h,i),x=t.length;let S;for(let C=0;C<x;++C){const P=t[C],{[p]:N,[_]:O}=P,j=P._stacks||(P._stacks={});S=j[_]=tw(o,v,N),S[f]=O,S._top=ug(S,h,!0,i.type),S._bottom=ug(S,h,!1,i.type);const U=S._visualValues||(S._visualValues={});U[f]=O}}function Uc(e,t){const n=e.scales;return Object.keys(n).filter(i=>n[i].axis===t).shift()}function ew(e,t){return Fo(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nw(e,t,n){return Fo(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ga(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const o of t){const u=o._stacks;if(!u||u[i]===void 0||u[i][n]===void 0)return;delete u[i][n],u[i]._visualValues!==void 0&&u[i]._visualValues[n]!==void 0&&delete u[i]._visualValues[n]}}}const Hc=e=>e==="reset"||e==="none",cg=(e,t)=>t?e:Object.assign({},e),iw=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:f_(n,!0),values:null};class d_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qc(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ga(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,i=this.getDataset(),o=(x,S,C,P)=>x==="x"?S:x==="r"?P:C,u=n.xAxisID=Re(i.xAxisID,Uc(t,"x")),h=n.yAxisID=Re(i.yAxisID,Uc(t,"y")),f=n.rAxisID=Re(i.rAxisID,Uc(t,"r")),p=n.indexAxis,_=n.iAxisID=o(p,u,h,f),v=n.vAxisID=o(p,h,u,f);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(h),n.rScale=this.getScaleForId(f),n.iScale=this.getScaleForId(_),n.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Yd(this._data,this),t._stacked&&ga(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),i=this._data;if(Me(n)){const o=this._cachedMeta;this._data=K2(n,o)}else if(i!==n){if(i){Yd(i,this);const o=this._cachedMeta;ga(o),o._parsed=[]}n&&Object.isExtensible(n)&&i2(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const u=n._stacked;n._stacked=qc(n.vScale,n),n.stack!==i.stack&&(o=!0,ga(n),n.stack=i.stack),this._resyncElements(t),(o||u!==n._stacked)&&(lg(this,n._parsed),n._stacked=qc(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:i,_data:o}=this,{iScale:u,_stacked:h}=i,f=u.axis;let p=t===0&&n===o.length?!0:i._sorted,_=t>0&&i._parsed[t-1],v,x,S;if(this._parsing===!1)i._parsed=o,i._sorted=!0,S=o;else{En(o[t])?S=this.parseArrayData(i,o,t,n):Me(o[t])?S=this.parseObjectData(i,o,t,n):S=this.parsePrimitiveData(i,o,t,n);const C=()=>x[f]===null||_&&x[f]<_[f];for(v=0;v<n;++v)i._parsed[v+t]=x=S[v],p&&(C()&&(p=!1),_=x);i._sorted=p}h&&lg(this,S)}parsePrimitiveData(t,n,i,o){const{iScale:u,vScale:h}=t,f=u.axis,p=h.axis,_=u.getLabels(),v=u===h,x=new Array(o);let S,C,P;for(S=0,C=o;S<C;++S)P=S+i,x[S]={[f]:v||u.parse(_[P],P),[p]:h.parse(n[P],P)};return x}parseArrayData(t,n,i,o){const{xScale:u,yScale:h}=t,f=new Array(o);let p,_,v,x;for(p=0,_=o;p<_;++p)v=p+i,x=n[v],f[p]={x:u.parse(x[0],v),y:h.parse(x[1],v)};return f}parseObjectData(t,n,i,o){const{xScale:u,yScale:h}=t,{xAxisKey:f="x",yAxisKey:p="y"}=this._parsing,_=new Array(o);let v,x,S,C;for(v=0,x=o;v<x;++v)S=v+i,C=n[S],_[v]={x:u.parse(Po(C,f),S),y:h.parse(Po(C,p),S)};return _}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,i){const o=this.chart,u=this._cachedMeta,h=n[t.axis],f={keys:f_(o,!0),values:n._stacks[t.axis]._visualValues};return ag(f,h,u.index,{mode:i})}updateRangeFromParsed(t,n,i,o){const u=i[n.axis];let h=u===null?NaN:u;const f=o&&i._stacks[n.axis];o&&f&&(o.values=f,h=ag(o,u,this._cachedMeta.index)),t.min=Math.min(t.min,h),t.max=Math.max(t.max,h)}getMinMax(t,n){const i=this._cachedMeta,o=i._parsed,u=i._sorted&&t===i.iScale,h=o.length,f=this._getOtherScale(t),p=iw(n,i,this.chart),_={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:x}=Q2(f);let S,C;function P(){C=o[S];const N=C[f.axis];return!Ri(C[t.axis])||v>N||x<N}for(S=0;S<h&&!(!P()&&(this.updateRangeFromParsed(_,t,C,p),u));++S);if(u){for(S=h-1;S>=0;--S)if(!P()){this.updateRangeFromParsed(_,t,C,p);break}}return _}getAllParsedValues(t){const n=this._cachedMeta._parsed,i=[];let o,u,h;for(o=0,u=n.length;o<u;++o)h=n[o][t.axis],Ri(h)&&i.push(h);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,i=n.iScale,o=n.vScale,u=this.getParsed(t);return{label:i?""+i.getLabelForValue(u[i.axis]):"",value:o?""+o.getLabelForValue(u[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=X2(Re(this.options.clip,$2(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,i=this._cachedMeta,o=i.data||[],u=n.chartArea,h=[],f=this._drawStart||0,p=this._drawCount||o.length-f,_=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,u,f,p),v=f;v<f+p;++v){const x=o[v];x.hidden||(x.active&&_?h.push(x):x.draw(t,u))}for(v=0;v<h.length;++v)h[v].draw(t,u)}getStyle(t,n){const i=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,n,i){const o=this.getDataset();let u;if(t>=0&&t<this._cachedMeta.data.length){const h=this._cachedMeta.data[t];u=h.$context||(h.$context=nw(this.getContext(),t,h)),u.parsed=this.getParsed(t),u.raw=o.data[t],u.index=u.dataIndex=t}else u=this.$context||(this.$context=ew(this.chart.getContext(),this.index)),u.dataset=o,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=i,u}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",i){const o=n==="active",u=this._cachedDataOpts,h=t+"-"+n,f=u[h],p=this.enableOptionSharing&&Ka(i);if(f)return cg(f,p);const _=this.chart.config,v=_.datasetElementScopeKeys(this._type,t),x=o?[`${t}Hover`,"hover",t,""]:[t,""],S=_.getOptionScopes(this.getDataset(),v),C=Object.keys(_n.elements[t]),P=()=>this.getContext(i,o,n),N=_.resolveNamedOptions(S,C,P,x);return N.$shared&&(N.$shared=p,u[h]=Object.freeze(cg(N,p))),N}_resolveAnimations(t,n,i){const o=this.chart,u=this._cachedDataOpts,h=`animation-${n}`,f=u[h];if(f)return f;let p;if(o.options.animation!==!1){const v=this.chart.config,x=v.datasetAnimationScopeKeys(this._type,n),S=v.getOptionScopes(this.getDataset(),x);p=v.createResolver(S,this.getContext(t,i,n))}const _=new h_(o,p&&p.animations);return p&&p._cacheable&&(u[h]=Object.freeze(_)),_}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Hc(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const i=this.resolveDataElementOptions(t,n),o=this._sharedOptions,u=this.getSharedOptions(i),h=this.includeOptions(n,u)||u!==o;return this.updateSharedOptions(u,n,i),{sharedOptions:u,includeOptions:h}}updateElement(t,n,i,o){Hc(o)?Object.assign(t,i):this._resolveAnimations(n,o).update(t,i)}updateSharedOptions(t,n,i){t&&!Hc(n)&&this._resolveAnimations(void 0,n).update(t,i)}_setStyle(t,n,i,o){t.active=o;const u=this.getStyle(n,o);this._resolveAnimations(n,i,o).update(t,{options:!o&&this.getSharedOptions(u)||u})}removeHoverStyle(t,n,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,n,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,i=this._cachedMeta.data;for(const[f,p,_]of this._syncList)this[f](p,_);this._syncList=[];const o=i.length,u=n.length,h=Math.min(u,o);h&&this.parse(0,h),u>o?this._insertElements(o,u-o,t):u<o&&this._removeElements(u,o-u)}_insertElements(t,n,i=!0){const o=this._cachedMeta,u=o.data,h=t+n;let f;const p=_=>{for(_.length+=n,f=_.length-1;f>=h;f--)_[f]=_[f-n]};for(p(u),f=t;f<h;++f)u[f]=new this.dataElementType;this._parsing&&p(o._parsed),this.parse(t,n),i&&this.updateElements(u,t,n,"reset")}updateElements(t,n,i,o){}_removeElements(t,n){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(t,n);i._stacked&&ga(i,o)}i.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,i,o]=t;this[n](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function rw(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let o=0,u=n.length;o<u;o++)i=i.concat(n[o].controller.getAllParsedValues(e));e._cache.$bar=$m(i.sort((o,u)=>o-u))}return e._cache.$bar}function sw(e){const t=e.iScale,n=rw(t,e.type);let i=t._length,o,u,h,f;const p=()=>{h===32767||h===-32768||(Ka(f)&&(i=Math.min(i,Math.abs(h-f)||i)),f=h)};for(o=0,u=n.length;o<u;++o)h=t.getPixelForValue(n[o]),p();for(f=void 0,o=0,u=t.ticks.length;o<u;++o)h=t.getPixelForTick(o),p();return i}function ow(e,t,n,i){const o=n.barThickness;let u,h;return Ze(o)?(u=t.min*n.categoryPercentage,h=n.barPercentage):(u=o*i,h=1),{chunk:u/i,ratio:h,start:t.pixels[e]-u/2}}function aw(e,t,n,i){const o=t.pixels,u=o[e];let h=e>0?o[e-1]:null,f=e<o.length-1?o[e+1]:null;const p=n.categoryPercentage;h===null&&(h=u-(f===null?t.end-t.start:f-u)),f===null&&(f=u+u-h);const _=u-(u-Math.min(h,f))/2*p;return{chunk:Math.abs(f-h)/2*p/i,ratio:n.barPercentage,start:_}}function uw(e,t,n,i){const o=n.parse(e[0],i),u=n.parse(e[1],i),h=Math.min(o,u),f=Math.max(o,u);let p=h,_=f;Math.abs(h)>Math.abs(f)&&(p=f,_=h),t[n.axis]=_,t._custom={barStart:p,barEnd:_,start:o,end:u,min:h,max:f}}function g_(e,t,n,i){return En(e)?uw(e,t,n,i):t[n.axis]=n.parse(e,i),t}function hg(e,t,n,i){const o=e.iScale,u=e.vScale,h=o.getLabels(),f=o===u,p=[];let _,v,x,S;for(_=n,v=n+i;_<v;++_)S=t[_],x={},x[o.axis]=f||o.parse(h[_],_),p.push(g_(S,x,u,_));return p}function Gc(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function lw(e,t,n){return e!==0?ds(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function cw(e){let t,n,i,o,u;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(o="end",u="start"):(o="start",u="end"),{start:n,end:i,reverse:t,top:o,bottom:u}}function hw(e,t,n,i){let o=t.borderSkipped;const u={};if(!o){e.borderSkipped=u;return}if(o===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:h,end:f,reverse:p,top:_,bottom:v}=cw(e);o==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?o=_:(n._bottom||0)===i?o=v:(u[fg(v,h,f,p)]=!0,o=_)),u[fg(o,h,f,p)]=!0,e.borderSkipped=u}function fg(e,t,n,i){return i?(e=fw(e,t,n),e=dg(e,n,t)):e=dg(e,t,n),e}function fw(e,t,n){return e===t?n:e===n?t:e}function dg(e,t,n){return e==="start"?t:e==="end"?n:e}function dw(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class gw extends d_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,i,o){return hg(t,n,i,o)}parseArrayData(t,n,i,o){return hg(t,n,i,o)}parseObjectData(t,n,i,o){const{iScale:u,vScale:h}=t,{xAxisKey:f="x",yAxisKey:p="y"}=this._parsing,_=u.axis==="x"?f:p,v=h.axis==="x"?f:p,x=[];let S,C,P,N;for(S=i,C=i+o;S<C;++S)N=n[S],P={},P[u.axis]=u.parse(Po(N,_),S),x.push(g_(Po(N,v),P,h,S));return x}updateRangeFromParsed(t,n,i,o){super.updateRangeFromParsed(t,n,i,o);const u=i._custom;u&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,u.min),t.max=Math.max(t.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:i,vScale:o}=n,u=this.getParsed(t),h=u._custom,f=Gc(h)?"["+h.start+", "+h.end+"]":""+o.getLabelForValue(u[o.axis]);return{label:""+i.getLabelForValue(u[i.axis]),value:f}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,i,o){const u=o==="reset",{index:h,_cachedMeta:{vScale:f}}=this,p=f.getBasePixel(),_=f.isHorizontal(),v=this._getRuler(),{sharedOptions:x,includeOptions:S}=this._getSharedOptions(n,o);for(let C=n;C<n+i;C++){const P=this.getParsed(C),N=u||Ze(P[f.axis])?{base:p,head:p}:this._calculateBarValuePixels(C),O=this._calculateBarIndexPixels(C,v),j=(P._stacks||{})[f.axis],U={horizontal:_,base:N.base,enableBorderRadius:!j||Gc(P._custom)||h===j._top||h===j._bottom,x:_?N.head:O.center,y:_?O.center:N.head,height:_?O.size:Math.abs(N.size),width:_?Math.abs(N.size):O.size};S&&(U.options=x||this.resolveDataElementOptions(C,t[C].active?"active":o));const nt=U.options||t[C].options;hw(U,nt,j,h),dw(U,nt,v.ratio),this.updateElement(t[C],C,U,o)}}_getStacks(t,n){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(v=>v.controller.options.grouped),u=i.options.stacked,h=[],f=this._cachedMeta.controller.getParsed(n),p=f&&f[i.axis],_=v=>{const x=v._parsed.find(C=>C[i.axis]===p),S=x&&x[v.vScale.axis];if(Ze(S)||isNaN(S))return!0};for(const v of o)if(!(n!==void 0&&_(v))&&((u===!1||h.indexOf(v.stack)===-1||u===void 0&&v.stack===void 0)&&h.push(v.stack),v.index===t))break;return h.length||h.push(void 0),h}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Re(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,i){const o=this._getStacks(t,i),u=n!==void 0?o.indexOf(n):-1;return u===-1?o.length-1:u}_getRuler(){const t=this.options,n=this._cachedMeta,i=n.iScale,o=[];let u,h;for(u=0,h=n.data.length;u<h;++u)o.push(i.getPixelForValue(this.getParsed(u)[i.axis],u));const f=t.barThickness;return{min:f||sw(n),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:f?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:i,index:o},options:{base:u,minBarLength:h}}=this,f=u||0,p=this.getParsed(t),_=p._custom,v=Gc(_);let x=p[n.axis],S=0,C=i?this.applyStack(n,p,i):x,P,N;C!==x&&(S=C-x,C=x),v&&(x=_.barStart,C=_.barEnd-_.barStart,x!==0&&ds(x)!==ds(_.barEnd)&&(S=0),S+=x);const O=!Ze(u)&&!v?u:S;let j=n.getPixelForValue(O);if(this.chart.getDataVisibility(t)?P=n.getPixelForValue(S+C):P=j,N=P-j,Math.abs(N)<h){N=lw(N,n,f)*h,x===f&&(j-=N/2);const U=n.getPixelForDecimal(0),nt=n.getPixelForDecimal(1),ct=Math.min(U,nt),tt=Math.max(U,nt);j=Math.max(Math.min(j,tt),ct),P=j+N,i&&!v&&(p._stacks[n.axis]._visualValues[o]=n.getValueForPixel(P)-n.getValueForPixel(j))}if(j===n.getPixelForValue(f)){const U=ds(N)*n.getLineWidthForValue(f)/2;j+=U,N-=U}return{size:N,base:j,head:P,center:P+N/2}}_calculateBarIndexPixels(t,n){const i=n.scale,o=this.options,u=o.skipNull,h=Re(o.maxBarThickness,1/0);let f,p;const _=this._getAxisCount();if(n.grouped){const v=u?this._getStackCount(t):n.stackCount,x=o.barThickness==="flex"?aw(t,n,o,v*_):ow(t,n,o,v*_),S=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,C=this._getAxis().indexOf(Re(S,this.getFirstScaleIdForIndexAxis())),P=this._getStackIndex(this.index,this._cachedMeta.stack,u?t:void 0)+C;f=x.start+x.chunk*P+x.chunk/2,p=Math.min(h,x.chunk*x.ratio)}else f=i.getPixelForValue(this.getParsed(t)[i.axis],t),p=Math.min(h,n.min*n.ratio);return{base:f-p/2,head:f+p/2,center:f,size:p}}draw(){const t=this._cachedMeta,n=t.vScale,i=t.data,o=i.length;let u=0;for(;u<o;++u)this.getParsed(u)[n.axis]!==null&&!i[u].hidden&&i[u].draw(this._ctx)}}function Bs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class of{static override(t){Object.assign(of.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Bs()}parse(){return Bs()}format(){return Bs()}add(){return Bs()}diff(){return Bs()}startOf(){return Bs()}endOf(){return Bs()}}var pw={_date:of};function mw(e,t,n,i){const{controller:o,data:u,_sorted:h}=e,f=o._cachedMeta.iScale,p=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(f&&t===f.axis&&t!=="r"&&h&&u.length){const _=f._reversePixels?e2:bh;if(i){if(o._sharedOptions){const v=u[0],x=typeof v.getRange=="function"&&v.getRange(t);if(x){const S=_(u,t,n-x),C=_(u,t,n+x);return{lo:S.lo,hi:C.hi}}}}else{const v=_(u,t,n);if(p){const{vScale:x}=o._cachedMeta,{_parsed:S}=e,C=S.slice(0,v.lo+1).reverse().findIndex(N=>!Ze(N[x.axis]));v.lo-=Math.max(0,C);const P=S.slice(v.hi).findIndex(N=>!Ze(N[x.axis]));v.hi+=Math.max(0,P)}return v}}return{lo:0,hi:u.length-1}}function Ql(e,t,n,i,o){const u=e.getSortedVisibleDatasetMetas(),h=n[t];for(let f=0,p=u.length;f<p;++f){const{index:_,data:v}=u[f],{lo:x,hi:S}=mw(u[f],t,h,o);for(let C=x;C<=S;++C){const P=v[C];P.skip||i(P,_,C)}}}function _w(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(i,o){const u=t?Math.abs(i.x-o.x):0,h=n?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(h,2))}}function Vc(e,t,n,i,o){const u=[];return!o&&!e.isPointInArea(t)||Ql(e,n,t,function(f,p,_){!o&&!n_(f,e.chartArea,0)||f.inRange(t.x,t.y,i)&&u.push({element:f,datasetIndex:p,index:_})},!0),u}function vw(e,t,n,i){let o=[];function u(h,f,p){const{startAngle:_,endAngle:v}=h.getProps(["startAngle","endAngle"],i),{angle:x}=Kb(h,{x:t.x,y:t.y});Qb(x,_,v)&&o.push({element:h,datasetIndex:f,index:p})}return Ql(e,n,t,u),o}function yw(e,t,n,i,o,u){let h=[];const f=_w(n);let p=Number.POSITIVE_INFINITY;function _(v,x,S){const C=v.inRange(t.x,t.y,o);if(i&&!C)return;const P=v.getCenterPoint(o);if(!(!!u||e.isPointInArea(P))&&!C)return;const O=f(t,P);O<p?(h=[{element:v,datasetIndex:x,index:S}],p=O):O===p&&h.push({element:v,datasetIndex:x,index:S})}return Ql(e,n,t,_),h}function Zc(e,t,n,i,o,u){return!u&&!e.isPointInArea(t)?[]:n==="r"&&!i?vw(e,t,n,o):yw(e,t,n,i,o,u)}function gg(e,t,n,i,o){const u=[],h=n==="x"?"inXRange":"inYRange";let f=!1;return Ql(e,n,t,(p,_,v)=>{p[h]&&p[h](t[n],o)&&(u.push({element:p,datasetIndex:_,index:v}),f=f||p.inRange(t.x,t.y,o))}),i&&!f?[]:u}var xw={modes:{index(e,t,n,i){const o=qs(t,e),u=n.axis||"x",h=n.includeInvisible||!1,f=n.intersect?Vc(e,o,u,i,h):Zc(e,o,u,!1,i,h),p=[];return f.length?(e.getSortedVisibleDatasetMetas().forEach(_=>{const v=f[0].index,x=_.data[v];x&&!x.skip&&p.push({element:x,datasetIndex:_.index,index:v})}),p):[]},dataset(e,t,n,i){const o=qs(t,e),u=n.axis||"xy",h=n.includeInvisible||!1;let f=n.intersect?Vc(e,o,u,i,h):Zc(e,o,u,!1,i,h);if(f.length>0){const p=f[0].datasetIndex,_=e.getDatasetMeta(p).data;f=[];for(let v=0;v<_.length;++v)f.push({element:_[v],datasetIndex:p,index:v})}return f},point(e,t,n,i){const o=qs(t,e),u=n.axis||"xy",h=n.includeInvisible||!1;return Vc(e,o,u,i,h)},nearest(e,t,n,i){const o=qs(t,e),u=n.axis||"xy",h=n.includeInvisible||!1;return Zc(e,o,u,n.intersect,i,h)},x(e,t,n,i){const o=qs(t,e);return gg(e,o,"x",n.intersect,i)},y(e,t,n,i){const o=qs(t,e);return gg(e,o,"y",n.intersect,i)}}};const p_=["left","top","right","bottom"];function pa(e,t){return e.filter(n=>n.pos===t)}function pg(e,t){return e.filter(n=>p_.indexOf(n.pos)===-1&&n.box.axis===t)}function ma(e,t){return e.sort((n,i)=>{const o=t?i:n,u=t?n:i;return o.weight===u.weight?o.index-u.index:o.weight-u.weight})}function bw(e){const t=[];let n,i,o,u,h,f;for(n=0,i=(e||[]).length;n<i;++n)o=e[n],{position:u,options:{stack:h,stackWeight:f=1}}=o,t.push({index:n,box:o,pos:u,horizontal:o.isHorizontal(),weight:o.weight,stack:h&&u+h,stackWeight:f});return t}function ww(e){const t={};for(const n of e){const{stack:i,pos:o,stackWeight:u}=n;if(!i||!p_.includes(o))continue;const h=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});h.count++,h.weight+=u}return t}function Ew(e,t){const n=ww(e),{vBoxMaxWidth:i,hBoxMaxHeight:o}=t;let u,h,f;for(u=0,h=e.length;u<h;++u){f=e[u];const{fullSize:p}=f.box,_=n[f.stack],v=_&&f.stackWeight/_.weight;f.horizontal?(f.width=v?v*i:p&&t.availableWidth,f.height=o):(f.width=i,f.height=v?v*o:p&&t.availableHeight)}return n}function kw(e){const t=bw(e),n=ma(t.filter(_=>_.box.fullSize),!0),i=ma(pa(t,"left"),!0),o=ma(pa(t,"right")),u=ma(pa(t,"top"),!0),h=ma(pa(t,"bottom")),f=pg(t,"x"),p=pg(t,"y");return{fullSize:n,leftAndTop:i.concat(u),rightAndBottom:o.concat(p).concat(h).concat(f),chartArea:pa(t,"chartArea"),vertical:i.concat(o).concat(p),horizontal:u.concat(h).concat(f)}}function mg(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function m_(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Sw(e,t,n,i){const{pos:o,box:u}=n,h=e.maxPadding;if(!Me(o)){n.size&&(e[o]-=n.size);const x=i[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?u.height:u.width),n.size=x.size/x.count,e[o]+=n.size}u.getPadding&&m_(h,u.getPadding());const f=Math.max(0,t.outerWidth-mg(h,e,"left","right")),p=Math.max(0,t.outerHeight-mg(h,e,"top","bottom")),_=f!==e.w,v=p!==e.h;return e.w=f,e.h=p,n.horizontal?{same:_,other:v}:{same:v,other:_}}function Cw(e){const t=e.maxPadding;function n(i){const o=Math.max(t[i]-e[i],0);return e[i]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Tw(e,t){const n=t.maxPadding;function i(o){const u={left:0,top:0,right:0,bottom:0};return o.forEach(h=>{u[h]=Math.max(t[h],n[h])}),u}return i(e?["left","right"]:["top","bottom"])}function Ta(e,t,n,i){const o=[];let u,h,f,p,_,v;for(u=0,h=e.length,_=0;u<h;++u){f=e[u],p=f.box,p.update(f.width||t.w,f.height||t.h,Tw(f.horizontal,t));const{same:x,other:S}=Sw(t,n,f,i);_|=x&&o.length,v=v||S,p.fullSize||o.push(f)}return _&&Ta(o,t,n,i)||v}function Fu(e,t,n,i,o){e.top=n,e.left=t,e.right=t+i,e.bottom=n+o,e.width=i,e.height=o}function _g(e,t,n,i){const o=n.padding;let{x:u,y:h}=t;for(const f of e){const p=f.box,_=i[f.stack]||{placed:0,weight:1},v=f.stackWeight/_.weight||1;if(f.horizontal){const x=t.w*v,S=_.size||p.height;Ka(_.start)&&(h=_.start),p.fullSize?Fu(p,o.left,h,n.outerWidth-o.right-o.left,S):Fu(p,t.left+_.placed,h,x,S),_.start=h,_.placed+=x,h=p.bottom}else{const x=t.h*v,S=_.size||p.width;Ka(_.start)&&(u=_.start),p.fullSize?Fu(p,u,o.top,S,n.outerHeight-o.bottom-o.top):Fu(p,u,t.top+_.placed,S,x),_.start=u,_.placed+=x,u=p.right}}t.x=u,t.y=h}var Mi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const o=Fi(e.options.layout.padding),u=Math.max(t-o.width,0),h=Math.max(n-o.height,0),f=kw(e.boxes),p=f.vertical,_=f.horizontal;He(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const v=p.reduce((N,O)=>O.box.options&&O.box.options.display===!1?N:N+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:u,availableHeight:h,vBoxMaxWidth:u/2/v,hBoxMaxHeight:h/2}),S=Object.assign({},o);m_(S,Fi(i));const C=Object.assign({maxPadding:S,w:u,h,x:o.left,y:o.top},o),P=Ew(p.concat(_),x);Ta(f.fullSize,C,x,P),Ta(p,C,x,P),Ta(_,C,x,P)&&Ta(p,C,x,P),Cw(C),_g(f.leftAndTop,C,x,P),C.x+=C.w,C.y+=C.h,_g(f.rightAndBottom,C,x,P),e.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},He(f.chartArea,N=>{const O=N.box;Object.assign(O,e.chartArea),O.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class __{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,i){}removeEventListener(t,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,i,o){return n=Math.max(0,n||t.width),i=i||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):i)}}isAttached(t){return!0}updateConfig(t){}}class Iw extends __{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const tl="$chartjs",Aw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},vg=e=>e===null||e==="";function Lw(e,t){const n=e.style,i=e.getAttribute("height"),o=e.getAttribute("width");if(e[tl]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",vg(o)){const u=rg(e,"width");u!==void 0&&(e.width=u)}if(vg(i))if(e.style.height==="")e.height=e.width/(t||2);else{const u=rg(e,"height");u!==void 0&&(e.height=u)}return e}const v_=z2?{passive:!0}:!1;function Dw(e,t,n){e&&e.addEventListener(t,n,v_)}function Nw(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,v_)}function Pw(e,t){const n=Aw[e.type]||e.type,{x:i,y:o}=qs(e,t);return{type:n,chart:t,native:e,x:i!==void 0?i:null,y:o!==void 0?o:null}}function Pl(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Ow(e,t,n){const i=e.canvas,o=new MutationObserver(u=>{let h=!1;for(const f of u)h=h||Pl(f.addedNodes,i),h=h&&!Pl(f.removedNodes,i);h&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function Mw(e,t,n){const i=e.canvas,o=new MutationObserver(u=>{let h=!1;for(const f of u)h=h||Pl(f.removedNodes,i),h=h&&!Pl(f.addedNodes,i);h&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const Qa=new Map;let yg=0;function y_(){const e=window.devicePixelRatio;e!==yg&&(yg=e,Qa.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Rw(e,t){Qa.size||window.addEventListener("resize",y_),Qa.set(e,t)}function Fw(e){Qa.delete(e),Qa.size||window.removeEventListener("resize",y_)}function Bw(e,t,n){const i=e.canvas,o=i&&sf(i);if(!o)return;const u=Km((f,p)=>{const _=o.clientWidth;n(f,p),_<o.clientWidth&&n()},window),h=new ResizeObserver(f=>{const p=f[0],_=p.contentRect.width,v=p.contentRect.height;_===0&&v===0||u(_,v)});return h.observe(o),Rw(e,u),h}function Wc(e,t,n){n&&n.disconnect(),t==="resize"&&Fw(e)}function zw(e,t,n){const i=e.canvas,o=Km(u=>{e.ctx!==null&&n(Pw(u,e))},e);return Dw(i,t,o),o}class qw extends __{acquireContext(t,n){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Lw(t,n),i):null}releaseContext(t){const n=t.canvas;if(!n[tl])return!1;const i=n[tl].initial;["height","width"].forEach(u=>{const h=i[u];Ze(h)?n.removeAttribute(u):n.setAttribute(u,h)});const o=i.style||{};return Object.keys(o).forEach(u=>{n.style[u]=o[u]}),n.width=n.width,delete n[tl],!0}addEventListener(t,n,i){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),h={attach:Ow,detach:Mw,resize:Bw}[n]||zw;o[n]=h(t,n,i)}removeEventListener(t,n){const i=t.$proxies||(t.$proxies={}),o=i[n];if(!o)return;({attach:Wc,detach:Wc,resize:Wc}[n]||Nw)(t,n,o),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,i,o){return B2(t,n,i,o)}isAttached(t){const n=t&&sf(t);return!!(n&&n.isConnected)}}function Uw(e){return!rf()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Iw:qw}let Bo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}hasValue(){return Ll(this.x)&&Ll(this.y)}getProps(t,n){const i=this.$animations;if(!n||!i)return this;const o={};return t.forEach(u=>{o[u]=i[u]&&i[u].active()?i[u]._to:this[u]}),o}};function Hw(e,t){const n=e.options.ticks,i=Gw(e),o=Math.min(n.maxTicksLimit||i,i),u=n.major.enabled?Zw(t):[],h=u.length,f=u[0],p=u[h-1],_=[];if(h>o)return Ww(t,_,u,h/o),_;const v=Vw(u,t,o);if(h>0){let x,S;const C=h>1?Math.round((p-f)/(h-1)):null;for(Bu(t,_,v,Ze(C)?0:f-C,f),x=0,S=h-1;x<S;x++)Bu(t,_,v,u[x],u[x+1]);return Bu(t,_,v,p,Ze(C)?t.length:p+C),_}return Bu(t,_,v),_}function Gw(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),o=e._maxLength/n;return Math.floor(Math.min(i,o))}function Vw(e,t,n){const i=Yw(e),o=t.length/n;if(!i)return Math.max(o,1);const u=Wb(i);for(let h=0,f=u.length-1;h<f;h++){const p=u[h];if(p>o)return p}return Math.max(o,1)}function Zw(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}function Ww(e,t,n,i){let o=0,u=n[0],h;for(i=Math.ceil(i),h=0;h<e.length;h++)h===u&&(t.push(e[h]),o++,u=n[o*i])}function Bu(e,t,n,i,o){const u=Re(i,0),h=Math.min(Re(o,e.length),e.length);let f=0,p,_,v;for(n=Math.ceil(n),o&&(p=o-i,n=p/Math.floor(p/n)),v=u;v<0;)f++,v=Math.round(u+f*n);for(_=Math.max(u,0);_<h;_++)_===v&&(t.push(e[_]),f++,v=Math.round(u+f*n))}function Yw(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}const jw=e=>e==="left"?"right":e==="right"?"left":e,xg=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,bg=(e,t)=>Math.min(t||e,e);function wg(e,t){const n=[],i=e.length/t,o=e.length;let u=0;for(;u<o;u+=i)n.push(e[Math.floor(u)]);return n}function $w(e,t,n){const i=e.ticks.length,o=Math.min(t,i-1),u=e._startPixel,h=e._endPixel,f=1e-6;let p=e.getPixelForTick(o),_;if(!(n&&(i===1?_=Math.max(p-u,h-p):t===0?_=(e.getPixelForTick(1)-p)/2:_=(p-e.getPixelForTick(o-1))/2,p+=o<t?_:-_,p<u-f||p>h+f)))return p}function Xw(e,t){He(e,n=>{const i=n.gc,o=i.length/2;let u;if(o>t){for(u=0;u<o;++u)delete n.data[i[u]];i.splice(0,o)}})}function _a(e){return e.drawTicks?e.tickLength:0}function Eg(e,t){if(!e.display)return 0;const n=jn(e.font,t),i=Fi(e.padding);return(En(e.text)?e.text.length:1)*n.lineHeight+i.height}function Kw(e,t){return Fo(e,{scale:t,type:"scale"})}function Jw(e,t,n){return Fo(e,{tick:n,index:t,type:"tick"})}function Qw(e,t,n){let i=Kh(e);return(n&&t!=="right"||!n&&t==="right")&&(i=jw(i)),i}function tE(e,t,n,i){const{top:o,left:u,bottom:h,right:f,chart:p}=e,{chartArea:_,scales:v}=p;let x=0,S,C,P;const N=h-o,O=f-u;if(e.isHorizontal()){if(C=Gn(i,u,f),Me(n)){const j=Object.keys(n)[0],U=n[j];P=v[j].getPixelForValue(U)+N-t}else n==="center"?P=(_.bottom+_.top)/2+N-t:P=xg(e,n,t);S=f-u}else{if(Me(n)){const j=Object.keys(n)[0],U=n[j];C=v[j].getPixelForValue(U)-O+t}else n==="center"?C=(_.left+_.right)/2-O+t:C=xg(e,n,t);P=Gn(i,h,o),x=n==="left"?-Zi:Zi}return{titleX:C,titleY:P,maxWidth:S,rotation:x}}class zo extends Bo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:i,_suggestedMax:o}=this;return t=or(t,Number.POSITIVE_INFINITY),n=or(n,Number.NEGATIVE_INFINITY),i=or(i,Number.POSITIVE_INFINITY),o=or(o,Number.NEGATIVE_INFINITY),{min:or(t,i),max:or(n,o),minDefined:Ri(t),maxDefined:Ri(n)}}getMinMax(t){let{min:n,max:i,minDefined:o,maxDefined:u}=this.getUserBounds(),h;if(o&&u)return{min:n,max:i};const f=this.getMatchingVisibleMetas();for(let p=0,_=f.length;p<_;++p)h=f[p].controller.getMinMax(this,t),o||(n=Math.min(n,h.min)),u||(i=Math.max(i,h.max));return n=u&&n>i?i:n,i=o&&n>i?n:i,{min:or(n,or(i,n)),max:or(i,or(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$e(this.options.beforeUpdate,[this])}update(t,n,i){const{beginAtZero:o,grace:u,ticks:h}=this.options,f=h.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=E2(this,u,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=f<this.ticks.length;this._convertTicksToLabels(p?wg(this.ticks,f):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),h.display&&(h.autoSkip||h.source==="auto")&&(this.ticks=Hw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,t=!t),this._startPixel=n,this._endPixel=i,this._reversePixels=t,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$e(this.options.afterUpdate,[this])}beforeSetDimensions(){$e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$e(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),$e(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let i,o,u;for(i=0,o=t.length;i<o;i++)u=t[i],u.label=$e(n.callback,[u.value,i,t],this)}afterTickToLabelConversion(){$e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,i=bg(this.ticks.length,t.ticks.maxTicksLimit),o=n.minRotation||0,u=n.maxRotation;let h=o,f,p,_;if(!this._isVisible()||!n.display||o>=u||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const v=this._getLabelSizes(),x=v.widest.width,S=v.highest.height,C=Wi(this.chart.width-x,0,this.maxWidth);f=t.offset?this.maxWidth/i:C/(i-1),x+6>f&&(f=C/(i-(t.offset?.5:1)),p=this.maxHeight-_a(t.grid)-n.padding-Eg(t.title,this.chart.options.font),_=Math.sqrt(x*x+S*S),h=Xb(Math.min(Math.asin(Wi((v.highest.height+6)/f,-1,1)),Math.asin(Wi(p/_,-1,1))-Math.asin(Wi(S/_,-1,1)))),h=Math.max(o,Math.min(u,h))),this.labelRotation=h}afterCalculateLabelRotation(){$e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$e(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:i,title:o,grid:u}}=this,h=this._isVisible(),f=this.isHorizontal();if(h){const p=Eg(o,n.options.font);if(f?(t.width=this.maxWidth,t.height=_a(u)+p):(t.height=this.maxHeight,t.width=_a(u)+p),i.display&&this.ticks.length){const{first:_,last:v,widest:x,highest:S}=this._getLabelSizes(),C=i.padding*2,P=Us(this.labelRotation),N=Math.cos(P),O=Math.sin(P);if(f){const j=i.mirror?0:O*x.width+N*S.height;t.height=Math.min(this.maxHeight,t.height+j+C)}else{const j=i.mirror?0:N*x.width+O*S.height;t.width=Math.min(this.maxWidth,t.width+j+C)}this._calculatePadding(_,v,O,N)}}this._handleMargins(),f?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,i,o){const{ticks:{align:u,padding:h},position:f}=this.options,p=this.labelRotation!==0,_=f!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,C=0;p?_?(S=o*t.width,C=i*n.height):(S=i*t.height,C=o*n.width):u==="start"?C=n.width:u==="end"?S=t.width:u!=="inner"&&(S=t.width/2,C=n.width/2),this.paddingLeft=Math.max((S-v+h)*this.width/(this.width-v),0),this.paddingRight=Math.max((C-x+h)*this.width/(this.width-x),0)}else{let v=n.height/2,x=t.height/2;u==="start"?(v=0,x=t.height):u==="end"&&(v=n.height,x=0),this.paddingTop=v+h,this.paddingBottom=x+h}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$e(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,i;for(n=0,i=t.length;n<i;n++)Ze(t[n].label)&&(t.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=wg(i,n)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,i){const{ctx:o,_longestTextCache:u}=this,h=[],f=[],p=Math.floor(n/bg(n,i));let _=0,v=0,x,S,C,P,N,O,j,U,nt,ct,tt;for(x=0;x<n;x+=p){if(P=t[x].label,N=this._resolveTickFontOptions(x),o.font=O=N.string,j=u[O]=u[O]||{data:{},gc:[]},U=N.lineHeight,nt=ct=0,!Ze(P)&&!En(P))nt=Jd(o,j.data,j.gc,nt,P),ct=U;else if(En(P))for(S=0,C=P.length;S<C;++S)tt=P[S],!Ze(tt)&&!En(tt)&&(nt=Jd(o,j.data,j.gc,nt,tt),ct+=U);h.push(nt),f.push(ct),_=Math.max(nt,_),v=Math.max(ct,v)}Xw(u,n);const pt=h.indexOf(_),st=f.indexOf(v),E=b=>({width:h[b]||0,height:f[b]||0});return{first:E(0),last:E(n-1),widest:E(pt),highest:E(st),widths:h,heights:f}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return t2(this._alignToPixels?Fs(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=Jw(this.getContext(),t,i))}return this.$context||(this.$context=Kw(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Us(this.labelRotation),i=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),u=this._getLabelSizes(),h=t.autoSkipPadding||0,f=u?u.widest.width+h:0,p=u?u.highest.height+h:0;return this.isHorizontal()?p*i>f*o?f/i:p/o:p*o<f*i?p/i:f/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,i=this.chart,o=this.options,{grid:u,position:h,border:f}=o,p=u.offset,_=this.isHorizontal(),x=this.ticks.length+(p?1:0),S=_a(u),C=[],P=f.setContext(this.getContext()),N=P.display?P.width:0,O=N/2,j=function($){return Fs(i,$,N)};let U,nt,ct,tt,pt,st,E,b,I,R,M,G;if(h==="top")U=j(this.bottom),st=this.bottom-S,b=U-O,R=j(t.top)+O,G=t.bottom;else if(h==="bottom")U=j(this.top),R=t.top,G=j(t.bottom)-O,st=U+O,b=this.top+S;else if(h==="left")U=j(this.right),pt=this.right-S,E=U-O,I=j(t.left)+O,M=t.right;else if(h==="right")U=j(this.left),I=t.left,M=j(t.right)-O,pt=U+O,E=this.left+S;else if(n==="x"){if(h==="center")U=j((t.top+t.bottom)/2+.5);else if(Me(h)){const $=Object.keys(h)[0],V=h[$];U=j(this.chart.scales[$].getPixelForValue(V))}R=t.top,G=t.bottom,st=U+O,b=st+S}else if(n==="y"){if(h==="center")U=j((t.left+t.right)/2);else if(Me(h)){const $=Object.keys(h)[0],V=h[$];U=j(this.chart.scales[$].getPixelForValue(V))}pt=U-O,E=pt-S,I=t.left,M=t.right}const Z=Re(o.ticks.maxTicksLimit,x),W=Math.max(1,Math.ceil(x/Z));for(nt=0;nt<x;nt+=W){const $=this.getContext(nt),V=u.setContext($),Y=f.setContext($),ut=V.lineWidth,K=V.color,it=Y.dash||[],bt=Y.dashOffset,wt=V.tickWidth,Et=V.tickColor,Tt=V.tickBorderDash||[],Pt=V.tickBorderDashOffset;ct=$w(this,nt,p),ct!==void 0&&(tt=Fs(i,ct,ut),_?pt=E=I=M=tt:st=b=R=G=tt,C.push({tx1:pt,ty1:st,tx2:E,ty2:b,x1:I,y1:R,x2:M,y2:G,width:ut,color:K,borderDash:it,borderDashOffset:bt,tickWidth:wt,tickColor:Et,tickBorderDash:Tt,tickBorderDashOffset:Pt}))}return this._ticksLength=x,this._borderValue=U,C}_computeLabelItems(t){const n=this.axis,i=this.options,{position:o,ticks:u}=i,h=this.isHorizontal(),f=this.ticks,{align:p,crossAlign:_,padding:v,mirror:x}=u,S=_a(i.grid),C=S+v,P=x?-v:C,N=-Us(this.labelRotation),O=[];let j,U,nt,ct,tt,pt,st,E,b,I,R,M,G="middle";if(o==="top")pt=this.bottom-P,st=this._getXAxisLabelAlignment();else if(o==="bottom")pt=this.top+P,st=this._getXAxisLabelAlignment();else if(o==="left"){const W=this._getYAxisLabelAlignment(S);st=W.textAlign,tt=W.x}else if(o==="right"){const W=this._getYAxisLabelAlignment(S);st=W.textAlign,tt=W.x}else if(n==="x"){if(o==="center")pt=(t.top+t.bottom)/2+C;else if(Me(o)){const W=Object.keys(o)[0],$=o[W];pt=this.chart.scales[W].getPixelForValue($)+C}st=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")tt=(t.left+t.right)/2-C;else if(Me(o)){const W=Object.keys(o)[0],$=o[W];tt=this.chart.scales[W].getPixelForValue($)}st=this._getYAxisLabelAlignment(S).textAlign}n==="y"&&(p==="start"?G="top":p==="end"&&(G="bottom"));const Z=this._getLabelSizes();for(j=0,U=f.length;j<U;++j){nt=f[j],ct=nt.label;const W=u.setContext(this.getContext(j));E=this.getPixelForTick(j)+u.labelOffset,b=this._resolveTickFontOptions(j),I=b.lineHeight,R=En(ct)?ct.length:1;const $=R/2,V=W.color,Y=W.textStrokeColor,ut=W.textStrokeWidth;let K=st;h?(tt=E,st==="inner"&&(j===U-1?K=this.options.reverse?"left":"right":j===0?K=this.options.reverse?"right":"left":K="center"),o==="top"?_==="near"||N!==0?M=-R*I+I/2:_==="center"?M=-Z.highest.height/2-$*I+I:M=-Z.highest.height+I/2:_==="near"||N!==0?M=I/2:_==="center"?M=Z.highest.height/2-$*I:M=Z.highest.height-R*I,x&&(M*=-1),N!==0&&!W.showLabelBackdrop&&(tt+=I/2*Math.sin(N))):(pt=E,M=(1-R)*I/2);let it;if(W.showLabelBackdrop){const bt=Fi(W.backdropPadding),wt=Z.heights[j],Et=Z.widths[j];let Tt=M-bt.top,Pt=0-bt.left;switch(G){case"middle":Tt-=wt/2;break;case"bottom":Tt-=wt;break}switch(st){case"center":Pt-=Et/2;break;case"right":Pt-=Et;break;case"inner":j===U-1?Pt-=Et:j>0&&(Pt-=Et/2);break}it={left:Pt,top:Tt,width:Et+bt.width,height:wt+bt.height,color:W.backdropColor}}O.push({label:ct,font:b,textOffset:M,options:{rotation:N,color:V,strokeColor:Y,strokeWidth:ut,textAlign:K,textBaseline:G,translation:[tt,pt],backdrop:it}})}return O}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Us(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"?o="right":n.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:i,mirror:o,padding:u}}=this.options,h=this._getLabelSizes(),f=t+u,p=h.widest.width;let _,v;return n==="left"?o?(v=this.right+u,i==="near"?_="left":i==="center"?(_="center",v+=p/2):(_="right",v+=p)):(v=this.right-f,i==="near"?_="right":i==="center"?(_="center",v-=p/2):(_="left",v=this.left)):n==="right"?o?(v=this.left+u,i==="near"?_="right":i==="center"?(_="center",v-=p/2):(_="left",v-=p)):(v=this.left+f,i==="near"?_="left":i==="center"?(_="center",v+=p/2):(_="right",v=this.right)):_="right",{textAlign:_,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:i,top:o,width:u,height:h}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(i,o,u,h),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(u=>u.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let u,h;const f=(p,_,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(p.x,p.y),i.lineTo(_.x,_.y),i.stroke(),i.restore())};if(n.display)for(u=0,h=o.length;u<h;++u){const p=o[u];n.drawOnChartArea&&f({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),n.drawTicks&&f({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:i,grid:o}}=this,u=i.setContext(this.getContext()),h=i.display?u.width:0;if(!h)return;const f=o.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let _,v,x,S;this.isHorizontal()?(_=Fs(t,this.left,h)-h/2,v=Fs(t,this.right,f)+f/2,x=S=p):(x=Fs(t,this.top,h)-h/2,S=Fs(t,this.bottom,f)+f/2,_=v=p),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(_,x),n.lineTo(v,S),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&Jh(i,o);const u=this.getLabelItems(t);for(const h of u){const f=h.options,p=h.font,_=h.label,v=h.textOffset;Ja(i,_,0,v,p,f)}o&&Qh(i)}drawTitle(){const{ctx:t,options:{position:n,title:i,reverse:o}}=this;if(!i.display)return;const u=jn(i.font),h=Fi(i.padding),f=i.align;let p=u.lineHeight/2;n==="bottom"||n==="center"||Me(n)?(p+=h.bottom,En(i.text)&&(p+=u.lineHeight*(i.text.length-1))):p+=h.top;const{titleX:_,titleY:v,maxWidth:x,rotation:S}=tE(this,p,n,f);Ja(t,i.text,0,0,u,{color:i.color,maxWidth:x,rotation:S,textAlign:Qw(f,n,o),textBaseline:"middle",translation:[_,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,i=Re(t.grid&&t.grid.z,-1),o=Re(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==zo.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:i,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let u,h;for(u=0,h=n.length;u<h;++u){const f=n[u];f[i]===this.id&&(!t||f.type===t)&&o.push(f)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return jn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class zu{constructor(t,n,i){this.type=t,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let i;iE(n)&&(i=this.register(n));const o=this.items,u=t.id,h=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+t);return u in o||(o[u]=t,eE(t,h,i),this.override&&_n.override(t.id,t.overrides)),h}get(t){return this.items[t]}unregister(t){const n=this.items,i=t.id,o=this.scope;i in n&&delete n[i],o&&i in _n[o]&&(delete _n[o][i],this.override&&delete Ys[i])}}function eE(e,t,n){const i=Xa(Object.create(null),[n?_n.get(n):{},_n.get(t),e.defaults]);_n.set(t,i),e.defaultRoutes&&nE(t,e.defaultRoutes),e.descriptors&&_n.describe(t,e.descriptors)}function nE(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),o=i.pop(),u=[e].concat(i).join("."),h=t[n].split("."),f=h.pop(),p=h.join(".");_n.route(u,o,p,f)})}function iE(e){return"id"in e&&"defaults"in e}class rE{constructor(){this.controllers=new zu(d_,"datasets",!0),this.elements=new zu(Bo,"elements"),this.plugins=new zu(Object,"plugins"),this.scales=new zu(zo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,i){[...n].forEach(o=>{const u=i||this._getRegistryForType(o);i||u.isForType(o)||u===this.plugins&&o.id?this._exec(t,u,o):He(o,h=>{const f=i||this._getRegistryForType(h);this._exec(t,f,h)})})}_exec(t,n,i){const o=$h(t);$e(i["before"+o],[],i),n[t](i),$e(i["after"+o],[],i)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(t))return i}return this.plugins}_get(t,n,i){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return o}}var lr=new rE;class sE{constructor(){this._init=void 0}notify(t,n,i,o){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const u=o?this._descriptors(t).filter(o):this._descriptors(t),h=this._notify(u,t,n,i);return n==="afterDestroy"&&(this._notify(u,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),h}_notify(t,n,i,o){o=o||{};for(const u of t){const h=u.plugin,f=h[i],p=[n,o,u.options];if($e(f,p,h)===!1&&o.cancelable)return!1}return!0}invalidate(){Ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const i=t&&t.config,o=Re(i.options&&i.options.plugins,{}),u=oE(i);return o===!1&&!n?[]:uE(t,u,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],i=this._cache,o=(u,h)=>u.filter(f=>!h.some(p=>f.plugin.id===p.plugin.id));this._notify(o(n,i),t,"stop"),this._notify(o(i,n),t,"start")}}function oE(e){const t={},n=[],i=Object.keys(lr.plugins.items);for(let u=0;u<i.length;u++)n.push(lr.getPlugin(i[u]));const o=e.plugins||[];for(let u=0;u<o.length;u++){const h=o[u];n.indexOf(h)===-1&&(n.push(h),t[h.id]=!0)}return{plugins:n,localIds:t}}function aE(e,t){return!t&&e===!1?null:e===!0?{}:e}function uE(e,{plugins:t,localIds:n},i,o){const u=[],h=e.getContext();for(const f of t){const p=f.id,_=aE(i[p],o);_!==null&&u.push({plugin:f,options:lE(e.config,{plugin:f,local:n[p]},_,h)})}return u}function lE(e,{plugin:t,local:n},i,o){const u=e.pluginScopeKeys(t),h=e.getOptionScopes(i,u);return n&&t.defaults&&h.push(t.defaults),e.createResolver(h,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Eh(e,t){const n=_n.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function cE(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function hE(e,t){return e===t?"_index_":"_value_"}function kg(e){if(e==="x"||e==="y"||e==="r")return e}function fE(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function kh(e,...t){if(kg(e))return e;for(const n of t){const i=n.axis||fE(n.position)||e.length>1&&kg(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Sg(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function dE(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(n.length)return Sg(e,"x",n[0])||Sg(e,"y",n[0])}return{}}function gE(e,t){const n=Ys[e.type]||{scales:{}},i=t.scales||{},o=Eh(e.type,t),u=Object.create(null);return Object.keys(i).forEach(h=>{const f=i[h];if(!Me(f))return console.error(`Invalid scale configuration for scale: ${h}`);if(f._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${h}`);const p=kh(h,f,dE(h,e),_n.scales[f.type]),_=hE(p,o),v=n.scales||{};u[h]=Fa(Object.create(null),[{axis:p},f,v[p],v[_]])}),e.data.datasets.forEach(h=>{const f=h.type||e.type,p=h.indexAxis||Eh(f,t),v=(Ys[f]||{}).scales||{};Object.keys(v).forEach(x=>{const S=cE(x,p),C=h[S+"AxisID"]||S;u[C]=u[C]||Object.create(null),Fa(u[C],[{axis:S},i[C],v[x]])})}),Object.keys(u).forEach(h=>{const f=u[h];Fa(f,[_n.scales[f.type],_n.scale])}),u}function x_(e){const t=e.options||(e.options={});t.plugins=Re(t.plugins,{}),t.scales=gE(e,t)}function b_(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function pE(e){return e=e||{},e.data=b_(e.data),x_(e),e}const Cg=new Map,w_=new Set;function qu(e,t){let n=Cg.get(e);return n||(n=t(),Cg.set(e,n),w_.add(n)),n}const va=(e,t,n)=>{const i=Po(t,n);i!==void 0&&e.add(i)};class mE{constructor(t){this._config=pE(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=b_(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),x_(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return qu(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return qu(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return qu(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,i=this.type;return qu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const i=this._scopeCache;let o=i.get(t);return(!o||n)&&(o=new Map,i.set(t,o)),o}getOptionScopes(t,n,i){const{options:o,type:u}=this,h=this._cachedScopes(t,i),f=h.get(n);if(f)return f;const p=new Set;n.forEach(v=>{t&&(p.add(t),v.forEach(x=>va(p,t,x))),v.forEach(x=>va(p,o,x)),v.forEach(x=>va(p,Ys[u]||{},x)),v.forEach(x=>va(p,_n,x)),v.forEach(x=>va(p,wh,x))});const _=Array.from(p);return _.length===0&&_.push(Object.create(null)),w_.has(n)&&h.set(n,_),_}chartOptionScopes(){const{options:t,type:n}=this;return[t,Ys[n]||{},_n.datasets[n]||{},{type:n},_n,wh]}resolveNamedOptions(t,n,i,o=[""]){const u={$shared:!0},{resolver:h,subPrefixes:f}=Tg(this._resolverCache,t,o);let p=h;if(vE(h,n)){u.$shared=!1,i=ps(i)?i():i;const _=this.createResolver(t,i,f);p=Oo(h,i,_)}for(const _ of n)u[_]=p[_];return u}createResolver(t,n,i=[""],o){const{resolver:u}=Tg(this._resolverCache,t,i);return Me(n)?Oo(u,n,void 0,o):u}}function Tg(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const o=n.join();let u=i.get(o);return u||(u={resolver:tf(t,n),subPrefixes:n.filter(f=>!f.toLowerCase().includes("hover"))},i.set(o,u)),u}const _E=e=>Me(e)&&Object.getOwnPropertyNames(e).some(t=>ps(e[t]));function vE(e,t){const{isScriptable:n,isIndexable:i}=s_(e);for(const o of t){const u=n(o),h=i(o),f=(h||u)&&e[o];if(u&&(ps(f)||_E(f))||h&&En(f))return!0}return!1}var yE="4.5.1";const xE=["top","bottom","left","right","chartArea"];function Ig(e,t){return e==="top"||e==="bottom"||xE.indexOf(e)===-1&&t==="x"}function Ag(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function Lg(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),$e(n&&n.onComplete,[e],t)}function bE(e){const t=e.chart,n=t.options.animation;$e(n&&n.onProgress,[e],t)}function E_(e){return rf()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const el={},Dg=e=>{const t=E_(e);return Object.values(el).filter(n=>n.canvas===t).pop()};function wE(e,t,n){const i=Object.keys(e);for(const o of i){const u=+o;if(u>=t){const h=e[o];delete e[o],(n>0||u>t)&&(e[u+n]=h)}}}function EE(e,t,n,i){return!n||e.type==="mouseout"?null:i?t:e}let tc=class{static defaults=_n;static instances=el;static overrides=Ys;static registry=lr;static version=yE;static getChart=Dg;static register(...t){lr.add(...t),Ng()}static unregister(...t){lr.remove(...t),Ng()}constructor(t,n){const i=this.config=new mE(n),o=E_(t),u=Dg(o);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const h=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Uw(o)),this.platform.updateConfig(i);const f=this.platform.acquireContext(o,h.aspectRatio),p=f&&f.canvas,_=p&&p.height,v=p&&p.width;if(this.id=Bb(),this.ctx=f,this.canvas=p,this.width=v,this.height=_,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=r2(x=>this.update(x),h.resizeDelay||0),this._dataChanges=[],el[this.id]=this,!f||!p){console.error("Failed to create chart: can't acquire context from the given item");return}Dr.listen(this,"complete",Lg),Dr.listen(this,"progress",bE),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:i,height:o,_aspectRatio:u}=this;return Ze(t)?n&&u?u:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return lr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ig(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qd(this.canvas,this.ctx),this}stop(){return Dr.stop(this),this}resize(t,n){Dr.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const i=this.options,o=this.canvas,u=i.maintainAspectRatio&&this.aspectRatio,h=this.platform.getMaximumSize(o,t,n,u),f=i.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,ig(this,f,!0)&&(this.notifyPlugins("resize",{size:h}),$e(i.onResize,[this,h],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};He(n,(i,o)=>{i.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,i=this.scales,o=Object.keys(i).reduce((h,f)=>(h[f]=!1,h),{});let u=[];n&&(u=u.concat(Object.keys(n).map(h=>{const f=n[h],p=kh(h,f),_=p==="r",v=p==="x";return{options:f,dposition:_?"chartArea":v?"bottom":"left",dtype:_?"radialLinear":v?"category":"linear"}}))),He(u,h=>{const f=h.options,p=f.id,_=kh(p,f),v=Re(f.type,h.dtype);(f.position===void 0||Ig(f.position,_)!==Ig(h.dposition))&&(f.position=h.dposition),o[p]=!0;let x=null;if(p in i&&i[p].type===v)x=i[p];else{const S=lr.getScale(v);x=new S({id:p,type:v,ctx:this.ctx,chart:this}),i[x.id]=x}x.init(f,t)}),He(o,(h,f)=>{h||delete i[f]}),He(i,h=>{Mi.configure(this,h,h.options),Mi.addBox(this,h)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,i=t.length;if(t.sort((o,u)=>o.index-u.index),i>n){for(let o=n;o<i;++o)this._destroyDatasetMeta(o);t.splice(n,i-n)}this._sortedMetasets=t.slice(0).sort(Ag("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((i,o)=>{n.filter(u=>u===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=n.length;i<o;i++){const u=n[i];let h=this.getDatasetMeta(i);const f=u.type||this.config.type;if(h.type&&h.type!==f&&(this._destroyDatasetMeta(i),h=this.getDatasetMeta(i)),h.type=f,h.indexAxis=u.indexAxis||Eh(f,this.options),h.order=u.order||0,h.index=i,h.label=""+u.label,h.visible=this.isDatasetVisible(i),h.controller)h.controller.updateIndex(i),h.controller.linkScales();else{const p=lr.getController(f),{datasetElementType:_,dataElementType:v}=_n.datasets[f];Object.assign(p,{dataElementType:lr.getElement(v),datasetElementType:_&&lr.getElement(_)}),h.controller=new p(this,i),t.push(h.controller)}}return this._updateMetasets(),t}_resetElements(){He(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let _=0,v=this.data.datasets.length;_<v;_++){const{controller:x}=this.getDatasetMeta(_),S=!o&&u.indexOf(x)===-1;x.buildOrUpdateElements(S),h=Math.max(+x.getMaxOverflow(),h)}h=this._minPadding=i.layout.autoPadding?h:0,this._updateLayout(h),o||He(u,_=>{_.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ag("z","_idx"));const{_active:f,_lastEvent:p}=this;p?this._eventHandler(p,!0):f.length&&this._updateHoverStyles(f,f,!0),this.render()}_updateScales(){He(this.scales,t=>{Mi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Gd(n,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:u}of n){const h=i==="_removeElements"?-u:u;wE(t,o,h)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=u=>new Set(t.filter(h=>h[0]===u).map((h,f)=>f+","+h.splice(1).join(","))),o=i(0);for(let u=1;u<n;u++)if(!Gd(o,i(u)))return;return Array.from(o).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Mi.update(this,this.width,this.height,t);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],He(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,u)=>{o._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ps(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const i=this.getDatasetMeta(t),o={meta:i,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Dr.has(this)?this.attached&&!Dr.running(this)&&Dr.start(this):(this.draw(),Lg({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,i=[];let o,u;for(o=0,u=n.length;o<u;++o){const h=n[o];(!t||h.visible)&&i.push(h)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=G2(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&Jh(n,o),t.controller.draw(),o&&Qh(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return n_(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,i,o){const u=xw.modes[n];return typeof u=="function"?u(this,t,i,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],i=this._metasets;let o=i.filter(u=>u&&u._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=Fo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(t,n){const i=this.getDatasetMeta(t);i.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,i){const o=i?"show":"hide",u=this.getDatasetMeta(t),h=u.controller._resolveAnimations(void 0,o);Ka(n)?(u.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),h.update(u,{visible:i}),this.update(f=>f.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Dr.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Qd(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete el[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,i=(u,h)=>{n.addEventListener(this,u,h),t[u]=h},o=(u,h,f)=>{u.offsetX=h,u.offsetY=f,this._eventHandler(u)};He(this.options.events,u=>i(u,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,i=(p,_)=>{n.addEventListener(this,p,_),t[p]=_},o=(p,_)=>{t[p]&&(n.removeEventListener(this,p,_),delete t[p])},u=(p,_)=>{this.canvas&&this.resize(p,_)};let h;const f=()=>{o("attach",f),this.attached=!0,this.resize(),i("resize",u),i("detach",h)};h=()=>{this.attached=!1,o("resize",u),this._stop(),this._resize(0,0),i("attach",f)},n.isAttached(this.canvas)?f():h()}unbindEvents(){He(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},He(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,i){const o=i?"set":"remove";let u,h,f,p;for(n==="dataset"&&(u=this.getDatasetMeta(t[0].datasetIndex),u.controller["_"+o+"DatasetHoverStyle"]()),f=0,p=t.length;f<p;++f){h=t[f];const _=h&&this.getDatasetMeta(h.datasetIndex).controller;_&&_[o+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],i=t.map(({datasetIndex:u,index:h})=>{const f=this.getDatasetMeta(u);if(!f)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:f.data[h],index:h}});!Tl(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(t,n,i){return this._plugins.notify(this,t,n,i)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,i){const o=this.options.hover,u=(p,_)=>p.filter(v=>!_.some(x=>v.datasetIndex===x.datasetIndex&&v.index===x.index)),h=u(n,t),f=i?t:u(t,n);h.length&&this.updateHoverStyle(h,o.mode,!1),f.length&&o.mode&&this.updateHoverStyle(f,o.mode,!0)}_eventHandler(t,n){const i={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},o=h=>(h.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const u=this._handleEvent(t,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(u||i.changed)&&this.render(),this}_handleEvent(t,n,i){const{_active:o=[],options:u}=this,h=n,f=this._getActiveElements(t,o,i,h),p=Vb(t),_=EE(t,this._lastEvent,i,p);i&&(this._lastEvent=null,$e(u.onHover,[t,f,this],this),p&&$e(u.onClick,[t,f,this],this));const v=!Tl(f,o);return(v||n)&&(this._active=f,this._updateHoverStyles(f,o,n)),this._lastEvent=_,v}_getActiveElements(t,n,i,o){if(t.type==="mouseout")return[];if(!i)return n;const u=this.options.hover;return this.getElementsAtEventForMode(t,u.mode,u,o)}};function Ng(){return He(tc.instances,e=>e._plugins.invalidate())}function k_(e,t){const{x:n,y:i,base:o,width:u,height:h}=e.getProps(["x","y","base","width","height"],t);let f,p,_,v,x;return e.horizontal?(x=h/2,f=Math.min(n,o),p=Math.max(n,o),_=i-x,v=i+x):(x=u/2,f=n-x,p=n+x,_=Math.min(i,o),v=Math.max(i,o)),{left:f,top:_,right:p,bottom:v}}function us(e,t,n,i){return e?0:Wi(t,n,i)}function kE(e,t,n){const i=e.options.borderWidth,o=e.borderSkipped,u=r_(i);return{t:us(o.top,u.top,0,n),r:us(o.right,u.right,0,t),b:us(o.bottom,u.bottom,0,n),l:us(o.left,u.left,0,t)}}function SE(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,u=So(o),h=Math.min(t,n),f=e.borderSkipped,p=i||Me(o);return{topLeft:us(!p||f.top||f.left,u.topLeft,0,h),topRight:us(!p||f.top||f.right,u.topRight,0,h),bottomLeft:us(!p||f.bottom||f.left,u.bottomLeft,0,h),bottomRight:us(!p||f.bottom||f.right,u.bottomRight,0,h)}}function CE(e){const t=k_(e),n=t.right-t.left,i=t.bottom-t.top,o=kE(e,n/2,i/2),u=SE(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:u},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,u.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(o.b,o.r))}}}}function Yc(e,t,n,i){const o=t===null,u=n===null,f=e&&!(o&&u)&&k_(e,i);return f&&(o||vo(t,f.left,f.right))&&(u||vo(n,f.top,f.bottom))}function TE(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function IE(e,t){e.rect(t.x,t.y,t.w,t.h)}function jc(e,t,n={}){const i=e.x!==n.x?-t:0,o=e.y!==n.y?-t:0,u=(e.x+e.w!==n.x+n.w?t:0)-i,h=(e.y+e.h!==n.y+n.h?t:0)-o;return{x:e.x+i,y:e.y+o,w:e.w+u,h:e.h+h,radius:e.radius}}class AE extends Bo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:i,backgroundColor:o}}=this,{inner:u,outer:h}=CE(this),f=TE(h.radius)?Dl:IE;t.save(),(h.w!==u.w||h.h!==u.h)&&(t.beginPath(),f(t,jc(h,n,u)),t.clip(),f(t,jc(u,-n,h)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),f(t,jc(u,n)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,n,i){return Yc(this,t,n,i)}inXRange(t,n){return Yc(this,t,null,n)}inYRange(t,n){return Yc(this,null,t,n)}getCenterPoint(t){const{x:n,y:i,base:o,horizontal:u}=this.getProps(["x","y","base","horizontal"],t);return{x:u?(n+o)/2:n,y:u?i:(i+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const Pg=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}},LE=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Og extends Bo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,i){this.maxWidth=t,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=$e(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(i=>t.filter(i,this.chart.data))),t.sort&&(n=n.sort((i,o)=>t.sort(i,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,o=jn(i.font),u=o.size,h=this._computeTitleHeight(),{boxWidth:f,itemHeight:p}=Pg(i,u);let _,v;n.font=o.string,this.isHorizontal()?(_=this.maxWidth,v=this._fitRows(h,u,f,p)+10):(v=this.maxHeight,_=this._fitCols(h,o,f,p)+10),this.width=Math.min(_,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,n,i,o){const{ctx:u,maxWidth:h,options:{labels:{padding:f}}}=this,p=this.legendHitBoxes=[],_=this.lineWidths=[0],v=o+f;let x=t;u.textAlign="left",u.textBaseline="middle";let S=-1,C=-v;return this.legendItems.forEach((P,N)=>{const O=i+n/2+u.measureText(P.text).width;(N===0||_[_.length-1]+O+2*f>h)&&(x+=v,_[_.length-(N>0?0:1)]=0,C+=v,S++),p[N]={left:0,top:C,row:S,width:O,height:o},_[_.length-1]+=O+f}),x}_fitCols(t,n,i,o){const{ctx:u,maxHeight:h,options:{labels:{padding:f}}}=this,p=this.legendHitBoxes=[],_=this.columnSizes=[],v=h-t;let x=f,S=0,C=0,P=0,N=0;return this.legendItems.forEach((O,j)=>{const{itemWidth:U,itemHeight:nt}=DE(i,n,u,O,o);j>0&&C+nt+2*f>v&&(x+=S+f,_.push({width:S,height:C}),P+=S+f,N++,S=C=0),p[j]={left:P,top:C,col:N,width:U,height:nt},S=Math.max(S,U),C+=nt+f}),x+=S,_.push({width:S,height:C}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:o},rtl:u}}=this,h=Co(u,this.left,this.width);if(this.isHorizontal()){let f=0,p=Gn(i,this.left+o,this.right-this.lineWidths[f]);for(const _ of n)f!==_.row&&(f=_.row,p=Gn(i,this.left+o,this.right-this.lineWidths[f])),_.top+=this.top+t+o,_.left=h.leftForLtr(h.x(p),_.width),p+=_.width+o}else{let f=0,p=Gn(i,this.top+t+o,this.bottom-this.columnSizes[f].height);for(const _ of n)_.col!==f&&(f=_.col,p=Gn(i,this.top+t+o,this.bottom-this.columnSizes[f].height)),_.top=p,_.left+=this.left+o,_.left=h.leftForLtr(h.x(_.left),_.width),p+=_.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Jh(t,this),this._draw(),Qh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:i,ctx:o}=this,{align:u,labels:h}=t,f=_n.color,p=Co(t.rtl,this.left,this.width),_=jn(h.font),{padding:v}=h,x=_.size,S=x/2;let C;this.drawTitle(),o.textAlign=p.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=_.string;const{boxWidth:P,boxHeight:N,itemHeight:O}=Pg(h,x),j=function(pt,st,E){if(isNaN(P)||P<=0||isNaN(N)||N<0)return;o.save();const b=Re(E.lineWidth,1);if(o.fillStyle=Re(E.fillStyle,f),o.lineCap=Re(E.lineCap,"butt"),o.lineDashOffset=Re(E.lineDashOffset,0),o.lineJoin=Re(E.lineJoin,"miter"),o.lineWidth=b,o.strokeStyle=Re(E.strokeStyle,f),o.setLineDash(Re(E.lineDash,[])),h.usePointStyle){const I={radius:N*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:b},R=p.xPlus(pt,P/2),M=st+S;e_(o,I,R,M,h.pointStyleWidth&&P)}else{const I=st+Math.max((x-N)/2,0),R=p.leftForLtr(pt,P),M=So(E.borderRadius);o.beginPath(),Object.values(M).some(G=>G!==0)?Dl(o,{x:R,y:I,w:P,h:N,radius:M}):o.rect(R,I,P,N),o.fill(),b!==0&&o.stroke()}o.restore()},U=function(pt,st,E){Ja(o,E.text,pt,st+O/2,_,{strikethrough:E.hidden,textAlign:p.textAlign(E.textAlign)})},nt=this.isHorizontal(),ct=this._computeTitleHeight();nt?C={x:Gn(u,this.left+v,this.right-i[0]),y:this.top+v+ct,line:0}:C={x:this.left+v,y:Gn(u,this.top+ct+v,this.bottom-n[0].height),line:0},l_(this.ctx,t.textDirection);const tt=O+v;this.legendItems.forEach((pt,st)=>{o.strokeStyle=pt.fontColor,o.fillStyle=pt.fontColor;const E=o.measureText(pt.text).width,b=p.textAlign(pt.textAlign||(pt.textAlign=h.textAlign)),I=P+S+E;let R=C.x,M=C.y;p.setWidth(this.width),nt?st>0&&R+I+v>this.right&&(M=C.y+=tt,C.line++,R=C.x=Gn(u,this.left+v,this.right-i[C.line])):st>0&&M+tt>this.bottom&&(R=C.x=R+n[C.line].width+v,C.line++,M=C.y=Gn(u,this.top+ct+v,this.bottom-n[C.line].height));const G=p.x(R);if(j(G,M,pt),R=s2(b,R+P+S,nt?R+I:this.right,t.rtl),U(p.x(R),M,pt),nt)C.x+=I+v;else if(typeof pt.text!="string"){const Z=_.lineHeight;C.y+=S_(pt,Z)+v}else C.y+=tt}),c_(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,i=jn(n.font),o=Fi(n.padding);if(!n.display)return;const u=Co(t.rtl,this.left,this.width),h=this.ctx,f=n.position,p=i.size/2,_=o.top+p;let v,x=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),v=this.top+_,x=Gn(t.align,x,this.right-S);else{const P=this.columnSizes.reduce((N,O)=>Math.max(N,O.height),0);v=_+Gn(t.align,this.top,this.bottom-P-t.labels.padding-this._computeTitleHeight())}const C=Gn(f,x,x+S);h.textAlign=u.textAlign(Kh(f)),h.textBaseline="middle",h.strokeStyle=n.color,h.fillStyle=n.color,h.font=i.string,Ja(h,n.text,C,v,i)}_computeTitleHeight(){const t=this.options.title,n=jn(t.font),i=Fi(t.padding);return t.display?n.lineHeight+i.height:0}_getLegendItemAt(t,n){let i,o,u;if(vo(t,this.left,this.right)&&vo(n,this.top,this.bottom)){for(u=this.legendHitBoxes,i=0;i<u.length;++i)if(o=u[i],vo(t,o.left,o.left+o.width)&&vo(n,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(t){const n=this.options;if(!OE(t.type,n))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const o=this._hoveredItem,u=LE(o,i);o&&!u&&$e(n.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!u&&$e(n.onHover,[t,i,this],this)}else i&&$e(n.onClick,[t,i,this],this)}}function DE(e,t,n,i,o){const u=NE(i,e,t,n),h=PE(o,i,t.lineHeight);return{itemWidth:u,itemHeight:h}}function NE(e,t,n,i){let o=e.text;return o&&typeof o!="string"&&(o=o.reduce((u,h)=>u.length>h.length?u:h)),t+n.size/2+i.measureText(o).width}function PE(e,t,n){let i=e;return typeof t.text!="string"&&(i=S_(t,n)),i}function S_(e,t){const n=e.text?e.text.length:0;return t*n}function OE(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ME={id:"legend",_element:Og,start(e,t,n){const i=e.legend=new Og({ctx:e.ctx,options:n,chart:e});Mi.configure(e,i,n),Mi.addBox(e,i)},stop(e){Mi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;Mi.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,o=n.chart;o.isDatasetVisible(i)?(o.hide(i),t.hidden=!0):(o.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:o,color:u,useBorderRadius:h,borderRadius:f}}=e.legend.options;return e._getSortedDatasetMetas().map(p=>{const _=p.controller.getStyle(n?0:void 0),v=Fi(_.borderWidth);return{text:t[p.index].label,fillStyle:_.backgroundColor,fontColor:u,hidden:!p.visible,lineCap:_.borderCapStyle,lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:_.borderColor,pointStyle:i||_.pointStyle,rotation:_.rotation,textAlign:o||_.textAlign,borderRadius:h&&(f||_.borderRadius),datasetIndex:p.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class C_ extends Bo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=En(i.text)?i.text.length:1;this._padding=Fi(i.padding);const u=o*jn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:i,bottom:o,right:u,options:h}=this,f=h.align;let p=0,_,v,x;return this.isHorizontal()?(v=Gn(f,i,u),x=n+t,_=u-i):(h.position==="left"?(v=i+t,x=Gn(f,o,n),p=$n*-.5):(v=u-t,x=Gn(f,n,o),p=$n*.5),_=o-n),{titleX:v,titleY:x,maxWidth:_,rotation:p}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const i=jn(n.font),u=i.lineHeight/2+this._padding.top,{titleX:h,titleY:f,maxWidth:p,rotation:_}=this._drawArgs(u);Ja(t,n.text,0,0,i,{color:n.color,maxWidth:p,rotation:_,textAlign:Kh(n.align),textBaseline:"middle",translation:[h,f]})}}function RE(e,t){const n=new C_({ctx:e.ctx,options:t,chart:e});Mi.configure(e,n,t),Mi.addBox(e,n),e.titleBlock=n}var FE={id:"title",_element:C_,start(e,t,n){RE(e,n)},stop(e){const t=e.titleBlock;Mi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;Mi.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ia={average(e){if(!e.length)return!1;let t,n,i=new Set,o=0,u=0;for(t=0,n=e.length;t<n;++t){const f=e[t].element;if(f&&f.hasValue()){const p=f.tooltipPosition();i.add(p.x),o+=p.y,++u}}return u===0||i.size===0?!1:{x:[...i].reduce((f,p)=>f+p)/i.size,y:o/u}},nearest(e,t){if(!e.length)return!1;let n=t.x,i=t.y,o=Number.POSITIVE_INFINITY,u,h,f;for(u=0,h=e.length;u<h;++u){const p=e[u].element;if(p&&p.hasValue()){const _=p.getCenterPoint(),v=Jb(t,_);v<o&&(o=v,f=p)}}if(f){const p=f.tooltipPosition();n=p.x,i=p.y}return{x:n,y:i}}};function ar(e,t){return t&&(En(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Nr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function BE(e,t){const{element:n,datasetIndex:i,index:o}=t,u=e.getDatasetMeta(i).controller,{label:h,value:f}=u.getLabelAndValue(o);return{chart:e,label:h,parsed:u.getParsed(o),raw:e.data.datasets[i].data[o],formattedValue:f,dataset:u.getDataset(),dataIndex:o,datasetIndex:i,element:n}}function Mg(e,t){const n=e.chart.ctx,{body:i,footer:o,title:u}=e,{boxWidth:h,boxHeight:f}=t,p=jn(t.bodyFont),_=jn(t.titleFont),v=jn(t.footerFont),x=u.length,S=o.length,C=i.length,P=Fi(t.padding);let N=P.height,O=0,j=i.reduce((ct,tt)=>ct+tt.before.length+tt.lines.length+tt.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,x&&(N+=x*_.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),j){const ct=t.displayColors?Math.max(f,p.lineHeight):p.lineHeight;N+=C*ct+(j-C)*p.lineHeight+(j-1)*t.bodySpacing}S&&(N+=t.footerMarginTop+S*v.lineHeight+(S-1)*t.footerSpacing);let U=0;const nt=function(ct){O=Math.max(O,n.measureText(ct).width+U)};return n.save(),n.font=_.string,He(e.title,nt),n.font=p.string,He(e.beforeBody.concat(e.afterBody),nt),U=t.displayColors?h+2+t.boxPadding:0,He(i,ct=>{He(ct.before,nt),He(ct.lines,nt),He(ct.after,nt)}),U=0,n.font=v.string,He(e.footer,nt),n.restore(),O+=P.width,{width:O,height:N}}function zE(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}function qE(e,t,n,i){const{x:o,width:u}=i,h=n.caretSize+n.caretPadding;if(e==="left"&&o+u+h>t.width||e==="right"&&o-u-h<0)return!0}function UE(e,t,n,i){const{x:o,width:u}=n,{width:h,chartArea:{left:f,right:p}}=e;let _="center";return i==="center"?_=o<=(f+p)/2?"left":"right":o<=u/2?_="left":o>=h-u/2&&(_="right"),qE(_,e,t,n)&&(_="center"),_}function Rg(e,t,n){const i=n.yAlign||t.yAlign||zE(e,n);return{xAlign:n.xAlign||t.xAlign||UE(e,t,n,i),yAlign:i}}function HE(e,t){let{x:n,width:i}=e;return t==="right"?n-=i:t==="center"&&(n-=i/2),n}function GE(e,t,n){let{y:i,height:o}=e;return t==="top"?i+=n:t==="bottom"?i-=o+n:i-=o/2,i}function Fg(e,t,n,i){const{caretSize:o,caretPadding:u,cornerRadius:h}=e,{xAlign:f,yAlign:p}=n,_=o+u,{topLeft:v,topRight:x,bottomLeft:S,bottomRight:C}=So(h);let P=HE(t,f);const N=GE(t,p,_);return p==="center"?f==="left"?P+=_:f==="right"&&(P-=_):f==="left"?P-=Math.max(v,S)+o:f==="right"&&(P+=Math.max(x,C)+o),{x:Wi(P,0,i.width-t.width),y:Wi(N,0,i.height-t.height)}}function Uu(e,t,n){const i=Fi(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function Bg(e){return ar([],Nr(e))}function VE(e,t,n){return Fo(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function zg(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const T_={beforeTitle:Lr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Lr,beforeBody:Lr,beforeLabel:Lr,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ze(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Lr,afterBody:Lr,beforeFooter:Lr,footer:Lr,afterFooter:Lr};function li(e,t,n,i){const o=e[t].call(n,i);return typeof o>"u"?T_[t].call(n,i):o}class qg extends Bo{static positioners=Ia;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&n.options.animation&&i.animations,u=new h_(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=VE(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:i}=n,o=li(i,"beforeTitle",this,t),u=li(i,"title",this,t),h=li(i,"afterTitle",this,t);let f=[];return f=ar(f,Nr(o)),f=ar(f,Nr(u)),f=ar(f,Nr(h)),f}getBeforeBody(t,n){return Bg(li(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:i}=n,o=[];return He(t,u=>{const h={before:[],lines:[],after:[]},f=zg(i,u);ar(h.before,Nr(li(f,"beforeLabel",this,u))),ar(h.lines,li(f,"label",this,u)),ar(h.after,Nr(li(f,"afterLabel",this,u))),o.push(h)}),o}getAfterBody(t,n){return Bg(li(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:i}=n,o=li(i,"beforeFooter",this,t),u=li(i,"footer",this,t),h=li(i,"afterFooter",this,t);let f=[];return f=ar(f,Nr(o)),f=ar(f,Nr(u)),f=ar(f,Nr(h)),f}_createItems(t){const n=this._active,i=this.chart.data,o=[],u=[],h=[];let f=[],p,_;for(p=0,_=n.length;p<_;++p)f.push(BE(this.chart,n[p]));return t.filter&&(f=f.filter((v,x,S)=>t.filter(v,x,S,i))),t.itemSort&&(f=f.sort((v,x)=>t.itemSort(v,x,i))),He(f,v=>{const x=zg(t.callbacks,v);o.push(li(x,"labelColor",this,v)),u.push(li(x,"labelPointStyle",this,v)),h.push(li(x,"labelTextColor",this,v))}),this.labelColors=o,this.labelPointStyles=u,this.labelTextColors=h,this.dataPoints=f,f}update(t,n){const i=this.options.setContext(this.getContext()),o=this._active;let u,h=[];if(!o.length)this.opacity!==0&&(u={opacity:0});else{const f=Ia[i.position].call(this,o,this._eventPosition);h=this._createItems(i),this.title=this.getTitle(h,i),this.beforeBody=this.getBeforeBody(h,i),this.body=this.getBody(h,i),this.afterBody=this.getAfterBody(h,i),this.footer=this.getFooter(h,i);const p=this._size=Mg(this,i),_=Object.assign({},f,p),v=Rg(this.chart,i,_),x=Fg(i,_,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,u={opacity:1,x:x.x,y:x.y,width:p.width,height:p.height,caretX:f.x,caretY:f.y}}this._tooltipItems=h,this.$context=void 0,u&&this._resolveAnimations().update(this,u),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,i,o){const u=this.getCaretPosition(t,i,o);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(t,n,i){const{xAlign:o,yAlign:u}=this,{caretSize:h,cornerRadius:f}=i,{topLeft:p,topRight:_,bottomLeft:v,bottomRight:x}=So(f),{x:S,y:C}=t,{width:P,height:N}=n;let O,j,U,nt,ct,tt;return u==="center"?(ct=C+N/2,o==="left"?(O=S,j=O-h,nt=ct+h,tt=ct-h):(O=S+P,j=O+h,nt=ct-h,tt=ct+h),U=O):(o==="left"?j=S+Math.max(p,v)+h:o==="right"?j=S+P-Math.max(_,x)-h:j=this.caretX,u==="top"?(nt=C,ct=nt-h,O=j-h,U=j+h):(nt=C+N,ct=nt+h,O=j+h,U=j-h),tt=nt),{x1:O,x2:j,x3:U,y1:nt,y2:ct,y3:tt}}drawTitle(t,n,i){const o=this.title,u=o.length;let h,f,p;if(u){const _=Co(i.rtl,this.x,this.width);for(t.x=Uu(this,i.titleAlign,i),n.textAlign=_.textAlign(i.titleAlign),n.textBaseline="middle",h=jn(i.titleFont),f=i.titleSpacing,n.fillStyle=i.titleColor,n.font=h.string,p=0;p<u;++p)n.fillText(o[p],_.x(t.x),t.y+h.lineHeight/2),t.y+=h.lineHeight+f,p+1===u&&(t.y+=i.titleMarginBottom-f)}}_drawColorBox(t,n,i,o,u){const h=this.labelColors[i],f=this.labelPointStyles[i],{boxHeight:p,boxWidth:_}=u,v=jn(u.bodyFont),x=Uu(this,"left",u),S=o.x(x),C=p<v.lineHeight?(v.lineHeight-p)/2:0,P=n.y+C;if(u.usePointStyle){const N={radius:Math.min(_,p)/2,pointStyle:f.pointStyle,rotation:f.rotation,borderWidth:1},O=o.leftForLtr(S,_)+_/2,j=P+p/2;t.strokeStyle=u.multiKeyBackground,t.fillStyle=u.multiKeyBackground,tg(t,N,O,j),t.strokeStyle=h.borderColor,t.fillStyle=h.backgroundColor,tg(t,N,O,j)}else{t.lineWidth=Me(h.borderWidth)?Math.max(...Object.values(h.borderWidth)):h.borderWidth||1,t.strokeStyle=h.borderColor,t.setLineDash(h.borderDash||[]),t.lineDashOffset=h.borderDashOffset||0;const N=o.leftForLtr(S,_),O=o.leftForLtr(o.xPlus(S,1),_-2),j=So(h.borderRadius);Object.values(j).some(U=>U!==0)?(t.beginPath(),t.fillStyle=u.multiKeyBackground,Dl(t,{x:N,y:P,w:_,h:p,radius:j}),t.fill(),t.stroke(),t.fillStyle=h.backgroundColor,t.beginPath(),Dl(t,{x:O,y:P+1,w:_-2,h:p-2,radius:j}),t.fill()):(t.fillStyle=u.multiKeyBackground,t.fillRect(N,P,_,p),t.strokeRect(N,P,_,p),t.fillStyle=h.backgroundColor,t.fillRect(O,P+1,_-2,p-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,n,i){const{body:o}=this,{bodySpacing:u,bodyAlign:h,displayColors:f,boxHeight:p,boxWidth:_,boxPadding:v}=i,x=jn(i.bodyFont);let S=x.lineHeight,C=0;const P=Co(i.rtl,this.x,this.width),N=function(E){n.fillText(E,P.x(t.x+C),t.y+S/2),t.y+=S+u},O=P.textAlign(h);let j,U,nt,ct,tt,pt,st;for(n.textAlign=h,n.textBaseline="middle",n.font=x.string,t.x=Uu(this,O,i),n.fillStyle=i.bodyColor,He(this.beforeBody,N),C=f&&O!=="right"?h==="center"?_/2+v:_+2+v:0,ct=0,pt=o.length;ct<pt;++ct){for(j=o[ct],U=this.labelTextColors[ct],n.fillStyle=U,He(j.before,N),nt=j.lines,f&&nt.length&&(this._drawColorBox(n,t,ct,P,i),S=Math.max(x.lineHeight,p)),tt=0,st=nt.length;tt<st;++tt)N(nt[tt]),S=x.lineHeight;He(j.after,N)}C=0,S=x.lineHeight,He(this.afterBody,N),t.y-=u}drawFooter(t,n,i){const o=this.footer,u=o.length;let h,f;if(u){const p=Co(i.rtl,this.x,this.width);for(t.x=Uu(this,i.footerAlign,i),t.y+=i.footerMarginTop,n.textAlign=p.textAlign(i.footerAlign),n.textBaseline="middle",h=jn(i.footerFont),n.fillStyle=i.footerColor,n.font=h.string,f=0;f<u;++f)n.fillText(o[f],p.x(t.x),t.y+h.lineHeight/2),t.y+=h.lineHeight+i.footerSpacing}}drawBackground(t,n,i,o){const{xAlign:u,yAlign:h}=this,{x:f,y:p}=t,{width:_,height:v}=i,{topLeft:x,topRight:S,bottomLeft:C,bottomRight:P}=So(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(f+x,p),h==="top"&&this.drawCaret(t,n,i,o),n.lineTo(f+_-S,p),n.quadraticCurveTo(f+_,p,f+_,p+S),h==="center"&&u==="right"&&this.drawCaret(t,n,i,o),n.lineTo(f+_,p+v-P),n.quadraticCurveTo(f+_,p+v,f+_-P,p+v),h==="bottom"&&this.drawCaret(t,n,i,o),n.lineTo(f+C,p+v),n.quadraticCurveTo(f,p+v,f,p+v-C),h==="center"&&u==="left"&&this.drawCaret(t,n,i,o),n.lineTo(f,p+x),n.quadraticCurveTo(f,p,f+x,p),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,i=this.$animations,o=i&&i.x,u=i&&i.y;if(o||u){const h=Ia[t.position].call(this,this._active,this._eventPosition);if(!h)return;const f=this._size=Mg(this,t),p=Object.assign({},h,this._size),_=Rg(n,t,p),v=Fg(t,p,_,n);(o._to!==v.x||u._to!==v.y)&&(this.xAlign=_.xAlign,this.yAlign=_.yAlign,this.width=f.width,this.height=f.height,this.caretX=h.x,this.caretY=h.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},u={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const h=Fi(n.padding),f=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&f&&(t.save(),t.globalAlpha=i,this.drawBackground(u,t,o,n),l_(t,n.textDirection),u.y+=h.top,this.drawTitle(u,t,n),this.drawBody(u,t,n),this.drawFooter(u,t,n),c_(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const i=this._active,o=t.map(({datasetIndex:f,index:p})=>{const _=this.chart.getDatasetMeta(f);if(!_)throw new Error("Cannot find a dataset at index "+f);return{datasetIndex:f,element:_.data[p],index:p}}),u=!Tl(i,o),h=this._positionChanged(o,n);(u||h)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,u=this._active||[],h=this._getActiveElements(t,u,n,i),f=this._positionChanged(h,t),p=n||!Tl(h,u)||f;return p&&(this._active=h,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),p}_getActiveElements(t,n,i,o){const u=this.options;if(t.type==="mouseout")return[];if(!o)return n.filter(f=>this.chart.data.datasets[f.datasetIndex]&&this.chart.getDatasetMeta(f.datasetIndex).controller.getParsed(f.index)!==void 0);const h=this.chart.getElementsAtEventForMode(t,u.mode,u,i);return u.reverse&&h.reverse(),h}_positionChanged(t,n){const{caretX:i,caretY:o,options:u}=this,h=Ia[u.position].call(this,t,n);return h!==!1&&(i!==h.x||o!==h.y)}}var ZE={id:"tooltip",_element:qg,positioners:Ia,afterInit(e,t,n){n&&(e.tooltip=new qg({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:T_},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const WE=(e,t,n,i)=>(typeof t=="string"?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function YE(e,t,n,i){const o=e.indexOf(t);if(o===-1)return WE(e,t,n,i);const u=e.lastIndexOf(t);return o!==u?n:o}const jE=(e,t)=>e===null?null:Wi(Math.round(e),0,t);function Ug(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class $E extends zo{static id="category";static defaults={ticks:{callback:Ug}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:o,label:u}of n)i[o]===u&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ze(t))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===t?n:YE(i,t,Re(n,t),this._addedLabels),jE(n,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),n||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const t=this.min,n=this.max,i=this.options.offset,o=[];let u=this.getLabels();u=t===0&&n===u.length-1?u:u.slice(t,n+1),this._valueRange=Math.max(u.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let h=t;h<=n;h++)o.push({value:h});return o}getLabelForValue(t){return Ug.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function XE(e,t){const n=[],{bounds:o,step:u,min:h,max:f,precision:p,count:_,maxTicks:v,maxDigits:x,includeBounds:S}=e,C=u||1,P=v-1,{min:N,max:O}=t,j=!Ze(h),U=!Ze(f),nt=!Ze(_),ct=(O-N)/(x+1);let tt=Zd((O-N)/P/C)*C,pt,st,E,b;if(tt<1e-14&&!j&&!U)return[{value:N},{value:O}];b=Math.ceil(O/tt)-Math.floor(N/tt),b>P&&(tt=Zd(b*tt/P/C)*C),Ze(p)||(pt=Math.pow(10,p),tt=Math.ceil(tt*pt)/pt),o==="ticks"?(st=Math.floor(N/tt)*tt,E=Math.ceil(O/tt)*tt):(st=N,E=O),j&&U&&u&&jb((f-h)/u,tt/1e3)?(b=Math.round(Math.min((f-h)/tt,v)),tt=(f-h)/b,st=h,E=f):nt?(st=j?h:st,E=U?f:E,b=_-1,tt=(E-st)/b):(b=(E-st)/tt,Qu(b,Math.round(b),tt/1e3)?b=Math.round(b):b=Math.ceil(b));const I=Math.max(Wd(tt),Wd(st));pt=Math.pow(10,Ze(p)?I:p),st=Math.round(st*pt)/pt,E=Math.round(E*pt)/pt;let R=0;for(j&&(S&&st!==h?(n.push({value:h}),st<h&&R++,Qu(Math.round((st+R*tt)*pt)/pt,h,Hg(h,ct,e))&&R++):st<h&&R++);R<b;++R){const M=Math.round((st+R*tt)*pt)/pt;if(U&&M>f)break;n.push({value:M})}return U&&S&&E!==f?n.length&&Qu(n[n.length-1].value,f,Hg(f,ct,e))?n[n.length-1].value=f:n.push({value:f}):(!U||E===f)&&n.push({value:E}),n}function Hg(e,t,{horizontal:n,minRotation:i}){const o=Us(i),u=(n?Math.sin(o):Math.cos(o))||.001,h=.75*t*(""+e).length;return Math.min(t/u,h)}class KE extends zo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Ze(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:o,max:u}=this;const h=p=>o=n?o:p,f=p=>u=i?u:p;if(t){const p=ds(o),_=ds(u);p<0&&_<0?f(0):p>0&&_>0&&h(0)}if(o===u){let p=u===0?1:Math.abs(u*.05);f(u+p),t||h(o-p)}this.min=o,this.max=u}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=t,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,h=XE(o,u);return t.bounds==="ticks"&&$b(h,this,"value"),t.reverse?(h.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),h}configure(){const t=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const o=(i-n)/Math.max(t.length-1,1)/2;n-=o,i+=o}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(t){return Qm(t,this.chart.options.locale,this.options.ticks.format)}}class JE extends KE{static id="linear";static defaults={ticks:{callback:t_.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ri(t)?t:0,this.max=Ri(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,i=Us(this.options.ticks.minRotation),o=(t?Math.sin(i):Math.cos(i))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ec={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hi=Object.keys(ec);function Gg(e,t){return e-t}function Vg(e,t){if(Ze(t))return null;const n=e._adapter,{parser:i,round:o,isoWeekday:u}=e._parseOpts;let h=t;return typeof i=="function"&&(h=i(h)),Ri(h)||(h=typeof i=="string"?n.parse(h,i):n.parse(h)),h===null?null:(o&&(h=o==="week"&&(Ll(u)||u===!0)?n.startOf(h,"isoWeek",u):n.startOf(h,o)),+h)}function Zg(e,t,n,i){const o=hi.length;for(let u=hi.indexOf(e);u<o-1;++u){const h=ec[hi[u]],f=h.steps?h.steps:Number.MAX_SAFE_INTEGER;if(h.common&&Math.ceil((n-t)/(f*h.size))<=i)return hi[u]}return hi[o-1]}function QE(e,t,n,i,o){for(let u=hi.length-1;u>=hi.indexOf(n);u--){const h=hi[u];if(ec[h].common&&e._adapter.diff(o,i,h)>=t-1)return h}return hi[n?hi.indexOf(n):0]}function tk(e){for(let t=hi.indexOf(e)+1,n=hi.length;t<n;++t)if(ec[hi[t]].common)return hi[t]}function Wg(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:i,hi:o}=Xh(n,t),u=n[i]>=t?n[i]:n[o];e[u]=!0}}function ek(e,t,n,i){const o=e._adapter,u=+o.startOf(t[0].value,i),h=t[t.length-1].value;let f,p;for(f=u;f<=h;f=+o.add(f,1,i))p=n[f],p>=0&&(t[p].major=!0);return t}function Yg(e,t,n){const i=[],o={},u=t.length;let h,f;for(h=0;h<u;++h)f=t[h],o[f]=h,i.push({value:f,major:!1});return u===0||!n?i:ek(e,i,o,n)}class jg extends zo{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const i=t.time||(t.time={}),o=this._adapter=new pw._date(t.adapters.date);o.init(n),Fa(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Vg(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,i=t.time.unit||"day";let{min:o,max:u,minDefined:h,maxDefined:f}=this.getUserBounds();function p(_){!h&&!isNaN(_.min)&&(o=Math.min(o,_.min)),!f&&!isNaN(_.max)&&(u=Math.max(u,_.max))}(!h||!f)&&(p(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&p(this.getMinMax(!1))),o=Ri(o)&&!isNaN(o)?o:+n.startOf(Date.now(),i),u=Ri(u)&&!isNaN(u)?u:+n.endOf(Date.now(),i)+1,this.min=Math.min(o,u-1),this.max=Math.max(o+1,u)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],i=t[t.length-1]),{min:n,max:i}}buildTicks(){const t=this.options,n=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const u=this.min,h=this.max,f=n2(o,u,h);return this._unit=n.unit||(i.autoSkip?Zg(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):QE(this,f.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:tk(this._unit),this.initOffsets(o),t.reverse&&f.reverse(),Yg(this,f,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,i=0,o,u;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,u=this.getDecimalForValue(t[t.length-1]),t.length===1?i=u:i=(u-this.getDecimalForValue(t[t.length-2]))/2);const h=t.length<3?.5:.25;n=Wi(n,0,h),i=Wi(i,0,h),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,n=this.min,i=this.max,o=this.options,u=o.time,h=u.unit||Zg(u.minUnit,n,i,this._getLabelCapacity(n)),f=Re(o.ticks.stepSize,1),p=h==="week"?u.isoWeekday:!1,_=Ll(p)||p===!0,v={};let x=n,S,C;if(_&&(x=+t.startOf(x,"isoWeek",p)),x=+t.startOf(x,_?"day":h),t.diff(i,n,h)>1e5*f)throw new Error(n+" and "+i+" are too far apart with stepSize of "+f+" "+h);const P=o.ticks.source==="data"&&this.getDataTimestamps();for(S=x,C=0;S<i;S=+t.add(S,f,h),C++)Wg(v,S,P);return(S===i||o.bounds==="ticks"||C===1)&&Wg(v,S,P),Object.keys(v).sort(Gg).map(N=>+N)}getLabelForValue(t){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(t,i.tooltipFormat):n.format(t,i.displayFormats.datetime)}format(t,n){const o=this.options.time.displayFormats,u=this._unit,h=n||o[u];return this._adapter.format(t,h)}_tickFormatFunction(t,n,i,o){const u=this.options,h=u.ticks.callback;if(h)return $e(h,[t,n,i],this);const f=u.time.displayFormats,p=this._unit,_=this._majorUnit,v=p&&f[p],x=_&&f[_],S=i[n],C=_&&x&&S&&S.major;return this._adapter.format(t,o||(C?x:v))}generateTickLabels(t){let n,i,o;for(n=0,i=t.length;n<i;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,i=this.ctx.measureText(t).width,o=Us(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(o),h=Math.sin(o),f=this._resolveTickFontOptions(0).size;return{w:i*u+f*h,h:i*h+f*u}}_getLabelCapacity(t){const n=this.options.time,i=n.displayFormats,o=i[n.unit]||i.millisecond,u=this._tickFormatFunction(t,0,Yg(this,[t],this._majorUnit),o),h=this._getLabelSize(u),f=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return f>0?f:1}getDataTimestamps(){let t=this._cache.data||[],n,i;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,i=o.length;n<i;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,i;if(t.length)return t;const o=this.getLabels();for(n=0,i=o.length;n<i;++n)t.push(Vg(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return $m(t.sort(Gg))}}function Hu(e,t,n){let i=0,o=e.length-1,u,h,f,p;n?(t>=e[i].pos&&t<=e[o].pos&&({lo:i,hi:o}=bh(e,"pos",t)),{pos:u,time:f}=e[i],{pos:h,time:p}=e[o]):(t>=e[i].time&&t<=e[o].time&&({lo:i,hi:o}=bh(e,"time",t)),{time:u,pos:f}=e[i],{time:h,pos:p}=e[o]);const _=h-u;return _?f+(p-f)*(t-u)/_:f}class AC extends jg{static id="timeseries";static defaults=jg.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Hu(n,this.min),this._tableRange=Hu(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:i}=this,o=[],u=[];let h,f,p,_,v;for(h=0,f=t.length;h<f;++h)_=t[h],_>=n&&_<=i&&o.push(_);if(o.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(h=0,f=o.length;h<f;++h)v=o[h+1],p=o[h-1],_=o[h],Math.round((v+p)/2)!==_&&u.push({time:_,pos:h/(f-1)});return u}_generate(){const t=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((o,u)=>o-u)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?t=this.normalize(n.concat(i)):t=n.length?n:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Hu(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,i=this.getDecimalForPixel(t)/n.factor-n.end;return Hu(this._table,i*this._tableRange+this._minPos,!0)}}const I_={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},nk={ariaLabel:{type:String},ariaDescribedby:{type:String}},ik={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...I_,...nk},rk=im[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function fo(e){return Mo(e)?ke(e):e}function sk(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return Mo(t)?new Proxy(e,{}):e}function ok(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function A_(e,t){e.labels=t}function L_(e,t,n){const i=[];e.datasets=t.map(o=>{const u=e.datasets.find(h=>h[n]===o[n]);return!u||!o.data||i.includes(u)?{...o}:(i.push(u),Object.assign(u,o),u)})}function ak(e,t){const n={labels:[],datasets:[]};return A_(n,e.labels),L_(n,e.datasets,t),n}const uk=$i({props:ik,setup(e,t){let{expose:n,slots:i}=t;const o=pn(null),u=wp(null);n({chart:u});const h=()=>{if(!o.value)return;const{type:_,data:v,options:x,plugins:S,datasetIdKey:C}=e,P=ak(v,C),N=sk(P,v);u.value=new tc(o.value,{type:_,data:N,options:{...x},plugins:S})},f=()=>{const _=ke(u.value);_&&(e.destroyDelay>0?setTimeout(()=>{_.destroy(),u.value=null},e.destroyDelay):(_.destroy(),u.value=null))},p=_=>{_.update(e.updateMode)};return Gl(h),Vl(f),Oi([()=>e.options,()=>e.data],(_,v)=>{let[x,S]=_,[C,P]=v;const N=ke(u.value);if(!N)return;let O=!1;if(x){const j=fo(x),U=fo(C);j&&j!==U&&(ok(N,j),O=!0)}if(S){const j=fo(S.labels),U=fo(P.labels),nt=fo(S.datasets),ct=fo(P.datasets);j!==U&&(A_(N.config.data,j),O=!0),nt&&nt!==ct&&(L_(N.config.data,nt,e.datasetIdKey),O=!0)}O&&Io(()=>{p(N)})},{deep:!0}),()=>rh("canvas",{role:"img","aria-label":e.ariaLabel,"aria-describedby":e.ariaDescribedby,ref:o},[rh("p",{},[i.default?i.default():""])])}});function lk(e,t){return tc.register(t),$i({props:I_,setup(n,i){let{expose:o}=i;const u=wp(null),h=f=>{u.value=f?.chart};return o({chart:u}),()=>rh(uk,rk({ref:h},{type:e,...n}))}})}const ck=lk("bar",gw),hk={class:"h-40 w-full mt-4 bg-white p-2 rounded-lg border border-slate-200 shadow-sm"},fk={class:"h-32"},dk=$i({__name:"IpsChart",setup(e){tc.register($E,JE,AE,FE,ZE,ME);const t=_s(),n=Bn(()=>{const o=t.filteredSchools,u={"High (>120)":0,"Sup (>105)":0,"Moy (90-105)":0,"Low (<90)":0};return o.forEach(h=>{const f=typeof h.IPS=="string"?parseFloat(h.IPS):h.IPS;f&&(f>120?u["High (>120)"]++:f>105?u["Sup (>105)"]++:f>90?u["Moy (90-105)"]++:u["Low (<90)"]++)}),{labels:[">120","105-120","90-105","<90"],datasets:[{label:"Nb d'coles",data:[u["High (>120)"],u["Sup (>105)"],u["Moy (90-105)"],u["Low (<90)"]],backgroundColor:["#10b981","#3b82f6","#f59e0b","#ef4444"],borderRadius:4}]}}),i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",padding:10,cornerRadius:4}},scales:{y:{beginAtZero:!0,grid:{display:!0,color:"#f1f5f9"},ticks:{stepSize:1}},x:{grid:{display:!1}}}};return(o,u)=>(le(),he("div",hk,[u[0]||(u[0]=rt("h3",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 text-center"},"Rpartition IPS",-1)),rt("div",fk,[an(ge(ck),{data:n.value,options:i},null,8,["data"])])]))}}),gk={class:"grid grid-cols-1 gap-3"},pk={class:"bg-white p-4 rounded-lg shadow-sm border border-slate-200"},mk={class:"flex items-baseline gap-2"},_k={class:"w-full bg-slate-100 h-1.5 rounded-full mt-2 overflow-hidden"},vk={class:"grid grid-cols-2 gap-3"},yk={class:"bg-slate-50 p-3 rounded border border-slate-200 text-center"},xk={class:"text-lg font-bold text-slate-700"},bk={class:"bg-slate-50 p-3 rounded border border-slate-200 text-center"},wk={class:"text-lg font-bold text-slate-700"},Ek=$i({__name:"StatsPanel",setup(e){const t=_s(),n=Bn(()=>t.selectedPas&&t.pasMetrics[t.selectedPas]?t.pasMetrics[t.selectedPas]:t.departmentMetrics),i=Bn(()=>{const o=parseFloat(n.value.ips);return isNaN(o)?"text-slate-400":o>=110?"text-green-600":o>=95?"text-blue-600":"text-red-500"});return(o,u)=>(le(),he("div",gk,[rt("div",pk,[u[1]||(u[1]=rt("h3",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1"},"IPS Moyen",-1)),rt("div",mk,[rt("span",{class:Xn(["text-3xl font-bold",i.value])},ue(n.value.ips),3),u[0]||(u[0]=rt("span",{class:"text-xs text-slate-400"},"Pondr",-1))]),rt("div",_k,[rt("div",{class:Xn(["h-full transition-all duration-500",i.value.replace("text","bg")]),style:js({width:Math.min((parseFloat(n.value.ips)||0)/150*100,100)+"%"})},null,6)])]),rt("div",vk,[rt("div",yk,[rt("div",xk,ue(n.value.effectif),1),u[2]||(u[2]=rt("div",{class:"text-[9px] text-slate-400 uppercase font-bold"},"lves",-1))]),rt("div",bk,[rt("div",wk,ue(n.value.repCount),1),u[3]||(u[3]=rt("div",{class:"text-[9px] text-slate-400 uppercase font-bold"},"tabl. EP",-1))])]),an(dk)]))}}),kk={key:0,class:"space-y-4"},Sk={class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-lg shadow-lg"},Ck={class:"text-lg font-bold mb-1"},Tk={class:"grid grid-cols-2 gap-3"},Ik={class:"bg-white p-3 rounded-lg border border-slate-200 text-center"},Ak={class:"text-2xl font-bold text-slate-700"},Lk={class:"bg-white p-3 rounded-lg border border-slate-200 text-center"},Dk={class:"text-2xl font-bold text-slate-700"},Nk={class:"bg-white p-3 rounded-lg border border-slate-200 text-center"},Pk={class:"bg-white p-3 rounded-lg border border-slate-200 text-center"},Ok={class:"text-2xl font-bold text-red-600"},Mk={class:"bg-slate-50 p-3 rounded-lg border border-slate-200"},Rk={class:"space-y-1 text-sm"},Fk={class:"flex justify-between"},Bk={class:"font-bold text-blue-600"},zk={class:"flex justify-between"},qk={class:"font-bold text-teal-600"},Uk={class:"flex justify-between"},Hk={class:"font-bold text-red-700"},Gk={class:"flex justify-between"},Vk={class:"font-bold text-red-500"},Zk={class:"bg-white p-3 rounded-lg border border-slate-200"},Wk={class:"text-xs font-bold text-slate-600 uppercase mb-2"},Yk={class:"max-h-64 overflow-y-auto space-y-1"},jk=["onClick"],$k={class:"font-semibold text-slate-700"},Xk={class:"text-slate-500 flex justify-between mt-0.5"},Kk={class:"font-mono"},Jk={key:0,class:"space-y-3"},Qk={class:"bg-white p-3 rounded-lg border border-slate-200"},tS={class:"space-y-2 text-xs"},eS={key:0,class:"flex justify-between items-start"},nS={class:"text-right"},iS={class:"font-bold text-slate-800"},rS={key:0,class:"text-[10px] text-slate-500"},sS={key:1,class:"flex justify-between"},oS={class:"font-bold text-slate-800"},aS={key:2,class:"flex justify-between"},uS={class:"font-bold text-slate-800"},lS={key:3,class:"flex justify-between"},cS={class:"font-bold text-slate-800"},hS={class:"bg-white p-3 rounded-lg border border-slate-200"},fS={class:"space-y-2 text-xs"},dS={key:0,class:"flex justify-between"},gS={class:"font-bold text-slate-800"},pS={key:1,class:"flex justify-between"},mS={class:"font-bold text-slate-800"},_S={key:2,class:"flex justify-between"},vS={class:"font-bold text-slate-800"},yS={key:3,class:"flex justify-between"},xS={class:"font-bold text-slate-800"},bS={key:0,class:"bg-slate-50 p-3 rounded-lg border border-slate-200"},wS={class:"space-y-1 text-xs"},ES={key:0,class:"text-slate-700"},kS={key:1},SS=["href"],CS={key:1,class:"bg-amber-50 border border-amber-200 p-3 rounded-lg"},TS=$i({__name:"PasDetailsPanel",setup(e){const t=_s(),n=Bn(()=>{if(!t.selectedPas||!t.pasMetrics[t.selectedPas])return null;const u=t.pasMetrics[t.selectedPas],h=t.schools.filter(f=>f["Nom du PAS"]===t.selectedPas).sort((f,p)=>f["Nom complet"].localeCompare(p["Nom complet"]));return{...u,schools:h}}),i=Bn(()=>{if(!n.value)return"text-slate-400";const u=parseFloat(n.value.ips);return isNaN(u)?"text-slate-400":u>=110?"text-green-600":u>=95?"text-blue-600":"text-red-500"}),o=Bn(()=>t.selectedPas&&t.rhData.get(t.selectedPas)||null);return(u,h)=>n.value?(le(),he("div",kk,[rt("div",Sk,[rt("h2",Ck,ue(n.value.name),1),h[0]||(h[0]=rt("p",{class:"text-sm opacity-90"},"Ple d'Appui  la Scolarit",-1))]),rt("div",Tk,[rt("div",Ik,[rt("div",Ak,ue(n.value.schoolCount),1),h[1]||(h[1]=rt("div",{class:"text-[10px] text-slate-500 uppercase font-bold"},"tablissements",-1))]),rt("div",Lk,[rt("div",Dk,ue(n.value.effectif),1),h[2]||(h[2]=rt("div",{class:"text-[10px] text-slate-500 uppercase font-bold"},"lves",-1))]),rt("div",Nk,[rt("div",{class:Xn(["text-2xl font-bold",i.value])},ue(n.value.ips),3),h[3]||(h[3]=rt("div",{class:"text-[10px] text-slate-500 uppercase font-bold"},"IPS Moyen",-1))]),rt("div",Pk,[rt("div",Ok,ue(n.value.repCount+n.value.repPlusCount),1),h[4]||(h[4]=rt("div",{class:"text-[10px] text-slate-500 uppercase font-bold"},"REP/REP+",-1))])]),rt("div",Mk,[h[9]||(h[9]=rt("h3",{class:"text-xs font-bold text-slate-600 uppercase mb-2"},"Rpartition",-1)),rt("div",Rk,[rt("div",Fk,[h[5]||(h[5]=rt("span",{class:"text-slate-600"},"Collges",-1)),rt("span",Bk,ue(n.value.collegeCount),1)]),rt("div",zk,[h[6]||(h[6]=rt("span",{class:"text-slate-600"},"coles primaires",-1)),rt("span",qk,ue(n.value.primaireCount),1)]),rt("div",Uk,[h[7]||(h[7]=rt("span",{class:"text-slate-600"},"REP+",-1)),rt("span",Hk,ue(n.value.repPlusCount),1)]),rt("div",Gk,[h[8]||(h[8]=rt("span",{class:"text-slate-600"},"REP",-1)),rt("span",Vk,ue(n.value.repCount),1)])])]),rt("div",Zk,[rt("h3",Wk,"tablissements ("+ue(n.value.schools.length)+")",1),rt("div",Yk,[(le(!0),he(mn,null,cs(n.value.schools,f=>(le(),he("div",{key:f.UAI,class:Xn(["text-xs p-2 hover:bg-slate-50 rounded cursor-pointer transition-colors",f.Degr==="2nd degr"?"border-l-2 border-l-blue-500":"border-l-2 border-l-teal-400"]),onClick:p=>ge(t).selectSchool(f.UAI)},[rt("div",$k,ue(f["Nom complet"]),1),rt("div",Xk,[rt("span",null,ue(f.Commune),1),rt("span",Kk,ue(f["Effectifs (Archipel)"])+" l.",1)])],10,jk))),128))])]),o.value?(le(),he("div",Jk,[rt("div",Qk,[h[14]||(h[14]=rt("h3",{class:"text-xs font-bold text-blue-600 uppercase mb-2 flex items-center gap-1"},[rt("span",{class:"material-icons text-sm"},"diversity_1"),Vi(" quipe de Proximit ")],-1)),rt("div",tS,[o.value.coord?(le(),he("div",eS,[h[10]||(h[10]=rt("span",{class:"text-slate-600"},"Coordonnateur",-1)),rt("div",nS,[rt("div",iS,ue(o.value.coord),1),o.value.phone?(le(),he("div",rS,ue(o.value.phone),1)):Nn("",!0)])])):Nn("",!0),o.value.educ?(le(),he("div",sS,[h[11]||(h[11]=rt("span",{class:"text-slate-600"},"ducateur sp",-1)),rt("span",oS,ue(o.value.educ),1)])):Nn("",!0),o.value.aesh?(le(),he("div",aS,[h[12]||(h[12]=rt("span",{class:"text-slate-600"},"AESH rfrent",-1)),rt("span",uS,ue(o.value.aesh),1)])):Nn("",!0),o.value.dacs?(le(),he("div",lS,[h[13]||(h[13]=rt("span",{class:"text-slate-600"},"DACS",-1)),rt("span",cS,ue(o.value.dacs),1)])):Nn("",!0)])]),rt("div",hS,[h[19]||(h[19]=rt("h3",{class:"text-xs font-bold text-orange-600 uppercase mb-2 flex items-center gap-1"},[rt("span",{class:"material-icons text-sm"},"admin_panel_settings"),Vi(" Pilotage & Partenariat ")],-1)),rt("div",fS,[o.value.pilot2d?(le(),he("div",dS,[h[15]||(h[15]=rt("span",{class:"text-slate-600"},"Pilote 2D",-1)),rt("span",gS,ue(o.value.pilot2d),1)])):Nn("",!0),o.value.pilot1d?(le(),he("div",pS,[h[16]||(h[16]=rt("span",{class:"text-slate-600"},"Pilote 1D",-1)),rt("span",mS,ue(o.value.pilot1d),1)])):Nn("",!0),o.value.pilotEsms&&o.value.pilotEsms!=="A dfinir"?(le(),he("div",_S,[h[17]||(h[17]=rt("span",{class:"text-slate-600"},"Pilote ESMS",-1)),rt("span",vS,ue(o.value.pilotEsms),1)])):Nn("",!0),o.value.partner&&o.value.partner!=="A dfinir"?(le(),he("div",yS,[h[18]||(h[18]=rt("span",{class:"text-slate-600"},"Porteur projet",-1)),rt("span",xS,ue(o.value.partner),1)])):Nn("",!0)])]),o.value.location||o.value.mail?(le(),he("div",bS,[h[20]||(h[20]=rt("h3",{class:"text-xs font-bold text-slate-600 uppercase mb-2 flex items-center gap-1"},[rt("span",{class:"material-icons text-sm"},"place"),Vi(" Contact ")],-1)),rt("div",wS,[o.value.location?(le(),he("div",ES,ue(o.value.location),1)):Nn("",!0),o.value.mail?(le(),he("div",kS,[rt("a",{href:"mailto:"+o.value.mail,class:"text-blue-600 hover:underline"},ue(o.value.mail),9,SS)])):Nn("",!0)])])):Nn("",!0)])):(le(),he("div",CS,[...h[21]||(h[21]=[rt("h3",{class:"text-xs font-bold text-amber-800 uppercase mb-1"}," quipes",-1),rt("p",{class:"text-xs text-amber-700"}," Aucune donne RH disponible pour ce PAS. ",-1)])]))])):Nn("",!0)}}),IS={class:"h-full flex overflow-hidden bg-slate-50"},AS={class:"w-80 bg-white border-r border-slate-200 p-6 flex flex-col shadow-sm"},LS={class:"bg-blue-50 p-4 rounded-xl mb-8 border border-blue-100"},DS={class:"flex items-center gap-3"},NS={class:"flex-1 space-y-8 overflow-y-auto pr-2"},PS={class:"flex justify-between items-center"},OS={class:"text-[11px] font-bold text-slate-500 uppercase tracking-widest"},MS={class:"bg-slate-100 px-2 py-0.5 rounded text-xs font-mono font-bold text-slate-700"},RS=["onUpdate:modelValue"],FS={class:"flex-1 p-8 overflow-y-auto"},BS={class:"max-w-5xl mx-auto"},zS={class:"flex justify-between items-end mb-8"},qS={class:"text-right"},US={class:"text-2xl font-bold text-slate-800"},HS={class:"overflow-hidden rounded-2xl border border-slate-200 shadow-xl bg-white"},GS={class:"w-full border-collapse text-sm"},VS={class:"p-4 text-center"},ZS={class:"p-4"},WS={class:"font-bold text-slate-800 group-hover:text-blue-600 transition-colors"},YS={class:"text-[10px] text-slate-400"},jS={class:"p-4 text-center font-mono font-bold text-blue-700 bg-blue-50/20"},$S={class:"p-4 text-center"},XS={class:"font-medium"},KS={class:"w-12 mx-auto bg-slate-100 h-1 rounded-full overflow-hidden mt-1"},JS={class:"p-4 text-center font-medium"},QS={class:"p-4 text-center"},tC={class:"font-medium"},eC={class:"text-[8px] text-slate-400 uppercase mt-0.5"},nC={class:"p-4 text-center font-medium text-purple-600"},iC=$i({__name:"PilotageView",setup(e){const t=_s(),n=Bn(()=>{const o=[],u=t.pasMetrics,h=Object.keys(u);if(h.length===0)return[];let f=0,p=0,_=200,v=0,x=0,S=0;return h.forEach(C=>{const P=u[C];P.effectif>f&&(f=P.effectif);const N=parseFloat(P.dist);N>p&&(p=N);const O=parseFloat(P.ips)||100;O>v&&(v=O),O<_&&O>0&&(_=O);const j=(P.repCount||0)+(P.repPlusCount||0);j>x&&(x=j),P.ulisCount>S&&(S=P.ulisCount)}),h.forEach(C=>{const P=u[C],N=parseFloat(P.ips)||100,O=parseFloat(P.dist),j=(P.repCount||0)+(P.repPlusCount||0),U=(v-N)/(v-_||1)*10,nt=x?j/x*10:0,ct=S?P.ulisCount/S*10:0,tt=p?O/p*10:0,pt=f?P.effectif/f*10:0,st=U*t.simulConfig.weights.ips+nt*t.simulConfig.weights.rep+ct*t.simulConfig.weights.inclusion+tt*t.simulConfig.weights.dist+pt*t.simulConfig.weights.eff;o.push({name:C,metrics:P,score:st,normalized:{ips:U,rep:nt,inc:ct,dist:tt,eff:pt}})}),o.sort((C,P)=>P.score-C.score)}),i=t.simulConfig.weights;return(o,u)=>(le(),he("div",IS,[rt("div",AS,[u[3]||(u[3]=rt("h2",{class:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2"},[rt("span",{class:"material-icons text-blue-600"},"tune"),Vi(" Simulation ")],-1)),rt("div",LS,[u[2]||(u[2]=rt("label",{class:"block text-[10px] font-bold text-blue-800 uppercase tracking-wider mb-2"},"Cible PAS Renforcs",-1)),rt("div",DS,[ol(rt("input",{type:"number","onUpdate:modelValue":u[0]||(u[0]=h=>ge(t).simulConfig.targetCount=h),class:"w-20 bg-white p-2 rounded-lg border border-blue-200 font-bold text-center text-blue-900 focus:ring-2 focus:ring-blue-400 outline-none"},null,512),[[hl,ge(t).simulConfig.targetCount,void 0,{number:!0}]]),u[1]||(u[1]=rt("span",{class:"text-xs text-blue-600 font-medium"},"secteurs prioritaires",-1))])]),rt("div",NS,[(le(!0),he(mn,null,cs(ge(i),(h,f)=>(le(),he("div",{key:f,class:"space-y-3"},[rt("div",PS,[rt("span",OS,ue(f),1),rt("span",MS,ue(h),1)]),ol(rt("input",{type:"range","onUpdate:modelValue":p=>ge(t).simulConfig.weights[f]=p,min:"0",max:"10",step:"0.5",class:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600"},null,8,RS),[[hl,ge(t).simulConfig.weights[f],void 0,{number:!0}]])]))),128))]),u[4]||(u[4]=rt("div",{class:"mt-8 pt-4 border-t border-slate-100 text-[10px] text-slate-400 leading-relaxed italic"}," Le score est calcul en normalisant chaque indicateur sur une chelle de 0  10, puis en appliquant les coefficients ci-dessus. ",-1))]),rt("div",FS,[rt("div",BS,[rt("div",zS,[u[6]||(u[6]=rt("div",null,[rt("h1",{class:"text-2xl font-black text-slate-900 leading-tight"},"Classement des PAS"),rt("p",{class:"text-slate-500"},"Bas sur les indicateurs de prcarit, d'loignement et d'inclusion.")],-1)),rt("div",qS,[u[5]||(u[5]=rt("span",{class:"text-[10px] font-bold text-slate-400 uppercase block mb-1"},"Total secteurs",-1)),rt("span",US,ue(n.value.length),1)])]),rt("div",HS,[rt("table",GS,[u[7]||(u[7]=rt("thead",null,[rt("tr",{class:"bg-slate-800 text-white text-left uppercase text-[10px] tracking-wider font-bold"},[rt("th",{class:"p-4 w-16 text-center"},"Rang"),rt("th",{class:"p-4"},"Secteur PAS"),rt("th",{class:"p-4 text-center"},"Score"),rt("th",{class:"p-4 text-center"},"IPS"),rt("th",{class:"p-4 text-center"},"Dist."),rt("th",{class:"p-4 text-center"},"EP (%)"),rt("th",{class:"p-4 text-center"},"Inc.")])],-1)),rt("tbody",null,[(le(!0),he(mn,null,cs(n.value,(h,f)=>(le(),he("tr",{key:h.name,class:Xn(["border-b border-slate-100 transition-colors hover:bg-slate-50 group",{"bg-blue-50/50":f<ge(t).simulConfig.targetCount}])},[rt("td",VS,[rt("span",{class:Xn(["inline-flex items-center justify-center w-8 h-8 rounded-full font-black",f<ge(t).simulConfig.targetCount?"bg-blue-600 text-white shadow-md":"bg-slate-100 text-slate-400"])},ue(f+1),3)]),rt("td",ZS,[rt("div",WS,ue(h.name),1),rt("div",YS,ue(h.metrics.dominantCirc||"Non dfini"),1)]),rt("td",jS,ue(h.score.toFixed(1)),1),rt("td",$S,[rt("div",XS,ue(h.metrics.ips),1),rt("div",KS,[rt("div",{class:"bg-green-500 h-full",style:js({width:h.normalized.ips*10+"%"})},null,4)])]),rt("td",JS,ue(h.metrics.dist),1),rt("td",QS,[rt("div",tC,ue((h.metrics.repRatio*100).toFixed(0))+"%",1),rt("div",eC,ue(h.metrics.repCount+h.metrics.repPlusCount)+" tab.",1)]),rt("td",nC,ue(h.metrics.ulisCount),1)],2))),128))])])])])])]))}}),rC=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},sC=rC(iC,[["__scopeId","data-v-15b78a82"]]),oC={class:"flex gap-1 bg-slate-100 p-1 rounded-lg"},aC={key:0,class:"animate-pulse bg-amber-100 text-amber-700 px-2 py-1 rounded text-xs font-bold border border-amber-300"},uC={class:"space-y-6"},lC={class:"relative mb-4"},cC=["value"],hC={class:"space-y-3"},fC=["value"],dC=["value"],gC=["value"],pC=["value"],mC={key:0,class:"w-full h-full flex flex-col"},_C={class:"h-1/2 border-b border-slate-300 relative"},vC={class:"absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded shadow text-xs font-bold z-[400]"},yC={class:"h-1/2 bg-slate-100 overflow-hidden"},xC={key:1,class:"w-full h-full bg-white"},bC={key:0},wC={key:1},EC={class:"mt-4 p-4 bg-slate-50 rounded border border-slate-200"},kC={class:"text-xs space-y-1"},SC={key:2,class:"text-slate-500 italic text-center mt-10"},CC=$i({__name:"App",setup(e){const t=_s(),n=()=>{const u=new Date().toISOString().slice(0,10);N0(t.schools,`Maillage_PAS_${u}.csv`),t.hasUnsavedChanges=!1},i=async()=>{if(typeof t.saveData!="function"){console.error("Store actions check:",Object.keys(t).filter(h=>typeof t[h]=="function")),alert(" Erreur Critique : La fonction d'enregistrement manque dans le store. Veuillez rafrachir la page (Ctrl+F5).");return}const u=await t.saveData();alert(u?" Modifications enregistres avec succs !":" Erreur lors de l'enregistrement.")},o=()=>{if(typeof t.resetData!="function"){alert(" Fonction de rinitialisation manquante. Veuillez rafrachir la page.");return}confirm(` Voulez-vous vraiment rinitialiser toutes les donnes ? 

Cela supprimera vos modifications et rechargera le fichier CSV d'origine.`)&&t.resetData()};return Gl(async()=>{try{if(!await t.loadFromStorage()){const p=await fetch("/pas-cockpit/data.csv");if(p.ok){const _=await p.text(),v=await A0(_);t.setSchools(v)}}const h=await fetch("/pas-cockpit/secteurs.kml");if(h.ok){const p=await h.text(),_=L0(p);t.setSectorsGeoJson(_)}const f=await D0();t.setRhData(f)}catch(u){console.error("Failed to load data",u)}}),(u,h)=>(le(),Va(G0,null,Jv({"header-center":po(()=>[rt("div",oC,[rt("button",{onClick:h[0]||(h[0]=f=>ge(t).setView("MAP")),class:Xn(["px-3 py-1 text-xs font-bold rounded transition-all flex items-center gap-1.5",ge(t).currentView==="MAP"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"])},[...h[5]||(h[5]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[rt("path",{d:"M3 6h18"}),rt("path",{d:"M3 12h18"}),rt("path",{d:"M3 18h18"})],-1),Vi(" Carte ",-1)])],2),rt("button",{onClick:h[1]||(h[1]=f=>ge(t).setView("PILOTAGE")),class:Xn(["px-3 py-1 text-xs font-bold rounded transition-all flex items-center gap-1.5",ge(t).currentView==="PILOTAGE"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"])},[...h[6]||(h[6]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[rt("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),rt("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})],-1),Vi(" Pilotage ",-1)])],2)])]),"header-actions":po(()=>[ge(t).hasUnsavedChanges?(le(),he("div",aC,"  Modifications non enregistres ")):Nn("",!0),rt("button",{onClick:i,class:"bg-green-600 text-white px-3 py-1.5 rounded text-sm font-bold shadow hover:bg-green-700 transition-colors flex items-center gap-2",title:"Enregistrer les modifications dans la base locale"},[...h[7]||(h[7]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[rt("path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),rt("path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}),rt("path",{d:"M7 3v4a1 1 0 0 0 1 1h7"})],-1),rt("span",null,"Enregistrer",-1)])]),rt("button",{onClick:n,class:"bg-blue-600 text-white px-3 py-1.5 rounded text-sm font-bold shadow hover:bg-blue-700 transition-colors flex items-center gap-2",title:"Exporter en CSV"},[...h[8]||(h[8]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[rt("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),rt("polyline",{points:"7 10 12 15 17 10"}),rt("line",{x1:"12",x2:"12",y1:"15",y2:"3"})],-1),rt("span",null,"Export",-1)])]),h[10]||(h[10]=rt("div",{class:"h-6 w-px bg-slate-200 mx-1"},null,-1)),rt("button",{onClick:o,class:"text-slate-400 hover:text-red-500 transition-colors p-1.5",title:"Rinitialiser l'application (supprimer les modifications)"},[...h[9]||(h[9]=[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[rt("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),rt("path",{d:"M3 3v5h5"})],-1)])])]),main:po(()=>[ge(t).currentView==="MAP"?(le(),he("div",mC,[rt("div",_C,[an(D1),rt("div",vC,ue(ge(t).filteredSchools.length)+" coles ",1)]),rt("div",yC,[an(pb)])])):(le(),he("div",xC,[an(sC)]))]),_:2},[ge(t).currentView==="MAP"?{name:"sidebar",fn:po(()=>[rt("div",uC,[rt("div",null,[rt("div",lC,[h[11]||(h[11]=rt("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2 text-slate-400"},[rt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[rt("circle",{cx:"11",cy:"11",r:"8"}),rt("path",{d:"m21 21-4.3-4.3"})])],-1)),rt("input",{type:"text",value:ge(t).searchQuery,onInput:h[2]||(h[2]=f=>ge(t).setSearchQuery(f.target.value)),placeholder:"Recherche (Nom, Ville, UAI)...",class:"w-full pl-8 pr-2 py-2 text-sm border border-slate-300 rounded shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,40,cC)]),h[16]||(h[16]=rt("h3",{class:"font-bold text-xs uppercase text-slate-400 mb-2"},"Filtres Gographiques",-1)),rt("div",hC,[rt("div",null,[h[13]||(h[13]=rt("label",{class:"block text-xs font-bold text-slate-700 mb-1"},"Bassin",-1)),rt("select",{value:ge(t).filters.bassin,onChange:h[3]||(h[3]=f=>ge(t).setFilter("bassin",f.target.value)),class:"w-full text-sm border-slate-300 rounded shadow-sm focus:border-blue-500 focus:ring-blue-500"},[h[12]||(h[12]=rt("option",{value:"TOUS"},"Tous les bassins",-1)),(le(!0),he(mn,null,cs(ge(t).availableBassins,f=>(le(),he("option",{key:f,value:f},ue(f),9,dC))),128))],40,fC)]),rt("div",null,[h[15]||(h[15]=rt("label",{class:"block text-xs font-bold text-slate-700 mb-1"},"Circonscription",-1)),rt("select",{value:ge(t).filters.circ,onChange:h[4]||(h[4]=f=>ge(t).setFilter("circ",f.target.value)),class:"w-full text-sm border-slate-300 rounded shadow-sm focus:border-blue-500 focus:ring-blue-500"},[h[14]||(h[14]=rt("option",{value:"TOUTES"},"Toutes les circonscriptions",-1)),(le(!0),he(mn,null,cs(ge(t).availableCircs,f=>(le(),he("option",{key:f,value:f},ue(f),9,pC))),128))],40,gC)])])]),rt("div",null,[h[17]||(h[17]=rt("h3",{class:"font-bold text-xs uppercase text-slate-400 mb-2"},"Statistiques",-1)),an(Ek)])])]),key:"0"}:void 0,ge(t).currentView==="MAP"?{name:"right-panel",fn:po(()=>[ge(t).selectedPas&&!ge(t).selectedSchool?(le(),he("div",bC,[an(TS)])):ge(t).selectedSchool?(le(),he("div",wC,[an(Hm,{school:ge(t).selectedSchool},null,8,["school"]),rt("div",EC,[h[21]||(h[21]=rt("h4",{class:"font-bold text-sm mb-2"},"Informations",-1)),rt("div",kC,[rt("p",null,[h[18]||(h[18]=rt("strong",null,"UAI:",-1)),Vi(" "+ue(ge(t).selectedSchool.UAI),1)]),rt("p",null,[h[19]||(h[19]=rt("strong",null,"Commune:",-1)),Vi(" "+ue(ge(t).selectedSchool.Commune),1)]),rt("p",null,[h[20]||(h[20]=rt("strong",null,"Circonscription:",-1)),Vi(" "+ue(ge(t).selectedSchool.Circonscription),1)])])])])):(le(),he("div",SC," Slectionnez une cole ou un PAS pour voir les dtails. "))]),key:"1"}:void 0]),1024))}}),D_=u0(CC);D_.use(h0());D_.mount("#app");
